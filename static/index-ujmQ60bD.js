var Qy=Object.defineProperty,em=Object.defineProperties;var tm=Object.getOwnPropertyDescriptors;var Tf=Object.getOwnPropertySymbols;var nm=Object.prototype.hasOwnProperty,rm=Object.prototype.propertyIsEnumerable;var Mf=(n,e,t)=>e in n?Qy(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Nf=(n,e)=>{for(var t in e||(e={}))nm.call(e,t)&&Mf(n,t,e[t]);if(Tf)for(var t of Tf(e))rm.call(e,t)&&Mf(n,t,e[t]);return n},Pf=(n,e)=>em(n,tm(e));var Rf=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{s(t.next(l))}catch(u){i(u)}},a=l=>{try{s(t.throw(l))}catch(u){i(u)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,a);s((t=t.apply(n,e)).next())});import{a1 as pr,a2 as Hn,a3 as We,a4 as Df,a5 as An,a6 as oa,a7 as tr,a8 as ui,a9 as yn,aa as $n,ab as dt,ac as im,ad as _c,ae as Xn,af as om,ag as aa,ah as _n,ai as sa,aj as xp,ak as kr,al as la,am as on,an as Ep,ao as vr,ap as ua,aq as Ir,ar as ci,as as Qs,at as Ye,au as ca,av as Yi,aw as gt,ax as hr,ay as tn,az as fi,aA as fa,aB as cn,aC as wt,aD as Fe,aE as di,aF as am,aG as Vi,aH as wp,aI as nr,aJ as bc,aK as ns,aL as Mt,aM as sm,aN as lm,aO as da,aP as Ap,aQ as hi,aR as gr,aS as Sp,aT as bn,aU as um,aV as Ki,aW as cm,aX as Tr,aY as el,aZ as Cp,a_ as tl,a$ as nl,b0 as Di,b1 as xc,b2 as Ec,b3 as Op,b4 as Tp,b5 as fm,b6 as Mp,b7 as Np,b8 as dm,b9 as Pp,ba as hm,bb as pm,bc as vm,bd as rs,be as wc,bf as Rp,bg as gm,bh as ym,bi as Dp,bj as Lp,bk as Ac,bl as kp,bm as mm,bn as _m,bo as bm,bp as xm,bq as Bl,br as Em,bs as wm,bt as Am,bu as Sm,bv as Cm,bw as Sc,bx as Om,by as Ip,bz as Tm,bA as Mm,bB as je,bC as is,bD as Nm,bE as Pm,bF as ti,bG as Rm,bH as oi,bI as Dm,bJ as Lm,bK as Li,bL as ei,bM as Bp,bN as km,bO as Im,Z as rl,d as Bm,j as Lf,x as jm,l as Fm,o as Hm,c as Wm,R as $m,u as po}from"./index-CLoal8Ki.js";import{_ as Xm}from"./_plugin-vue_export-helper-DlAUqK2U.js";var zm=NaN;function kf(n){return typeof n=="number"?n:pr(n)?zm:+n}function il(n,e){return function(t,r){var i;if(t===void 0&&r===void 0)return e;if(t!==void 0&&(i=t),r!==void 0){if(i===void 0)return r;typeof t=="string"||typeof r=="string"?(t=Hn(t),r=Hn(r)):(t=kf(t),r=kf(r)),i=n(t,r)}return i}}var Um=il(function(n,e){return n+e},0),Gm="Expected a function";function Ym(n,e){if(typeof e!="function")throw new TypeError(Gm);return n=We(n),function(){if(--n<1)return e.apply(this,arguments)}}var os=Df&&new Df,jp=os?function(n,e){return os.set(n,e),n}:An;function Go(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=oa(n.prototype),r=n.apply(t,e);return tr(r)?r:t}}var Vm=1;function Km(n,e,t){var r=e&Vm,i=Go(n);function o(){var a=this&&this!==ui&&this instanceof o?i:n;return a.apply(r?t:this,arguments)}return o}var qm=Math.max;function Fp(n,e,t,r){for(var i=-1,o=n.length,a=t.length,s=-1,l=e.length,u=qm(o-a,0),c=Array(l+u),f=!r;++s<l;)c[s]=e[s];for(;++i<a;)(f||i<o)&&(c[t[i]]=n[i]);for(;u--;)c[s++]=n[i++];return c}var Zm=Math.max;function Hp(n,e,t,r){for(var i=-1,o=n.length,a=-1,s=t.length,l=-1,u=e.length,c=Zm(o-s,0),f=Array(c+u),d=!r;++i<c;)f[i]=n[i];for(var h=i;++l<u;)f[h+l]=e[l];for(;++a<s;)(d||i<o)&&(f[h+t[a]]=n[i++]);return f}function Jm(n,e){for(var t=n.length,r=0;t--;)n[t]===e&&++r;return r}function ol(){}var Qm=4294967295;function qe(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Qm,this.__views__=[]}qe.prototype=oa(ol.prototype);qe.prototype.constructor=qe;function Pi(){}var Cc=os?function(n){return os.get(n)}:Pi,Ri={},e_=Object.prototype,t_=e_.hasOwnProperty;function Ya(n){for(var e=n.name+"",t=Ri[e],r=t_.call(Ri,e)?t.length:0;r--;){var i=t[r],o=i.func;if(o==null||o==n)return i.name}return e}function xn(n,e){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}xn.prototype=oa(ol.prototype);xn.prototype.constructor=xn;function Wp(n){if(n instanceof qe)return n.clone();var e=new xn(n.__wrapped__,n.__chain__);return e.__actions__=yn(n.__actions__),e.__index__=n.__index__,e.__values__=n.__values__,e}var n_=Object.prototype,r_=n_.hasOwnProperty;function m(n){if($n(n)&&!dt(n)&&!(n instanceof qe)){if(n instanceof xn)return n;if(r_.call(n,"__wrapped__"))return Wp(n)}return new xn(n)}m.prototype=ol.prototype;m.prototype.constructor=m;function yu(n){var e=Ya(n),t=m[e];if(typeof t!="function"||!(e in qe.prototype))return!1;if(n===t)return!0;var r=Cc(t);return!!r&&n===r[0]}var $p=im(jp),i_=/\{\n\/\* \[wrapped with (.+)\] \*/,o_=/,? & /;function a_(n){var e=n.match(i_);return e?e[1].split(o_):[]}var s_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function l_(n,e){var t=e.length;if(!t)return n;var r=t-1;return e[r]=(t>1?"& ":"")+e[r],e=e.join(t>2?", ":" "),n.replace(s_,`{
/* [wrapped with `+e+`] */
`)}function Xp(n){return n!==n}function u_(n,e,t){for(var r=t-1,i=n.length;++r<i;)if(n[r]===e)return r;return-1}function qi(n,e,t){return e===e?u_(n,e,t):_c(n,Xp,t)}function al(n,e){var t=n==null?0:n.length;return!!t&&qi(n,e,0)>-1}var c_=1,f_=2,d_=8,h_=16,p_=32,v_=64,g_=128,y_=256,m_=512,__=[["ary",g_],["bind",c_],["bindKey",f_],["curry",d_],["curryRight",h_],["flip",m_],["partial",p_],["partialRight",v_],["rearg",y_]];function b_(n,e){return Xn(__,function(t){var r="_."+t[0];e&t[1]&&!al(n,r)&&n.push(r)}),n.sort()}function zp(n,e,t){var r=e+"";return om(n,l_(r,b_(a_(r),t)))}var x_=1,E_=2,w_=4,A_=8,If=32,Bf=64;function Up(n,e,t,r,i,o,a,s,l,u){var c=e&A_,f=c?a:void 0,d=c?void 0:a,h=c?o:void 0,v=c?void 0:o;e|=c?If:Bf,e&=~(c?Bf:If),e&w_||(e&=~(x_|E_));var p=[n,e,i,h,f,v,d,s,l,u],g=t.apply(void 0,p);return yu(n)&&$p(g,p),g.placeholder=r,zp(g,n,e)}function Zi(n){var e=n;return e.placeholder}var S_=Math.min;function C_(n,e){for(var t=n.length,r=S_(e.length,t),i=yn(n);r--;){var o=e[r];n[r]=aa(o,t)?i[o]:void 0}return n}var jf="__lodash_placeholder__";function Pr(n,e){for(var t=-1,r=n.length,i=0,o=[];++t<r;){var a=n[t];(a===e||a===jf)&&(n[t]=jf,o[i++]=t)}return o}var O_=1,T_=2,M_=8,N_=16,P_=128,R_=512;function sl(n,e,t,r,i,o,a,s,l,u){var c=e&P_,f=e&O_,d=e&T_,h=e&(M_|N_),v=e&R_,p=d?void 0:Go(n);function g(){for(var y=arguments.length,b=Array(y),C=y;C--;)b[C]=arguments[C];if(h)var D=Zi(g),B=Jm(b,D);if(r&&(b=Fp(b,r,i,h)),o&&(b=Hp(b,o,a,h)),y-=B,h&&y<u){var R=Pr(b,D);return Up(n,e,sl,g.placeholder,t,b,R,s,l,u-y)}var A=f?t:this,O=d?A[n]:n;return y=b.length,s?b=C_(b,s):v&&y>1&&b.reverse(),c&&l<y&&(b.length=l),this&&this!==ui&&this instanceof g&&(O=p||Go(O)),O.apply(A,b)}return g}function D_(n,e,t){var r=Go(n);function i(){for(var o=arguments.length,a=Array(o),s=o,l=Zi(i);s--;)a[s]=arguments[s];var u=o<3&&a[0]!==l&&a[o-1]!==l?[]:Pr(a,l);if(o-=u.length,o<t)return Up(n,e,sl,i.placeholder,void 0,a,u,void 0,void 0,t-o);var c=this&&this!==ui&&this instanceof i?r:n;return _n(c,this,a)}return i}var L_=1;function k_(n,e,t,r){var i=e&L_,o=Go(n);function a(){for(var s=-1,l=arguments.length,u=-1,c=r.length,f=Array(c+l),d=this&&this!==ui&&this instanceof a?o:n;++u<c;)f[u]=r[u];for(;l--;)f[u++]=arguments[++s];return _n(d,i?t:this,f)}return a}var Ff="__lodash_placeholder__",jl=1,I_=2,B_=4,Hf=8,vo=128,Wf=256,j_=Math.min;function F_(n,e){var t=n[1],r=e[1],i=t|r,o=i<(jl|I_|vo),a=r==vo&&t==Hf||r==vo&&t==Wf&&n[7].length<=e[8]||r==(vo|Wf)&&e[7].length<=e[8]&&t==Hf;if(!(o||a))return n;r&jl&&(n[2]=e[2],i|=t&jl?0:B_);var s=e[3];if(s){var l=n[3];n[3]=l?Fp(l,s,e[4]):s,n[4]=l?Pr(n[3],Ff):e[4]}return s=e[5],s&&(l=n[5],n[5]=l?Hp(l,s,e[6]):s,n[6]=l?Pr(n[5],Ff):e[6]),s=e[7],s&&(n[7]=s),r&vo&&(n[8]=n[8]==null?e[8]:j_(n[8],e[8])),n[9]==null&&(n[9]=e[9]),n[0]=e[0],n[1]=i,n}var H_="Expected a function",$f=1,W_=2,Fl=8,Hl=16,Wl=32,Xf=64,zf=Math.max;function yr(n,e,t,r,i,o,a,s){var l=e&W_;if(!l&&typeof n!="function")throw new TypeError(H_);var u=r?r.length:0;if(u||(e&=~(Wl|Xf),r=i=void 0),a=a===void 0?a:zf(We(a),0),s=s===void 0?s:We(s),u-=i?i.length:0,e&Xf){var c=r,f=i;r=i=void 0}var d=l?void 0:Cc(n),h=[n,e,t,r,i,c,f,o,a,s];if(d&&F_(h,d),n=h[0],e=h[1],t=h[2],r=h[3],i=h[4],s=h[9]=h[9]===void 0?l?0:n.length:zf(h[9]-u,0),!s&&e&(Fl|Hl)&&(e&=~(Fl|Hl)),!e||e==$f)var v=Km(n,e,t);else e==Fl||e==Hl?v=D_(n,e,s):(e==Wl||e==($f|Wl))&&!i.length?v=k_(n,e,t,r):v=sl.apply(void 0,h);var p=d?jp:$p;return zp(p(v,h),n,e)}var $_=128;function Gp(n,e,t){return e=t?void 0:e,e=n&&e==null?n.length:e,yr(n,$_,void 0,void 0,void 0,void 0,e)}var X_=Object.prototype,z_=X_.hasOwnProperty,lt=sa(function(n,e){if(xp(e)||kr(e)){la(e,on(e),n);return}for(var t in e)z_.call(e,t)&&Ep(n,t,e[t])}),Uf=sa(function(n,e){la(e,vr(e),n)}),as=sa(function(n,e,t,r){la(e,vr(e),n,r)}),U_=sa(function(n,e,t,r){la(e,on(e),n,r)});function Oc(n,e){for(var t=-1,r=e.length,i=Array(r),o=n==null;++t<r;)i[t]=o?void 0:ua(n,e[t]);return i}var G_=Ir(Oc),Y_="[object DOMException]",V_="[object Error]";function Tc(n){if(!$n(n))return!1;var e=ci(n);return e==V_||e==Y_||typeof n.message=="string"&&typeof n.name=="string"&&!Qs(n)}var Yp=Ye(function(n,e){try{return _n(n,void 0,e)}catch(t){return Tc(t)?t:new Error(t)}}),K_="Expected a function";function Vp(n,e){var t;if(typeof e!="function")throw new TypeError(K_);return n=We(n),function(){return--n>0&&(t=e.apply(this,arguments)),n<=1&&(e=void 0),t}}var q_=1,Z_=32,ll=Ye(function(n,e,t){var r=q_;if(t.length){var i=Pr(t,Zi(ll));r|=Z_}return yr(n,r,e,t,i)});ll.placeholder={};var J_=Ir(function(n,e){return Xn(e,function(t){t=ca(t),Yi(n,t,ll(n[t],n))}),n}),Q_=1,e0=2,t0=32,Mc=Ye(function(n,e,t){var r=Q_|e0;if(t.length){var i=Pr(t,Zi(Mc));r|=t0}return yr(e,r,n,t,i)});Mc.placeholder={};function En(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=n[r+e];return o}function Br(n,e,t){var r=n.length;return t=t===void 0?r:t,!e&&t>=r?n:En(n,e,t)}var n0="\\ud800-\\udfff",r0="\\u0300-\\u036f",i0="\\ufe20-\\ufe2f",o0="\\u20d0-\\u20ff",a0=r0+i0+o0,s0="\\ufe0e\\ufe0f",l0="\\u200d",u0=RegExp("["+l0+n0+a0+s0+"]");function Ji(n){return u0.test(n)}function c0(n){return n.split("")}var Kp="\\ud800-\\udfff",f0="\\u0300-\\u036f",d0="\\ufe20-\\ufe2f",h0="\\u20d0-\\u20ff",p0=f0+d0+h0,v0="\\ufe0e\\ufe0f",g0="["+Kp+"]",mu="["+p0+"]",_u="\\ud83c[\\udffb-\\udfff]",y0="(?:"+mu+"|"+_u+")",qp="[^"+Kp+"]",Zp="(?:\\ud83c[\\udde6-\\uddff]){2}",Jp="[\\ud800-\\udbff][\\udc00-\\udfff]",m0="\\u200d",Qp=y0+"?",ev="["+v0+"]?",_0="(?:"+m0+"(?:"+[qp,Zp,Jp].join("|")+")"+ev+Qp+")*",b0=ev+Qp+_0,x0="(?:"+[qp+mu+"?",mu,Zp,Jp,g0].join("|")+")",E0=RegExp(_u+"(?="+_u+")|"+x0+b0,"g");function w0(n){return n.match(E0)||[]}function Wn(n){return Ji(n)?w0(n):c0(n)}function tv(n){return function(e){e=gt(e);var t=Ji(e)?Wn(e):void 0,r=t?t[0]:e.charAt(0),i=t?Br(t,1).join(""):e.slice(1);return r[n]()+i}}var Nc=tv("toUpperCase");function nv(n){return Nc(gt(n).toLowerCase())}function Pc(n,e,t,r){var i=-1,o=n==null?0:n.length;for(r&&o&&(t=n[++i]);++i<o;)t=e(t,n[i],i,n);return t}function Rc(n){return function(e){return n==null?void 0:n[e]}}var A0={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},S0=Rc(A0),C0=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,O0="\\u0300-\\u036f",T0="\\ufe20-\\ufe2f",M0="\\u20d0-\\u20ff",N0=O0+T0+M0,P0="["+N0+"]",R0=RegExp(P0,"g");function rv(n){return n=gt(n),n&&n.replace(C0,S0).replace(R0,"")}var D0=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function L0(n){return n.match(D0)||[]}var k0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function I0(n){return k0.test(n)}var iv="\\ud800-\\udfff",B0="\\u0300-\\u036f",j0="\\ufe20-\\ufe2f",F0="\\u20d0-\\u20ff",H0=B0+j0+F0,ov="\\u2700-\\u27bf",av="a-z\\xdf-\\xf6\\xf8-\\xff",W0="\\xac\\xb1\\xd7\\xf7",$0="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",X0="\\u2000-\\u206f",z0=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",sv="A-Z\\xc0-\\xd6\\xd8-\\xde",U0="\\ufe0e\\ufe0f",lv=W0+$0+X0+z0,uv="['’]",Gf="["+lv+"]",G0="["+H0+"]",cv="\\d+",Y0="["+ov+"]",fv="["+av+"]",dv="[^"+iv+lv+cv+ov+av+sv+"]",V0="\\ud83c[\\udffb-\\udfff]",K0="(?:"+G0+"|"+V0+")",q0="[^"+iv+"]",hv="(?:\\ud83c[\\udde6-\\uddff]){2}",pv="[\\ud800-\\udbff][\\udc00-\\udfff]",Si="["+sv+"]",Z0="\\u200d",Yf="(?:"+fv+"|"+dv+")",J0="(?:"+Si+"|"+dv+")",Vf="(?:"+uv+"(?:d|ll|m|re|s|t|ve))?",Kf="(?:"+uv+"(?:D|LL|M|RE|S|T|VE))?",vv=K0+"?",gv="["+U0+"]?",Q0="(?:"+Z0+"(?:"+[q0,hv,pv].join("|")+")"+gv+vv+")*",eb="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tb="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",nb=gv+vv+Q0,rb="(?:"+[Y0,hv,pv].join("|")+")"+nb,ib=RegExp([Si+"?"+fv+"+"+Vf+"(?="+[Gf,Si,"$"].join("|")+")",J0+"+"+Kf+"(?="+[Gf,Si+Yf,"$"].join("|")+")",Si+"?"+Yf+"+"+Vf,Si+"+"+Kf,tb,eb,cv,rb].join("|"),"g");function ob(n){return n.match(ib)||[]}function yv(n,e,t){return n=gt(n),e=t?void 0:e,e===void 0?I0(n)?ob(n):L0(n):n.match(e)||[]}var ab="['’]",sb=RegExp(ab,"g");function Qi(n){return function(e){return Pc(yv(rv(e).replace(sb,"")),n,"")}}var lb=Qi(function(n,e,t){return e=e.toLowerCase(),n+(t?nv(e):e)}),ub=ui.isFinite,cb=Math.min;function Dc(n){var e=Math[n];return function(t,r){if(t=hr(t),r=r==null?0:cb(We(r),292),r&&ub(t)){var i=(gt(t)+"e").split("e"),o=e(i[0]+"e"+(+i[1]+r));return i=(gt(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return e(t)}}var fb=Dc("ceil");function mv(n){var e=m(n);return e.__chain__=!0,e}var db=Math.ceil,hb=Math.max;function pb(n,e,t){(t?tn(n,e,t):e===void 0)?e=1:e=hb(We(e),0);var r=n==null?0:n.length;if(!r||e<1)return[];for(var i=0,o=0,a=Array(db(r/e));i<r;)a[o++]=En(n,i,i+=e);return a}function pi(n,e,t){return n===n&&(t!==void 0&&(n=n<=t?n:t),e!==void 0&&(n=n>=e?n:e)),n}function vb(n,e,t){return t===void 0&&(t=e,e=void 0),t!==void 0&&(t=hr(t),t=t===t?t:0),e!==void 0&&(e=hr(e),e=e===e?e:0),pi(hr(n),e,t)}var gb=1,yb=4;function mb(n,e){return e=typeof e=="function"?e:void 0,fi(n,gb|yb,e)}var _b=4;function bb(n,e){return e=typeof e=="function"?e:void 0,fi(n,_b,e)}function xb(){return new xn(this.value(),this.__chain__)}function Eb(n){for(var e=-1,t=n==null?0:n.length,r=0,i=[];++e<t;){var o=n[e];o&&(i[r++]=o)}return i}function wb(){var n=arguments.length;if(!n)return[];for(var e=Array(n-1),t=arguments[0],r=n;r--;)e[r-1]=arguments[r];return fa(dt(t)?yn(t):[t],cn(e,1))}var Ab="Expected a function";function Sb(n){var e=n==null?0:n.length,t=Fe;return n=e?wt(n,function(r){if(typeof r[1]!="function")throw new TypeError(Ab);return[t(r[0]),r[1]]}):[],Ye(function(r){for(var i=-1;++i<e;){var o=n[i];if(_n(o[0],this,r))return _n(o[1],this,r)}})}function _v(n,e,t){var r=t.length;if(n==null)return!r;for(n=Object(n);r--;){var i=t[r],o=e[i],a=n[i];if(a===void 0&&!(i in n)||!o(a))return!1}return!0}function Cb(n){var e=on(n);return function(t){return _v(t,n,e)}}var Ob=1;function Tb(n){return Cb(fi(n,Ob))}function Mb(n,e){return e==null||_v(n,e,on(e))}function Nb(n,e,t,r){for(var i=-1,o=n==null?0:n.length;++i<o;){var a=n[i];e(r,a,t(a),n)}return r}function Pb(n,e,t,r){return di(n,function(i,o,a){e(r,i,t(i),a)}),r}function ul(n,e){return function(t,r){var i=dt(t)?Nb:Pb,o=e?e():{};return i(t,n,Fe(r),o)}}var Rb=Object.prototype,Db=Rb.hasOwnProperty,Lb=ul(function(n,e,t){Db.call(n,t)?++n[t]:Yi(n,t,1)});function kb(n,e){var t=oa(n);return e==null?t:am(t,e)}var Ib=8;function Lc(n,e,t){e=t?void 0:e;var r=yr(n,Ib,void 0,void 0,void 0,void 0,void 0,e);return r.placeholder=Lc.placeholder,r}Lc.placeholder={};var Bb=16;function kc(n,e,t){e=t?void 0:e;var r=yr(n,Bb,void 0,void 0,void 0,void 0,void 0,e);return r.placeholder=kc.placeholder,r}kc.placeholder={};function jb(n,e){return n==null||n!==n?e:n}var bv=Object.prototype,Fb=bv.hasOwnProperty,Hb=Ye(function(n,e){n=Object(n);var t=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&tn(e[0],e[1],i)&&(r=1);++t<r;)for(var o=e[t],a=vr(o),s=-1,l=a.length;++s<l;){var u=a[s],c=n[u];(c===void 0||Vi(c,bv[u])&&!Fb.call(n,u))&&(n[u]=o[u])}return n});function xv(n,e,t,r,i,o){return tr(n)&&tr(e)&&(o.set(e,n),wp(n,e,void 0,xv,o),o.delete(e)),n}var Ev=sa(function(n,e,t,r){wp(n,e,t,r)}),Wb=Ye(function(n){return n.push(void 0,xv),_n(Ev,void 0,n)}),$b="Expected a function";function wv(n,e,t){if(typeof n!="function")throw new TypeError($b);return setTimeout(function(){n.apply(void 0,t)},e)}var Xb=Ye(function(n,e){return wv(n,1,e)}),zb=Ye(function(n,e,t){return wv(n,hr(e)||0,t)});function Ic(n,e,t){for(var r=-1,i=n==null?0:n.length;++r<i;)if(t(e,n[r]))return!0;return!1}var Ub=200;function ha(n,e,t,r){var i=-1,o=al,a=!0,s=n.length,l=[],u=e.length;if(!s)return l;t&&(e=wt(e,nr(t))),r?(o=Ic,a=!1):e.length>=Ub&&(o=ns,a=!1,e=new bc(e));e:for(;++i<s;){var c=n[i],f=t==null?c:t(c);if(c=r||c!==0?c:0,a&&f===f){for(var d=u;d--;)if(e[d]===f)continue e;l.push(c)}else o(e,f,r)||l.push(c)}return l}var Gb=Ye(function(n,e){return Mt(n)?ha(n,cn(e,1,Mt,!0)):[]});function nn(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var Yb=Ye(function(n,e){var t=nn(e);return Mt(t)&&(t=void 0),Mt(n)?ha(n,cn(e,1,Mt,!0),Fe(t)):[]}),Vb=Ye(function(n,e){var t=nn(e);return Mt(t)&&(t=void 0),Mt(n)?ha(n,cn(e,1,Mt,!0),void 0,t):[]}),Kb=il(function(n,e){return n/e},1);function qb(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===void 0?1:We(e),En(n,e<0?0:e,r)):[]}function Zb(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===void 0?1:We(e),e=r-e,En(n,0,e<0?0:e)):[]}function cl(n,e,t,r){for(var i=n.length,o=r?i:-1;(r?o--:++o<i)&&e(n[o],o,n););return t?En(n,r?0:o,r?o+1:i):En(n,r?o+1:0,r?i:o)}function Jb(n,e){return n&&n.length?cl(n,Fe(e),!0,!0):[]}function Qb(n,e){return n&&n.length?cl(n,Fe(e),!0):[]}function or(n){return typeof n=="function"?n:An}function ot(n,e){var t=dt(n)?Xn:di;return t(n,or(e))}function ex(n,e){for(var t=n==null?0:n.length;t--&&e(n[t],t,n)!==!1;);return n}var Av=sm(!0);function Bc(n,e){return n&&Av(n,e,on)}var Sv=lm(Bc,!0);function qf(n,e){var t=dt(n)?ex:Sv;return t(n,or(e))}function tx(n,e,t){n=gt(n),e=Hn(e);var r=n.length;t=t===void 0?r:pi(We(t),0,r);var i=t;return t-=e.length,t>=0&&n.slice(t,i)==e}function nx(n,e){return wt(e,function(t){return[t,n[t]]})}function rx(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=[r,r]}),t}var ix="[object Map]",ox="[object Set]";function Cv(n){return function(e){var t=da(e);return t==ix?Ap(e):t==ox?rx(e):nx(e,n(e))}}var rr=Cv(on),Zf=Cv(vr),ax={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},sx=Rc(ax),Ov=/[&<>"']/g,lx=RegExp(Ov.source);function Tv(n){return n=gt(n),n&&lx.test(n)?n.replace(Ov,sx):n}var Mv=/[\\^$.*+?()[\]{}|]/g,ux=RegExp(Mv.source);function cx(n){return n=gt(n),n&&ux.test(n)?n.replace(Mv,"\\$&"):n}function Nv(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(!e(n[t],t,n))return!1;return!0}function fx(n,e){var t=!0;return di(n,function(r,i,o){return t=!!e(r,i,o),t}),t}function dx(n,e,t){var r=dt(n)?Nv:fx;return t&&tn(n,e,t)&&(e=void 0),r(n,Fe(e))}var hx=4294967295;function Pv(n){return n?pi(We(n),0,hx):0}function px(n,e,t,r){var i=n.length;for(t=We(t),t<0&&(t=-t>i?0:i+t),r=r===void 0||r>i?i:We(r),r<0&&(r+=i),r=t>r?0:Pv(r);t<r;)n[t++]=e;return n}function vx(n,e,t,r){var i=n==null?0:n.length;return i?(t&&typeof t!="number"&&tn(n,e,t)&&(t=0,r=i),px(n,e,t,r)):[]}function Rv(n,e){var t=[];return di(n,function(r,i,o){e(r,i,o)&&t.push(r)}),t}function gx(n,e){var t=dt(n)?hi:Rv;return t(n,Fe(e))}function Dv(n){return function(e,t,r){var i=Object(e);if(!kr(e)){var o=Fe(t);e=on(e),t=function(s){return o(i[s],s,i)}}var a=n(e,t,r);return a>-1?i[o?e[a]:a]:void 0}}var yx=Math.max;function jc(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=t==null?0:We(t);return i<0&&(i=yx(r+i,0)),_c(n,Fe(e),i)}var Rr=Dv(jc);function Lv(n,e,t){var r;return t(n,function(i,o,a){if(e(i,o,a))return r=o,!1}),r}function mx(n,e){return Lv(n,Fe(e),gr)}var _x=Dv(Sp);function bx(n,e){return Lv(n,Fe(e),Bc)}function Jf(n){return n&&n.length?n[0]:void 0}var xx=1/0;function Ex(n,e){return cn(bn(n,e),xx)}function wx(n,e,t){return t=t===void 0?1:We(t),cn(bn(n,e),t)}function Ax(n,e){var t=n==null?0:n.length;return t?(e=e===void 0?1:We(e),cn(n,e)):[]}var Sx=512;function Cx(n){return yr(n,Sx)}var Ox=Dc("floor"),Tx="Expected a function",Mx=8,Nx=32,Px=128,Rx=256;function kv(n){return Ir(function(e){var t=e.length,r=t,i=xn.prototype.thru;for(n&&e.reverse();r--;){var o=e[r];if(typeof o!="function")throw new TypeError(Tx);if(i&&!a&&Ya(o)=="wrapper")var a=new xn([],!0)}for(r=a?r:t;++r<t;){o=e[r];var s=Ya(o),l=s=="wrapper"?Cc(o):void 0;l&&yu(l[0])&&l[1]==(Px|Mx|Nx|Rx)&&!l[4].length&&l[9]==1?a=a[Ya(l[0])].apply(a,l[3]):a=o.length==1&&yu(o)?a[s]():a.thru(o)}return function(){var u=arguments,c=u[0];if(a&&u.length==1&&dt(c))return a.plant(c).value();for(var f=0,d=t?e[f].apply(this,u):c;++f<t;)d=e[f].call(this,d);return d}})}var Dx=kv(),Lx=kv(!0);function kx(n,e){return n==null?n:um(n,or(e),vr)}function Ix(n,e){return n==null?n:Av(n,or(e),vr)}function Bx(n,e){return n&&gr(n,or(e))}function jx(n,e){return n&&Bc(n,or(e))}function fl(n,e){return hi(e,function(t){return Ki(n[t])})}function Fx(n){return n==null?[]:fl(n,on(n))}function Hx(n){return n==null?[]:fl(n,vr(n))}var Wx=Object.prototype,$x=Wx.hasOwnProperty,Xx=ul(function(n,e,t){$x.call(n,t)?n[t].push(e):Yi(n,t,[e])});function Fc(n,e){return n>e}function dl(n){return function(e,t){return typeof e=="string"&&typeof t=="string"||(e=hr(e),t=hr(t)),n(e,t)}}var zx=dl(Fc),Ux=dl(function(n,e){return n>=e}),Gx=Object.prototype,Yx=Gx.hasOwnProperty;function Vx(n,e){return n!=null&&Yx.call(n,e)}function ss(n,e){return n!=null&&cm(n,e,Vx)}var Kx=Math.max,qx=Math.min;function Zx(n,e,t){return n>=qx(e,t)&&n<Kx(e,t)}function Jx(n,e,t){return e=Tr(e),t===void 0?(t=e,e=0):t=Tr(t),n=hr(n),Zx(n,e,t)}function Hc(n,e){return wt(e,function(t){return n[t]})}function eo(n){return n==null?[]:Hc(n,on(n))}var Qx=Math.max;function eE(n,e,t,r){n=kr(n)?n:eo(n),t=t&&!r?We(t):0;var i=n.length;return t<0&&(t=Qx(i+t,0)),el(n)?t<=i&&n.indexOf(e,t)>-1:!!i&&qi(n,e,t)>-1}var tE=Math.max;function Iv(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=t==null?0:We(t);return i<0&&(i=tE(r+i,0)),qi(n,e,i)}function nE(n){var e=n==null?0:n.length;return e?En(n,0,-1):[]}var rE=Math.min;function Wc(n,e,t){for(var r=t?Ic:al,i=n[0].length,o=n.length,a=o,s=Array(o),l=1/0,u=[];a--;){var c=n[a];a&&e&&(c=wt(c,nr(e))),l=rE(c.length,l),s[a]=!t&&(e||i>=120&&c.length>=120)?new bc(a&&c):void 0}c=n[0];var f=-1,d=s[0];e:for(;++f<i&&u.length<l;){var h=c[f],v=e?e(h):h;if(h=t||h!==0?h:0,!(d?ns(d,v):r(u,v,t))){for(a=o;--a;){var p=s[a];if(!(p?ns(p,v):r(n[a],v,t)))continue e}d&&d.push(v),u.push(h)}}return u}function $c(n){return Mt(n)?n:[]}var iE=Ye(function(n){var e=wt(n,$c);return e.length&&e[0]===n[0]?Wc(e):[]}),oE=Ye(function(n){var e=nn(n),t=wt(n,$c);return e===nn(t)?e=void 0:t.pop(),t.length&&t[0]===n[0]?Wc(t,Fe(e)):[]}),aE=Ye(function(n){var e=nn(n),t=wt(n,$c);return e=typeof e=="function"?e:void 0,e&&t.pop(),t.length&&t[0]===n[0]?Wc(t,void 0,e):[]});function sE(n,e,t,r){return gr(n,function(i,o,a){e(r,t(i),o,a)}),r}function Bv(n,e){return function(t,r){return sE(t,n,e(r),{})}}var lE=Object.prototype,uE=lE.toString,cE=Bv(function(n,e,t){e!=null&&typeof e.toString!="function"&&(e=uE.call(e)),n[e]=t},Cp(An)),jv=Object.prototype,fE=jv.hasOwnProperty,dE=jv.toString,hE=Bv(function(n,e,t){e!=null&&typeof e.toString!="function"&&(e=dE.call(e)),fE.call(n,e)?n[e].push(t):n[e]=[t]},Fe);function Fv(n,e){return e.length<2?n:tl(n,En(e,0,-1))}function pa(n,e,t){e=nl(e,n),n=Fv(n,e);var r=n==null?n:n[ca(nn(e))];return r==null?void 0:_n(r,n,t)}var pE=Ye(pa),vE=Ye(function(n,e,t){var r=-1,i=typeof e=="function",o=kr(n)?Array(n.length):[];return di(n,function(a){o[++r]=i?_n(e,a,t):pa(a,e,t)}),o}),gE="[object ArrayBuffer]";function yE(n){return $n(n)&&ci(n)==gE}var Qf=Di&&Di.isArrayBuffer,mE=Qf?nr(Qf):yE,_E="[object Boolean]";function ls(n){return n===!0||n===!1||$n(n)&&ci(n)==_E}var bE="[object Date]";function xE(n){return $n(n)&&ci(n)==bE}var ed=Di&&Di.isDate,EE=ed?nr(ed):xE;function wE(n){return $n(n)&&n.nodeType===1&&!Qs(n)}var AE="[object Map]",SE="[object Set]",CE=Object.prototype,OE=CE.hasOwnProperty;function Xc(n){if(n==null)return!0;if(kr(n)&&(dt(n)||typeof n=="string"||typeof n.splice=="function"||xc(n)||Ec(n)||Op(n)))return!n.length;var e=da(n);if(e==AE||e==SE)return!n.size;if(xp(n))return!Tp(n).length;for(var t in n)if(OE.call(n,t))return!1;return!0}function TE(n,e,t){t=typeof t=="function"?t:void 0;var r=t?t(n,e):void 0;return r===void 0?fm(n,e,void 0,t):!!r}var ME=ui.isFinite;function NE(n){return typeof n=="number"&&ME(n)}function Hv(n){return typeof n=="number"&&n==We(n)}function PE(n,e){return n===e||Mp(n,e,Np(e))}function RE(n,e,t){return t=typeof t=="function"?t:void 0,Mp(n,e,Np(e),t)}var DE="[object Number]";function Wv(n){return typeof n=="number"||$n(n)&&ci(n)==DE}function LE(n){return Wv(n)&&n!=+n}var kE=dm?Ki:Pp,IE="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function BE(n){if(kE(n))throw new Error(IE);return hm(n)}function jE(n){return n===null}var FE="[object RegExp]";function HE(n){return $n(n)&&ci(n)==FE}var td=Di&&Di.isRegExp,zc=td?nr(td):HE,nd=9007199254740991;function WE(n){return Hv(n)&&n>=-nd&&n<=nd}var $E="[object WeakMap]";function XE(n){return $n(n)&&da(n)==$E}var zE="[object WeakSet]";function UE(n){return $n(n)&&ci(n)==zE}var GE=1;function YE(n){return Fe(typeof n=="function"?n:fi(n,GE))}var VE=Array.prototype,KE=VE.join;function qE(n,e){return n==null?"":KE.call(n,e)}var ZE=Qi(function(n,e,t){return n+(t?"-":"")+e.toLowerCase()}),JE=ul(function(n,e,t){Yi(n,t,e)});function QE(n,e,t){for(var r=t+1;r--;)if(n[r]===e)return r;return r}var ew=Math.max,tw=Math.min;function nw(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=r;return t!==void 0&&(i=We(t),i=i<0?ew(r+i,0):tw(i,r-1)),e===e?QE(n,e,i):_c(n,Xp,i,!0)}var rw=Qi(function(n,e,t){return n+(t?" ":"")+e.toLowerCase()}),iw=tv("toLowerCase");function Uc(n,e){return n<e}var ow=dl(Uc),aw=dl(function(n,e){return n<=e});function $v(n,e){var t={};return e=Fe(e),gr(n,function(r,i,o){Yi(t,e(r,i,o),r)}),t}function sw(n,e){var t={};return e=Fe(e),gr(n,function(r,i,o){Yi(t,i,e(r,i,o))}),t}var lw=1;function uw(n){return pm(fi(n,lw))}var cw=1;function fw(n,e){return vm(n,fi(e,cw))}function hl(n,e,t){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!pr(a):t(a,s)))var s=a,l=o}return l}function dw(n){return n&&n.length?hl(n,An,Fc):void 0}function hw(n,e){return n&&n.length?hl(n,Fe(e),Fc):void 0}function Gc(n,e){for(var t,r=-1,i=n.length;++r<i;){var o=e(n[r]);o!==void 0&&(t=t===void 0?o:t+o)}return t}var pw=NaN;function Xv(n,e){var t=n==null?0:n.length;return t?Gc(n,e)/t:pw}function vw(n){return Xv(n,An)}function gw(n,e){return Xv(n,Fe(e))}var yw=Ye(function(n,e){return function(t){return pa(t,n,e)}}),mw=Ye(function(n,e){return function(t){return pa(n,t,e)}});function _w(n){return n&&n.length?hl(n,An,Uc):void 0}function bw(n,e){return n&&n.length?hl(n,Fe(e),Uc):void 0}function zv(n,e,t){var r=on(e),i=fl(e,r),o=!(tr(t)&&"chain"in t)||!!t.chain,a=Ki(n);return Xn(i,function(s){var l=e[s];n[s]=l,a&&(n.prototype[s]=function(){var u=this.__chain__;if(o||u){var c=n(this.__wrapped__),f=c.__actions__=yn(this.__actions__);return f.push({func:l,args:arguments,thisArg:n}),c.__chain__=u,c}return l.apply(n,fa([this.value()],arguments))})}),n}var xw=il(function(n,e){return n*e},1),Ew="Expected a function";function va(n){if(typeof n!="function")throw new TypeError(Ew);return function(){var e=arguments;switch(e.length){case 0:return!n.call(this);case 1:return!n.call(this,e[0]);case 2:return!n.call(this,e[0],e[1]);case 3:return!n.call(this,e[0],e[1],e[2])}return!n.apply(this,e)}}function ww(n){for(var e,t=[];!(e=n.next()).done;)t.push(e.value);return t}var Aw="[object Map]",Sw="[object Set]",$l=rs?rs.iterator:void 0;function Uv(n){if(!n)return[];if(kr(n))return el(n)?Wn(n):yn(n);if($l&&n[$l])return ww(n[$l]());var e=da(n),t=e==Aw?Ap:e==Sw?wc:eo;return t(n)}function Cw(){this.__values__===void 0&&(this.__values__=Uv(this.value()));var n=this.__index__>=this.__values__.length,e=n?void 0:this.__values__[this.__index__++];return{done:n,value:e}}function Gv(n,e){var t=n.length;if(t)return e+=e<0?t:0,aa(e,t)?n[e]:void 0}function Ow(n,e){return n&&n.length?Gv(n,We(e)):void 0}function Tw(n){return n=We(n),Ye(function(e){return Gv(e,n)})}function Yc(n,e){return e=nl(e,n),n=Fv(n,e),n==null||delete n[ca(nn(e))]}function Mw(n){return Qs(n)?void 0:n}var Nw=1,Pw=2,Rw=4,Dw=Ir(function(n,e){var t={};if(n==null)return t;var r=!1;e=wt(e,function(o){return o=nl(o,n),r||(r=o.length>1),o}),la(n,Rp(n),t),r&&(t=fi(t,Nw|Pw|Rw,Mw));for(var i=e.length;i--;)Yc(t,e[i]);return t});function Yv(n,e){if(n==null)return{};var t=wt(Rp(n),function(r){return[r]});return e=Fe(e),gm(n,t,function(r,i){return e(r,i[0])})}function Lw(n,e){return Yv(n,va(Fe(e)))}function kw(n){return Vp(2,n)}function Iw(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}function Vv(n,e){if(n!==e){var t=n!==void 0,r=n===null,i=n===n,o=pr(n),a=e!==void 0,s=e===null,l=e===e,u=pr(e);if(!s&&!u&&!o&&n>e||o&&a&&l&&!s&&!u||r&&a&&l||!t&&l||!i)return 1;if(!r&&!o&&!u&&n<e||u&&t&&i&&!r&&!o||s&&t&&i||!a&&i||!l)return-1}return 0}function Bw(n,e,t){for(var r=-1,i=n.criteria,o=e.criteria,a=i.length,s=t.length;++r<a;){var l=Vv(i[r],o[r]);if(l){if(r>=s)return l;var u=t[r];return l*(u=="desc"?-1:1)}}return n.index-e.index}function Kv(n,e,t){e.length?e=wt(e,function(o){return dt(o)?function(a){return tl(a,o.length===1?o[0]:o)}:o}):e=[An];var r=-1;e=wt(e,nr(Fe));var i=ym(n,function(o,a,s){var l=wt(e,function(u){return u(o)});return{criteria:l,index:++r,value:o}});return Iw(i,function(o,a){return Bw(o,a,t)})}function jw(n,e,t,r){return n==null?[]:(dt(e)||(e=e==null?[]:[e]),t=r?void 0:t,dt(t)||(t=t==null?[]:[t]),Kv(n,e,t))}function Vc(n){return Ir(function(e){return e=wt(e,nr(Fe)),Ye(function(t){var r=this;return n(e,function(i){return _n(i,r,t)})})})}var Fw=Vc(wt),Hw=Ye,Ww=Math.min,$w=Hw(function(n,e){e=e.length==1&&dt(e[0])?wt(e[0],nr(Fe)):wt(cn(e,1),nr(Fe));var t=e.length;return Ye(function(r){for(var i=-1,o=Ww(r.length,t);++i<o;)r[i]=e[i].call(this,r[i]);return _n(n,this,r)})}),Xw=Vc(Nv),zw=Vc(Dp),Uw=9007199254740991,Gw=Math.floor;function bu(n,e){var t="";if(!n||e<1||e>Uw)return t;do e%2&&(t+=n),e=Gw(e/2),e&&(n+=n);while(e);return t}var Yw=Lp("length"),qv="\\ud800-\\udfff",Vw="\\u0300-\\u036f",Kw="\\ufe20-\\ufe2f",qw="\\u20d0-\\u20ff",Zw=Vw+Kw+qw,Jw="\\ufe0e\\ufe0f",Qw="["+qv+"]",xu="["+Zw+"]",Eu="\\ud83c[\\udffb-\\udfff]",eA="(?:"+xu+"|"+Eu+")",Zv="[^"+qv+"]",Jv="(?:\\ud83c[\\udde6-\\uddff]){2}",Qv="[\\ud800-\\udbff][\\udc00-\\udfff]",tA="\\u200d",eg=eA+"?",tg="["+Jw+"]?",nA="(?:"+tA+"(?:"+[Zv,Jv,Qv].join("|")+")"+tg+eg+")*",rA=tg+eg+nA,iA="(?:"+[Zv+xu+"?",xu,Jv,Qv,Qw].join("|")+")",rd=RegExp(Eu+"(?="+Eu+")|"+iA+rA,"g");function oA(n){for(var e=rd.lastIndex=0;rd.test(n);)++e;return e}function to(n){return Ji(n)?oA(n):Yw(n)}var aA=Math.ceil;function us(n,e){e=e===void 0?" ":Hn(e);var t=e.length;if(t<2)return t?bu(e,n):e;var r=bu(e,aA(n/to(e)));return Ji(e)?Br(Wn(r),0,n).join(""):r.slice(0,n)}var sA=Math.ceil,lA=Math.floor;function uA(n,e,t){n=gt(n),e=We(e);var r=e?to(n):0;if(!e||r>=e)return n;var i=(e-r)/2;return us(lA(i),t)+n+us(sA(i),t)}function cA(n,e,t){n=gt(n),e=We(e);var r=e?to(n):0;return e&&r<e?n+us(e-r,t):n}function fA(n,e,t){n=gt(n),e=We(e);var r=e?to(n):0;return e&&r<e?us(e-r,t)+n:n}var dA=/^\s+/,hA=ui.parseInt;function pA(n,e,t){return t||e==null?e=0:e&&(e=+e),hA(gt(n).replace(dA,""),e||0)}var vA=32,pl=Ye(function(n,e){var t=Pr(e,Zi(pl));return yr(n,vA,void 0,e,t)});pl.placeholder={};var gA=64,Kc=Ye(function(n,e){var t=Pr(e,Zi(Kc));return yr(n,gA,void 0,e,t)});Kc.placeholder={};var yA=ul(function(n,e,t){n[t?0:1].push(e)},function(){return[[],[]]});function mA(n){for(var e,t=this;t instanceof ol;){var r=Wp(t);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;t=t.__wrapped__}return i.__wrapped__=n,e}function _A(n){return function(e){return n==null?void 0:tl(n,e)}}function bA(n,e,t,r){for(var i=t-1,o=n.length;++i<o;)if(r(n[i],e))return i;return-1}var xA=Array.prototype,id=xA.splice;function qc(n,e,t,r){var i=r?bA:qi,o=-1,a=e.length,s=n;for(n===e&&(e=yn(e)),t&&(s=wt(n,nr(t)));++o<a;)for(var l=0,u=e[o],c=t?t(u):u;(l=i(s,c,l,r))>-1;)s!==n&&id.call(s,l,1),id.call(n,l,1);return n}function ng(n,e){return n&&n.length&&e&&e.length?qc(n,e):n}var EA=Ye(ng);function wA(n,e,t){return n&&n.length&&e&&e.length?qc(n,e,Fe(t)):n}function AA(n,e,t){return n&&n.length&&e&&e.length?qc(n,e,void 0,t):n}var SA=Array.prototype,CA=SA.splice;function rg(n,e){for(var t=n?e.length:0,r=t-1;t--;){var i=e[t];if(t==r||i!==o){var o=i;aa(i)?CA.call(n,i,1):Yc(n,i)}}return n}var OA=Ir(function(n,e){var t=n==null?0:n.length,r=Oc(n,e);return rg(n,wt(e,function(i){return aa(i,t)?+i:i}).sort(Vv)),r}),TA=Math.floor,MA=Math.random;function Zc(n,e){return n+TA(MA()*(e-n+1))}var NA=parseFloat,PA=Math.min,RA=Math.random;function DA(n,e,t){if(t&&typeof t!="boolean"&&tn(n,e,t)&&(e=t=void 0),t===void 0&&(typeof e=="boolean"?(t=e,e=void 0):typeof n=="boolean"&&(t=n,n=void 0)),n===void 0&&e===void 0?(n=0,e=1):(n=Tr(n),e===void 0?(e=n,n=0):e=Tr(e)),n>e){var r=n;n=e,e=r}if(t||n%1||e%1){var i=RA();return PA(n+i*(e-n+NA("1e-"+((i+"").length-1))),e)}return Zc(n,e)}var LA=Math.ceil,kA=Math.max;function IA(n,e,t,r){for(var i=-1,o=kA(LA((e-n)/(t||1)),0),a=Array(o);o--;)a[r?o:++i]=n,n+=t;return a}function ig(n){return function(e,t,r){return r&&typeof r!="number"&&tn(e,t,r)&&(t=r=void 0),e=Tr(e),t===void 0?(t=e,e=0):t=Tr(t),r=r===void 0?e<t?1:-1:Tr(r),IA(e,t,r,n)}}var BA=ig(),jA=ig(!0),FA=256,HA=Ir(function(n,e){return yr(n,FA,void 0,void 0,void 0,e)});function og(n,e,t,r,i){return i(n,function(o,a,s){t=r?(r=!1,o):e(t,o,a,s)}),t}function ag(n,e,t){var r=dt(n)?Pc:og,i=arguments.length<3;return r(n,Fe(e),t,i,di)}function WA(n,e,t,r){var i=n==null?0:n.length;for(r&&i&&(t=n[--i]);i--;)t=e(t,n[i],i,n);return t}function $A(n,e,t){var r=dt(n)?WA:og,i=arguments.length<3;return r(n,Fe(e),t,i,Sv)}function XA(n,e){var t=dt(n)?hi:Rv;return t(n,va(Fe(e)))}function zA(n,e){var t=[];if(!(n&&n.length))return t;var r=-1,i=[],o=n.length;for(e=Fe(e);++r<o;){var a=n[r];e(a,r,n)&&(t.push(a),i.push(r))}return rg(n,i),t}function UA(n,e,t){return(t?tn(n,e,t):e===void 0)?e=1:e=We(e),bu(gt(n),e)}function GA(){var n=arguments,e=gt(n[0]);return n.length<3?e:e.replace(n[1],n[2])}var YA="Expected a function";function VA(n,e){if(typeof n!="function")throw new TypeError(YA);return e=e===void 0?e:We(e),Ye(n,e)}function KA(n,e,t){e=nl(e,n);var r=-1,i=e.length;for(i||(i=1,n=void 0);++r<i;){var o=n==null?void 0:n[ca(e[r])];o===void 0&&(r=i,o=t),n=Ki(o)?o.call(n):o}return n}var qA=Array.prototype,ZA=qA.reverse;function wu(n){return n==null?n:ZA.call(n)}var JA=Dc("round");function sg(n){var e=n.length;return e?n[Zc(0,e-1)]:void 0}function QA(n){return sg(eo(n))}function eS(n){var e=dt(n)?sg:QA;return e(n)}function vl(n,e){var t=-1,r=n.length,i=r-1;for(e=e===void 0?r:e;++t<e;){var o=Zc(t,i),a=n[o];n[o]=n[t],n[t]=a}return n.length=e,n}function tS(n,e){return vl(yn(n),pi(e,0,n.length))}function nS(n,e){var t=eo(n);return vl(t,pi(e,0,t.length))}function rS(n,e,t){(t?tn(n,e,t):e===void 0)?e=1:e=We(e);var r=dt(n)?tS:nS;return r(n,e)}function iS(n,e,t,r){return r=typeof r=="function"?r:void 0,n==null?n:Ac(n,e,t,r)}function oS(n){return vl(yn(n))}function aS(n){return vl(eo(n))}function sS(n){var e=dt(n)?oS:aS;return e(n)}var lS="[object Map]",uS="[object Set]";function cS(n){if(n==null)return 0;if(kr(n))return el(n)?to(n):n.length;var e=da(n);return e==lS||e==uS?n.size:Tp(n).length}function fS(n,e,t){var r=n==null?0:n.length;return r?(t&&typeof t!="number"&&tn(n,e,t)?(e=0,t=r):(e=e==null?0:We(e),t=t===void 0?r:We(t)),En(n,e,t)):[]}var dS=Qi(function(n,e,t){return n+(t?"_":"")+e.toLowerCase()});function hS(n,e){var t;return di(n,function(r,i,o){return t=e(r,i,o),!t}),!!t}function pS(n,e,t){var r=dt(n)?Dp:hS;return t&&tn(n,e,t)&&(e=void 0),r(n,Fe(e))}var vS=Ye(function(n,e){if(n==null)return[];var t=e.length;return t>1&&tn(n,e[0],e[1])?e=[]:t>2&&tn(e[0],e[1],e[2])&&(e=[e[0]]),Kv(n,cn(e,1),[])}),gS=4294967295,yS=gS-1,mS=Math.floor,_S=Math.min;function Jc(n,e,t,r){var i=0,o=n==null?0:n.length;if(o===0)return 0;e=t(e);for(var a=e!==e,s=e===null,l=pr(e),u=e===void 0;i<o;){var c=mS((i+o)/2),f=t(n[c]),d=f!==void 0,h=f===null,v=f===f,p=pr(f);if(a)var g=r||v;else u?g=v&&(r||d):s?g=v&&d&&(r||!h):l?g=v&&d&&!h&&(r||!p):h||p?g=!1:g=r?f<=e:f<e;g?i=c+1:o=c}return _S(o,yS)}var bS=4294967295,xS=bS>>>1;function gl(n,e,t){var r=0,i=n==null?r:n.length;if(typeof e=="number"&&e===e&&i<=xS){for(;r<i;){var o=r+i>>>1,a=n[o];a!==null&&!pr(a)&&(t?a<=e:a<e)?r=o+1:i=o}return i}return Jc(n,e,An,t)}function ES(n,e){return gl(n,e)}function wS(n,e,t){return Jc(n,e,Fe(t))}function AS(n,e){var t=n==null?0:n.length;if(t){var r=gl(n,e);if(r<t&&Vi(n[r],e))return r}return-1}function SS(n,e){return gl(n,e,!0)}function CS(n,e,t){return Jc(n,e,Fe(t),!0)}function OS(n,e){var t=n==null?0:n.length;if(t){var r=gl(n,e,!0)-1;if(Vi(n[r],e))return r}return-1}function lg(n,e){for(var t=-1,r=n.length,i=0,o=[];++t<r;){var a=n[t],s=e?e(a):a;if(!t||!Vi(s,l)){var l=s;o[i++]=a===0?0:a}}return o}function TS(n){return n&&n.length?lg(n):[]}function MS(n,e){return n&&n.length?lg(n,Fe(e)):[]}var NS=4294967295;function PS(n,e,t){return t&&typeof t!="number"&&tn(n,e,t)&&(e=t=void 0),t=t===void 0?NS:t>>>0,t?(n=gt(n),n&&(typeof e=="string"||e!=null&&!zc(e))&&(e=Hn(e),!e&&Ji(n))?Br(Wn(n),0,t):n.split(e,t)):[]}var RS="Expected a function",DS=Math.max;function LS(n,e){if(typeof n!="function")throw new TypeError(RS);return e=e==null?0:DS(We(e),0),Ye(function(t){var r=t[e],i=Br(t,0,e);return r&&fa(i,r),_n(n,this,i)})}var kS=Qi(function(n,e,t){return n+(t?" ":"")+Nc(e)});function IS(n,e,t){return n=gt(n),t=t==null?0:pi(We(t),0,n.length),e=Hn(e),n.slice(t,t+e.length)==e}function BS(){return{}}function jS(){return""}function FS(){return!0}var HS=il(function(n,e){return n-e},0);function WS(n){return n&&n.length?Gc(n,An):0}function $S(n,e){return n&&n.length?Gc(n,Fe(e)):0}function XS(n){var e=n==null?0:n.length;return e?En(n,1,e):[]}function zS(n,e,t){return n&&n.length?(e=t||e===void 0?1:We(e),En(n,0,e<0?0:e)):[]}function US(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===void 0?1:We(e),e=r-e,En(n,e<0?0:e,r)):[]}function GS(n,e){return n&&n.length?cl(n,Fe(e),!1,!0):[]}function YS(n,e){return n&&n.length?cl(n,Fe(e)):[]}function VS(n,e){return e(n),n}var ug=Object.prototype,KS=ug.hasOwnProperty;function od(n,e,t,r){return n===void 0||Vi(n,ug[t])&&!KS.call(r,t)?e:n}var qS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function ZS(n){return"\\"+qS[n]}var cg=/<%=([\s\S]+?)%>/g,JS=/<%-([\s\S]+?)%>/g,QS=/<%([\s\S]+?)%>/g,Au={escape:JS,evaluate:QS,interpolate:cg,variable:"",imports:{_:{escape:Tv}}},eC="Invalid `variable` option passed into `_.template`",tC=/\b__p \+= '';/g,nC=/\b(__p \+=) '' \+/g,rC=/(__e\(.*?\)|\b__t\)) \+\n'';/g,iC=/[()=,{}\[\]\/\s]/,oC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ea=/($^)/,aC=/['\n\r\u2028\u2029\\]/g,sC=Object.prototype,ad=sC.hasOwnProperty;function lC(n,e,t){var r=Au.imports._.templateSettings||Au;t&&tn(n,e,t)&&(e=void 0),n=gt(n),e=as({},e,r,od);var i=as({},e.imports,r.imports,od),o=on(i),a=Hc(i,o),s,l,u=0,c=e.interpolate||Ea,f="__p += '",d=RegExp((e.escape||Ea).source+"|"+c.source+"|"+(c===cg?oC:Ea).source+"|"+(e.evaluate||Ea).source+"|$","g"),h=ad.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+`
`:"";n.replace(d,function(g,y,b,C,D,B){return b||(b=C),f+=n.slice(u,B).replace(aC,ZS),y&&(s=!0,f+=`' +
__e(`+y+`) +
'`),D&&(l=!0,f+=`';
`+D+`;
__p += '`),b&&(f+=`' +
((__t = (`+b+`)) == null ? '' : __t) +
'`),u=B+g.length,g}),f+=`';
`;var v=ad.call(e,"variable")&&e.variable;if(!v)f=`with (obj) {
`+f+`
}
`;else if(iC.test(v))throw new Error(eC);f=(l?f.replace(tC,""):f).replace(nC,"$1").replace(rC,"$1;"),f="function("+(v||"obj")+`) {
`+(v?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(s?", __e = _.escape":"")+(l?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+f+`return __p
}`;var p=Yp(function(){return Function(o,h+"return "+f).apply(void 0,a)});if(p.source=f,Tc(p))throw p;return p}function ga(n,e){return e(n)}var uC=9007199254740991,Xl=4294967295,cC=Math.min;function fC(n,e){if(n=We(n),n<1||n>uC)return[];var t=Xl,r=cC(n,Xl);e=or(e),n-=Xl;for(var i=kp(r,e);++t<n;)e(t);return i}function dC(){return this}function fg(n,e){var t=n;return t instanceof qe&&(t=t.value()),Pc(e,function(r,i){return i.func.apply(i.thisArg,fa([r],i.args))},t)}function zl(){return fg(this.__wrapped__,this.__actions__)}function hC(n){return gt(n).toLowerCase()}function pC(n){return dt(n)?wt(n,ca):pr(n)?[n]:yn(mm(gt(n)))}var sd=9007199254740991;function vC(n){return n?pi(We(n),-sd,sd):n===0?n:0}function gC(n){return gt(n).toUpperCase()}function yC(n,e,t){var r=dt(n),i=r||xc(n)||Ec(n);if(e=Fe(e),t==null){var o=n&&n.constructor;i?t=r?new o:[]:tr(n)?t=Ki(o)?oa(_m(n)):{}:t={}}return(i?Xn:gr)(n,function(a,s,l){return e(t,a,s,l)}),t}function dg(n,e){for(var t=n.length;t--&&qi(e,n[t],0)>-1;);return t}function hg(n,e){for(var t=-1,r=n.length;++t<r&&qi(e,n[t],0)>-1;);return t}function mC(n,e,t){if(n=gt(n),n&&(t||e===void 0))return bm(n);if(!n||!(e=Hn(e)))return n;var r=Wn(n),i=Wn(e),o=hg(r,i),a=dg(r,i)+1;return Br(r,o,a).join("")}function _C(n,e,t){if(n=gt(n),n&&(t||e===void 0))return n.slice(0,xm(n)+1);if(!n||!(e=Hn(e)))return n;var r=Wn(n),i=dg(r,Wn(e))+1;return Br(r,0,i).join("")}var bC=/^\s+/;function xC(n,e,t){if(n=gt(n),n&&(t||e===void 0))return n.replace(bC,"");if(!n||!(e=Hn(e)))return n;var r=Wn(n),i=hg(r,Wn(e));return Br(r,i).join("")}var EC=30,wC="...",AC=/\w*$/;function SC(n,e){var t=EC,r=wC;if(tr(e)){var i="separator"in e?e.separator:i;t="length"in e?We(e.length):t,r="omission"in e?Hn(e.omission):r}n=gt(n);var o=n.length;if(Ji(n)){var a=Wn(n);o=a.length}if(t>=o)return n;var s=t-to(r);if(s<1)return r;var l=a?Br(a,0,s).join(""):n.slice(0,s);if(i===void 0)return l+r;if(a&&(s+=l.length-s),zc(i)){if(n.slice(s).search(i)){var u,c=l;for(i.global||(i=RegExp(i.source,gt(AC.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var f=u.index;l=l.slice(0,f===void 0?s:f)}}else if(n.indexOf(Hn(i),s)!=s){var d=l.lastIndexOf(i);d>-1&&(l=l.slice(0,d))}return l+r}function CC(n){return Gp(n,1)}var OC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},TC=Rc(OC),pg=/&(?:amp|lt|gt|quot|#39);/g,MC=RegExp(pg.source);function NC(n){return n=gt(n),n&&MC.test(n)?n.replace(pg,TC):n}var PC=1/0,RC=Bl&&1/wc(new Bl([,-0]))[1]==PC?function(n){return new Bl(n)}:Pi,DC=200;function Dr(n,e,t){var r=-1,i=al,o=n.length,a=!0,s=[],l=s;if(t)a=!1,i=Ic;else if(o>=DC){var u=e?null:RC(n);if(u)return wc(u);a=!1,i=ns,l=new bc}else l=e?[]:s;e:for(;++r<o;){var c=n[r],f=e?e(c):c;if(c=t||c!==0?c:0,a&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue e;e&&l.push(f),s.push(c)}else i(l,f,t)||(l!==s&&l.push(f),s.push(c))}return s}var LC=Ye(function(n){return Dr(cn(n,1,Mt,!0))}),kC=Ye(function(n){var e=nn(n);return Mt(e)&&(e=void 0),Dr(cn(n,1,Mt,!0),Fe(e))}),IC=Ye(function(n){var e=nn(n);return e=typeof e=="function"?e:void 0,Dr(cn(n,1,Mt,!0),void 0,e)});function BC(n){return n&&n.length?Dr(n):[]}function jC(n,e){return n&&n.length?Dr(n,Fe(e)):[]}function FC(n,e){return e=typeof e=="function"?e:void 0,n&&n.length?Dr(n,void 0,e):[]}var HC=0;function WC(n){var e=++HC;return gt(n)+e}function $C(n,e){return n==null?!0:Yc(n,e)}var XC=Math.max;function Qc(n){if(!(n&&n.length))return[];var e=0;return n=hi(n,function(t){if(Mt(t))return e=XC(t.length,e),!0}),kp(e,function(t){return wt(n,Lp(t))})}function vg(n,e){if(!(n&&n.length))return[];var t=Qc(n);return e==null?t:wt(t,function(r){return _n(e,void 0,r)})}function gg(n,e,t,r){return Ac(n,e,t(tl(n,e)),r)}function zC(n,e,t){return n==null?n:gg(n,e,or(t))}function UC(n,e,t,r){return r=typeof r=="function"?r:void 0,n==null?n:gg(n,e,or(t),r)}var GC=Qi(function(n,e,t){return n+(t?" ":"")+e.toUpperCase()});function YC(n){return n==null?[]:Hc(n,vr(n))}var VC=Ye(function(n,e){return Mt(n)?ha(n,e):[]});function KC(n,e){return pl(or(e),n)}var qC=Ir(function(n){var e=n.length,t=e?n[0]:0,r=this.__wrapped__,i=function(o){return Oc(o,n)};return e>1||this.__actions__.length||!(r instanceof qe)||!aa(t)?this.thru(i):(r=r.slice(t,+t+(e?1:0)),r.__actions__.push({func:ga,args:[i],thisArg:void 0}),new xn(r,this.__chain__).thru(function(o){return e&&!o.length&&o.push(void 0),o}))});function ZC(){return mv(this)}function JC(){var n=this.__wrapped__;if(n instanceof qe){var e=n;return this.__actions__.length&&(e=new qe(this)),e=e.reverse(),e.__actions__.push({func:ga,args:[wu],thisArg:void 0}),new xn(e,this.__chain__)}return this.thru(wu)}function ef(n,e,t){var r=n.length;if(r<2)return r?Dr(n[0]):[];for(var i=-1,o=Array(r);++i<r;)for(var a=n[i],s=-1;++s<r;)s!=i&&(o[i]=ha(o[i]||a,n[s],e,t));return Dr(cn(o,1),e,t)}var QC=Ye(function(n){return ef(hi(n,Mt))}),eO=Ye(function(n){var e=nn(n);return Mt(e)&&(e=void 0),ef(hi(n,Mt),Fe(e))}),tO=Ye(function(n){var e=nn(n);return e=typeof e=="function"?e:void 0,ef(hi(n,Mt),void 0,e)}),nO=Ye(Qc);function yg(n,e,t){for(var r=-1,i=n.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;t(a,n[r],s)}return a}function rO(n,e){return yg(n||[],e||[],Ep)}function iO(n,e){return yg(n||[],e||[],Ac)}var oO=Ye(function(n){var e=n.length,t=e>1?n[e-1]:void 0;return t=typeof t=="function"?(n.pop(),t):void 0,vg(n,t)});const se={chunk:pb,compact:Eb,concat:wb,difference:Gb,differenceBy:Yb,differenceWith:Vb,drop:qb,dropRight:Zb,dropRightWhile:Jb,dropWhile:Qb,fill:vx,findIndex:jc,findLastIndex:Sp,first:Jf,flatten:Em,flattenDeep:wm,flattenDepth:Ax,fromPairs:Am,head:Jf,indexOf:Iv,initial:nE,intersection:iE,intersectionBy:oE,intersectionWith:aE,join:qE,last:nn,lastIndexOf:nw,nth:Ow,pull:EA,pullAll:ng,pullAllBy:wA,pullAllWith:AA,pullAt:OA,remove:zA,reverse:wu,slice:fS,sortedIndex:ES,sortedIndexBy:wS,sortedIndexOf:AS,sortedLastIndex:SS,sortedLastIndexBy:CS,sortedLastIndexOf:OS,sortedUniq:TS,sortedUniqBy:MS,tail:XS,take:zS,takeRight:US,takeRightWhile:GS,takeWhile:YS,union:LC,unionBy:kC,unionWith:IC,uniq:BC,uniqBy:jC,uniqWith:FC,unzip:Qc,unzipWith:vg,without:VC,xor:QC,xorBy:eO,xorWith:tO,zip:nO,zipObject:rO,zipObjectDeep:iO,zipWith:oO},mt={countBy:Lb,each:ot,eachRight:qf,every:dx,filter:gx,find:Rr,findLast:_x,flatMap:Sm,flatMapDeep:Ex,flatMapDepth:wx,forEach:ot,forEachRight:qf,groupBy:Xx,includes:eE,invokeMap:vE,keyBy:JE,map:bn,orderBy:jw,partition:yA,reduce:ag,reduceRight:$A,reject:XA,sample:eS,sampleSize:rS,shuffle:sS,size:cS,some:pS,sortBy:vS},aO={now:Cm},At={after:Ym,ary:Gp,before:Vp,bind:ll,bindKey:Mc,curry:Lc,curryRight:kc,debounce:Sc,defer:Xb,delay:zb,flip:Cx,memoize:Om,negate:va,once:kw,overArgs:$w,partial:pl,partialRight:Kc,rearg:HA,rest:VA,spread:LS,throttle:Ip,unary:CC,wrap:KC},Se={castArray:Tm,clone:Mm,cloneDeep:je,cloneDeepWith:mb,cloneWith:bb,conformsTo:Mb,eq:Vi,gt:zx,gte:Ux,isArguments:Op,isArray:dt,isArrayBuffer:mE,isArrayLike:kr,isArrayLikeObject:Mt,isBoolean:ls,isBuffer:xc,isDate:EE,isElement:wE,isEmpty:Xc,isEqual:is,isEqualWith:TE,isError:Tc,isFinite:NE,isFunction:Ki,isInteger:Hv,isLength:Nm,isMap:Pm,isMatch:PE,isMatchWith:RE,isNaN:LE,isNative:BE,isNil:ti,isNull:jE,isNumber:Wv,isObject:tr,isObjectLike:$n,isPlainObject:Qs,isRegExp:zc,isSafeInteger:WE,isSet:Rm,isString:el,isSymbol:pr,isTypedArray:Ec,isUndefined:oi,isWeakMap:XE,isWeakSet:UE,lt:ow,lte:aw,toArray:Uv,toFinite:Tr,toInteger:We,toLength:Pv,toNumber:hr,toPlainObject:Dm,toSafeInteger:vC,toString:gt},Vt={add:Um,ceil:fb,divide:Kb,floor:Ox,max:dw,maxBy:hw,mean:vw,meanBy:gw,min:_w,minBy:bw,multiply:xw,round:JA,subtract:HS,sum:WS,sumBy:$S},tf={clamp:vb,inRange:Jx,random:DA},De={assign:lt,assignIn:Uf,assignInWith:as,assignWith:U_,at:G_,create:kb,defaults:Hb,defaultsDeep:Wb,entries:rr,entriesIn:Zf,extend:Uf,extendWith:as,findKey:mx,findLastKey:bx,forIn:kx,forInRight:Ix,forOwn:Bx,forOwnRight:jx,functions:Fx,functionsIn:Hx,get:ua,has:ss,hasIn:Lm,invert:cE,invertBy:hE,invoke:pE,keys:on,keysIn:vr,mapKeys:$v,mapValues:sw,merge:Li,mergeWith:Ev,omit:Dw,omitBy:Lw,pick:ei,pickBy:Yv,result:KA,set:Bp,setWith:iS,toPairs:rr,toPairsIn:Zf,transform:yC,unset:$C,update:zC,updateWith:UC,values:eo,valuesIn:YC},ar={at:qC,chain:mv,commit:xb,lodash:m,next:Cw,plant:mA,reverse:JC,tap:VS,thru:ga,toIterator:dC,toJSON:zl,value:zl,valueOf:zl,wrapperChain:ZC},ut={camelCase:lb,capitalize:nv,deburr:rv,endsWith:tx,escape:Tv,escapeRegExp:cx,kebabCase:ZE,lowerCase:rw,lowerFirst:iw,pad:uA,padEnd:cA,padStart:fA,parseInt:pA,repeat:UA,replace:GA,snakeCase:dS,split:PS,startCase:kS,startsWith:IS,template:lC,templateSettings:Au,toLower:hC,toUpper:gC,trim:mC,trimEnd:_C,trimStart:xC,truncate:SC,unescape:NC,upperCase:GC,upperFirst:Nc,words:yv},ht={attempt:Yp,bindAll:J_,cond:Sb,conforms:Tb,constant:Cp,defaultTo:jb,flow:Dx,flowRight:Lx,identity:An,iteratee:YE,matches:uw,matchesProperty:fw,method:yw,methodOf:mw,mixin:zv,noop:Pi,nthArg:Tw,over:Fw,overEvery:Xw,overSome:zw,property:km,propertyOf:_A,range:BA,rangeRight:jA,stubArray:Im,stubFalse:Pp,stubObject:BS,stubString:jS,stubTrue:FS,times:fC,toPath:pC,uniqueId:WC};function sO(){var n=new qe(this.__wrapped__);return n.__actions__=yn(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=yn(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=yn(this.__views__),n}function lO(){if(this.__filtered__){var n=new qe(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}var uO=Math.max,cO=Math.min;function fO(n,e,t){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=o.size;switch(o.type){case"drop":n+=a;break;case"dropRight":e-=a;break;case"take":e=cO(e,n+a);break;case"takeRight":n=uO(n,e-a);break}}return{start:n,end:e}}var dO=1,hO=2,pO=Math.min;function vO(){var n=this.__wrapped__.value(),e=this.__dir__,t=dt(n),r=e<0,i=t?n.length:0,o=fO(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,f=c.length,d=0,h=pO(l,this.__takeCount__);if(!t||!r&&i==l&&h==l)return fg(n,this.__actions__);var v=[];e:for(;l--&&d<h;){u+=e;for(var p=-1,g=n[u];++p<f;){var y=c[p],b=y.iteratee,C=y.type,D=b(g);if(C==hO)g=D;else if(!D){if(C==dO)continue e;break e}}v[d++]=g}return v}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var gO="4.17.21",yO=2,mO=1,_O=3,mg=4294967295,bO=Array.prototype,xO=Object.prototype,_g=xO.hasOwnProperty,ld=rs?rs.iterator:void 0,EO=Math.max,ud=Math.min,nf=function(n){return function(e,t,r){if(r==null){var i=tr(t),o=i&&on(t),a=o&&o.length&&fl(t,o);(a?a.length:i)||(r=t,t=e,e=this)}return n(e,t,r)}}(zv);m.after=At.after;m.ary=At.ary;m.assign=De.assign;m.assignIn=De.assignIn;m.assignInWith=De.assignInWith;m.assignWith=De.assignWith;m.at=De.at;m.before=At.before;m.bind=At.bind;m.bindAll=ht.bindAll;m.bindKey=At.bindKey;m.castArray=Se.castArray;m.chain=ar.chain;m.chunk=se.chunk;m.compact=se.compact;m.concat=se.concat;m.cond=ht.cond;m.conforms=ht.conforms;m.constant=ht.constant;m.countBy=mt.countBy;m.create=De.create;m.curry=At.curry;m.curryRight=At.curryRight;m.debounce=At.debounce;m.defaults=De.defaults;m.defaultsDeep=De.defaultsDeep;m.defer=At.defer;m.delay=At.delay;m.difference=se.difference;m.differenceBy=se.differenceBy;m.differenceWith=se.differenceWith;m.drop=se.drop;m.dropRight=se.dropRight;m.dropRightWhile=se.dropRightWhile;m.dropWhile=se.dropWhile;m.fill=se.fill;m.filter=mt.filter;m.flatMap=mt.flatMap;m.flatMapDeep=mt.flatMapDeep;m.flatMapDepth=mt.flatMapDepth;m.flatten=se.flatten;m.flattenDeep=se.flattenDeep;m.flattenDepth=se.flattenDepth;m.flip=At.flip;m.flow=ht.flow;m.flowRight=ht.flowRight;m.fromPairs=se.fromPairs;m.functions=De.functions;m.functionsIn=De.functionsIn;m.groupBy=mt.groupBy;m.initial=se.initial;m.intersection=se.intersection;m.intersectionBy=se.intersectionBy;m.intersectionWith=se.intersectionWith;m.invert=De.invert;m.invertBy=De.invertBy;m.invokeMap=mt.invokeMap;m.iteratee=ht.iteratee;m.keyBy=mt.keyBy;m.keys=on;m.keysIn=De.keysIn;m.map=mt.map;m.mapKeys=De.mapKeys;m.mapValues=De.mapValues;m.matches=ht.matches;m.matchesProperty=ht.matchesProperty;m.memoize=At.memoize;m.merge=De.merge;m.mergeWith=De.mergeWith;m.method=ht.method;m.methodOf=ht.methodOf;m.mixin=nf;m.negate=va;m.nthArg=ht.nthArg;m.omit=De.omit;m.omitBy=De.omitBy;m.once=At.once;m.orderBy=mt.orderBy;m.over=ht.over;m.overArgs=At.overArgs;m.overEvery=ht.overEvery;m.overSome=ht.overSome;m.partial=At.partial;m.partialRight=At.partialRight;m.partition=mt.partition;m.pick=De.pick;m.pickBy=De.pickBy;m.property=ht.property;m.propertyOf=ht.propertyOf;m.pull=se.pull;m.pullAll=se.pullAll;m.pullAllBy=se.pullAllBy;m.pullAllWith=se.pullAllWith;m.pullAt=se.pullAt;m.range=ht.range;m.rangeRight=ht.rangeRight;m.rearg=At.rearg;m.reject=mt.reject;m.remove=se.remove;m.rest=At.rest;m.reverse=se.reverse;m.sampleSize=mt.sampleSize;m.set=De.set;m.setWith=De.setWith;m.shuffle=mt.shuffle;m.slice=se.slice;m.sortBy=mt.sortBy;m.sortedUniq=se.sortedUniq;m.sortedUniqBy=se.sortedUniqBy;m.split=ut.split;m.spread=At.spread;m.tail=se.tail;m.take=se.take;m.takeRight=se.takeRight;m.takeRightWhile=se.takeRightWhile;m.takeWhile=se.takeWhile;m.tap=ar.tap;m.throttle=At.throttle;m.thru=ga;m.toArray=Se.toArray;m.toPairs=De.toPairs;m.toPairsIn=De.toPairsIn;m.toPath=ht.toPath;m.toPlainObject=Se.toPlainObject;m.transform=De.transform;m.unary=At.unary;m.union=se.union;m.unionBy=se.unionBy;m.unionWith=se.unionWith;m.uniq=se.uniq;m.uniqBy=se.uniqBy;m.uniqWith=se.uniqWith;m.unset=De.unset;m.unzip=se.unzip;m.unzipWith=se.unzipWith;m.update=De.update;m.updateWith=De.updateWith;m.values=De.values;m.valuesIn=De.valuesIn;m.without=se.without;m.words=ut.words;m.wrap=At.wrap;m.xor=se.xor;m.xorBy=se.xorBy;m.xorWith=se.xorWith;m.zip=se.zip;m.zipObject=se.zipObject;m.zipObjectDeep=se.zipObjectDeep;m.zipWith=se.zipWith;m.entries=De.toPairs;m.entriesIn=De.toPairsIn;m.extend=De.assignIn;m.extendWith=De.assignInWith;nf(m,m);m.add=Vt.add;m.attempt=ht.attempt;m.camelCase=ut.camelCase;m.capitalize=ut.capitalize;m.ceil=Vt.ceil;m.clamp=tf.clamp;m.clone=Se.clone;m.cloneDeep=Se.cloneDeep;m.cloneDeepWith=Se.cloneDeepWith;m.cloneWith=Se.cloneWith;m.conformsTo=Se.conformsTo;m.deburr=ut.deburr;m.defaultTo=ht.defaultTo;m.divide=Vt.divide;m.endsWith=ut.endsWith;m.eq=Se.eq;m.escape=ut.escape;m.escapeRegExp=ut.escapeRegExp;m.every=mt.every;m.find=mt.find;m.findIndex=se.findIndex;m.findKey=De.findKey;m.findLast=mt.findLast;m.findLastIndex=se.findLastIndex;m.findLastKey=De.findLastKey;m.floor=Vt.floor;m.forEach=mt.forEach;m.forEachRight=mt.forEachRight;m.forIn=De.forIn;m.forInRight=De.forInRight;m.forOwn=De.forOwn;m.forOwnRight=De.forOwnRight;m.get=De.get;m.gt=Se.gt;m.gte=Se.gte;m.has=De.has;m.hasIn=De.hasIn;m.head=se.head;m.identity=An;m.includes=mt.includes;m.indexOf=se.indexOf;m.inRange=tf.inRange;m.invoke=De.invoke;m.isArguments=Se.isArguments;m.isArray=dt;m.isArrayBuffer=Se.isArrayBuffer;m.isArrayLike=Se.isArrayLike;m.isArrayLikeObject=Se.isArrayLikeObject;m.isBoolean=Se.isBoolean;m.isBuffer=Se.isBuffer;m.isDate=Se.isDate;m.isElement=Se.isElement;m.isEmpty=Se.isEmpty;m.isEqual=Se.isEqual;m.isEqualWith=Se.isEqualWith;m.isError=Se.isError;m.isFinite=Se.isFinite;m.isFunction=Se.isFunction;m.isInteger=Se.isInteger;m.isLength=Se.isLength;m.isMap=Se.isMap;m.isMatch=Se.isMatch;m.isMatchWith=Se.isMatchWith;m.isNaN=Se.isNaN;m.isNative=Se.isNative;m.isNil=Se.isNil;m.isNull=Se.isNull;m.isNumber=Se.isNumber;m.isObject=tr;m.isObjectLike=Se.isObjectLike;m.isPlainObject=Se.isPlainObject;m.isRegExp=Se.isRegExp;m.isSafeInteger=Se.isSafeInteger;m.isSet=Se.isSet;m.isString=Se.isString;m.isSymbol=Se.isSymbol;m.isTypedArray=Se.isTypedArray;m.isUndefined=Se.isUndefined;m.isWeakMap=Se.isWeakMap;m.isWeakSet=Se.isWeakSet;m.join=se.join;m.kebabCase=ut.kebabCase;m.last=nn;m.lastIndexOf=se.lastIndexOf;m.lowerCase=ut.lowerCase;m.lowerFirst=ut.lowerFirst;m.lt=Se.lt;m.lte=Se.lte;m.max=Vt.max;m.maxBy=Vt.maxBy;m.mean=Vt.mean;m.meanBy=Vt.meanBy;m.min=Vt.min;m.minBy=Vt.minBy;m.stubArray=ht.stubArray;m.stubFalse=ht.stubFalse;m.stubObject=ht.stubObject;m.stubString=ht.stubString;m.stubTrue=ht.stubTrue;m.multiply=Vt.multiply;m.nth=se.nth;m.noop=ht.noop;m.now=aO.now;m.pad=ut.pad;m.padEnd=ut.padEnd;m.padStart=ut.padStart;m.parseInt=ut.parseInt;m.random=tf.random;m.reduce=mt.reduce;m.reduceRight=mt.reduceRight;m.repeat=ut.repeat;m.replace=ut.replace;m.result=De.result;m.round=Vt.round;m.sample=mt.sample;m.size=mt.size;m.snakeCase=ut.snakeCase;m.some=mt.some;m.sortedIndex=se.sortedIndex;m.sortedIndexBy=se.sortedIndexBy;m.sortedIndexOf=se.sortedIndexOf;m.sortedLastIndex=se.sortedLastIndex;m.sortedLastIndexBy=se.sortedLastIndexBy;m.sortedLastIndexOf=se.sortedLastIndexOf;m.startCase=ut.startCase;m.startsWith=ut.startsWith;m.subtract=Vt.subtract;m.sum=Vt.sum;m.sumBy=Vt.sumBy;m.template=ut.template;m.times=ht.times;m.toFinite=Se.toFinite;m.toInteger=We;m.toLength=Se.toLength;m.toLower=ut.toLower;m.toNumber=Se.toNumber;m.toSafeInteger=Se.toSafeInteger;m.toString=Se.toString;m.toUpper=ut.toUpper;m.trim=ut.trim;m.trimEnd=ut.trimEnd;m.trimStart=ut.trimStart;m.truncate=ut.truncate;m.unescape=ut.unescape;m.uniqueId=ht.uniqueId;m.upperCase=ut.upperCase;m.upperFirst=ut.upperFirst;m.each=mt.forEach;m.eachRight=mt.forEachRight;m.first=se.head;nf(m,function(){var n={};return gr(m,function(e,t){_g.call(m.prototype,t)||(n[t]=e)}),n}(),{chain:!1});m.VERSION=gO;(m.templateSettings=ut.templateSettings).imports._=m;Xn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){m[n].placeholder=m});Xn(["drop","take"],function(n,e){qe.prototype[n]=function(t){t=t===void 0?1:EO(We(t),0);var r=this.__filtered__&&!e?new qe(this):this.clone();return r.__filtered__?r.__takeCount__=ud(t,r.__takeCount__):r.__views__.push({size:ud(t,mg),type:n+(r.__dir__<0?"Right":"")}),r},qe.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}});Xn(["filter","map","takeWhile"],function(n,e){var t=e+1,r=t==mO||t==_O;qe.prototype[n]=function(i){var o=this.clone();return o.__iteratees__.push({iteratee:Fe(i),type:t}),o.__filtered__=o.__filtered__||r,o}});Xn(["head","last"],function(n,e){var t="take"+(e?"Right":"");qe.prototype[n]=function(){return this[t](1).value()[0]}});Xn(["initial","tail"],function(n,e){var t="drop"+(e?"":"Right");qe.prototype[n]=function(){return this.__filtered__?new qe(this):this[t](1)}});qe.prototype.compact=function(){return this.filter(An)};qe.prototype.find=function(n){return this.filter(n).head()};qe.prototype.findLast=function(n){return this.reverse().find(n)};qe.prototype.invokeMap=Ye(function(n,e){return typeof n=="function"?new qe(this):this.map(function(t){return pa(t,n,e)})});qe.prototype.reject=function(n){return this.filter(va(Fe(n)))};qe.prototype.slice=function(n,e){n=We(n);var t=this;return t.__filtered__&&(n>0||e<0)?new qe(t):(n<0?t=t.takeRight(-n):n&&(t=t.drop(n)),e!==void 0&&(e=We(e),t=e<0?t.dropRight(-e):t.take(e-n)),t)};qe.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()};qe.prototype.toArray=function(){return this.take(mg)};gr(qe.prototype,function(n,e){var t=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=m[r?"take"+(e=="last"?"Right":""):e],o=r||/^find/.test(e);i&&(m.prototype[e]=function(){var a=this.__wrapped__,s=r?[1]:arguments,l=a instanceof qe,u=s[0],c=l||dt(a),f=function(y){var b=i.apply(m,fa([y],s));return r&&d?b[0]:b};c&&t&&typeof u=="function"&&u.length!=1&&(l=c=!1);var d=this.__chain__,h=!!this.__actions__.length,v=o&&!d,p=l&&!h;if(!o&&c){a=p?a:new qe(this);var g=n.apply(a,s);return g.__actions__.push({func:ga,args:[f],thisArg:void 0}),new xn(g,d)}return v&&p?n.apply(this,s):(g=this.thru(f),v?r?g.value()[0]:g.value():g)})});Xn(["pop","push","shift","sort","splice","unshift"],function(n){var e=bO[n],t=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);m.prototype[n]=function(){var i=arguments;if(r&&!this.__chain__){var o=this.value();return e.apply(dt(o)?o:[],i)}return this[t](function(a){return e.apply(dt(a)?a:[],i)})}});gr(qe.prototype,function(n,e){var t=m[e];if(t){var r=t.name+"";_g.call(Ri,r)||(Ri[r]=[]),Ri[r].push({name:e,func:t})}});Ri[sl(void 0,yO).name]=[{name:"wrapper",func:void 0}];qe.prototype.clone=sO;qe.prototype.reverse=lO;qe.prototype.value=vO;m.prototype.at=ar.at;m.prototype.chain=ar.wrapperChain;m.prototype.commit=ar.commit;m.prototype.next=ar.next;m.prototype.plant=ar.plant;m.prototype.reverse=ar.reverse;m.prototype.toJSON=m.prototype.valueOf=m.prototype.value=ar.value;m.prototype.first=m.prototype.head;ld&&(m.prototype[ld]=ar.toIterator);var yl,xe,bg,Kr,cd,xg,Su,Yo={},Eg=[],wO=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ml=Array.isArray;function Ar(n,e){for(var t in e)n[t]=e[t];return n}function wg(n){var e=n.parentNode;e&&e.removeChild(n)}function be(n,e,t){var r,i,o,a={};for(o in e)o=="key"?r=e[o]:o=="ref"?i=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?yl.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)a[o]===void 0&&(a[o]=n.defaultProps[o]);return Va(n,a,r,i,null)}function Va(n,e,t,r,i){var o={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i==null?++bg:i,__i:-1,__u:0};return i==null&&xe.vnode!=null&&xe.vnode(o),o}function _l(){return{current:null}}function ki(n){return n.children}function Ue(n,e){this.props=n,this.context=e}function Ii(n,e){if(e==null)return n.__?Ii(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Ii(n):null}function Ag(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Ag(n)}}function fd(n){(!n.__d&&(n.__d=!0)&&Kr.push(n)&&!cs.__r++||cd!==xe.debounceRendering)&&((cd=xe.debounceRendering)||xg)(cs)}function cs(){var n,e,t,r,i,o,a,s,l;for(Kr.sort(Su);n=Kr.shift();)n.__d&&(e=Kr.length,r=void 0,o=(i=(t=n).__v).__e,s=[],l=[],(a=t.__P)&&((r=Ar({},i)).__v=i.__v+1,xe.vnode&&xe.vnode(r),rf(a,r,i,t.__n,a.ownerSVGElement!==void 0,32&i.__u?[o]:null,s,o==null?Ii(i):o,!!(32&i.__u),l),r.__.__k[r.__i]=r,Og(s,r,l),r.__e!=o&&Ag(r)),Kr.length>e&&Kr.sort(Su));cs.__r=0}function Sg(n,e,t,r,i,o,a,s,l,u,c){var f,d,h,v,p,g=r&&r.__k||Eg,y=e.length;for(t.__d=l,AO(t,e,g),l=t.__d,f=0;f<y;f++)(h=t.__k[f])!=null&&typeof h!="boolean"&&typeof h!="function"&&(d=h.__i===-1?Yo:g[h.__i]||Yo,h.__i=f,rf(n,h,d,i,o,a,s,l,u,c),v=h.__e,h.ref&&d.ref!=h.ref&&(d.ref&&of(d.ref,null,h),c.push(h.ref,h.__c||v,h)),p==null&&v!=null&&(p=v),65536&h.__u||d.__k===h.__k?l=Cg(h,l,n):typeof h.type=="function"&&h.__d!==void 0?l=h.__d:v&&(l=v.nextSibling),h.__d=void 0,h.__u&=-196609);t.__d=l,t.__e=p}function AO(n,e,t){var r,i,o,a,s,l=e.length,u=t.length,c=u,f=0;for(n.__k=[],r=0;r<l;r++)(i=n.__k[r]=(i=e[r])==null||typeof i=="boolean"||typeof i=="function"?null:typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?Va(null,i,null,null,i):ml(i)?Va(ki,{children:i},null,null,null):i.__b>0?Va(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)!=null?(i.__=n,i.__b=n.__b+1,s=SO(i,t,a=r+f,c),i.__i=s,o=null,s!==-1&&(c--,(o=t[s])&&(o.__u|=131072)),o==null||o.__v===null?(s==-1&&f--,typeof i.type!="function"&&(i.__u|=65536)):s!==a&&(s===a+1?f++:s>a?c>l-a?f+=s-a:f--:f=s<a&&s==a-1?s-a:0,s!==r+f&&(i.__u|=65536))):(o=t[r])&&o.key==null&&o.__e&&(o.__e==n.__d&&(n.__d=Ii(o)),Cu(o,o,!1),t[r]=null,c--);if(c)for(r=0;r<u;r++)(o=t[r])!=null&&!(131072&o.__u)&&(o.__e==n.__d&&(n.__d=Ii(o)),Cu(o,o))}function Cg(n,e,t){var r,i;if(typeof n.type=="function"){for(r=n.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=n,e=Cg(r[i],e,t));return e}return n.__e!=e&&(t.insertBefore(n.__e,e||null),e=n.__e),e&&e.nextSibling}function fs(n,e){return e=e||[],n==null||typeof n=="boolean"||(ml(n)?n.some(function(t){fs(t,e)}):e.push(n)),e}function SO(n,e,t,r){var i=n.key,o=n.type,a=t-1,s=t+1,l=e[t];if(l===null||l&&i==l.key&&o===l.type)return t;if(r>(l!=null&&!(131072&l.__u)?1:0))for(;a>=0||s<e.length;){if(a>=0){if((l=e[a])&&!(131072&l.__u)&&i==l.key&&o===l.type)return a;a--}if(s<e.length){if((l=e[s])&&!(131072&l.__u)&&i==l.key&&o===l.type)return s;s++}}return-1}function dd(n,e,t){e[0]==="-"?n.setProperty(e,t==null?"":t):n[e]=t==null?"":typeof t!="number"||wO.test(e)?t:t+"px"}function wa(n,e,t,r,i){var o;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||dd(n.style,e,"");if(t)for(e in t)r&&t[e]===r[e]||dd(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=t,t?r?t.u=r.u:(t.u=Date.now(),n.addEventListener(e,o?pd:hd,o)):n.removeEventListener(e,o?pd:hd,o);else{if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in n)try{n[e]=t==null?"":t;break e}catch(a){}typeof t=="function"||(t==null||t===!1&&e[4]!=="-"?n.removeAttribute(e):n.setAttribute(e,t))}}function hd(n){var e=this.l[n.type+!1];if(n.t){if(n.t<=e.u)return}else n.t=Date.now();return e(xe.event?xe.event(n):n)}function pd(n){return this.l[n.type+!0](xe.event?xe.event(n):n)}function rf(n,e,t,r,i,o,a,s,l,u){var c,f,d,h,v,p,g,y,b,C,D,B,R,A,O,F=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(l=!!(32&t.__u),o=[s=e.__e=t.__e]),(c=xe.__b)&&c(e);e:if(typeof F=="function")try{if(y=e.props,b=(c=F.contextType)&&r[c.__c],C=c?b?b.props.value:c.__:r,t.__c?g=(f=e.__c=t.__c).__=f.__E:("prototype"in F&&F.prototype.render?e.__c=f=new F(y,C):(e.__c=f=new Ue(y,C),f.constructor=F,f.render=OO),b&&b.sub(f),f.props=y,f.state||(f.state={}),f.context=C,f.__n=r,d=f.__d=!0,f.__h=[],f._sb=[]),f.__s==null&&(f.__s=f.state),F.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=Ar({},f.__s)),Ar(f.__s,F.getDerivedStateFromProps(y,f.__s))),h=f.props,v=f.state,f.__v=e,d)F.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(F.getDerivedStateFromProps==null&&y!==h&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(y,C),!f.__e&&(f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(y,f.__s,C)===!1||e.__v===t.__v)){for(e.__v!==t.__v&&(f.props=y,f.state=f.__s,f.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(Z){Z&&(Z.__=e)}),D=0;D<f._sb.length;D++)f.__h.push(f._sb[D]);f._sb=[],f.__h.length&&a.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(y,f.__s,C),f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(h,v,p)})}if(f.context=C,f.props=y,f.__P=n,f.__e=!1,B=xe.__r,R=0,"prototype"in F&&F.prototype.render){for(f.state=f.__s,f.__d=!1,B&&B(e),c=f.render(f.props,f.state,f.context),A=0;A<f._sb.length;A++)f.__h.push(f._sb[A]);f._sb=[]}else do f.__d=!1,B&&B(e),c=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++R<25);f.state=f.__s,f.getChildContext!=null&&(r=Ar(Ar({},r),f.getChildContext())),d||f.getSnapshotBeforeUpdate==null||(p=f.getSnapshotBeforeUpdate(h,v)),Sg(n,ml(O=c!=null&&c.type===ki&&c.key==null?c.props.children:c)?O:[O],e,t,r,i,o,a,s,l,u),f.base=e.__e,e.__u&=-161,f.__h.length&&a.push(f),g&&(f.__E=f.__=null)}catch(Z){e.__v=null,l||o!=null?(e.__e=s,e.__u|=l?160:32,o[o.indexOf(s)]=null):(e.__e=t.__e,e.__k=t.__k),xe.__e(Z,e,t)}else o==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=CO(t.__e,e,t,r,i,o,a,l,u);(c=xe.diffed)&&c(e)}function Og(n,e,t){e.__d=void 0;for(var r=0;r<t.length;r++)of(t[r],t[++r],t[++r]);xe.__c&&xe.__c(e,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(o){o.call(i)})}catch(o){xe.__e(o,i.__v)}})}function CO(n,e,t,r,i,o,a,s,l){var u,c,f,d,h,v,p,g=t.props,y=e.props,b=e.type;if(b==="svg"&&(i=!0),o!=null){for(u=0;u<o.length;u++)if((h=o[u])&&"setAttribute"in h==!!b&&(b?h.localName===b:h.nodeType===3)){n=h,o[u]=null;break}}if(n==null){if(b===null)return document.createTextNode(y);n=i?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,y.is&&y),o=null,s=!1}if(b===null)g===y||s&&n.data===y||(n.data=y);else{if(o=o&&yl.call(n.childNodes),g=t.props||Yo,!s&&o!=null)for(g={},u=0;u<n.attributes.length;u++)g[(h=n.attributes[u]).name]=h.value;for(u in g)h=g[u],u=="children"||(u=="dangerouslySetInnerHTML"?f=h:u==="key"||u in y||wa(n,u,null,h,i));for(u in y)h=y[u],u=="children"?d=h:u=="dangerouslySetInnerHTML"?c=h:u=="value"?v=h:u=="checked"?p=h:u==="key"||s&&typeof h!="function"||g[u]===h||wa(n,u,h,g[u],i);if(c)s||f&&(c.__html===f.__html||c.__html===n.innerHTML)||(n.innerHTML=c.__html),e.__k=[];else if(f&&(n.innerHTML=""),Sg(n,ml(d)?d:[d],e,t,r,i&&b!=="foreignObject",o,a,o?o[0]:t.__k&&Ii(t,0),s,l),o!=null)for(u=o.length;u--;)o[u]!=null&&wg(o[u]);s||(u="value",v!==void 0&&(v!==n[u]||b==="progress"&&!v||b==="option"&&v!==g[u])&&wa(n,u,v,g[u],!1),u="checked",p!==void 0&&p!==n[u]&&wa(n,u,p,g[u],!1))}return n}function of(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(r){xe.__e(r,t)}}function Cu(n,e,t){var r,i;if(xe.unmount&&xe.unmount(n),(r=n.ref)&&(r.current&&r.current!==n.__e||of(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){xe.__e(o,e)}r.base=r.__P=null,n.__c=void 0}if(r=n.__k)for(i=0;i<r.length;i++)r[i]&&Cu(r[i],e,t||typeof n.type!="function");t||n.__e==null||wg(n.__e),n.__=n.__e=n.__d=void 0}function OO(n,e,t){return this.constructor(n,t)}function TO(n,e,t){var r,i,o,a;xe.__&&xe.__(n,e),i=(r=typeof t=="function")?null:e.__k,o=[],a=[],rf(e,n=(!r&&t||e).__k=be(ki,null,[n]),i||Yo,Yo,e.ownerSVGElement!==void 0,!r&&t?[t]:i?null:e.firstChild?yl.call(e.childNodes):null,o,!r&&t?t:i?i.__e:e.firstChild,r,a),Og(o,n,a)}yl=Eg.slice,xe={__e:function(n,e,t,r){for(var i,o,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(n)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,r||{}),a=i.__d),a)return i.__E=i}catch(s){n=s}throw n}},bg=0,Ue.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ar({},this.state),typeof n=="function"&&(n=n(Ar({},t),this.props)),n&&Ar(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),fd(this))},Ue.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),fd(this))},Ue.prototype.render=ki,Kr=[],xg=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Su=function(n,e){return n.__v.__b-e.__v.__b},cs.__r=0;var MO={},NO="An invariant failed, however the error is obfuscated because this is a production build.",ds=[];Object.freeze(ds);var af={};Object.freeze(af);function rn(){return++le.mobxGuid}function tt(n){throw ni(!1,n),"X"}function ni(n,e){if(!n)throw new Error("[mobx] "+(e||NO))}function Tg(n){var e=!1;return function(){if(!e)return e=!0,n.apply(this,arguments)}}var Aa=function(){};function PO(n){var e=[];return n.forEach(function(t){e.indexOf(t)===-1&&e.push(t)}),e}function sf(n){return n!==null&&typeof n=="object"}function no(n){if(n===null||typeof n!="object")return!1;var e=Object.getPrototypeOf(n);return e===Object.prototype||e===null}function RO(n){if(io(n)||an(n))return n;if(Array.isArray(n))return new Map(n);if(no(n)){var e=new Map;for(var t in n)e.set(t,n[t]);return e}else return tt("Cannot convert to map from '"+n+"'")}function ro(n,e,t){Object.defineProperty(n,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function DO(n,e,t){Object.defineProperty(n,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function LO(n,e){var t=Object.getOwnPropertyDescriptor(n,e);return!t||t.configurable!==!1&&t.writable!==!1}function jr(n,e){var t="isMobX"+n;return e.prototype[t]=!0,function(r){return sf(r)&&r[t]===!0}}function io(n){return n instanceof Map}function ya(n){return n instanceof Set}function Mg(n){var e=new Set;for(var t in n)e.add(t);return Object.getOwnPropertySymbols(n).forEach(function(r){Object.getOwnPropertyDescriptor(n,r).enumerable&&e.add(r)}),Array.from(e)}function Sr(n){return n&&n.toString?n.toString():new String(n).toString()}function Ng(n){return n===null?null:typeof n=="object"?""+n:n}var kO=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,Pe=Symbol("mobx administration"),oo=function(){function n(e){e===void 0&&(e="Atom@"+rn()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=at.NOT_TRACKING}return n.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(e){return e()})},n.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(e){return e()})},n.prototype.reportObserved=function(){return Wg(this)},n.prototype.reportChanged=function(){In(),o1(this),Bn()},n.prototype.toString=function(){return this.name},n}(),lf=jr("Atom",oo);function uf(n,e,t){e===void 0&&(e=Aa),t===void 0&&(t=Aa);var r=new oo(n);return e!==Aa&&m1(r,e),t!==Aa&&Yg(r,t),r}function IO(n,e){return n===e}function BO(n,e){return gf(n,e)}function jO(n,e){return gf(n,e,1)}function FO(n,e){return Object.is(n,e)}var Bi={identity:IO,structural:BO,default:FO,shallow:jO};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ou=function(n,e){return Ou=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Ou(n,e)};function HO(n,e){Ou(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var hs=function(){return hs=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},hs.apply(this,arguments)};function Zn(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function Oi(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o}function cf(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Oi(arguments[e]));return n}var ps=Symbol("mobx did run lazy initializers"),Co=Symbol("mobx pending decorators"),WO={},$O={};function XO(n,e){var t=e?WO:$O;return t[n]||(t[n]={configurable:!0,enumerable:e,get:function(){return ai(this),this[n]},set:function(r){ai(this),this[n]=r}})}function ai(n){var e,t;if(n[ps]!==!0){var r=n[Co];if(r){ro(n,ps,!0);var i=cf(Object.getOwnPropertySymbols(r),Object.keys(r));try{for(var o=Zn(i),a=o.next();!a.done;a=o.next()){var s=a.value,l=r[s];l.propertyCreator(n,l.prop,l.descriptor,l.decoratorTarget,l.decoratorArguments)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}}}function Pg(n,e){return function(){var r,i=function(a,s,l,u){if(u===!0)return e(a,s,l,a,r),null;if(!Object.prototype.hasOwnProperty.call(a,Co)){var c=a[Co];ro(a,Co,hs({},c))}return a[Co][s]={prop:s,propertyCreator:e,descriptor:l,decoratorTarget:a,decoratorArguments:r},XO(s,n)};return zO(arguments)?(r=ds,i.apply(null,arguments)):(r=Array.prototype.slice.call(arguments),i)}}function zO(n){return(n.length===2||n.length===3)&&(typeof n[1]=="string"||typeof n[1]=="symbol")||n.length===4&&n[3]===!0}function ma(n,e,t){return Wi(n)?n:Array.isArray(n)?$.array(n,{name:t}):no(n)?$.object(n,void 0,{name:t}):io(n)?$.map(n,{name:t}):ya(n)?$.set(n,{name:t}):n}function UO(n,e,t){return n==null||zn(n)||sr(n)||an(n)||wn(n)?n:Array.isArray(n)?$.array(n,{name:t,deep:!1}):no(n)?$.object(n,void 0,{name:t,deep:!1}):io(n)?$.map(n,{name:t,deep:!1}):ya(n)?$.set(n,{name:t,deep:!1}):tt(!1)}function bl(n){return n}function GO(n,e,t){return gf(n,e)?e:n}function xl(n){ni(n);var e=Pg(!0,function(r,i,o,a,s){var l=o?o.initializer?o.initializer.call(r):o.value:void 0;vf(r).addObservableProp(i,l,n)}),t=e;return t.enhancer=n,t}var Rg={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Rg);function Ci(n){return n==null?Rg:typeof n=="string"?{name:n,deep:!0,proxy:!0}:n}var ff=xl(ma),YO=xl(UO),Dg=xl(bl),VO=xl(GO);function Sa(n){return n.defaultDecorator?n.defaultDecorator.enhancer:n.deep===!1?bl:ma}function KO(n,e,t){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return ff.apply(null,arguments);if(Wi(n))return n;var r=no(n)?$.object(n,e,t):Array.isArray(n)?$.array(n,e):io(n)?$.map(n,e):ya(n)?$.set(n,e):n;if(r!==n)return r;tt(!1)}var vd={box:function(n,e){arguments.length>2&&go("box");var t=Ci(e);return new ii(n,Sa(t),t.name,!0,t.equals)},array:function(n,e){arguments.length>2&&go("array");var t=Ci(e);return D1(n,Sa(t),t.name)},map:function(n,e){arguments.length>2&&go("map");var t=Ci(e);return new pf(n,Sa(t),t.name)},set:function(n,e){arguments.length>2&&go("set");var t=Ci(e);return new ty(n,Sa(t),t.name)},object:function(n,e,t){typeof arguments[1]=="string"&&go("object");var r=Ci(t);if(r.proxy===!1)return Du({},n,e,r);var i=Kg(r),o=Du({},void 0,void 0,r),a=N1(o);return qg(a,n,e,i),a},ref:Dg,shallow:YO,deep:ff,struct:VO},$=KO;Object.keys(vd).forEach(function(n){return $[n]=vd[n]});function go(n){tt("Expected one or two arguments to observable."+n+". Did you accidentally try to use observable."+n+" as decorator?")}var vs=Pg(!1,function(n,e,t,r,i){var o=t.get,a=t.set,s=i[0]||{};vf(n).addComputedProp(n,e,hs({get:o,set:a,context:n},s))}),qO=vs({equals:Bi.structural}),vt=function(e,t,r){if(typeof t=="string"||e!==null&&typeof e=="object"&&arguments.length===1)return vs.apply(null,arguments);var i=typeof t=="object"?t:{};return i.get=e,i.set=typeof t=="function"?t:i.set,i.name=i.name||e.name||"",new Fi(i)};vt.struct=qO;var at;(function(n){n[n.NOT_TRACKING=-1]="NOT_TRACKING",n[n.UP_TO_DATE=0]="UP_TO_DATE",n[n.POSSIBLY_STALE=1]="POSSIBLY_STALE",n[n.STALE=2]="STALE"})(at||(at={}));var Jn;(function(n){n[n.NONE=0]="NONE",n[n.LOG=1]="LOG",n[n.BREAK=2]="BREAK"})(Jn||(Jn={}));var gs=function(){function n(e){this.cause=e}return n}();function Oo(n){return n instanceof gs}function Tu(n){switch(n.dependenciesState){case at.UP_TO_DATE:return!1;case at.NOT_TRACKING:case at.STALE:return!0;case at.POSSIBLY_STALE:{for(var e=df(!0),t=ao(),r=n.observing,i=r.length,o=0;o<i;o++){var a=r[o];if(Hi(a)){if(le.disableErrorBoundaries)a.get();else try{a.get()}catch(s){return Mr(t),No(e),!0}if(n.dependenciesState===at.STALE)return Mr(t),No(e),!0}}return Ig(n),Mr(t),No(e),!1}}}function ji(n){var e=n.observers.size>0;le.computationDepth>0&&e&&tt(!1),!le.allowStateChanges&&(e||le.enforceActions==="strict")&&tt(!1)}function Lg(n,e,t){var r=df(!0);Ig(n),n.newObserving=new Array(n.observing.length+100),n.unboundDepsCount=0,n.runId=++le.runId;var i=le.trackingDerivation;le.trackingDerivation=n;var o;if(le.disableErrorBoundaries===!0)o=e.call(t);else try{o=e.call(t)}catch(a){o=new gs(a)}return le.trackingDerivation=i,ZO(n),No(r),o}function ZO(n){for(var e=n.observing,t=n.observing=n.newObserving,r=at.UP_TO_DATE,i=0,o=n.unboundDepsCount,a=0;a<o;a++){var s=t[a];s.diffValue===0&&(s.diffValue=1,i!==a&&(t[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState)}for(t.length=i,n.newObserving=null,o=e.length;o--;){var s=e[o];s.diffValue===0&&Fg(s,n),s.diffValue=0}for(;i--;){var s=t[i];s.diffValue===1&&(s.diffValue=0,i1(s,n))}r!==at.UP_TO_DATE&&(n.dependenciesState=r,n.onBecomeStale())}function Mu(n){var e=n.observing;n.observing=[];for(var t=e.length;t--;)Fg(e[t],n);n.dependenciesState=at.NOT_TRACKING}function kg(n){var e=ao();try{return n()}finally{Mr(e)}}function ao(){var n=le.trackingDerivation;return le.trackingDerivation=null,n}function Mr(n){le.trackingDerivation=n}function df(n){var e=le.allowStateReads;return le.allowStateReads=n,e}function No(n){le.allowStateReads=n}function Ig(n){if(n.dependenciesState!==at.UP_TO_DATE){n.dependenciesState=at.UP_TO_DATE;for(var e=n.observing,t=e.length;t--;)e[t].lowestObserverState=at.UP_TO_DATE}}var ys=0,JO=1,gd=Object.getOwnPropertyDescriptor(function(){},"name");gd&&gd.configurable;function ri(n,e,t){var r=function(){return Bg(n,e,t||this,arguments)};return r.isMobxAction=!0,r}function Bg(n,e,t,r){var i=QO();try{return e.apply(t,r)}catch(o){throw i.error=o,o}finally{e1(i)}}function QO(n,e,t){var r=en(),i=0,o=ao();In();var a=El(!0),s=df(!0),l={prevDerivation:o,prevAllowStateChanges:a,prevAllowStateReads:s,notifySpy:r,startTime:i,actionId:JO++,parentActionId:ys};return ys=l.actionId,l}function e1(n){ys!==n.actionId&&tt("invalid action stack. did you forget to finish an action?"),ys=n.parentActionId,n.error!==void 0&&(le.suppressReactionErrors=!0),wl(n.prevAllowStateChanges),No(n.prevAllowStateReads),Bn(),Mr(n.prevDerivation),n.notifySpy,le.suppressReactionErrors=!1}function El(n){var e=le.allowStateChanges;return le.allowStateChanges=n,e}function wl(n){le.allowStateChanges=n}var ii=function(n){HO(e,n);function e(t,r,i,o,a){i===void 0&&(i="ObservableValue@"+rn()),o===void 0&&(o=!0),a===void 0&&(a=Bi.default);var s=n.call(this,i)||this;return s.enhancer=r,s.name=i,s.equals=a,s.hasUnreportedChange=!1,s.value=r(t,void 0,i),o&&en(),s}return e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.set=function(t){var r=this.value;if(t=this.prepareNewValue(t),t!==le.UNCHANGED){var i=en();this.setNewValue(t)}},e.prototype.prepareNewValue=function(t){if(ji(this),Qn(this)){var r=er(this,{object:this,type:"update",newValue:t});if(!r)return le.UNCHANGED;t=r.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?le.UNCHANGED:t},e.prototype.setNewValue=function(t){var r=this.value;this.value=t,this.reportChanged(),jn(this)&&Fn(this,{type:"update",object:this,newValue:t,oldValue:r})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return _a(this,t)},e.prototype.observe=function(t,r){return r&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),ba(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return Ng(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(oo),t1=jr("ObservableValue",ii),Fi=function(){function n(e){this.dependenciesState=at.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=at.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+rn(),this.value=new gs(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Jn.NONE,ni(e.get,"missing option for computed: get"),this.derivation=e.get,this.name=e.name||"ComputedValue@"+rn(),e.set&&(this.setter=ri(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?Bi.structural:Bi.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return n.prototype.onBecomeStale=function(){s1(this)},n.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(e){return e()})},n.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(e){return e()})},n.prototype.get=function(){this.isComputing&&tt("Cycle detected in computation "+this.name+": "+this.derivation),le.inBatch===0&&this.observers.size===0&&!this.keepAlive?Tu(this)&&(this.warnAboutUntrackedRead(),In(),this.value=this.computeValue(!1),Bn()):(Wg(this),Tu(this)&&this.trackAndCompute()&&a1(this));var e=this.value;if(Oo(e))throw e.cause;return e},n.prototype.peek=function(){var e=this.computeValue(!1);if(Oo(e))throw e.cause;return e},n.prototype.set=function(e){if(this.setter){ni(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else ni(!1,!1)},n.prototype.trackAndCompute=function(){var e=this.value,t=this.dependenciesState===at.NOT_TRACKING,r=this.computeValue(!0),i=t||Oo(e)||Oo(r)||!this.equals(e,r);return i&&(this.value=r),i},n.prototype.computeValue=function(e){this.isComputing=!0,le.computationDepth++;var t;if(e)t=Lg(this,this.derivation,this.scope);else if(le.disableErrorBoundaries===!0)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(r){t=new gs(r)}return le.computationDepth--,this.isComputing=!1,t},n.prototype.suspend=function(){this.keepAlive||(Mu(this),this.value=void 0)},n.prototype.observe=function(e,t){var r=this,i=!0,o=void 0;return v1(function(){var a=r.get();if(!i||t){var s=ao();e({type:"update",object:r,newValue:a,oldValue:o}),Mr(s)}i=!1,o=a})},n.prototype.warnAboutUntrackedRead=function(){},n.prototype.toJSON=function(){return this.get()},n.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},n.prototype.valueOf=function(){return Ng(this.get())},n.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},n}(),Hi=jr("ComputedValue",Fi),Ka=function(){function n(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return n}(),n1={};function Nu(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:n1}var qa=!0,jg=!1,le=function(){var n=Nu();return n.__mobxInstanceCount>0&&!n.__mobxGlobals&&(qa=!1),n.__mobxGlobals&&n.__mobxGlobals.version!==new Ka().version&&(qa=!1),qa?n.__mobxGlobals?(n.__mobxInstanceCount+=1,n.__mobxGlobals.UNCHANGED||(n.__mobxGlobals.UNCHANGED={}),n.__mobxGlobals):(n.__mobxInstanceCount=1,n.__mobxGlobals=new Ka):(setTimeout(function(){jg||tt("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Ka)}();function r1(){(le.pendingReactions.length||le.inBatch||le.isRunningReactions)&&tt("isolateGlobalState should be called before MobX is running any reactions"),jg=!0,qa&&(--Nu().__mobxInstanceCount===0&&(Nu().__mobxGlobals=void 0),le=new Ka)}function Pu(){return le}function i1(n,e){n.observers.add(e),n.lowestObserverState>e.dependenciesState&&(n.lowestObserverState=e.dependenciesState)}function Fg(n,e){n.observers.delete(e),n.observers.size===0&&Hg(n)}function Hg(n){n.isPendingUnobservation===!1&&(n.isPendingUnobservation=!0,le.pendingUnobservations.push(n))}function In(){le.inBatch++}function Bn(){if(--le.inBatch===0){zg();for(var n=le.pendingUnobservations,e=0;e<n.length;e++){var t=n[e];t.isPendingUnobservation=!1,t.observers.size===0&&(t.isBeingObserved&&(t.isBeingObserved=!1,t.onBecomeUnobserved()),t instanceof Fi&&t.suspend())}le.pendingUnobservations=[]}}function Wg(n){var e=le.trackingDerivation;return e!==null?(e.runId!==n.lastAccessedBy&&(n.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=n,n.isBeingObserved||(n.isBeingObserved=!0,n.onBecomeObserved())),!0):(n.observers.size===0&&le.inBatch>0&&Hg(n),!1)}function o1(n){n.lowestObserverState!==at.STALE&&(n.lowestObserverState=at.STALE,n.observers.forEach(function(e){e.dependenciesState===at.UP_TO_DATE&&(e.isTracing!==Jn.NONE&&$g(e,n),e.onBecomeStale()),e.dependenciesState=at.STALE}))}function a1(n){n.lowestObserverState!==at.STALE&&(n.lowestObserverState=at.STALE,n.observers.forEach(function(e){e.dependenciesState===at.POSSIBLY_STALE?e.dependenciesState=at.STALE:e.dependenciesState===at.UP_TO_DATE&&(n.lowestObserverState=at.UP_TO_DATE)}))}function s1(n){n.lowestObserverState===at.UP_TO_DATE&&(n.lowestObserverState=at.POSSIBLY_STALE,n.observers.forEach(function(e){e.dependenciesState===at.UP_TO_DATE&&(e.dependenciesState=at.POSSIBLY_STALE,e.isTracing!==Jn.NONE&&$g(e,n),e.onBecomeStale())}))}function $g(n,e){if(console.log("[mobx.trace] '"+n.name+"' is invalidated due to a change in: '"+e.name+"'"),n.isTracing===Jn.BREAK){var t=[];Xg(b1(n),t,1),new Function(`debugger;
/*
Tracing '`+n.name+`'

You are entering this break point because derivation '`+n.name+"' is being traced and '"+e.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(n instanceof Fi?n.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+t.join(`
`)+`
*/
    `)()}}function Xg(n,e,t){if(e.length>=1e3){e.push("(and many more)");return}e.push(""+new Array(t).join("	")+n.name),n.dependencies&&n.dependencies.forEach(function(r){return Xg(r,e,t+1)})}var Vo=function(){function n(e,t,r,i){e===void 0&&(e="Reaction@"+rn()),i===void 0&&(i=!1),this.name=e,this.onInvalidate=t,this.errorHandler=r,this.requiresObservable=i,this.observing=[],this.newObserving=[],this.dependenciesState=at.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+rn(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Jn.NONE}return n.prototype.onBecomeStale=function(){this.schedule()},n.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,le.pendingReactions.push(this),zg())},n.prototype.isScheduled=function(){return this._isScheduled},n.prototype.runReaction=function(){if(!this.isDisposed){if(In(),this._isScheduled=!1,Tu(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&en()}catch(e){this.reportExceptionInDerivation(e)}}Bn()}},n.prototype.track=function(e){if(!this.isDisposed){In(),this._isRunning=!0;var t=Lg(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Mu(this),Oo(t)&&this.reportExceptionInDerivation(t.cause),Bn()}},n.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler){this.errorHandler(e,this);return}if(le.disableErrorBoundaries)throw e;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";le.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(r,e),le.globalReactionErrorHandlers.forEach(function(i){return i(e,t)})},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(In(),Mu(this),Bn()))},n.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e[Pe]=this,e},n.prototype.toString=function(){return"Reaction["+this.name+"]"},n.prototype.trace=function(e){e===void 0&&(e=!1),O1(this,e)},n}(),yd=100,Ru=function(n){return n()};function zg(){le.inBatch>0||le.isRunningReactions||Ru(l1)}function l1(){le.isRunningReactions=!0;for(var n=le.pendingReactions,e=0;n.length>0;){++e===yd&&(console.error("Reaction doesn't converge to a stable state after "+yd+" iterations."+(" Probably there is a cycle in the reactive function: "+n[0])),n.splice(0));for(var t=n.splice(0),r=0,i=t.length;r<i;r++)t[r].runReaction()}le.isRunningReactions=!1}var ms=jr("Reaction",Vo);function u1(n){var e=Ru;Ru=function(t){return n(function(){return e(t)})}}function en(){return!1}function c1(n){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function f1(){tt(!1)}function md(n){return function(e,t,r){if(r){if(r.value)return{value:ri(n,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return ri(n,i.call(this))}}}return d1(n).apply(this,arguments)}}function d1(n){return function(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:function(){},set:function(i){ro(this,t,H(n,i))}})}}function h1(n,e,t,r){return r===!0?(Ul(n,e,t.value),null):t?{configurable:!0,enumerable:!1,get:function(){return Ul(this,e,t.value||t.initializer.call(this)),this[e]},set:f1}:{enumerable:!1,configurable:!0,set:function(i){Ul(this,e,i)},get:function(){}}}var H=function(e,t,r,i){if(arguments.length===1&&typeof e=="function")return ri(e.name||"<unnamed action>",e);if(arguments.length===2&&typeof t=="function")return ri(e,t);if(arguments.length===1&&typeof e=="string")return md(e);if(i===!0)ro(e,t,ri(e.name||t,r.value,this));else return md(t).apply(null,arguments)};H.bound=h1;function p1(n,e){var t=typeof n=="string"?n:n.name||"<unnamed action>",r=typeof n=="function"?n:e;return Bg(t,r,this,void 0)}function Ul(n,e,t){ro(n,e,ri(e,t.bind(n)))}function v1(n,e){e===void 0&&(e=af);var t=e&&e.name||n.name||"Autorun@"+rn(),r=!e.scheduler&&!e.delay,i;if(r)i=new Vo(t,function(){this.track(s)},e.onError,e.requiresObservable);else{var o=Ug(e),a=!1;i=new Vo(t,function(){a||(a=!0,o(function(){a=!1,i.isDisposed||i.track(s)}))},e.onError,e.requiresObservable)}function s(){n(i)}return i.schedule(),i.getDisposer()}var g1=function(n){return n()};function Ug(n){return n.scheduler?n.scheduler:n.delay?function(e){return setTimeout(e,n.delay)}:g1}function Gg(n,e,t){t===void 0&&(t=af);var r=t.name||"Reaction@"+rn(),i=H(r,t.onError?y1(t.onError,e):e),o=!t.scheduler&&!t.delay,a=Ug(t),s=!0,l=!1,u,c=t.compareStructural?Bi.structural:t.equals||Bi.default,f=new Vo(r,function(){s||o?d():l||(l=!0,a(d))},t.onError,t.requiresObservable);function d(){if(l=!1,!f.isDisposed){var h=!1;f.track(function(){var v=n(f);h=s||!c(u,v),u=v}),s&&t.fireImmediately&&i(u,f),!s&&h===!0&&i(u,f),s&&(s=!1)}}return f.schedule(),f.getDisposer()}function y1(n,e){return function(){try{return e.apply(this,arguments)}catch(t){n.call(this,t)}}}function m1(n,e,t){return Vg("onBecomeObserved",n,e)}function Yg(n,e,t){return Vg("onBecomeUnobserved",n,e)}function Vg(n,e,t,r){var i=Lr(e),o=t,a=n+"Listeners";i[a]?i[a].add(o):i[a]=new Set([o]);var s=i[n];return typeof s!="function"?tt(!1):function(){var l=i[a];l&&(l.delete(o),l.size===0&&delete i[a])}}function _1(n){var e=n.enforceActions,t=n.computedRequiresReaction,r=n.computedConfigurable,i=n.disableErrorBoundaries,o=n.reactionScheduler,a=n.reactionRequiresObservable,s=n.observableRequiresReaction;if(n.isolateGlobalState===!0&&r1(),e!==void 0){var l=void 0;switch(e){case!0:case"observed":l=!0;break;case!1:case"never":l=!1;break;case"strict":case"always":l="strict";break;default:tt("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}le.enforceActions=l,le.allowStateChanges=!(l===!0||l==="strict")}t!==void 0&&(le.computedRequiresReaction=!!t),a!==void 0&&(le.reactionRequiresObservable=!!a),s!==void 0&&(le.observableRequiresReaction=!!s,le.allowStateReads=!le.observableRequiresReaction),r!==void 0&&(le.computedConfigurable=!!r),i!==void 0&&(i===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),le.disableErrorBoundaries=!!i),o&&u1(o)}function Du(n,e,t,r){r=Ci(r);var i=Kg(r);return ai(n),vf(n,r.name,i.enhancer),e&&qg(n,e,t,i),n}function Kg(n){return n.defaultDecorator||(n.deep===!1?Dg:ff)}function qg(n,e,t,r){var i,o,a,s;In();try{var a=kO(e);try{for(var l=Zn(a),u=l.next();!u.done;u=l.next()){var s=u.value,c=Object.getOwnPropertyDescriptor(e,s),f=t&&s in t?t[s]:c.get?vs:r,d=f(n,s,c,!0);d&&Object.defineProperty(n,s,d)}}catch(v){i={error:v}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}finally{Bn()}}function b1(n,e){return Zg(Lr(n,e))}function Zg(n){var e={name:n.name};return n.observing&&n.observing.length>0&&(e.dependencies=PO(n.observing).map(Zg)),e}function Jg(n,e){if(n==null)return!1;if(e!==void 0){if(zn(n)===!1||!n[Pe].values.has(e))return!1;var t=Lr(n,e);return Hi(t)}return Hi(n)}function x1(n){return arguments.length>1?tt(!1):Jg(n)}function _d(n,e){return typeof e!="string"?tt(!1):Jg(n,e)}function E1(n,e){return n==null?!1:zn(n)||!!n[Pe]||lf(n)||ms(n)||Hi(n)}function Wi(n){return arguments.length!==1&&tt(!1),E1(n)}function $i(n){return zn(n)?n[Pe].getKeys():an(n)||wn(n)?Array.from(n.keys()):sr(n)?n.map(function(e,t){return t}):tt(!1)}function w1(n){return zn(n)?$i(n).map(function(e){return n[e]}):an(n)?$i(n).map(function(e){return n.get(e)}):wn(n)?Array.from(n.values()):sr(n)?n.slice():tt(!1)}function A1(n){return zn(n)?$i(n).map(function(e){return[e,n[e]]}):an(n)?$i(n).map(function(e){return[e,n.get(e)]}):wn(n)?Array.from(n.entries()):sr(n)?n.map(function(e,t){return[t,e]}):tt(!1)}function hf(n,e,t){if(arguments.length===2&&!wn(n)){In();var r=e;try{for(var i in r)hf(n,i,r[i])}finally{Bn()}return}if(zn(n)){var o=n[Pe],a=o.values.get(e);a?o.write(e,t):o.addObservableProp(e,t,o.defaultEnhancer)}else if(an(n))n.set(e,t);else if(wn(n))n.add(e);else if(sr(n))typeof e!="number"&&(e=parseInt(e,10)),ni(e>=0,"Not a valid index: '"+e+"'"),In(),e>=n.length&&(n.length=e+1),n[e]=t,Bn();else return tt(!1)}function Qg(n,e,t,r){return S1(n,e,t)}function S1(n,e,t){return Al(n).observe(e,t)}var C1={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function _i(n,e,t,r){return r.detectCycles&&n.set(e,t),t}function _r(n,e,t){if(!e.recurseEverything&&!Wi(n)||typeof n!="object")return n;if(n===null)return null;if(n instanceof Date)return n;if(t1(n))return _r(n.get(),e,t);Wi(n)&&$i(n);var r=e.detectCycles===!0;if(r&&n!==null&&t.has(n))return t.get(n);if(sr(n)||Array.isArray(n)){var i=_i(t,n,[],e),o=n.map(function(h){return _r(h,e,t)});i.length=o.length;for(var a=0,s=o.length;a<s;a++)i[a]=o[a];return i}if(wn(n)||Object.getPrototypeOf(n)===Set.prototype)if(e.exportMapsAsObjects===!1){var l=_i(t,n,new Set,e);return n.forEach(function(h){l.add(_r(h,e,t))}),l}else{var u=_i(t,n,[],e);return n.forEach(function(h){u.push(_r(h,e,t))}),u}if(an(n)||Object.getPrototypeOf(n)===Map.prototype)if(e.exportMapsAsObjects===!1){var c=_i(t,n,new Map,e);return n.forEach(function(h,v){c.set(v,_r(h,e,t))}),c}else{var f=_i(t,n,{},e);return n.forEach(function(h,v){f[v]=_r(h,e,t)}),f}var d=_i(t,n,{},e);return Mg(n).forEach(function(h){d[h]=_r(n[h],e,t)}),d}function Pn(n,e){typeof e=="boolean"&&(e={detectCycles:e}),e||(e=C1),e.detectCycles=e.detectCycles===void 0?e.recurseEverything===!0:e.detectCycles===!0;var t;return e.detectCycles&&(t=new Map),_r(n,e,t)}function O1(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=!1;typeof n[n.length-1]=="boolean"&&(t=n.pop());var r=T1(n);if(!r)return tt(!1);r.isTracing===Jn.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=t?Jn.BREAK:Jn.LOG}function T1(n){switch(n.length){case 0:return le.trackingDerivation;case 1:return Lr(n[0]);case 2:return Lr(n[0],n[1])}}function Dn(n,e){e===void 0&&(e=void 0),In();try{return n.apply(e)}finally{Bn()}}function Ca(n){return n[Pe]}function Oa(n){return typeof n=="string"||typeof n=="number"||typeof n=="symbol"}var M1={has:function(n,e){if(e===Pe||e==="constructor"||e===ps)return!0;var t=Ca(n);return Oa(e)?t.has(e):e in n},get:function(n,e){if(e===Pe||e==="constructor"||e===ps)return n[e];var t=Ca(n),r=t.values.get(e);if(r instanceof oo){var i=r.get();return i===void 0&&t.has(e),i}return Oa(e)&&t.has(e),n[e]},set:function(n,e,t){return Oa(e)?(hf(n,e,t),!0):!1},deleteProperty:function(n,e){if(!Oa(e))return!1;var t=Ca(n);return t.remove(e),!0},ownKeys:function(n){var e=Ca(n);return e.keysAtom.reportObserved(),Reflect.ownKeys(n)},preventExtensions:function(n){return tt("Dynamic observable objects cannot be frozen"),!1}};function N1(n){var e=new Proxy(n,M1);return n[Pe].proxy=e,e}function Qn(n){return n.interceptors!==void 0&&n.interceptors.length>0}function _a(n,e){var t=n.interceptors||(n.interceptors=[]);return t.push(e),Tg(function(){var r=t.indexOf(e);r!==-1&&t.splice(r,1)})}function er(n,e){var t=ao();try{for(var r=cf(n.interceptors||[]),i=0,o=r.length;i<o&&(e=r[i](e),ni(!e||e.type,"Intercept handlers should return nothing or a change object"),!!e);i++);return e}finally{Mr(t)}}function jn(n){return n.changeListeners!==void 0&&n.changeListeners.length>0}function ba(n,e){var t=n.changeListeners||(n.changeListeners=[]);return t.push(e),Tg(function(){var r=t.indexOf(e);r!==-1&&t.splice(r,1)})}function Fn(n,e){var t=ao(),r=n.changeListeners;if(r){r=r.slice();for(var i=0,o=r.length;i<o;i++)r[i](e);Mr(t)}}var P1=1e4,R1={get:function(n,e){return e===Pe?n[Pe]:e==="length"?n[Pe].getArrayLength():typeof e=="number"?dr.get.call(n,e):typeof e=="string"&&!isNaN(e)?dr.get.call(n,parseInt(e)):dr.hasOwnProperty(e)?dr[e]:n[e]},set:function(n,e,t){return e==="length"&&n[Pe].setArrayLength(t),typeof e=="number"&&dr.set.call(n,e,t),typeof e=="symbol"||isNaN(e)?n[e]=t:dr.set.call(n,parseInt(e),t),!0},preventExtensions:function(n){return tt("Observable arrays cannot be frozen"),!1}};function D1(n,e,t,r){t===void 0&&(t="ObservableArray@"+rn()),r===void 0&&(r=!1);var i=new ey(t,e,r);DO(i.values,Pe,i);var o=new Proxy(i.values,R1);if(i.proxy=o,n&&n.length){var a=El(!0);i.spliceWithArray(0,0,n),wl(a)}return o}var ey=function(){function n(e,t,r){this.owned=r,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new oo(e||"ObservableArray@"+rn()),this.enhancer=function(i,o){return t(i,o,e+"[..]")}}return n.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},n.prototype.dehanceValues=function(e){return this.dehancer!==void 0&&e.length>0?e.map(this.dehancer):e},n.prototype.intercept=function(e){return _a(this,e)},n.prototype.observe=function(e,t){return t===void 0&&(t=!1),t&&e({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),ba(this,e)},n.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},n.prototype.setArrayLength=function(e){if(typeof e!="number"||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var r=new Array(e-t),i=0;i<e-t;i++)r[i]=void 0;this.spliceWithArray(t,0,r)}else this.spliceWithArray(e,t-e)},n.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=t},n.prototype.spliceWithArray=function(e,t,r){var i=this;ji(this.atom);var o=this.values.length;if(e===void 0?e=0:e>o?e=o:e<0&&(e=Math.max(0,o+e)),arguments.length===1?t=o-e:t==null?t=0:t=Math.max(0,Math.min(t,o-e)),r===void 0&&(r=ds),Qn(this)){var a=er(this,{object:this.proxy,type:"splice",index:e,removedCount:t,added:r});if(!a)return ds;t=a.removedCount,r=a.added}r=r.length===0?r:r.map(function(l){return i.enhancer(l,void 0)});var s=this.spliceItemsIntoValues(e,t,r);return(t!==0||r.length!==0)&&this.notifyArraySplice(e,r,s),this.dehanceValues(s)},n.prototype.spliceItemsIntoValues=function(e,t,r){var i;if(r.length<P1)return(i=this.values).splice.apply(i,cf([e,t],r));var o=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(r,this.values.slice(e+t)),o},n.prototype.notifyArrayChildUpdate=function(e,t,r){var i=!this.owned&&en(),o=jn(this),a=o||i?{object:this.proxy,type:"update",index:e,newValue:t,oldValue:r}:null;this.atom.reportChanged(),o&&Fn(this,a)},n.prototype.notifyArraySplice=function(e,t,r){var i=!this.owned&&en(),o=jn(this),a=o||i?{object:this.proxy,type:"splice",index:e,removed:r,added:t,removedCount:r.length,addedCount:t.length}:null;this.atom.reportChanged(),o&&Fn(this,a)},n}(),dr={intercept:function(n){return this[Pe].intercept(n)},observe:function(n,e){e===void 0&&(e=!1);var t=this[Pe];return t.observe(n,e)},clear:function(){return this.splice(0)},replace:function(n){var e=this[Pe];return e.spliceWithArray(0,e.values.length,n)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=this[Pe];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray(n);case 2:return i.spliceWithArray(n,e)}return i.spliceWithArray(n,e,t)},spliceWithArray:function(n,e,t){var r=this[Pe];return r.spliceWithArray(n,e,t)},push:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=this[Pe];return t.spliceWithArray(t.values.length,0,n),t.values.length},pop:function(){return this.splice(Math.max(this[Pe].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=this[Pe];return t.spliceWithArray(0,0,n),t.values.length},reverse:function(){var n=this.slice();return n.reverse.apply(n,arguments)},sort:function(n){var e=this.slice();return e.sort.apply(e,arguments)},remove:function(n){var e=this[Pe],t=e.dehanceValues(e.values).indexOf(n);return t>-1?(this.splice(t,1),!0):!1},get:function(n){var e=this[Pe];if(e){if(n<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[n]);console.warn("[mobx.array] Attempt to read an array index ("+n+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(n,e){var t=this[Pe],r=t.values;if(n<r.length){ji(t.atom);var i=r[n];if(Qn(t)){var o=er(t,{type:"update",object:t.proxy,index:n,newValue:e});if(!o)return;e=o.newValue}e=t.enhancer(e,i);var a=e!==i;a&&(r[n]=e,t.notifyArrayChildUpdate(n,e,i))}else if(n===r.length)t.spliceWithArray(n,0,[e]);else throw new Error("[mobx.array] Index out of bounds, "+n+" is larger than "+r.length)}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(n){typeof Array.prototype[n]=="function"&&(dr[n]=function(){var e=this[Pe];e.atom.reportObserved();var t=e.dehanceValues(e.values);return t[n].apply(t,arguments)})});["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(n){typeof Array.prototype[n]=="function"&&(dr[n]=function(e,t){var r=this,i=this[Pe];i.atom.reportObserved();var o=i.dehanceValues(i.values);return o[n](function(a,s){return e.call(t,a,s,r)},t)})});["reduce","reduceRight"].forEach(function(n){dr[n]=function(){var e=this,t=this[Pe];t.atom.reportObserved();var r=arguments[0];return arguments[0]=function(i,o,a){return o=t.dehanceValue(o),r(i,o,a,e)},t.values[n].apply(t.values,arguments)}});var L1=jr("ObservableArrayAdministration",ey);function sr(n){return sf(n)&&L1(n[Pe])}var bd,k1={},pf=function(){function n(e,t,r){if(t===void 0&&(t=ma),r===void 0&&(r="ObservableMap@"+rn()),this.enhancer=t,this.name=r,this[bd]=k1,this._keysAtom=uf(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return n.prototype._has=function(e){return this._data.has(e)},n.prototype.has=function(e){var t=this;if(!le.trackingDerivation)return this._has(e);var r=this._hasMap.get(e);if(!r){var i=r=new ii(this._has(e),bl,this.name+"."+Sr(e)+"?",!1);this._hasMap.set(e,i),Yg(i,function(){return t._hasMap.delete(e)})}return r.get()},n.prototype.set=function(e,t){var r=this._has(e);if(Qn(this)){var i=er(this,{type:r?"update":"add",object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return r?this._updateValue(e,t):this._addValue(e,t),this},n.prototype.delete=function(e){var t=this;if(ji(this._keysAtom),Qn(this)){var r=er(this,{type:"delete",object:this,name:e});if(!r)return!1}if(this._has(e)){var i=en(),o=jn(this),r=o||i?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return Dn(function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1);var s=t._data.get(e);s.setNewValue(void 0),t._data.delete(e)}),o&&Fn(this,r),!0}return!1},n.prototype._updateHasMapEntry=function(e,t){var r=this._hasMap.get(e);r&&r.setNewValue(t)},n.prototype._updateValue=function(e,t){var r=this._data.get(e);if(t=r.prepareNewValue(t),t!==le.UNCHANGED){var i=en(),o=jn(this),a=o||i?{type:"update",object:this,oldValue:r.value,name:e,newValue:t}:null;r.setNewValue(t),o&&Fn(this,a)}},n.prototype._addValue=function(e,t){var r=this;ji(this._keysAtom),Dn(function(){var s=new ii(t,r.enhancer,r.name+"."+Sr(e),!1);r._data.set(e,s),t=s.value,r._updateHasMapEntry(e,!0),r._keysAtom.reportChanged()});var i=en(),o=jn(this),a=o||i?{type:"add",object:this,name:e,newValue:t}:null;o&&Fn(this,a)},n.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},n.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},n.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},n.prototype.values=function(){var e=this,t=this.keys();return _s({next:function(){var r=t.next(),i=r.done,o=r.value;return{done:i,value:i?void 0:e.get(o)}}})},n.prototype.entries=function(){var e=this,t=this.keys();return _s({next:function(){var r=t.next(),i=r.done,o=r.value;return{done:i,value:i?void 0:[o,e.get(o)]}}})},n.prototype[bd=Pe,Symbol.iterator]=function(){return this.entries()},n.prototype.forEach=function(e,t){var r,i;try{for(var o=Zn(this),a=o.next();!a.done;a=o.next()){var s=Oi(a.value,2),l=s[0],u=s[1];e.call(t,u,l,this)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},n.prototype.merge=function(e){var t=this;return an(e)&&(e=e.toJS()),Dn(function(){var r=El(!0);try{no(e)?Mg(e).forEach(function(i){return t.set(i,e[i])}):Array.isArray(e)?e.forEach(function(i){var o=Oi(i,2),a=o[0],s=o[1];return t.set(a,s)}):io(e)?(e.constructor!==Map&&tt("Cannot initialize from classes that inherit from Map: "+e.constructor.name),e.forEach(function(i,o){return t.set(o,i)})):e!=null&&tt("Cannot initialize map from "+e)}finally{wl(r)}}),this},n.prototype.clear=function(){var e=this;Dn(function(){kg(function(){var t,r;try{for(var i=Zn(e.keys()),o=i.next();!o.done;o=i.next()){var a=o.value;e.delete(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}})})},n.prototype.replace=function(e){var t=this;return Dn(function(){var r,i,o,a,s=RO(e),l=new Map,u=!1;try{for(var c=Zn(t._data.keys()),f=c.next();!f.done;f=c.next()){var d=f.value;if(!s.has(d)){var h=t.delete(d);if(h)u=!0;else{var v=t._data.get(d);l.set(d,v)}}}}catch(O){r={error:O}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}try{for(var p=Zn(s.entries()),g=p.next();!g.done;g=p.next()){var y=Oi(g.value,2),d=y[0],v=y[1],b=t._data.has(d);if(t.set(d,v),t._data.has(d)){var C=t._data.get(d);l.set(d,C),b||(u=!0)}}}catch(O){o={error:O}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}if(!u)if(t._data.size!==l.size)t._keysAtom.reportChanged();else for(var D=t._data.keys(),B=l.keys(),R=D.next(),A=B.next();!R.done;){if(R.value!==A.value){t._keysAtom.reportChanged();break}R=D.next(),A=B.next()}t._data=l}),this},Object.defineProperty(n.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),n.prototype.toPOJO=function(){var e,t,r={};try{for(var i=Zn(this),o=i.next();!o.done;o=i.next()){var a=Oi(o.value,2),s=a[0],l=a[1];r[typeof s=="symbol"?s:Sr(s)]=l}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r},n.prototype.toJS=function(){return new Map(this)},n.prototype.toJSON=function(){return this.toPOJO()},n.prototype.toString=function(){var e=this;return this.name+"[{ "+Array.from(this.keys()).map(function(t){return Sr(t)+": "+(""+e.get(t))}).join(", ")+" }]"},n.prototype.observe=function(e,t){return ba(this,e)},n.prototype.intercept=function(e){return _a(this,e)},n}(),an=jr("ObservableMap",pf),xd,I1={},ty=function(){function n(e,t,r){if(t===void 0&&(t=ma),r===void 0&&(r="ObservableSet@"+rn()),this.name=r,this[xd]=I1,this._data=new Set,this._atom=uf(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(i,o){return t(i,o,r)},e&&this.replace(e)}return n.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},n.prototype.clear=function(){var e=this;Dn(function(){kg(function(){var t,r;try{for(var i=Zn(e._data.values()),o=i.next();!o.done;o=i.next()){var a=o.value;e.delete(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}})})},n.prototype.forEach=function(e,t){var r,i;try{for(var o=Zn(this),a=o.next();!a.done;a=o.next()){var s=a.value;e.call(t,s,s,this)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},Object.defineProperty(n.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),n.prototype.add=function(e){var t=this;if(ji(this._atom),Qn(this)){var r=er(this,{type:"add",object:this,newValue:e});if(!r)return this}if(!this.has(e)){Dn(function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()});var i=en(),o=jn(this),r=o||i?{type:"add",object:this,newValue:e}:null;o&&Fn(this,r)}return this},n.prototype.delete=function(e){var t=this;if(Qn(this)){var r=er(this,{type:"delete",object:this,oldValue:e});if(!r)return!1}if(this.has(e)){var i=en(),o=jn(this),r=o||i?{type:"delete",object:this,oldValue:e}:null;return Dn(function(){t._atom.reportChanged(),t._data.delete(e)}),o&&Fn(this,r),!0}return!1},n.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},n.prototype.entries=function(){var e=0,t=Array.from(this.keys()),r=Array.from(this.values());return _s({next:function(){var i=e;return e+=1,i<r.length?{value:[t[i],r[i]],done:!1}:{done:!0}}})},n.prototype.keys=function(){return this.values()},n.prototype.values=function(){this._atom.reportObserved();var e=this,t=0,r=Array.from(this._data.values());return _s({next:function(){return t<r.length?{value:e.dehanceValue(r[t++]),done:!1}:{done:!0}}})},n.prototype.replace=function(e){var t=this;return wn(e)&&(e=e.toJS()),Dn(function(){var r=El(!0);try{Array.isArray(e)?(t.clear(),e.forEach(function(i){return t.add(i)})):ya(e)?(t.clear(),e.forEach(function(i){return t.add(i)})):e!=null&&tt("Cannot initialize set from "+e)}finally{wl(r)}}),this},n.prototype.observe=function(e,t){return ba(this,e)},n.prototype.intercept=function(e){return _a(this,e)},n.prototype.toJS=function(){return new Set(this)},n.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},n.prototype[xd=Pe,Symbol.iterator]=function(){return this.values()},n}(),wn=jr("ObservableSet",ty),ny=function(){function n(e,t,r,i){t===void 0&&(t=new Map),this.target=e,this.values=t,this.name=r,this.defaultEnhancer=i,this.keysAtom=new oo(r+".keys")}return n.prototype.read=function(e){return this.values.get(e).get()},n.prototype.write=function(e,t){var r=this.target,i=this.values.get(e);if(i instanceof Fi){i.set(t);return}if(Qn(this)){var o=er(this,{type:"update",object:this.proxy||r,name:e,newValue:t});if(!o)return;t=o.newValue}if(t=i.prepareNewValue(t),t!==le.UNCHANGED){var a=jn(this),s=en(),o=a||s?{type:"update",object:this.proxy||r,oldValue:i.value,name:e,newValue:t}:null;i.setNewValue(t),a&&Fn(this,o)}},n.prototype.has=function(e){var t=this.pendingKeys||(this.pendingKeys=new Map),r=t.get(e);if(r)return r.get();var i=!!this.values.get(e);return r=new ii(i,bl,this.name+"."+Sr(e)+"?",!1),t.set(e,r),r.get()},n.prototype.addObservableProp=function(e,t,r){r===void 0&&(r=this.defaultEnhancer);var i=this.target;if(Qn(this)){var o=er(this,{object:this.proxy||i,name:e,type:"add",newValue:t});if(!o)return;t=o.newValue}var a=new ii(t,r,this.name+"."+Sr(e),!1);this.values.set(e,a),t=a.value,Object.defineProperty(i,e,B1(e)),this.notifyPropertyAddition(e,t)},n.prototype.addComputedProp=function(e,t,r){var i=this.target;r.name=r.name||this.name+"."+Sr(t),this.values.set(t,new Fi(r)),(e===i||LO(e,t))&&Object.defineProperty(e,t,j1(t))},n.prototype.remove=function(e){if(this.values.has(e)){var t=this.target;if(Qn(this)){var r=er(this,{object:this.proxy||t,name:e,type:"remove"});if(!r)return}try{In();var i=jn(this),o=en(),a=this.values.get(e),s=a&&a.get();if(a&&a.set(void 0),this.keysAtom.reportChanged(),this.values.delete(e),this.pendingKeys){var l=this.pendingKeys.get(e);l&&l.set(!1)}delete this.target[e];var r=i||o?{type:"remove",object:this.proxy||t,oldValue:s,name:e}:null;i&&Fn(this,r)}finally{Bn()}}},n.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},n.prototype.observe=function(e,t){return ba(this,e)},n.prototype.intercept=function(e){return _a(this,e)},n.prototype.notifyPropertyAddition=function(e,t){var r=jn(this),i=en(),o=r||i?{type:"add",object:this.proxy||this.target,name:e,newValue:t}:null;if(r&&Fn(this,o),this.pendingKeys){var a=this.pendingKeys.get(e);a&&a.set(!0)}this.keysAtom.reportChanged()},n.prototype.getKeys=function(){var e,t;this.keysAtom.reportObserved();var r=[];try{for(var i=Zn(this.values),o=i.next();!o.done;o=i.next()){var a=Oi(o.value,2),s=a[0],l=a[1];l instanceof ii&&r.push(s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r},n}();function vf(n,e,t){if(e===void 0&&(e=""),t===void 0&&(t=ma),Object.prototype.hasOwnProperty.call(n,Pe))return n[Pe];no(n)||(e=(n.constructor.name||"ObservableObject")+"@"+rn()),e||(e="ObservableObject@"+rn());var r=new ny(n,new Map,Sr(e),t);return ro(n,Pe,r),r}var Ed=Object.create(null),wd=Object.create(null);function B1(n){return Ed[n]||(Ed[n]={configurable:!0,enumerable:!0,get:function(){return this[Pe].read(n)},set:function(e){this[Pe].write(n,e)}})}function Ad(n){var e=n[Pe];return e||(ai(n),n[Pe])}function j1(n){return wd[n]||(wd[n]={configurable:le.computedConfigurable,enumerable:!1,get:function(){return Ad(this).read(n)},set:function(e){Ad(this).write(n,e)}})}var F1=jr("ObservableObjectAdministration",ny);function zn(n){return sf(n)?(ai(n),F1(n[Pe])):!1}function Lr(n,e){if(typeof n=="object"&&n!==null){if(sr(n))return e!==void 0&&tt(!1),n[Pe].atom;if(wn(n))return n[Pe];if(an(n)){var t=n;if(e===void 0)return t._keysAtom;var r=t._data.get(e)||t._hasMap.get(e);return r||tt(!1),r}if(ai(n),e&&!n[Pe]&&n[e],zn(n)){if(!e)return tt(!1);var r=n[Pe].values.get(e);return r||tt(!1),r}if(lf(n)||Hi(n)||ms(n))return n}else if(typeof n=="function"&&ms(n[Pe]))return n[Pe];return tt(!1)}function Al(n,e){if(n||tt("Expecting some object"),e!==void 0)return Al(Lr(n,e));if(lf(n)||Hi(n)||ms(n)||an(n)||wn(n))return n;if(ai(n),n[Pe])return n[Pe];tt(!1)}function H1(n,e){var t;return e!==void 0?t=Lr(n,e):zn(n)||an(n)||wn(n)?t=Al(n):t=Lr(n),t.name}var Sd=Object.prototype.toString;function gf(n,e,t){return t===void 0&&(t=-1),Lu(n,e,t)}function Lu(n,e,t,r,i){if(n===e)return n!==0||1/n===1/e;if(n==null||e==null)return!1;if(n!==n)return e!==e;var o=typeof n;if(o!=="function"&&o!=="object"&&typeof e!="object")return!1;var a=Sd.call(n);if(a!==Sd.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+n==""+e;case"[object Number]":return+n!=+n?+e!=+e:+n==0?1/+n===1/e:+n==+e;case"[object Date]":case"[object Boolean]":return+n==+e;case"[object Symbol]":return typeof Symbol!="undefined"&&Symbol.valueOf.call(n)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":t>=0&&t++;break}n=Cd(n),e=Cd(e);var s=a==="[object Array]";if(!s){if(typeof n!="object"||typeof e!="object")return!1;var l=n.constructor,u=e.constructor;if(l!==u&&!(typeof l=="function"&&l instanceof l&&typeof u=="function"&&u instanceof u)&&"constructor"in n&&"constructor"in e)return!1}if(t===0)return!1;t<0&&(t=-1),r=r||[],i=i||[];for(var c=r.length;c--;)if(r[c]===n)return i[c]===e;if(r.push(n),i.push(e),s){if(c=n.length,c!==e.length)return!1;for(;c--;)if(!Lu(n[c],e[c],t-1,r,i))return!1}else{var f=Object.keys(n),d=void 0;if(c=f.length,Object.keys(e).length!==c)return!1;for(;c--;)if(d=f[c],!(W1(e,d)&&Lu(n[d],e[d],t-1,r,i)))return!1}return r.pop(),i.pop(),!0}function Cd(n){return sr(n)?n.slice():io(n)||an(n)||ya(n)||wn(n)?Array.from(n.entries()):n}function W1(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function _s(n){return n[Symbol.iterator]=$1,n}function $1(){return this}if(typeof Proxy=="undefined"||typeof Symbol=="undefined")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");(function(){function n(){}if(n.name!=="testCodeMinification"&&!1)var e})();typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:c1,extras:{getDebugName:H1},$mobx:Pe});function X1(n){return!(n.prototype&&n.prototype.render)&&!Ue.isPrototypeOf(n)}function ry(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.prefix,r=t===void 0?"":t,i=e.suffix,o=i===void 0?"":i,a=n.displayName||n.name||n.constructor&&n.constructor.name||"<component>";return r+a+o}var Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},iy=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},oy=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),ay=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},sy=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n},Td=console;function z1(n){var e=Pu().allowStateChanges;return Pu().allowStateChanges=n,e}function U1(n){Pu().allowStateChanges=n}function G1(n,e,t,r,i){var o=z1(n),a=void 0;try{a=e(t,r,i)}finally{U1(o)}return a}function Md(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=n[e],i=ly[e],o=r?t===!0?function(){i.apply(this,arguments),r.apply(this,arguments)}:function(){r.apply(this,arguments),i.apply(this,arguments)}:i;n[e]=o}function Nd(n,e){if(n==null||e==null||(typeof n=="undefined"?"undefined":Od(n))!=="object"||(typeof e=="undefined"?"undefined":Od(e))!=="object")return n!==e;var t=Object.keys(n);if(t.length!==Object.keys(e).length)return!0;for(var r=void 0,i=t.length-1;r=t[i];i--)if(e[r]!==n[r])return!0;return!1}var ly={componentWillMount:function(){var e=this,t=ry(this),r=!1,i=!1;function o(f){var d=this[f],h=uf("reactive "+f);Object.defineProperty(this,f,{configurable:!0,enumerable:!0,get:function(){return h.reportObserved(),d},set:function(p){!i&&Nd(d,p)?(d=p,r=!0,h.reportChanged(),r=!1):d=p}})}o.call(this,"props"),o.call(this,"state");var a=this.render.bind(this),s=null,l=!1,u=function(){return s=new Vo(t+".render()",function(){if(!l&&(l=!0,typeof e.componentWillReact=="function"&&e.componentWillReact(),e.__$mobxIsUnmounted!==!0)){var d=!0;try{i=!0,r||Ue.prototype.forceUpdate.call(e),d=!1}finally{i=!1,d&&s.dispose()}}}),s.reactComponent=e,c.$mobx=s,e.render=c,c(e.props,e.state,e.context)},c=function(d,h,v){l=!1;var p=void 0,g=void 0;if(s.track(function(){try{g=G1(!1,a,d,h,v)}catch(y){p=y}}),p)throw p;return g};this.render=u},componentWillUnmount:function(){this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0},componentDidMount:function(){},componentDidUpdate:function(){},shouldComponentUpdate:function(e,t){return this.state!==t?!0:Nd(this.props,e)}};function yf(n){if(arguments.length>1&&Td.warn('Mobx observer: Using observer to inject stores is not supported. Use `@connect(["store1", "store2"]) ComponentClass instead or preferably, use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))``'),n.isMobxInjector===!0&&Td.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),X1(n)){var e,t;return yf((t=e=function(i){ay(o,i);function o(){return iy(this,o),sy(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return oy(o,[{key:"render",value:function(){return n.call(this,this.props,this.context)}}]),o}(Ue),e.displayName=ry(n),t))}if(!n)throw new Error("Please pass a valid component to 'observer'");var r=n.prototype||n;return Y1(r),n.isMobXReactObserver=!0,n}function Y1(n){Md(n,"componentWillMount",!0),Md(n,"componentDidMount"),n.shouldComponentUpdate||(n.shouldComponentUpdate=ly.shouldComponentUpdate)}var V1=yf(function(n){var e=n.children;return e[0]()});V1.displayName="Observer";var K1=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function q1(n,e){return e={exports:{}},n(e,e.exports),e.exports}q1(function(n,e){(function(t,r){n.exports=r()})(K1,function(){var t={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,o=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,u=l&&l(Object);return function c(f,d,h){if(typeof d!="string"){if(u){var v=l(d);v&&v!==u&&c(f,v,h)}var p=o(d);a&&(p=p.concat(a(d)));for(var g=0;g<p.length;++g){var y=p[g];if(!t[y]&&!r[y]&&(!h||!h[y])){var b=s(d,y);try{i(f,y,b)}catch(C){}}}return f}return f}})});var Pd={children:!0,key:!0,ref:!0},Rd=console;(function(n){ay(e,n);function e(){return iy(this,e),sy(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return oy(e,[{key:"render",value:function(r){var i=r.children;return i.length>1?be("div",null," ",i," "):i[0]}},{key:"getChildContext",value:function(){var r={},i=this.context.mobxStores;if(i)for(var o in i)r[o]=i[o];for(var a in this.props)!Pd[a]&&a!=="suppressChangedStoreWarning"&&(r[a]=this.props[a]);return{mobxStores:r}}},{key:"componentWillReceiveProps",value:function(r){if(Object.keys(r).length!==Object.keys(this.props).length&&Rd.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!r.suppressChangedStoreWarning)for(var i in r)!Pd[i]&&this.props[i]!==r[i]&&Rd.warn("MobX Provider: Provided store '"+i+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}]),e})(Ue);if(!Ue)throw new Error("mobx-preact requires Preact to be available");var Kn,Gl,Dd,uy=[],Yl=[],Ld=xe.__b,kd=xe.__r,Id=xe.diffed,Bd=xe.__c,jd=xe.unmount;function Z1(){for(var n;n=uy.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Za),n.__H.__h.forEach(ku),n.__H.__h=[]}catch(e){n.__H.__h=[],xe.__e(e,n.__v)}}xe.__b=function(n){Kn=null,Ld&&Ld(n)},xe.__r=function(n){kd&&kd(n);var e=(Kn=n.__c).__H;e&&(Gl===Kn?(e.__h=[],Kn.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=Yl,t.__N=t.i=void 0})):(e.__h.forEach(Za),e.__h.forEach(ku),e.__h=[])),Gl=Kn},xe.diffed=function(n){Id&&Id(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(uy.push(e)!==1&&Dd===xe.requestAnimationFrame||((Dd=xe.requestAnimationFrame)||J1)(Z1)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==Yl&&(t.__=t.__V),t.i=void 0,t.__V=Yl})),Gl=Kn=null},xe.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Za),t.__h=t.__h.filter(function(r){return!r.__||ku(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],xe.__e(r,t.__v)}}),Bd&&Bd(n,e)},xe.unmount=function(n){jd&&jd(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{Za(r)}catch(i){e=i}}),t.__H=void 0,e&&xe.__e(e,t.__v))};var Fd=typeof requestAnimationFrame=="function";function J1(n){var e,t=function(){clearTimeout(r),Fd&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);Fd&&(e=requestAnimationFrame(t))}function Za(n){var e=Kn,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Kn=e}function ku(n){var e=Kn;n.__c=n.__(),Kn=e}function Q1(n,e){for(var t in e)n[t]=e[t];return n}function Hd(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&n[r]!==e[r])return!0;return!1}function Wd(n){this.props=n}(Wd.prototype=new Ue).isPureReactComponent=!0,Wd.prototype.shouldComponentUpdate=function(n,e){return Hd(this.props,n)||Hd(this.state,e)};var $d=xe.__b;xe.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),$d&&$d(n)};var eT=xe.__e;xe.__e=function(n,e,t,r){if(n.then){for(var i,o=e;o=o.__;)if((i=o.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e)}eT(n,e,t,r)};var Xd=xe.unmount;function cy(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),n.__c.__H=null),(n=Q1({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return cy(r,e,t)})),n}function fy(n,e,t){return n&&t&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return fy(r,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=t)),n}function Vl(){this.__u=0,this.t=null,this.__b=null}function dy(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function Ta(){this.u=null,this.o=null}xe.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&32&n.__u&&(n.type=null),Xd&&Xd(n)},(Vl.prototype=new Ue).__c=function(n,e){var t=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(t);var i=dy(r.__v),o=!1,a=function(){o||(o=!0,t.__R=null,i?i(s):s())};t.__R=a;var s=function(){if(!--r.__u){if(r.state.__a){var l=r.state.__a;r.__v.__k[0]=fy(l,l.__c.__P,l.__c.__O)}var u;for(r.setState({__a:r.__b=null});u=r.t.pop();)u.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(a,a)},Vl.prototype.componentWillUnmount=function(){this.t=[]},Vl.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=cy(this.__b,t,r.__O=r.__P)}this.__b=null}var i=e.__a&&be(ki,null,n.fallback);return i&&(i.__u&=-33),[be(ki,null,e.__a?null:n.children),i]};var zd=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};(Ta.prototype=new Ue).__a=function(n){var e=this,t=dy(e.__v),r=e.o.get(n);return r[0]++,function(i){var o=function(){e.props.revealOrder?(r.push(i),zd(e,n,r)):i()};t?t(o):o()}},Ta.prototype.render=function(n){this.u=null,this.o=new Map;var e=fs(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},Ta.prototype.componentDidUpdate=Ta.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){zd(n,t,e)})};var tT=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,nT=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,rT=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,iT=/[A-Z0-9]/g,oT=typeof document!="undefined",aT=function(n){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};function sT(n,e,t){return e.__k==null&&(e.textContent=""),TO(n,e),typeof t=="function"&&t(),n?n.__c:null}Ue.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Ue.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var Ud=xe.event;function lT(){}function uT(){return this.cancelBubble}function cT(){return this.defaultPrevented}xe.event=function(n){return Ud&&(n=Ud(n)),n.persist=lT,n.isPropagationStopped=uT,n.isDefaultPrevented=cT,n.nativeEvent=n};var fT={enumerable:!1,configurable:!0,get:function(){return this.class}},Gd=xe.vnode;xe.vnode=function(n){typeof n.type=="string"&&function(e){var t=e.props,r=e.type,i={};for(var o in t){var a=t[o];if(!(o==="value"&&"defaultValue"in t&&a==null||oT&&o==="children"&&r==="noscript"||o==="class"||o==="className")){var s=o.toLowerCase();o==="defaultValue"&&"value"in t&&t.value==null?o="value":o==="download"&&a===!0?a="":s==="ondoubleclick"?o="ondblclick":s!=="onchange"||r!=="input"&&r!=="textarea"||aT(t.type)?s==="onfocus"?o="onfocusin":s==="onblur"?o="onfocusout":rT.test(o)?o=s:r.indexOf("-")===-1&&nT.test(o)?o=o.replace(iT,"-$&").toLowerCase():a===null&&(a=void 0):s=o="oninput",s==="oninput"&&i[o=s]&&(o="oninputCapture"),i[o]=a}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=fs(t.children).forEach(function(l){l.props.selected=i.value.indexOf(l.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=fs(t.children).forEach(function(l){l.props.selected=i.multiple?i.defaultValue.indexOf(l.props.value)!=-1:i.defaultValue==l.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",fT)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i}(n),n.$$typeof=tT,Gd&&Gd(n)};var Yd=xe.__r;xe.__r=function(n){Yd&&Yd(n),n.__c};var Vd=xe.diffed;xe.diffed=function(n){Vd&&Vd(n);var e=n.props,t=n.__e;t!=null&&n.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value)};var dT=0;function j(n,e,t,r,i,o){var a,s,l={};for(s in e)s=="ref"?a=e[s]:l[s]=e[s];var u={type:n,props:l,key:t,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--dT,__i:-1,__u:0,__source:i,__self:o};if(typeof n=="function"&&(a=n.defaultProps))for(s in a)l[s]===void 0&&(l[s]=a[s]);return xe.vnode&&xe.vnode(u),u}var hT=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},Ko;(function(n){function e(t){var r=hT(t,[]),i=t.container;if(!i)throw new Error("Ensure the container of LogicFlow is specified and valid.");return lt({},n.defaults,r)}n.get=e})(Ko||(Ko={}));(function(n){n.defaults={background:!1,grid:!1,textEdit:!0,snapline:!0,outline:!1,disabledTools:[]}})(Ko||(Ko={}));var Kd={node:!1,edge:!1},pT={node:!0,edge:!0},vT=function(n){return!n||typeof n=="boolean"?n===!0?je(pT):je(Kd):Li(je(Kd),n)},gT=function(){return ua(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null};function $t(n){try{return JSON.parse(JSON.stringify(n))}catch(e){return n}}var Ma=200,yT=9999,mT=10,Ze;(function(n){n[n.DEFAULT=1]="DEFAULT",n[n.TEXT_EDIT=2]="TEXT_EDIT",n[n.SHOW_MENU=3]="SHOW_MENU",n[n.ALLOW_CONNECT=4]="ALLOW_CONNECT",n[n.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"})(Ze||(Ze={}));var Et;(function(n){n.NODE="node",n.EDGE="edge",n.GRAPH="graph"})(Et||(Et={}));var He;(function(n){n.NODE="node",n.CIRCLE_NODE="circle-node",n.POLYGON_NODE="polygon-node",n.RECT_NODE="rect-node",n.TEXT_NODE="text-node",n.ELLIPSE_NODE="ellipse-node",n.DIAMOND_NODE="diamond-node",n.HTML_NODE="html-node",n.CUSTOM_HTML_NODE="custom-html-node",n.EDGE="edge",n.LINE_EDGE="line-edge",n.POLYLINE_EDGE="polyline-edge",n.BEZIER_EDGE="bezier-edge",n.GRAPH="graph"})(He||(He={}));var he;(function(n){n.ELEMENT_CLICK="element:click",n.NODE_ADD="node:add",n.NODE_DELETE="node:delete",n.NODE_CLICK="node:click",n.NODE_DBCLICK="node:dbclick",n.NODE_GROUP_COPY="node:group-copy-add",n.NODE_DND_ADD="node:dnd-add",n.NODE_DND_DRAG="node:dnd-drag",n.NODE_MOUSEDOWN="node:mousedown",n.NODE_DRAGSTART="node:dragstart",n.NODE_DRAG="node:drag",n.NODE_DROP="node:drop",n.NODE_MOUSEUP="node:mouseup",n.NODE_MOUSEMOVE="node:mousemove",n.NODE_MOUSEENTER="node:mouseenter",n.NODE_MOUSELEAVE="node:mouseleave",n.NODE_CONTEXTMENU="node:contextmenu",n.NODE_ROTATE="node:rotate",n.NODE_RESIZE="node:resize",n.NODE_FOCUS="node:focus",n.NODE_BLUR="node:blur",n.NODE_PROPERTIES_CHANGE="node:properties-change",n.NODE_PROPERTIES_DELETE="node:properties-delete",n.EDGE_ADD="edge:add",n.EDGE_DELETE="edge:delete",n.EDGE_CLICK="edge:click",n.EDGE_DBCLICK="edge:dbclick",n.EDGE_FOCUS="edge:focus",n.EDGE_BLUR="edge:blur",n.EDGE_MOUSEENTER="edge:mouseenter",n.EDGE_MOUSELEAVE="edge:mouseleave",n.EDGE_CONTEXTMENU="edge:contextmenu",n.EDGE_ADJUST="edge:adjust",n.EDGE_EXCHANGE_NODE="edge:exchange-node",n.ANCHOR_DRAGSTART="anchor:dragstart",n.ANCHOR_DRAG="anchor:drag",n.ANCHOR_DROP="anchor:drop",n.ANCHOR_DRAGEND="anchor:dragend",n.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",n.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",n.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",n.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",n.ADJUST_POINT_DRAG="adjustPoint:drag",n.ADJUST_POINT_DROP="adjustPoint:drop",n.ADJUST_POINT_DRAGEND="adjustPoint:dragend",n.BLANK_MOUSEDOWN="blank:mousedown",n.BLANK_DRAGSTART="blank:dragstart",n.BLANK_DRAG="blank:drag",n.BLANK_DROP="blank:drop",n.BLANK_MOUSEMOVE="blank:mousemove",n.BLANK_MOUSEUP="blank:mouseup",n.BLANK_CLICK="blank:click",n.BLANK_CONTEXTMENU="blank:contextmenu",n.SELECTION_MOUSEDOWN="selection:mousedown",n.SELECTION_DRAGSTART="selection:dragstart",n.SELECTION_DRAG="selection:drag",n.SELECTION_DROP="selection:drop",n.SELECTION_MOUSEMOVE="selection:mousemove",n.SELECTION_MOUSEUP="selection:mouseup",n.SELECTION_CONTEXTMENU="selection:contextmenu",n.CONNECTION_NOT_ALLOWED="connection:not-allowed",n.TEXT_MOUSEDOWN="text:mousedown",n.TEXT_DRAGSTART="text:dragstart",n.TEXT_DRAG="text:drag",n.TEXT_DROP="text:drop",n.TEXT_CLICK="text:click",n.TEXT_DBCLICK="text:dbclick",n.TEXT_BLUR="text:blur",n.TEXT_MOUSEMOVE="text:mousemove",n.TEXT_MOUSEUP="text:mouseup",n.TEXT_FOCUS="text:focus",n.TEXT_ADD="text:add",n.TEXT_UPDATE="text:update",n.TEXT_CLEAR="text:clear",n.LABEL_MOUSEDOWN="label:mousedown",n.LABEL_DRAGSTART="label:dragstart",n.LABEL_DRAG="label:drag",n.LABEL_DROP="label:drop",n.LABEL_CLICK="label:click",n.LABEL_DBCLICK="label:dbclick",n.LABEL_BLUR="label:blur",n.LABEL_MOUSEMOVE="label:mousemove",n.LABEL_MOUSEUP="label:mouseup",n.LABEL_FOCUS="label:focus",n.LABEL_ADD="label:add",n.LABEL_UPDATE="label:update",n.LABEL_CLEAR="label:clear",n.LABEL_DELETE="label:delete",n.LABEL_SHOULD_ADD="label:should-add",n.LABEL_BATCH_ADD="label:batch-add",n.LABEL_SHOULD_UPDATE="label:should-update",n.LABEL_SHOULD_DELETE="label:should-delete",n.LABEL_BATCH_DELETE="label:batch-delete",n.LABEL_NOT_ALLOWED_ADD="label:not-allowed-add",n.HISTORY_CHANGE="history:change",n.GRAPH_TRANSFORM="graph:transform",n.GRAPH_RENDERED="graph:rendered",n.GRAPH_UPDATED="graph:updated"})(he||(he={}));var Ln;(function(n){n[n.DEFAULT=0]="DEFAULT",n[n.INCREASE=1]="INCREASE"})(Ln||(Ln={}));var _t;(function(n){n.HORIZONTAL="horizontal",n.VERTICAL="vertical"})(_t||(_t={}));var mn;(function(n){n.TEXT="text",n.LABEL="label"})(mn||(mn={}));var _T=0,Sn=function(){function n(e){var t=e.onDragStart,r=t===void 0?Pi:t,i=e.onDragging,o=i===void 0?Pi:i,a=e.onDragEnd,s=a===void 0?Pi:a,l=e.eventType,u=l===void 0?"":l,c=e.eventCenter,f=e.step,d=f===void 0?1:f,h=e.isStopPropagation,v=h===void 0?!0:h,p=e.model,g=e.data,y=this;this.isDragging=!1,this.isStartDragging=!1,this.startX=0,this.startY=0,this.sumDeltaX=0,this.sumDeltaY=0,this.handleMouseDown=function(b){var C,D,B=window==null?void 0:window.document;if(b.button===_T){y.isStopPropagation&&b.stopPropagation(),y.isStartDragging=!0,y.startX=b.clientX,y.startY=b.clientY,B.addEventListener("mousemove",y.handleMouseMove,!1),B.addEventListener("mouseup",y.handleMouseUp,!1);var R=(C=y.model)===null||C===void 0?void 0:C.getData();(D=y.eventCenter)===null||D===void 0||D.emit(he["".concat(y.eventType,"_MOUSEDOWN")],{e:b,data:y.data||R}),y.startTime=new Date().getTime()}},this.handleMouseMove=function(b){var C,D;if(y.isStopPropagation&&b.stopPropagation(),!!y.isStartDragging&&(y.sumDeltaX+=b.clientX-y.startX,y.sumDeltaY+=b.clientY-y.startY,y.startX=b.clientX,y.startY=b.clientY,y.step<=1||Math.abs(y.sumDeltaX)>y.step||Math.abs(y.sumDeltaY)>y.step)){var B=y.sumDeltaX%y.step,R=y.sumDeltaY%y.step,A=y.sumDeltaX-B,O=y.sumDeltaY-R;y.sumDeltaX=B,y.sumDeltaY=R;var F=(C=y.model)===null||C===void 0?void 0:C.getData();y.isDragging||((D=y.eventCenter)===null||D===void 0||D.emit(he["".concat(y.eventType,"_DRAGSTART")],{e:b,data:y.data||F}),y.onDragStart({event:b})),y.isDragging=!0,Promise.resolve().then(function(){var Z,ue;y.onDragging({deltaX:A,deltaY:O,event:b}),(Z=y.eventCenter)===null||Z===void 0||Z.emit(he["".concat(y.eventType,"_MOUSEMOVE")],{deltaX:A,deltaY:O,e:b,data:y.data||F}),(ue=y.eventCenter)===null||ue===void 0||ue.emit(he["".concat(y.eventType,"_DRAG")],{e:b,data:y.data||F})})}},this.handleMouseUp=function(b){var C=window.document;y.isStartDragging=!1,y.isStopPropagation&&b.stopPropagation(),Promise.resolve().then(function(){var D,B,R;C.removeEventListener("mousemove",y.handleMouseMove,!1),C.removeEventListener("mouseup",y.handleMouseUp,!1);var A=(D=y.model)===null||D===void 0?void 0:D.getData();(B=y.eventCenter)===null||B===void 0||B.emit(he["".concat(y.eventType,"_MOUSEUP")],{e:b,data:y.data||A}),y.isDragging&&(y.isDragging=!1,y.onDragEnd({event:b}),(R=y.eventCenter)===null||R===void 0||R.emit(he["".concat(y.eventType,"_DROP")],{e:b,data:y.data||A}))})},this.cancelDrag=function(){var b=window==null?void 0:window.document;b.removeEventListener("mousemove",y.handleMouseMove,!1),b.removeEventListener("mouseup",y.handleMouseUp,!1),y.onDragEnd({event:void 0}),y.isDragging=!1},this.destroy=function(){y.isStartDragging&&y.cancelDrag()},this.onDragStart=r,this.onDragging=o,this.onDragEnd=s,this.step=d,this.isStopPropagation=v,this.eventType=u,this.eventCenter=c,this.model=p,this.data=g}return n.prototype.setStep=function(e){this.step=e},n.prototype.setModel=function(e){this.model=e},n}(),bT=function(n){var e=n.x,t=n.y,r=n.width,i=n.height;return{x:e-r/2,y:t-i/2,x1:e+r/2,y1:t+i/2}},xT=function(n){var e=n.startPoint,t=n.endPoint,r=(e.x+t.x)/2,i=(e.y+t.y)/2,o=Math.abs(e.x-t.x)+10,a=Math.abs(e.y-t.y)+10;return{x:r-o/2,y:i-a/2,x1:r+o/2,y1:i+a/2}},ET=function(n){var e=n.points,t=si(e),r=Jo(t,8),i=r.x,o=r.y,a=r.width,s=r.height;return{x:i-a/2,y:o-s/2,x1:i+a/2,y1:o+s/2}},wT=function(n){var e=n.path,t=mf(e),r=Jo(t,8),i=r.x,o=r.y,a=r.width,s=r.height;return{x:i-a/2,y:o-s/2,x1:i+a/2,y1:o+s/2}},AT=function(n){if(n.modelType===He.LINE_EDGE)return xT(n);if(n.modelType===He.POLYLINE_EDGE)return ET(n);if(n.modelType===He.BEZIER_EDGE)return wT(n)},ST=function(n,e,t,r){var i=(e.y-n.y)*(r.x-t.x)-(n.x-e.x)*(t.y-r.y);if(i===0)return!1;var o=((e.x-n.x)*(r.x-t.x)*(t.y-n.y)+(e.y-n.y)*(r.x-t.x)*n.x-(r.y-t.y)*(e.x-n.x)*t.x)/i,a=-((e.y-n.y)*(r.y-t.y)*(t.x-n.x)+(e.x-n.x)*(r.y-t.y)*n.y-(r.x-t.x)*(e.y-n.y)*t.y)/i;return(o-n.x)*(o-e.x)<=0&&(a-n.y)*(a-e.y)<=0&&(o-t.x)*(o-r.x)<=0&&(a-t.y)*(a-r.y)<=0?{x:o,y:a}:!1},qo=function(n,e,t){var r=n.x,i=n.y,o=e.x,a=e.y,s=t.x,l=t.y,u=(l-a)/(s-o),c=a-u*o;return(r>=o&&r<=s||r<=o&&r>=s)&&(i>=a&&i<=l||i<=a&&i>=l)&&Math.abs(i-u*r-c)<Number.EPSILON},Zo=function(n){var e=n.start,t=n.end,r=n.offset,i=n.verticalLength,o=n.type,a={leftX:0,leftY:0,rightX:0,rightY:0},s=Math.atan((t.y-e.y)/(t.x-e.x)),l=Math.atan(r/i),u=Math.sqrt(i*i+r*r);return o==="start"?t.x>=e.x?(a.leftX=e.x+u*Math.sin(s+l),a.leftY=e.y-u*Math.cos(s+l),a.rightX=e.x-u*Math.sin(s-l),a.rightY=e.y+u*Math.cos(s-l)):(a.leftX=e.x-u*Math.sin(s+l),a.leftY=e.y+u*Math.cos(s+l),a.rightX=e.x+u*Math.sin(s-l),a.rightY=e.y-u*Math.cos(s-l)):o==="end"&&(t.x>=e.x?(a.leftX=t.x+u*Math.sin(s-l),a.leftY=t.y-u*Math.cos(s-l),a.rightX=t.x-u*Math.sin(s+l),a.rightY=t.y+u*Math.cos(s+l)):(a.leftX=t.x-u*Math.sin(s-l),a.leftY=t.y+u*Math.cos(s-l),a.rightX=t.x+u*Math.sin(s+l),a.rightY=t.y-u*Math.cos(s+l))),a},Ti=function(){return Ti=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ti.apply(this,arguments)},vn=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Cr=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},CT=function(n,e){return Math.abs(n.centerX-e.centerX)*2<n.width+e.width&&Math.abs(n.centerY-e.centerY)*2<n.height+e.height},Iu=function(n){var e=[],t={};return n.forEach(function(r){var i="".concat(r.x,"-").concat(r.y);r.id=i,t[i]=r}),Object.keys(t).forEach(function(r){e.push(t[r])}),e},bs=function(n,e){return n.width===0&&n.height===0?n:{x:n.x,y:n.y,centerX:n.centerX,centerY:n.centerY,minX:n.minX-e,minY:n.minY-e,maxX:n.maxX+e,maxY:n.maxY+e,height:n.height+2*e,width:n.width+2*e}},OT=function(n,e){var t=Math.abs(n.x-e.centerX),r=Math.abs(n.y-e.centerY);return t/e.width>r/e.height?_t.HORIZONTAL:_t.VERTICAL},xs=function(n,e,t){var r=OT(t,e);return r===_t.HORIZONTAL?{x:t.x>n.centerX?n.maxX:n.minX,y:t.y}:{x:t.x,y:t.y>n.centerY?n.maxY:n.minY}},qd=function(n,e){var t=Math.min(n.minX,e.minX),r=Math.min(n.minY,e.minY),i=Math.max(n.maxX,e.maxX),o=Math.max(n.maxY,e.maxY);return{x:(t+i)/2,y:(r+o)/2,centerX:(t+i)/2,centerY:(r+o)/2,minX:t,minY:r,maxX:i,maxY:o,height:o-r,width:i-t}},Jo=function(n,e){n===void 0&&(n=[]);var t=[],r=[];n.forEach(function(c){t.push(c.x),r.push(c.y)});var i=Math.min.apply(Math,Cr([],vn(t),!1)),o=Math.max.apply(Math,Cr([],vn(t),!1)),a=Math.min.apply(Math,Cr([],vn(r),!1)),s=Math.max.apply(Math,Cr([],vn(r),!1)),l=o-i,u=s-a;return e&&(l+=e,u+=e),{centerX:(i+o)/2,centerY:(a+s)/2,maxX:o,maxY:s,minX:i,minY:a,x:(i+o)/2,y:(a+s)/2,height:u,width:l}},Es=function(n){var e=n.minX,t=n.minY,r=n.maxX,i=n.maxY;return[{x:e,y:t},{x:r,y:t},{x:r,y:i},{x:e,y:i}]},Na=function(n,e){var t=n.x,r=n.y;return t<e.minX||t>e.maxX||r<e.minY||r>e.maxY},TT=function(n,e){return e<n.minX||e>n.maxX?[]:[{x:e,y:n.minY},{x:e,y:n.maxY}]},MT=function(n,e){return e<n.minY||e>n.maxY?[]:[{x:n.minX,y:e},{x:n.maxX,y:e}]},NT=function(n,e){return Cr(Cr([],vn(TT(n,e.x)),!1),vn(MT(n,e.y)),!1)},Bu=function(n,e){return Math.abs(n.x-e.x)+Math.abs(n.y-e.y)},PT=function(n,e){var t=-2,r=0;return e.forEach(function(i){i&&(n.x===i.x&&(r+=t),n.y===i.y&&(r+=t))}),r},Zd=function(n,e,t,r,i){return Bu(n,e)+Bu(n,t)+PT(n,[e,t,r,i])},hy=function(n,e,t,r,i){i||(i=0),n.unshift(e[r]),t[r]&&t[r]!==r&&i<=100&&hy(n,e,t,t[r],i+1)},RT=function(n,e){var t=n.indexOf(e);t>-1&&n.splice(t,1)},To=function(n,e,t,r){var i=e.x-n.x,o=e.y-n.y,a=r.x-t.x,s=r.y-t.y,l=(-o*(n.x-t.x)+i*(n.y-t.y))/(-a*o+i*s),u=(a*(n.y-t.y)-s*(n.x-t.x))/(-a*o+i*s);return l>=0&&l<=1&&u>=0&&u<=1},Jd=function(n,e,t){if(t.width===0&&t.height===0)return!1;var r=vn(Es(t),4),i=r[0],o=r[1],a=r[2],s=r[3];return To(n,e,i,o)||To(n,e,i,s)||To(n,e,o,a)||To(n,e,a,s)},DT=function(n,e,t,r){var i=[];return n.forEach(function(o){o!==e&&(o.x===e.x||o.y===e.y)&&!Jd(o,e,t)&&!Jd(o,e,r)&&i.push(o)}),Iu(i)},LT=function(n,e,t,r,i,o,a){var s=[],l=[e],u={},c={},f={};e.id&&(c[e.id]=0,f[e.id]=Zd(e,t,e));var d={};n.forEach(function(p){p.id&&(d[p.id]=p)});for(var h=function(){var p,g=1/0;if(l.forEach(function(b){b.id&&f[b.id]<g&&(g=f[b.id],p=b)}),p===t&&t.id){var y=[];return hy(y,d,u,t.id),{value:y}}if(!p)return{value:[e,t]};RT(l,p),s.push(p),DT(n,p,r,i).forEach(function(b){if(s.indexOf(b)===-1&&(l.indexOf(b)===-1&&l.push(b),p!=null&&p.id&&(b!=null&&b.id))){var C=f[p.id]+Bu(p,b);if(c[b.id]&&C>=c[b.id])return;u[b.id]=p.id,c[b.id]=C,f[b.id]=c[b.id]+Zd(b,t,e,o,a)}})};l.length;){var v=h();if(typeof v=="object")return v.value}return[e,t]},Qd=function(n){return Qt(n)},py=function(n){for(var e=1;e<n.length-1;){var t=n[e-1],r=n[e],i=n[e+1];t.x===r.x&&r.x===i.x||t.y===r.y&&r.y===i.y?n.splice(e,1):e++}return n},eh=function(n,e,t,r,i){var o=Qd(t),a=Qd(r),s=bs(o,i),l=bs(a,i),u=xs(s,o,n),c=xs(l,a,e);if(CT(s,l)){var f=IT(n,e,u,c);return Cr(Cr([n,u],vn(f),!1),[c,e],!1)}var d=Jo([u,c]),h=qd(s,d),v=qd(l,d),p=[];p=p.concat(Es(h)),p=p.concat(Es(v));var g={x:(n.x+e.x)/2,y:(n.y+e.y)/2};[d,h,v].forEach(function(b){p=p.concat(NT(b,g).filter(function(C){return Na(C,s)&&Na(C,l)}))}),[{x:u.x,y:c.y},{x:c.x,y:u.y}].forEach(function(b){Na(b,s)&&Na(b,l)&&p.push(b)}),p.unshift(u),p.push(c),p=Iu(p);var y=LT(p,u,c,o,a,n,e);return y.unshift(n),y.push(e),y.length>2&&(y=py(y)),Iu(y)},kT=function(n){if(n.length===1){var e=vn(n,1),t=e[0];return[t,t]}else{for(var r=n[0],i=n[1],o=kn(r.x,r.y,i.x,i.y),a=1;a<n.length-1;a++){var s=n[a],l=n[a+1],u=kn(s.x,s.y,l.x,l.y);u>o&&(o=u,r=s,i=l)}return[r,i]}},th=function(n,e,t){var r=Or(n,t),i=Or(e,t);return r&&i},nh=function(n,e,t){var r=Or(n,t),i=Or(e,t),o=r&&i,a=r||i;return!o&&a},rh=function(n,e,t){for(var r=void 0,i=Qt(t),o=Es(i),a=0;a<o.length;a++){var s=To(n,e,o[a],o[(a+1)%o.length]);s&&(r=[o[a],o[(a+1)%o.length]])}if(r)return ST(n,e,r[0],r[1])},ws=function(n,e){var t=void 0;return n.x===e.x?t=_t.VERTICAL:n.y===e.y&&(t=_t.HORIZONTAL),t},si=function(n){var e=n.split(" "),t=[];return e&&e.forEach(function(r){var i=vn(r.split(","),2),o=i[0],a=i[1];t.push({x:Number(o),y:Number(a)})}),t},IT=function(n,e,t,r){var i=[],o=ws(n,t),a=ws(e,r);if(o===a)n.y===t.y?(i.push({x:t.x,y:(t.y+r.y)/2}),i.push({x:r.x,y:(t.y+r.y)/2})):(i.push({x:(t.x+r.x)/2,y:t.y}),i.push({x:(t.x+r.x)/2,y:r.y}));else{var s={x:t.x,y:r.y},l=qo(s,n,t),u=qo(s,e,r);if(l||u)s={x:r.x,y:t.y};else{var c=ih(s,n,t),f=ih(s,e,r);c&&f&&(s={x:r.x,y:t.y})}i.push(s)}return i},ih=function(n,e,t){return n.x===e.x&&n.x===t.x||n.y===e.y&&n.y===t.y},vy=function(n){if(!n)return 0;for(var e=0,t=0;t<n.length;t++){var r=n.charCodeAt(t);n.match(/[A-Z]/)?e+=1.5:r>=1&&r<=126||r>=65376&&r<=65439?e+=1:e+=2}return e},BT=function(n){var e=n.start,t=n.end,r;if(e.x===t.x&&e.y===t.y)r="";else{var i={start:e,end:t,offset:10,verticalLength:5},o=Zo(Ti(Ti({},i),{type:"start"})),a=Zo(Ti(Ti({},i),{type:"end"}));r="M".concat(o.leftX," ").concat(o.leftY,`
    L`).concat(o.rightX," ").concat(o.rightY,`
    L`).concat(a.rightX," ").concat(a.rightY,`
    L`).concat(a.leftX," ").concat(a.leftY," z")}return{d:r,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},oh=function(n){var e=n.start,t=n.end,r=n.sourceNode,i=n.targetNode,o=n.offset,a=Qt(r),s=Qt(i),l=bs(a,o),u=bs(s,o),c=xs(l,a,e),f=xs(u,s,t);return{sNext:c,ePre:f}},mf=function(n){var e=n.replace(/M/g,"").replace(/C/g,",").split(","),t=Pa(e[0]),r=Pa(e[1]),i=Pa(e[2]),o=Pa(e[3]);return[t,r,i,o]},Pa=function(n){var e=vn(n.replace(/(^\s*)/g,"").split(" "),2),t=e[0],r=e[1];return{x:+t,y:+r}},ah=function(n,e){var t=vn(n,4),r=t[0],i=t[1],o=t[2],a=t[3],s=SM(r,i,o,a,e);return[s,n[3]]},gy=function(n,e){for(var t=n.x,r=n.y,i=si(e),o=Number.MAX_SAFE_INTEGER,a,s=[],l=0;l<i.length;l++)s.push({start:i[l],end:i[(l+1)%i.length]});if(s.forEach(function(d){var h=d.start,v=d.end;if(h.x===v.x){var p={x:h.x,y:r},g=qo(p,h,v);if(g){var y=Math.abs(h.x-t);y<o&&(o=y,a=p)}}else if(h.y===v.y){var p={x:t,y:h.y},g=qo(p,h,v);if(g){var y=Math.abs(h.y-r);y<o&&(o=y,a=p)}}}),!a){var u=s[0],c=u.start,f=u.end;a={x:c.x+(f.x-c.x)/2,y:c.y+(f.y-c.y)/2}}return a},jT=function(n){return ei(n,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},sh=function(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))};function FT(n,e){return typeof e!="function"?function(t,r,i){return Object.assign({type:n.edgeType},i)}:function(t,r,i){var o=e(t,r,i);return o?typeof o=="string"?Object.assign({},i,{type:o}):Object.assign({type:o},i):{type:n.edgeType}}}var HT=function(n){var e=n.rows,t=n.rowsLength,r=n.fontSize,i=0;return ot(e,function(o){var a=vy(o);i=a>i?a:i}),{width:Math.ceil(i/2)*r+r/4,height:t*(r+2)+r/4}},bi=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Ra=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))};function Xi(n,e){return e*Math.round(n/e)||n}function WT(n,e,t){if(!n)return[];var r=Math.min.apply(Math,Ra([],bi(n.map(function(p){return p[0]})),!1)),i=Math.max.apply(Math,Ra([],bi(n.map(function(p){return p[0]})),!1)),o=Math.min.apply(Math,Ra([],bi(n.map(function(p){return p[1]})),!1)),a=Math.max.apply(Math,Ra([],bi(n.map(function(p){return p[1]})),!1)),s=-r,l=-o,u=n.map(function(p){var g=bi(p,2),y=g[0],b=g[1];return[y+s,b+l]}),c=i-r,f=a-o,d=e?e/c:1,h=t?t/f:1,v=Math.min(d,h);return u.map(function(p){var g=bi(p,2),y=g[0],b=g[1];return[y*v,b*v]})}var Kl=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},ql=function(n,e,t){var r=Kl(n,2),i=r[0],o=r[1],a=Kl(e,2),s=a[0],l=a[1],u=Kl(t,2),c=u[0],f=u[1];return i>s&&i<c&&o>l&&o<f},yy=function(n,e){var t=e.multipleSelectKey,r=!1;switch(t){case"meta":r=n.metaKey;break;case"alt":r=n.altKey;break;case"shift":r=n.shiftKey;break;case"ctrl":r=n.ctrlKey;break;default:r=!1;break}return r},_f=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function lh(n,e){return n instanceof jt&&e instanceof jt}var my=function(n){_f(e,n);function e(t,r,i){var o=n.call(this,3)||this;return o[0]=t,o[1]=r,o[2]=i,o.x=t,o.y=r,o.z=i,Object.setPrototypeOf(o,e.prototype),o}return e.prototype.add=function(t){if(lh(this,t))return new jt(this.x+t.x,this.y+t.y);var r=this.z+t.z;return new ju((this.x+t.x)/r,(this.y+t.y)/r)},e.prototype.subtract=function(t){if(lh(this,t))return new jt(this.x-t.x,this.y-t.y);var r=this.z-t.z;return r===0?new jt(this.x-t.x,this.y-t.y):new ju((this.x-t.x)/r,(this.y-t.y)/r)},e}(Array),jt=function(n){_f(e,n);function e(t,r,i){var o=n.call(this,t,r,i!=null?i:0)||this;return Object.setPrototypeOf(o,e.prototype),o}return e.prototype.toString=function(){return"Vector"},e.prototype.dot=function(t){var r=this;return t.reduce(function(i,o,a){return i+o*r[a]})},e.prototype.cross=function(t){return new e(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},e.prototype.getLength=function(){return Math.hypot(this.x,this.y)},e.prototype.normalize=function(){var t=this.getLength();return new e(this.x/t,this.y/t)},e.prototype.crossZ=function(t){return this.x*t.y-this.y*t.x},e.prototype.angle=function(t){var r=this.crossZ(t),i=Math.acos(this.normalize().dot(t.normalize()));return r>=0?i:-i},e}(my),ju=function(n){_f(e,n);function e(t,r){var i=n.call(this,t,r,1)||this;return Object.setPrototypeOf(i,e.prototype),i}return e.prototype.toString=function(){return"Point"},e}(my),Sl=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xi=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Zl=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},Cl=function(n){Sl(e,n);function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=n.call(this,t.length)||this;return i.fill(new Array(3)),t.forEach(function(o,a){i[a]=o}),i.columns=t[0].length,i.rows=t.length,Object.setPrototypeOf(i,e.prototype),i}return e.prototype.getRow=function(t){return this[t]},e.prototype.getColumn=function(t){return Zl([],xi(this.map(function(r){return r[t]})),!1)},e.prototype.transpose=function(){for(var t=[],r=0;r<this.columns;r++)t.push(this.getColumn(r));return new(e.bind.apply(e,Zl([void 0],xi(t),!1)))},e.prototype.cross=function(t){var r=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===t.rows)for(var i=0;i<this.rows;i++)for(var o=this.getRow(i),a=function(l){var u=t.getColumn(l);r[i][l]=o.reduce(function(c,f,d){return c+f*u[d]},0)},s=0;s<t.columns;s++)a(s);return new(e.bind.apply(e,Zl([void 0],xi(r),!1)))},e.prototype.to2D=function(){return this.map(function(t){return[t[0],t[1]]})},e.prototype.toPoints=function(){return this.map(function(t){return new ju(t[0],t[1])})},e.prototype.toString=function(){var t=xi(this[0],2),r=t[0],i=t[1],o=xi(this[1],2),a=o[0],s=o[1],l=xi(this[2],2),u=l[0],c=l[1];return"matrix(".concat(r," ").concat(i," ").concat(a," ").concat(s," ").concat(u," ").concat(c,")")},e.prototype.translate=function(t,r){return this.cross(new Ol(t,r))},e.prototype.rotate=function(t){return this.cross(new $T(t))},e.prototype.scale=function(t,r){return this.cross(new XT(t,r))},e}(Array),$T=function(n){Sl(e,n);function e(t){var r=n.call(this,new jt(+Math.cos(t).toFixed(2),+Math.sin(t).toFixed(2),0),new jt(-Math.sin(t).toFixed(2),+Math.cos(t).toFixed(2),0),new jt(0,0,1))||this;return Object.setPrototypeOf(r,e.prototype),r}return e.prototype.inverse=function(){return this.transpose()},e}(Cl),XT=function(n){Sl(e,n);function e(t,r){var i=n.call(this,new jt(t,0,0),new jt(0,r,0),new jt(0,0,1))||this;return i.sx=t,i.sy=r,Object.setPrototypeOf(i,e.prototype),i}return e.prototype.inverse=function(){return new e(1/this.sx,1/this.sy)},e}(Cl),Ol=function(n){Sl(e,n);function e(t,r){var i=n.call(this,new jt(1,0,0),new jt(0,1,0),new jt(t,r,1))||this;return i.tx=t,i.ty=r,Object.setPrototypeOf(i,e.prototype),i}return e.prototype.inverse=function(){return new e(-this.tx,-this.ty)},e}(Cl);_1({isolateGlobalState:!0});var As=function(){return As=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},As.apply(this,arguments)},Fu=function(n){var e=n.anchors;return e},Ss=function(n,e){for(var t=e.nodes,r,i=t.length-1;i>=0;i--){var o=t[i],a=GT(n,o);if(a){var s=o.getTargetAnchor(n);if(s){var l={node:o,anchorIndex:s.index,anchor:s.anchor};(!r||zT(o,r.node,e))&&(r=l)}}}return r},zT=function(n,e,t){return n.zIndex>e.zIndex?!0:t.nodesMap[n.id].index>t.nodesMap[e.id].index},UT=function(n,e){for(var t=Fu(e),r,i=Number.MAX_SAFE_INTEGER,o=0;o<t.length;o++){var a=kn(n.x,n.y,t[o].x,t[o].y);a<i&&(i=a,r={index:o,anchor:As(As({},t[o]),{x:t[o].x,y:t[o].y,id:t[o].id})})}return r},kn=function(n,e,t,r){return Math.hypot(n-t,e-r)},Or=function(n,e){var t=!1,r=0,i=Qt(e);return n.x>=i.minX-r&&n.x<=i.maxX+r&&n.y>=i.minY-r&&n.y<=i.maxY+r&&(t=!0),t},GT=function(n,e){var t=!1,r=5,i=Qt(e);return n.x>=i.minX-r&&n.x<=i.maxX+r&&n.y>=i.minY-r&&n.y<=i.maxY+r&&(t=!0),t},Qt=function(n){var e=n.x,t=n.y,r=n.width,i=n.height;return{minX:e-r/2,minY:t-i/2,maxX:e+r/2,maxY:t+i/2,x:e,y:t,width:r,height:i,centerX:e,centerY:t}},YT=function(n){var e=n,t=e.x,r=e.y,i=e.width,o=e.height,a=e.radius;return[{x:t-i/2+a,y:r-o/2+a,r:a},{x:t+i/2-a,y:r-o/2+a,r:a},{x:t-i/2+a,y:r+o/2-a,r:a},{x:t+i/2-a,y:r+o/2-a,r:a}]},uh=function(n,e,t){var r=YT(t),i,o=Number.MAX_SAFE_INTEGER;return r.forEach(function(a){var s=kn(n.x,n.y,a.x,a.y);s<o&&(o=s,i=a)}),Hu(n,e,i)},Hu=function(n,e,t){var r,i=t.x,o=t.y,a=t.r;if(e===_t.HORIZONTAL){var s=i-Math.sqrt(a*a-(n.y-o)*(n.y-o)),l=i+Math.sqrt(a*a-(n.y-o)*(n.y-o)),u=Math.abs(s-n.x)<Math.abs(l-n.x)?s:l;r={x:u,y:n.y}}else if(e===_t.VERTICAL){var c=o-Math.sqrt(a*a-(n.x-i)*(n.x-i)),f=o+Math.sqrt(a*a-(n.x-i)*(n.x-i)),d=Math.abs(c-n.y)<Math.abs(f-n.y)?c:f;r={x:n.x,y:d}}return r},ch=function(n,e){var t=e,r=!1,i=t.x,o=t.y,a=t.width,s=t.height,l=t.radius,u={minX:i-a/2+l,maxX:i+a/2-l,minY:o-s/2+l,maxY:o+s/2-l};return n.y===o+s/2||n.y===o-s/2?r=n.x>u.minX&&n.x<u.maxX:(n.x===i+a/2||n.x===i-a/2)&&(r=n.y>u.minY&&n.y<u.maxY),r},fh=function(n,e,t){var r,i=t,o=i.x,a=i.y,s=i.rx,l=i.ry;if(e===_t.HORIZONTAL){var u=o-Math.sqrt(s*s-(n.y-a)*(n.y-a)*s*s/(l*l)),c=o+Math.sqrt(s*s-(n.y-a)*(n.y-a)*s*s/(l*l)),f=Math.abs(u-n.x)<Math.abs(c-n.x)?u:c;r={x:f,y:n.y}}else if(e===_t.VERTICAL){var d=a-Math.sqrt(l*l-(n.x-o)*(n.x-o)*l*l/(s*s)),h=a+Math.sqrt(l*l-(n.x-o)*(n.x-o)*l*l/(s*s)),v=Math.abs(d-n.y)<Math.abs(h-n.y)?d:h;r={x:n.x,y:v}}return r},Da=function(n,e,t){for(var r=t.pointsPosition,i=Number.MAX_SAFE_INTEGER,o,a=[],s=0;s<r.length;s++)a.push({start:r[s],end:r[(s+1)%r.length]});return a.forEach(function(l){var u=l.start,c=l.end,f=u,d=c;u.x>c.x&&(f=c,d=u);var h={x:n.x,y:n.y};if(f.x===d.x&&e===_t.HORIZONTAL&&(h={x:f.x,y:n.y}),f.y===d.y&&e===_t.VERTICAL&&(h={x:n.x,y:f.y}),f.x!==d.x&&f.y!==d.y){var v=(d.y-f.y)/(d.x-f.x),p=(f.x*d.y-d.x*f.y)/(f.x-d.x);e===_t.HORIZONTAL?h={x:(n.y-p)/v,y:n.y}:e===_t.VERTICAL&&(h={x:n.x,y:v*n.x+p})}var g=qo(h,u,c);if(g){var y=kn(h.x,h.y,n.x,n.y);y<i&&(i=y,o=h)}}),o},VT=function(n){var e=ei(n,["id","type","x","y","text","label","properties","virtual","rotate","resizable","rotatable"]);return e},dh=function(n,e,t,r){var i=n.x,o=n.y;return e.x>n.x?i=n.x+t/2:e.x<n.x&&(i=n.x-t/2),e.y>n.y?o=n.y+r/2:e.y<n.y&&(o=n.y-r/2),{x:i,y:o}},_y=function(n){var e=n.rows,t=n.style,r=n.rowsLength,i=n.className,o=document.createElement("div");o.className=i,o.style.fontSize="".concat(t.fontSize),o.style.width="".concat(t.width),o.style.lineHeight="".concat(t.lineHeight),o.style.padding="".concat(t.padding),t.fontFamily&&(o.style.fontFamily="".concat(t.fontFamily)),r>1?e.forEach(function(s){var l=document.createElement("div");l.textContent=s,o.appendChild(l)}):o.textContent=e[0],document.body.appendChild(o);var a=o.clientHeight;return document.body.removeChild(o),a},hh=function(n){var e=n.rows,t=n.rowsLength,r=n.fontSize,i=0;return e&&e.forEach(function(o){var a=vy(o);i=a>i?a:i}),{width:Math.ceil(i/2)*r+r/4,height:t*(r+2)+r/4}},Cs=function(n){return typeof n!="object"?{isAllPass:!!n,msg:n?"":"不允许连接"}:n};let La;const KT=new Uint8Array(16);function qT(){if(!La&&(La=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!La))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return La(KT)}const Bt=[];for(let n=0;n<256;++n)Bt.push((n+256).toString(16).slice(1));function ZT(n,e=0){return Bt[n[e+0]]+Bt[n[e+1]]+Bt[n[e+2]]+Bt[n[e+3]]+"-"+Bt[n[e+4]]+Bt[n[e+5]]+"-"+Bt[n[e+6]]+Bt[n[e+7]]+"-"+Bt[n[e+8]]+Bt[n[e+9]]+"-"+Bt[n[e+10]]+Bt[n[e+11]]+Bt[n[e+12]]+Bt[n[e+13]]+Bt[n[e+14]]+Bt[n[e+15]]}const JT=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ph={randomUUID:JT};function QT(n,e,t){if(ph.randomUUID&&!e&&!n)return ph.randomUUID();n=n||{};const r=n.random||(n.rng||qT)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ZT(r)}var Nr=function(){return QT()},Po=new Map,by=function(n){var e=Nr();function t(){n();var i=Po.get(e);if(i){var o=window.requestAnimationFrame(t);Po.set(e,o)}}var r=window.requestAnimationFrame(t);return Po.set(e,r),e},Os=function(n){var e=Po.get(n);e&&(window.cancelAnimationFrame(e),Po.delete(n))},Qo=function(){return Qo=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Qo.apply(this,arguments)},eM=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function xy(n){var e=n.x,t=e===void 0?0:e,r=n.y,i=r===void 0?0:r,o=n.value,a=n.fontSize,s=a===void 0?12:a,l=n.fill,u=l===void 0?"currentColor":l,c=n.overflowMode,f=c===void 0?"default":c,d=n.textWidth,h=d===void 0?void 0:d,v=n.model,p={x:t,y:i,fill:u,fontSize:s,textAnchor:"middle",dominantBaseline:"central"};if(ot(rr(n),function(B){var R=eM(B,2),A=R[0],O=R[1];typeof O!="object"&&(p[A]=O)}),o){var g=String(o).split(/[\r\n]/g),y=g.length;if(f!=="default"){var b=v.BaseType,C=v.modelType;if(b===Et.NODE&&C!==He.TEXT_NODE||b===Et.EDGE&&h)return tM(n)}if(y>1){var D=g.map(function(B,R){var A=s+2,O=(R-(y-1)/2)*A;return j("tspan",{className:"lf-text-tspan",x:t,y:i+O,children:B})});return j("text",Qo({},p,{children:D}))}return j("text",Qo({},p,{children:o}))}return null}function tM(n){var e=n.x,t=n.y,r=n.value,i=n.model,o=n.textWidth,a=n.fontSize,s=a===void 0?12:a,l=n.lineHeight,u=n.fontFamily,c=u===void 0?"":u,f=n.wrapPadding,d=f===void 0?"0, 0":f,h=n.overflowMode,v=i.width,p=i.height,g=i.textHeight,y=o||v,b=String(r).split(/[\r\n]/g),C=b.length,D=_y({rows:b,style:{fontSize:"".concat(s,"px"),width:"".concat(y,"px"),fontFamily:c,lineHeight:l,padding:d},rowsLength:C,className:"lf-get-text-height"}),B=p>D?p:D;g&&(B=g);var R=h==="ellipsis";return R&&(B=s+2),j("g",{children:j("foreignObject",{width:y,height:B,x:e-y/2,y:t-B/2,style:{overflow:"visible",textAlign:"left"},children:j("div",{className:"lf-node-text-auto-wrap",style:{minHeight:B,width:y,padding:d},children:j("div",{className:R?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:R?b.join(""):"",style:Qo({},n),children:b.map(function(A){return j("div",{className:"lf-node-text--auto-wrap-inner",children:A})})})})})})}var Wu=function(){return Wu=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Wu.apply(this,arguments)},nM=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function zi(n){var e={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return ot(rr(n),function(t){var r=nM(t,2),i=r[0],o=r[1];(i==="style"||typeof o!="object")&&(e[i]=o)}),j("line",Wu({},e))}var $u=function(){return $u=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},$u.apply(this,arguments)},rM=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function gn(n){var e=n.x,t=n.y,r=n.width,i=n.height,o=n.className,a=n.strokeWidth,s=n.radius,l=s===void 0?0:s,u=e-r/2,c=t-i/2,f={};return f["stroke-width"]=a,ot(rr(n),function(d){var h=rM(d,2),v=h[0],p=h[1];typeof p!="object"&&(f[v]=p)}),o?f.className="lf-basic-shape ".concat(o):f.className="lf-basic-shape",l&&(f.rx=l,f.ry=l),f.x=u,f.y=c,j("rect",$u({},f))}var Xu=function(){return Xu=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Xu.apply(this,arguments)},iM=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function ea(n){var e={d:""};return ot(rr(n),function(t){var r=iM(t,2),i=r[0],o=r[1];(i==="style"||typeof o!="object")&&(e[i]=o)}),j("path",Xu({},e))}var zu=function(){return zu=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},zu.apply(this,arguments)},oM=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function Ui(n){var e=n.x,t=e===void 0?0:e,r=n.y,i=r===void 0?0:r,o=n.r,a=o===void 0?4:o,s=n.className,l={cx:t,cy:i,r:a,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return ot(rr(n),function(u){var c=oM(u,2),f=c[0],d=c[1];typeof d!="object"&&(l[f]=d)}),s?l.className="lf-basic-shape ".concat(s):l.className="lf-basic-shape",j("circle",zu({},l))}var Uu=function(){return Uu=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Uu.apply(this,arguments)},aM=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function sM(n){var e=n.x,t=e===void 0?0:e,r=n.y,i=r===void 0?0:r,o=n.rx,a=o===void 0?4:o,s=n.ry,l=s===void 0?4:s,u=n.className,c={cx:t,cy:i,rx:a,ry:l,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return ot(rr(n),function(f){var d=aM(f,2),h=d[0],v=d[1];typeof v!="object"&&(c[h]=v)}),u?c.className="lf-basic-shape ".concat(u):c.className="lf-basic-shape",j("ellipse",Uu({},c))}var Gu=function(){return Gu=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Gu.apply(this,arguments)},lM=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function bf(n){var e=n.points,t=e===void 0?[]:e,r=n.className,i={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return ot(rr(n),function(o){var a=lM(o,2),s=a[0],l=a[1];typeof l!="object"&&(i[s]=l)}),r?i.classNmae="lf-basic-shape ".concat(r):i.className="lf-basic-shape",i.points=t.map(function(o){return o.join(",")}).join(" "),j("polygon",Gu({},i))}var Yu=function(){return Yu=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Yu.apply(this,arguments)},uM=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o};function cM(n){var e=n.className,t={points:"",fill:"none"};return ot(rr(n),function(r){var i=uM(r,2),o=i[0],a=i[1];(o==="style"||typeof a!="object")&&(t[o]=a)}),e&&(t.className="".concat(e)),j("polyline",Yu({},t))}var Ey=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ta=function(){return ta=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ta.apply(this,arguments)},fM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},dM=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},ft;(function(n){n[n.LEFT_TOP=0]="LEFT_TOP",n[n.RIGHT_TOP=1]="RIGHT_TOP",n[n.RIGHT_BOTTOM=2]="RIGHT_BOTTOM",n[n.LEFT_BOTTOM=3]="LEFT_BOTTOM"})(ft||(ft={}));var hM=function(n){Ey(e,n);function e(t){var r=n.call(this)||this;r.updateEdgePointByAnchors=function(){var s=r.nodeModel,l=s.id,u=s.anchors,c=r.graphModel.getNodeEdges(l);ot(c,function(f){if(f.sourceNodeId===l){var d=Rr(u,function(h){return h.id===f.sourceAnchorId});d&&f.updateStartPoint({x:d.x,y:d.y})}else if(f.targetNodeId===l){var d=Rr(u,function(v){return v.id===f.targetAnchorId});d&&f.updateEndPoint({x:d.x,y:d.y})}})},r.triggerResizeEvent=function(s,l,u,c,f,d){r.graphModel.eventCenter.emit(he.NODE_RESIZE,{preData:s,data:l,deltaX:u,deltaY:c,index:f,model:d})},r.recalcResizeInfo=function(s,l,u,c,f){u===void 0&&(u=1),c===void 0&&(c=!1),f===void 0&&(f=!1);var d=je(l),h=d.deltaX,v=d.deltaY,p=d.width,g=d.height,y=d.PCTResizeInfo;if(y){var b=4,C=0,D=0;switch(s){case ft.LEFT_TOP:D=(h*-1-v)/b;break;case ft.RIGHT_TOP:D=(h-v)/b;break;case ft.RIGHT_BOTTOM:D=(h+v)/b;break;case ft.LEFT_BOTTOM:D=(h*-1+v)/b;break}D!==0&&(C=Math.round(D/y.ResizeBasis.basisHeight*1e5)/1e3),y.ResizePCT.widthPCT=Math.max(Math.min(y.ResizePCT.widthPCT+C,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit),y.ResizePCT.heightPCT=Math.max(Math.min(y.ResizePCT.heightPCT+C,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit);var B=Math.round(y.ResizePCT.widthPCT*y.ResizeBasis.basisWidth/100),R=Math.round(y.ResizePCT.heightPCT*y.ResizeBasis.basisHeight/100);switch(s){case ft.LEFT_TOP:h=p-B,v=g-R;break;case ft.RIGHT_TOP:h=B-p,v=g-R;break;case ft.RIGHT_BOTTOM:h=B-p,v=R-g;break;case ft.LEFT_BOTTOM:h=p-B,v=R-g;break}return d}switch(s){case ft.LEFT_TOP:d.width=c?p:p-h*u,d.height=f?g:g-v*u;break;case ft.RIGHT_TOP:d.width=c?p:p+h*u,d.height=f?g:g-v*u;break;case ft.RIGHT_BOTTOM:d.width=c?p:p+h*u,d.height=f?g:g+v*u;break;case ft.LEFT_BOTTOM:d.width=c?p:p-h*u,d.height=f?g:g+v*u;break}return d},r.resizeNode=function(s){var l=s.deltaX,u=s.deltaY,c=r.index,f=r.props,d=f.model,h=f.graphModel,v=f.x,p=f.y;wy({x:v,y:p,deltaX:l,deltaY:u,index:c,nodeModel:d,graphModel:h,cancelCallback:function(){r.dragHandler.cancelDrag()}})},r.onDragging=function(s){var l=s.deltaX,u=s.deltaY,c=r.graphModel.transformModel,f=dM(c.fixDeltaXY(l,u),2),d=f[0],h=f[1];r.resizeNode({deltaX:d,deltaY:h})},r.onDragEnd=function(){var s=r.nodeModel.x,l=r.nodeModel.y;r.nodeModel.moveTo(s,l),r.updateEdgePointByAnchors()};var i=t.index,o=t.model,a=t.graphModel;return r.index=i,r.nodeModel=o,r.graphModel=a,r.dragHandler=new Sn({onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:a.gridSize}),r}return e.prototype.componentWillUnmount=function(){this.dragHandler.destroy()},e.prototype.render=function(){var t=this.props,r=t.x,i=t.y,o=t.direction,a=t.model,s=a.getResizeControlStyle(),l=s.width,u=s.height,c=fM(s,["width","height"]);return j("g",{className:"lf-resize-control lf-resize-control-".concat(o),children:[j(gn,ta({className:"lf-resize-control-content",x:r,y:i,width:l!=null?l:7,height:u!=null?u:7},c)),j(gn,{className:"lf-resize-control-content",x:r,y:i,width:25,height:25,fill:"transparent",stroke:"transparent",onMouseDown:this.dragHandler.handleMouseDown})]})},e}(Ue),pM=function(n){Ey(e,n);function e(){return n.call(this)||this}return e.prototype.getResizeControl=function(){var t=this.props,r=t.model,i=t.graphModel,o=Qt(r),a=o.minX,s=o.minY,l=o.maxX,u=o.maxY,c=[{index:ft.LEFT_TOP,direction:"nw",x:a,y:s},{index:ft.RIGHT_TOP,direction:"ne",x:l,y:s},{index:ft.RIGHT_BOTTOM,direction:"se",x:l,y:u},{index:ft.LEFT_BOTTOM,direction:"sw",x:a,y:u}];return bn(c,function(f){return j(hM,ta({},f,{model:r,graphModel:i}))})},e.prototype.getResizeOutline=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.getResizeOutlineStyle();return j(gn,ta({},s,{x:r,y:i,width:o,height:a}))},e.prototype.render=function(){return j("g",{className:"lf-resize-control-group",children:[this.getResizeOutline(),this.getResizeControl()]})},e}(Ue);function vM(n,e){var t=n.x,r=n.y,i=e.x,o=e.y,a={x:t+(i-t)/2,y:r+(o-r)/2};return a}function Mo(n,e,t){var r=gM(t),i=n.x-e.x,o=n.y-e.y,a=i*Math.cos(r)-o*Math.sin(r)+e.x,s=i*Math.sin(r)+o*Math.cos(r)+e.y;return{x:a,y:s}}function gM(n){return n*Math.PI/180}function yM(n){return n/Math.PI*180}function mM(n,e,t,r,i,o,a,s,l){s===void 0&&(s=!1),l===void 0&&(l=!1);var u=e.deltaX,c=e.deltaY,f=e.width,d=e.height,h=yM(t),v={x:r,y:i},p={x:o,y:a},g=Mo(v,p,h),y={x:g.x+u,y:g.y+c},b=EM(g,y,p,h,s,l,f,d),C=b.width,D=b.height,B=b.center;return e.width=C*n,e.height=D*n,e.deltaX=(B.x-p.x)*2,e.deltaY=(B.y-p.y)*2,e}var _M=function(n,e,t,r,i,o,a,s,l,u){t===void 0&&(t=1),r===void 0&&(r=!1),i===void 0&&(i=!1),o===void 0&&(o=0);var c=je(e),f=c.deltaX,d=c.deltaY,h=c.width,v=c.height,p=c.PCTResizeInfo;if(p){var g=4,y=0,b=0;switch(n){case ft.LEFT_TOP:b=(f*-1-d)/g;break;case ft.RIGHT_TOP:b=(f-d)/g;break;case ft.RIGHT_BOTTOM:b=(f+d)/g;break;case ft.LEFT_BOTTOM:b=(f*-1+d)/g;break}b!==0&&(y=Math.round(b/p.ResizeBasis.basisHeight*1e5)/1e3),p.ResizePCT.widthPCT=Math.max(Math.min(p.ResizePCT.widthPCT+y,p.ScaleLimit.maxScaleLimit),p.ScaleLimit.minScaleLimit),p.ResizePCT.heightPCT=Math.max(Math.min(p.ResizePCT.heightPCT+y,p.ScaleLimit.maxScaleLimit),p.ScaleLimit.minScaleLimit);var C=Math.round(p.ResizePCT.widthPCT*p.ResizeBasis.basisWidth/100),D=Math.round(p.ResizePCT.heightPCT*p.ResizeBasis.basisHeight/100);switch(n){case ft.LEFT_TOP:f=h-C,d=v-D;break;case ft.RIGHT_TOP:f=C-h,d=v-D;break;case ft.RIGHT_BOTTOM:f=C-h,d=D-v;break;case ft.LEFT_BOTTOM:f=h-C,d=D-v;break}return c}if(o%(2*Math.PI)!==0&&a!==void 0&&s!==void 0)return mM(t,c,o,a,s,l,u,r,i);switch(n){case ft.LEFT_TOP:c.width=r?h:h-f*t,c.height=i?v:v-d*t;break;case ft.RIGHT_TOP:c.width=r?h:h+f*t,c.height=i?v:v-d*t;break;case ft.RIGHT_BOTTOM:c.width=r?h:h+f*t,c.height=i?v:v+d*t;break;case ft.LEFT_BOTTOM:c.width=r?h:h-f*t,c.height=i?v:v+d*t;break}return c},bM=function(n,e){var t=n.id,r=n.anchors,i=e.getNodeEdges(t);ot(i,function(o){if(o.sourceNodeId===t){var a=Rr(r,function(s){return s.id===o.sourceAnchorId});a&&o.updateStartPoint({x:a.x,y:a.y})}else if(o.targetNodeId===t){var a=Rr(r,function(l){return l.id===o.targetAnchorId});a&&o.updateEndPoint({x:a.x,y:a.y})}})},xM=function(n,e,t,r,i,o,a){a.eventCenter.emit(he.NODE_RESIZE,{preData:n,data:e,deltaX:t,deltaY:r,index:i,model:o})},wy=function(n){var e=n.x,t=n.y,r=n.deltaX,i=n.deltaY,o=n.index,a=n.nodeModel,s=n.graphModel,l=n.cancelCallback,u=a.r,c=a.rx,f=a.ry,d=a.width,h=a.height,v=a.PCTResizeInfo,p=a.minWidth,g=a.minHeight,y=a.maxWidth,b=a.maxHeight,C=a.rotate,D=a.x,B=a.y,R=p===y,A=g===b,O={width:u||c||d,height:u||f||h,deltaX:r,deltaY:i,PCTResizeInfo:v},F=u||c&&f?1/2:1,Z=e,ue=t,ce=_M(o,O,F,R,A,C,Z,ue,D,B);if(ce.width<p||ce.width>y||ce.height<g||ce.height>b){l==null||l();return}(C%(2*Math.PI)==0||v||Z===void 0||ue===void 0)&&(ce.deltaX=R?0:ce.deltaX,ce.deltaY=A?0:ce.deltaY);var w=a.getData(),M=a.resize(ce);w.x===M.x&&w.y===M.y||(bM(a,s),xM(w,M,r,i,o,a,s))};function EM(n,e,t,r,i,o,a,s){i===void 0&&(i=!1),o===void 0&&(o=!1);var l={x:t.x-(n.x-t.x),y:t.y-(n.y-t.y)},u=vM(l,e),c=Mo(e,u,-r),f=Mo(l,u,-r);if(i){var d=Math.abs(c.x-f.x),h=d-a;u.x>c.x?u.x=u.x+h/2:u.x=u.x-h/2}if(o){var v=Math.abs(c.y-f.y),p=v-s;u.y>c.y?u.y=u.y+p/2:u.y=u.y-p/2}if(i||o){var g=Mo(f,u,r),y=g.x-l.x,b=g.y-l.y;u.x=u.x-y,u.y=u.y-b,f=Mo(l,u,-r),c={x:u.x-(f.x-u.x),y:u.y-(f.y-u.y)}}var C=Math.abs(c.x-f.x),D=Math.abs(c.y-f.y);return i&&(C=a),o&&(D=s),{width:C,height:D,center:u}}var wM=100,AM={x:1,y:0,z:0};function SM(n,e,t,r,i){for(var o=function(h){if(h<0||h>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:n.x*Math.pow(1-h,3)+3*e.x*h*Math.pow(1-h,2)+3*t.x*Math.pow(h,2)*(1-h)+r.x*Math.pow(h,3),y:n.y*Math.pow(1-h,3)+3*e.y*h*Math.pow(1-h,2)+3*t.y*Math.pow(h,2)*(1-h)+r.y*Math.pow(h,3)}},a=0,s=2,l=r.x,u=r.y,c=r;a<i&&s<50;){c=o(1-s/wM);var f=c.x,d=c.y;a=kn(l,u,f,d),s++}return c}function CM(n,e){return n.x*e.y-n.y*e.x}function OM(n,e){var t=[n.x,n.y,n.z],r=[e.x,e.y,e.z];return r.reduce(function(i,o,a){return i+o*t[a]})}function TM(n,e){var t=CM(n,e),r=Math.acos(OM(vh(n),vh(e)));return t>=0?r:-r}function vh(n){var e=Math.hypot(n.x,n.y);return{x:n.x/e,y:n.y/e,z:0}}function MM(n){return TM(AM,n)}function NM(n){return n*(180/Math.PI)}var PM={baseNode:{fill:"#fff",stroke:"#000",strokeWidth:2},baseEdge:{stroke:"#000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000",fill:"#fff",r:4,hover:{r:10,fill:"#949494",fillOpacity:.5,stroke:"#949494"}},anchorLine:{stroke:"#000",strokeWidth:2,strokeDasharray:"3,2"},nodeText:{color:"#000",overflowMode:"default",fontSize:12,lineHeight:1.2},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#fff"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",fillOpacity:1,stroke:"#949494"}},arrow:{offset:10,verticalLength:5},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#fff",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10,10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5},resizeControl:{width:7,height:7,fill:"#fff",stroke:"#000"},resizeOutline:{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},Ay=function(n){var e=je(PM);return n&&(e=Li(e,n)),e},RM=Ay,DM=1e3,LM=999,xf=function(){return++DM},kM=function(){return--LM},St=function(){return St=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},St.apply(this,arguments)},_e=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Tl=function(){function n(e,t){var r;this.BaseType=Et.EDGE,this.id="",this.type="",this.sourceNodeId="",this.targetNodeId="",this.textMode=mn.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this.points="",this.pointsList=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.isAnimation=!1,this.isShowAdjustPoint=!1,this.zIndex=0,this.state=Ze.DEFAULT,this.modelType=He.EDGE,this.customTextPosition=!1,this.style={},this.arrowConfig={markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")},this.graphModel=t,this.properties=(r=e.properties)!==null&&r!==void 0?r:{},this.initEdgeData(e),this.setAttributes()}return n.prototype.initEdgeData=function(e){if(e.properties||(e.properties={}),!e.id){var t=this.graphModel.idGenerator,r=t&&t(e.type),i=this.createId();e.id=i||r||Nr()}this.arrowConfig.markerEnd="url(#marker-end-".concat(e.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(e.id,")");var o=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=o,lt(this,jT(e));var a=this.graphModel.overlapMode;a===Ln.INCREASE&&(this.zIndex=e.zIndex||xf()),this.setAnchors(),this.initPoints(),this.formatText(e)},n.prototype.setAttributes=function(){},n.prototype.createId=function(){return null},n.prototype.getEdgeStyle=function(){return St(St({},this.graphModel.theme.baseEdge),this.style)},n.prototype.getAdjustPointStyle=function(){return St({},this.graphModel.theme.edgeAdjust)},n.prototype.getTextStyle=function(){var e=this.graphModel.theme.edgeText;return je(e)},n.prototype.getEdgeAnimationStyle=function(){var e=this.graphModel.theme.edgeAnimation;return je(e)},n.prototype.getArrowStyle=function(){var e=this.getEdgeStyle(),t=this.getEdgeAnimationStyle(),r=this.graphModel.theme.arrow,i=this.isAnimation?t.stroke:e.stroke;return St(St(St({},e),{fill:i,stroke:i}),r)},n.prototype.getOutlineStyle=function(){var e=this.graphModel,t=e.theme.outline;return je(t)},n.prototype.getTextPosition=function(){return{x:0,y:0}},Object.defineProperty(n.prototype,"sourceNode",{get:function(){var e,t;return(t=(e=this.graphModel)===null||e===void 0?void 0:e.nodesMap[this.sourceNodeId])===null||t===void 0?void 0:t.model},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"targetNode",{get:function(){var e,t;return(t=(e=this.graphModel)===null||e===void 0?void 0:e.nodesMap[this.targetNodeId])===null||t===void 0?void 0:t.model},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textPosition",{get:function(){return this.getTextPosition()},enumerable:!1,configurable:!0}),n.prototype.getBeginAnchor=function(e,t,r){var i,o,a=Fu(e);if(r){if(i=Rr(a,function(s){return s.id===r}),i)return i;console.warn("未在节点上找到指定的起点锚点".concat(r,"，已使用默认锚点作为起点"))}return a.forEach(function(s){var l=sh(s,t);(o===void 0||l<o)&&(o=l,i=s)}),i},n.prototype.getEndAnchor=function(e,t){var r=this,i,o,a=Fu(e);if(t){if(i=Rr(a,function(s){return s.id===t}),i)return i;console.warn("未在节点上找到指定的终点锚点".concat(t,"，已使用默认锚点作为终点"))}return a.forEach(function(s){if(r.startPoint){var l=sh(s,r.startPoint);(o===void 0||l<o)&&(o=l,i=s)}}),i},n.prototype.getProperties=function(){return Pn(this.properties)},n.prototype.getData=function(){var e=this.properties;Wi(e)&&(e=Pn(e));var t={id:this.id,type:this.type,properties:e,sourceNodeId:this.sourceNodeId,targetNodeId:this.targetNodeId,startPoint:lt({},this.startPoint),endPoint:lt({},this.endPoint)};this.graphModel.overlapMode===Ln.INCREASE&&(t.zIndex=this.zIndex);var r=this.text,i=r.x,o=r.y,a=r.value;return a&&(t.text={x:i,y:o,value:a}),t},n.prototype.getHistoryData=function(){return this.getData()},n.prototype.setProperty=function(e,t){hf(this.properties,e,$t(t)),this.setAttributes()},n.prototype.deleteProperty=function(e){delete this.properties[e],this.setAttributes()},n.prototype.setProperties=function(e){this.properties=St(St({},Pn(this.properties)),$t(e)),this.setAttributes()},n.prototype.changeEdgeId=function(e){var t=this.arrowConfig,r=t.markerEnd,i=t.markerStart;i&&i==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(e,")")),r&&r==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(e,")")),this.id=e},n.prototype.setStyle=function(e,t){var r;this.style=St(St({},this.style),(r={},r[e]=$t(t),r))},n.prototype.setStyles=function(e){this.style=St(St({},this.style),$t(e))},n.prototype.updateStyles=function(e){this.style=St({},$t(e))},n.prototype.setTextMode=function(e){this.textMode=e},n.prototype.formatText=function(e){var t,r,i,o=this.textPosition,a=o.x,s=o.y,l=e.text,u={value:"",x:a,y:s,draggable:!1,editable:!0};l&&(typeof l=="string"?u=St(St({},u),{value:l}):(u=St(St({},u),{x:(t=l.x)!==null&&t!==void 0?t:a,y:(r=l.y)!==null&&r!==void 0?r:s,value:(i=l.value)!==null&&i!==void 0?i:""}),oi(l.draggable)||(u.draggable=l.draggable),oi(l.editable)||(u.editable=l.editable))),this.text=u},n.prototype.resetTextPosition=function(){var e=this.textPosition,t=e.x,r=e.y;this.text.x=t,this.text.y=r},n.prototype.moveText=function(e,t){var r=this.text,i=r.x,o=r.y,a=r.value,s=r.draggable,l=r.editable;this.text={value:a,editable:l,draggable:s,x:i+e,y:o+t}},n.prototype.setText=function(e){e&&lt(this.text,e)},n.prototype.updateText=function(e){this.text=St(St({},Pn(this.text)),{value:e})},n.prototype.setAnchors=function(){if(!this.sourceAnchorId||!this.startPoint){var e=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!e)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:e.x,y:e.y}),this.sourceAnchorId||(this.sourceAnchorId=e.id)}if(!this.targetAnchorId||!this.endPoint){var e=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!e)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:e.x,y:e.y}),this.targetAnchorId||(this.targetAnchorId=e.id)}},n.prototype.setSelected=function(e){e===void 0&&(e=!0),this.isSelected=e},n.prototype.setHovered=function(e){e===void 0&&(e=!0),this.isHovered=e},n.prototype.setHitable=function(e){e===void 0&&(e=!0),this.isHitable=e},n.prototype.setHittable=function(e){e===void 0&&(e=!0),this.isHittable=e},n.prototype.openEdgeAnimation=function(){this.isAnimation=!0},n.prototype.closeEdgeAnimation=function(){this.isAnimation=!1},n.prototype.setElementState=function(e,t){this.state=e,this.additionStateData=t},n.prototype.updateStartPoint=function(e){this.startPoint=e},n.prototype.moveStartPoint=function(e,t){this.startPoint&&(this.startPoint.x+=e,this.startPoint.y+=t)},n.prototype.updateEndPoint=function(e){this.endPoint=e},n.prototype.moveEndPoint=function(e,t){this.endPoint&&(this.endPoint.x+=e,this.endPoint.y+=t)},n.prototype.setZIndex=function(e){e===void 0&&(e=0),this.zIndex=e},n.prototype.initPoints=function(){},n.prototype.updateAttributes=function(e){lt(this,e)},n.prototype.getAdjustStart=function(){return this.startPoint},n.prototype.getAdjustEnd=function(){return this.endPoint},n.prototype.updateAfterAdjustStartAndEnd=function(e){var t=e.startPoint,r=e.endPoint;this.updateStartPoint({x:t.x,y:t.y}),this.updateEndPoint({x:r.x,y:r.y})},n.BaseType=Et.EDGE,_e([$],n.prototype,"type",void 0),_e([$],n.prototype,"sourceNodeId",void 0),_e([$],n.prototype,"targetNodeId",void 0),_e([$],n.prototype,"startPoint",void 0),_e([$],n.prototype,"endPoint",void 0),_e([$],n.prototype,"textMode",void 0),_e([$],n.prototype,"text",void 0),_e([$],n.prototype,"properties",void 0),_e([$],n.prototype,"points",void 0),_e([$],n.prototype,"pointsList",void 0),_e([$],n.prototype,"isSelected",void 0),_e([$],n.prototype,"isHovered",void 0),_e([$],n.prototype,"isHitable",void 0),_e([$],n.prototype,"isHittable",void 0),_e([$],n.prototype,"draggable",void 0),_e([$],n.prototype,"visible",void 0),_e([$],n.prototype,"isAnimation",void 0),_e([$],n.prototype,"isShowAdjustPoint",void 0),_e([$],n.prototype,"zIndex",void 0),_e([$],n.prototype,"state",void 0),_e([$],n.prototype,"style",void 0),_e([$],n.prototype,"arrowConfig",void 0),_e([vt],n.prototype,"sourceNode",null),_e([vt],n.prototype,"targetNode",null),_e([vt],n.prototype,"textPosition",null),_e([H],n.prototype,"setProperty",null),_e([H],n.prototype,"deleteProperty",null),_e([H],n.prototype,"setProperties",null),_e([H],n.prototype,"changeEdgeId",null),_e([H],n.prototype,"setStyle",null),_e([H],n.prototype,"setStyles",null),_e([H],n.prototype,"updateStyles",null),_e([H],n.prototype,"setTextMode",null),_e([H],n.prototype,"formatText",null),_e([H],n.prototype,"resetTextPosition",null),_e([H],n.prototype,"moveText",null),_e([H],n.prototype,"setText",null),_e([H],n.prototype,"updateText",null),_e([H],n.prototype,"setAnchors",null),_e([H],n.prototype,"setSelected",null),_e([H],n.prototype,"setHovered",null),_e([H],n.prototype,"setHitable",null),_e([H],n.prototype,"setHittable",null),_e([H],n.prototype,"openEdgeAnimation",null),_e([H],n.prototype,"closeEdgeAnimation",null),_e([H],n.prototype,"setElementState",null),_e([H],n.prototype,"updateStartPoint",null),_e([H],n.prototype,"moveStartPoint",null),_e([H],n.prototype,"updateEndPoint",null),_e([H],n.prototype,"moveEndPoint",null),_e([H],n.prototype,"setZIndex",null),_e([H],n.prototype,"initPoints",null),_e([H],n.prototype,"updateAttributes",null),_e([H],n.prototype,"getAdjustStart",null),_e([H],n.prototype,"getAdjustEnd",null),_e([H],n.prototype,"updateAfterAdjustStartAndEnd",null),n}(),IM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qr=function(){return qr=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},qr.apply(this,arguments)},On=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Jl=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},gh=function(n){IM(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.modelType=He.BEZIER_EDGE,i.path="",i.initEdgeData(t),i.setAttributes(),i}return e.prototype.initEdgeData=function(t){this.offset=100,n.prototype.initEdgeData.call(this,t)},e.prototype.getEdgeStyle=function(){var t=this.graphModel.theme.bezier,r=n.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return qr(qr(qr({},r),je(t)),je(o))},e.prototype.getTextPosition=function(){if(this.pointsList&&this.pointsList.length>0){var t=0,r=0;return this.pointsList.forEach(function(i){var o=i.x,a=i.y;t+=o,r+=a}),{x:t/this.pointsList.length,y:r/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},e.prototype.getData=function(){var t=n.prototype.getData.call(this),r=this.pointsList.map(function(i){var o=i.x,a=i.y;return{x:o,y:a}});return qr(qr({},t),{pointsList:r})},e.prototype.getControls=function(){var t=this.startPoint,r=this.endPoint,i=oh({start:t,end:r,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset});return i},e.prototype.getPath=function(t){var r=Jl(t,4),i=r[0],o=r[1],a=r[2],s=r[3];return"M ".concat(i.x," ").concat(i.y,`
    C `).concat(o.x," ").concat(o.y,`,
    `).concat(a.x," ").concat(a.y,`,
    `).concat(s.x," ").concat(s.y)},e.prototype.initPoints=function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()},e.prototype.updatePoints=function(){var t=this.getControls(),r=t.sNext,i=t.ePre;this.updatePath(r,i)},e.prototype.updatePath=function(t,r){t=je(t),r=je(r);var i={x:this.startPoint.x,y:this.startPoint.y},o={x:this.endPoint.x,y:this.endPoint.y};if(!t||!r){var a=this.getControls();t=a.sNext,r=a.ePre}this.pointsList=[i,t,r,o],this.path=this.getPath(this.pointsList)},e.prototype.updateStartPoint=function(t){this.startPoint=Object.assign({},t),this.updatePoints()},e.prototype.updateEndPoint=function(t){this.endPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveStartPoint=function(t,r){this.startPoint.x+=t,this.startPoint.y+=r;var i=Jl(this.pointsList,3),o=i[1],a=i[2];o.x+=t,o.y+=r,this.updatePath(o,a)},e.prototype.moveEndPoint=function(t,r){this.endPoint.x+=t,this.endPoint.y+=r;var i=Jl(this.pointsList,3),o=i[1],a=i[2];a.x+=t,a.y+=r,this.updatePath(o,a)},e.prototype.updateAdjustAnchor=function(t,r){var i;r==="sNext"?this.pointsList[1]=t:r==="ePre"&&(this.pointsList[2]=t),this.path=this.getPath(this.pointsList),!((i=this.text)===null||i===void 0)&&i.value&&this.setText(lt({},this.text,this.textPosition))},e.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},e.prototype.getAdjustEnd=function(){var t=this.pointsList;return t[t.length-1]||this.endPoint},e.prototype.updateAfterAdjustStartAndEnd=function(t){var r=t.startPoint,i=t.endPoint,o=t.sourceNode,a=t.targetNode,s=oh({start:r,end:i,sourceNode:o,targetNode:a,offset:this.offset}),l=s.sNext,u=s.ePre;this.pointsList=[r,l,u,i],this.initPoints()},On([$],e.prototype,"path",void 0),On([H],e.prototype,"initPoints",null),On([H],e.prototype,"updatePoints",null),On([H],e.prototype,"updateStartPoint",null),On([H],e.prototype,"updateEndPoint",null),On([H],e.prototype,"moveStartPoint",null),On([H],e.prototype,"moveEndPoint",null),On([H],e.prototype,"updateAdjustAnchor",null),On([H],e.prototype,"getAdjustStart",null),On([H],e.prototype,"getAdjustEnd",null),On([H],e.prototype,"updateAfterAdjustStartAndEnd",null),e}(Tl),BM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ro=function(){return Ro=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ro.apply(this,arguments)},yh=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},jM=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},mh=function(n){BM(e,n);function e(){var t=n.apply(this,jM([],yh(arguments),!1))||this;return t.modelType=He.LINE_EDGE,t}return e.prototype.getEdgeStyle=function(){var t=this.graphModel.theme.line,r=n.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return Ro(Ro(Ro({},r),je(t)),je(o))},e.prototype.initEdgeData=function(t){n.prototype.initEdgeData.call(this,t),this.points=this.getPath([this.startPoint,this.endPoint])},e.prototype.getPath=function(t){var r=yh(t,2),i=r[0],o=r[1];return"".concat(i.x,",").concat(i.y," ").concat(o.x,",").concat(o.y)},e.prototype.getTextPosition=function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},e}(Tl),FM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Do=function(){return Do=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Do.apply(this,arguments)},Ht=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},_h=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},HM=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},na=function(n){FM(e,n);function e(){var t=n.apply(this,HM([],_h(arguments),!1))||this;return t.modelType=He.POLYLINE_EDGE,t.draggingPointList=[],t}return e.prototype.initEdgeData=function(t){this.offset=30,n.prototype.initEdgeData.call(this,t)},e.prototype.getEdgeStyle=function(){var t=this.graphModel.theme.polyline,r=n.prototype.getEdgeStyle.call(this),i=this.properties.style,o=i===void 0?{}:i;return Do(Do(Do({},r),je(t)),je(o))},e.prototype.getTextPosition=function(){var t,r=(t=this.text)===null||t===void 0?void 0:t.value;if(this.dbClickPosition&&!r){var i=this.dbClickPosition,o=i.x,a=i.y;return{x:o,y:a}}var s=si(this.points),l=_h(kT(s),2),u=l[0],c=l[1];return{x:(u.x+c.x)/2,y:(u.y+c.y)/2}},e.prototype.getAfterAnchor=function(t,r,i){var o,a;return i.forEach(function(s){var l;t===_t.HORIZONTAL?l=Math.abs(r.y-s.y):t===_t.VERTICAL&&(l=Math.abs(r.x-s.x)),(!a||a>l)&&(a=l,o=s)}),o},e.prototype.getCrossPoint=function(t,r,i){var o;return t===_t.HORIZONTAL?o={x:i.x,y:r.y}:t===_t.VERTICAL&&(o={x:r.x,y:i.y}),o},e.prototype.removeCrossPoints=function(t,r,i){var o=i.map(function(y){return y});if(t===1){var a=o[t],s=o[r],l=o[t-1],u=th(l,a,this.sourceNode);if(u){var c=nh(a,s,this.sourceNode);if(c){var f=rh(a,s,this.sourceNode);f&&(o[t]=f,o.splice(t-1,1),t--,r--)}}else{var d=this.sourceNode.anchors;d.forEach(function(y){if(y.x===l.x&&y.x===a.x||y.y===l.y&&y.y===a.y){var b=kn(y.x,y.y,a.x,a.y),C=kn(l.x,l.y,a.x,a.y);b<C&&(o[t-1]=y)}})}}if(r===i.length-2){var h=o[t],v=o[r],p=o[r+1],g=th(v,p,this.targetNode);if(g){var c=nh(h,v,this.targetNode);if(c){var f=rh(h,v,this.targetNode);f&&(o[r]=f,o.splice(r+1,1))}}else{var d=this.targetNode.anchors;d.forEach(function(b){if(b.x===p.x&&b.x===v.x||b.y===p.y&&b.y===v.y){var C=kn(b.x,b.y,v.x,v.y),D=kn(p.x,p.y,v.x,v.y);C<D&&(o[r+1]=b)}})}}return o},e.prototype.getDraggingPoints=function(t,r,i,o,a){var s=a.map(function(c){return c}),l=this.getAfterAnchor(t,i,o),u=this.getCrossPoint(t,i,l);return r==="start"?(s.unshift(u),s.unshift(l)):(s.push(u),s.push(l)),s},e.prototype.updateCrossPoints=function(t){var r=t.map(function(b){return b}),i=t[0],o=t[1],a=t[r.length-2],s=t[r.length-1],l=this,u=l.sourceNode,c=l.targetNode,f=u.modelType,d=c.modelType,h=ws(i,o),v=r[0];switch(f){case He.RECT_NODE:if(u.radius!==0){var p=ch(i,u);p||(v=uh(i,h,u))}break;case He.CIRCLE_NODE:v=Hu(i,h,u);break;case He.ELLIPSE_NODE:v=fh(i,h,u);break;case He.DIAMOND_NODE:v=Da(i,h,u);break;case He.POLYGON_NODE:v=Da(i,h,u);break}v&&(r[0]=v);var g=ws(a,s),y=r[r.length-1];switch(d){case He.RECT_NODE:if(c.radius!==0){var p=ch(s,c);p||(y=uh(s,g,c))}break;case He.CIRCLE_NODE:y=Hu(s,g,c);break;case He.ELLIPSE_NODE:y=fh(s,g,c);break;case He.DIAMOND_NODE:y=Da(s,g,c);break;case He.POLYGON_NODE:y=Da(s,g,c);break}return y&&(r[r.length-1]=y),r},e.prototype.getData=function(){var t=n.prototype.getData.call(this),r=this.pointsList.map(function(i){var o=i.x,a=i.y;return{x:o,y:a}});return Object.assign({},t,{pointsList:r})},e.prototype.getPath=function(t){return t.map(function(r){return"".concat(r.x,",").concat(r.y)}).join(" ")},e.prototype.initPoints=function(){this.pointsList.length>0?this.points=this.getPath(this.pointsList):this.updatePoints()},e.prototype.updatePoints=function(){var t=eh({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=t,this.points=t.map(function(r){return"".concat(r.x,",").concat(r.y)}).join(" ")},e.prototype.updateStartPoint=function(t){this.startPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveStartPoint=function(t,r){this.startPoint.x+=t,this.startPoint.y+=r,this.updatePoints()},e.prototype.updateEndPoint=function(t){this.endPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveEndPoint=function(t,r){this.endPoint.x+=t,this.endPoint.y+=r,this.updatePoints()},e.prototype.updatePointsList=function(t,r){this.pointsList.forEach(function(a){a.x+=t,a.y+=r});var i=this.pointsList[0];this.startPoint=Object.assign({},i);var o=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},o),this.initPoints()},e.prototype.dragAppendStart=function(){this.draggingPointList=this.pointsList.map(function(t){return t})},e.prototype.dragAppendSimple=function(t,r){var i;this.isDragging=!0;var o=t.start,a=t.end,s=t.startIndex,l=t.endIndex,u=t.direction,c=this.pointsList,f=c;return u===_t.HORIZONTAL?(c[s]={x:o.x,y:o.y+r.y},c[l]={x:a.x,y:a.y+r.y},f=this.pointsList.map(function(d){return d})):u===_t.VERTICAL&&(c[s]={x:o.x+r.x,y:o.y},c[l]={x:a.x+r.x,y:a.y},f=this.pointsList.map(function(d){return d})),this.updatePointsAfterDrag(f),this.draggingPointList=f,!((i=this.text)===null||i===void 0)&&i.value&&this.setText(lt({},this.text,this.textPosition)),{start:lt({},c[s]),end:lt({},c[l]),startIndex:s,endIndex:l,direction:u}},e.prototype.dragAppend=function(t,r){var i;this.isDragging=!0;var o=t.start,a=t.end,s=t.startIndex,l=t.endIndex,u=t.direction,c=this.pointsList;if(u===_t.HORIZONTAL){c[s]={x:o.x,y:o.y+r.y},c[l]={x:a.x,y:a.y+r.y};var f=this.pointsList.map(function(g){return g});if(s!==0&&l!==this.pointsList.length-1&&(f=this.removeCrossPoints(s,l,f)),s===0){var d={x:o.x,y:o.y+r.y},h=Or(d,this.sourceNode);if(!h){var v=this.sourceNode.anchors;f=this.getDraggingPoints(u,"start",d,v,f)}}if(l===this.pointsList.length-1){var p={x:a.x,y:a.y+r.y},h=Or(p,this.targetNode);if(!h){var v=this.targetNode.anchors;f=this.getDraggingPoints(u,"end",p,v,f)}}this.updatePointsAfterDrag(f),this.draggingPointList=f}else if(u===_t.VERTICAL){c[s]={x:o.x+r.x,y:o.y},c[l]={x:a.x+r.x,y:a.y};var f=this.pointsList.map(function(y){return y});if(s!==0&&l!==this.pointsList.length-1&&(f=this.removeCrossPoints(s,l,f)),s===0){var d={x:o.x+r.x,y:o.y},h=Or(d,this.sourceNode);if(!h){var v=this.sourceNode.anchors;f=this.getDraggingPoints(u,"start",d,v,f)}}if(l===this.pointsList.length-1){var p={x:a.x+r.x,y:a.y},h=Or(p,this.targetNode);if(!h){var v=this.targetNode.anchors;f=this.getDraggingPoints(u,"end",p,v,f)}}this.updatePointsAfterDrag(f),this.draggingPointList=f}return!((i=this.text)===null||i===void 0)&&i.value&&this.setText(lt({},this.text,this.textPosition)),{start:lt({},c[s]),end:lt({},c[l]),startIndex:s,endIndex:l,direction:u}},e.prototype.dragAppendEnd=function(){if(this.draggingPointList){var t=py(si(this.points));this.pointsList=t.map(function(o){return o}),this.draggingPointList=[];var r=t[0];this.startPoint=lt({},r);var i=t[t.length-1];this.endPoint=lt({},i)}this.isDragging=!1},e.prototype.updatePointsAfterDrag=function(t){var r=this.updateCrossPoints(t);this.points=r.map(function(i){return"".concat(i.x,",").concat(i.y)}).join(" ")},e.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},e.prototype.getAdjustEnd=function(){var t=this.pointsList;return t[t.length-1]||this.endPoint},e.prototype.updateAfterAdjustStartAndEnd=function(t){var r=t.startPoint,i=t.endPoint,o=t.sourceNode,a=t.targetNode;this.pointsList=eh({x:r.x,y:r.y},{x:i.x,y:i.y},o,a,this.offset||0),this.initPoints()},Ht([$],e.prototype,"dbClickPosition",void 0),Ht([H],e.prototype,"initPoints",null),Ht([H],e.prototype,"updatePoints",null),Ht([H],e.prototype,"updateStartPoint",null),Ht([H],e.prototype,"moveStartPoint",null),Ht([H],e.prototype,"updateEndPoint",null),Ht([H],e.prototype,"moveEndPoint",null),Ht([H],e.prototype,"updatePointsList",null),Ht([H],e.prototype,"dragAppendStart",null),Ht([H],e.prototype,"dragAppendSimple",null),Ht([H],e.prototype,"dragAppend",null),Ht([H],e.prototype,"dragAppendEnd",null),Ht([H],e.prototype,"updatePointsAfterDrag",null),Ht([H],e.prototype,"getAdjustStart",null),Ht([H],e.prototype,"getAdjustEnd",null),Ht([H],e.prototype,"updateAfterAdjustStartAndEnd",null),e}(Tl),Nt=function(){return Nt=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Nt.apply(this,arguments)},Ne=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},bh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WM=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Fr=function(){function n(e,t){var r;this.BaseType=Et.NODE,this.id="",this.type="",this.x=0,this.y=0,this.textMode=mn.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this._width=100,this._height=80,this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.anchorsOffset=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isShowAnchor=!1,this.isDragging=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.rotatable=!0,this.resizable=!0,this.zIndex=1,this.state=Ze.DEFAULT,this.autoToFront=!0,this.style={},this._rotate=0,this.modelType=He.NODE,this.additionStateData={},this.targetRules=[],this.sourceRules=[],this.moveRules=[],this.resizeRules=[],this.hasSetTargetRules=!1,this.hasSetSourceRules=!1,this.graphModel=t,this.properties=(r=e.properties)!==null&&r!==void 0?r:{},this.initNodeData(e),this.setAttributes()}return Object.defineProperty(n.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e;var t=this,r=t.x,i=r===void 0?0:r,o=t.y,a=o===void 0?0:o;this.transform=new Ol(-i,-a).rotate(e).translate(i,a).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"incoming",{get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"outgoing",{get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}},enumerable:!1,configurable:!0}),n.prototype.initNodeData=function(e){if(e.properties||(e.properties={}),!e.id){var t=this.graphModel.idGenerator,r=t&&t(e.type),i=this.createId();e.id=i||r||Nr()}this.formatText(e),lt(this,VT(e));var o=this.graphModel.overlapMode;o===Ln.INCREASE&&(this.zIndex=e.zIndex||xf())},n.prototype.setAttributes=function(){},n.prototype.createId=function(){return null},n.prototype.setTextMode=function(e){this.textMode=e},n.prototype.formatText=function(e){var t,r,i,o=e.x,a=e.y,s=e.text,l={value:"",x:o,y:a,draggable:!1,editable:!0};s&&(typeof s=="string"?l.value=s:(l=Nt(Nt({},l),{x:(t=s.x)!==null&&t!==void 0?t:o,y:(r=s.y)!==null&&r!==void 0?r:a,value:(i=s.value)!==null&&i!==void 0?i:""}),oi(s.draggable)||(l.draggable=s.draggable),oi(s.editable)||(l.editable=s.editable))),e.text=l},n.prototype.resize=function(e){var t=e.width,r=e.height,i=e.deltaX,o=e.deltaY,a=this.isAllowResizeNode(i,o,t,r);return a?(this.move(i/2,o/2),this.width=t,this.height=r,this.setProperties({width:t,height:r}),this.getData()):this.getData()},n.prototype.proportionalResize=function(){},n.prototype.getData=function(){var e=this.text,t=e.x,r=e.y,i=e.value,o=this.properties;Wi(o)&&(o=Pn(o)),ti(o.width)&&(o.width=this.width),ti(o.height)&&(o.height=this.height);var a={id:this.id,type:this.type,x:this.x,y:this.y,properties:o};return this.rotate&&(a.rotate=this.rotate),this.graphModel.overlapMode===Ln.INCREASE&&(a.zIndex=this.zIndex),i&&(a.text={x:t,y:r,value:i}),a},n.prototype.getHistoryData=function(){return this.getData()},n.prototype.getProperties=function(){return Pn(this.properties)},n.prototype.getOuterGAttributes=function(){return{className:""}},n.prototype.getNodeStyle=function(){return Nt(Nt({},this.graphModel.theme.baseNode),this.style)},n.prototype.getTextStyle=function(){var e=this.graphModel.theme.nodeText,t=this.properties.textStyle,r=t===void 0?{}:t;return Nt(Nt({},je(e)),je(r))},n.prototype.getRotateControlStyle=function(){var e=this.graphModel.theme.rotateControl;return je(e)},n.prototype.getResizeControlStyle=function(){var e=this.graphModel.theme.resizeControl;return je(e)},n.prototype.getResizeOutlineStyle=function(){var e=this.graphModel.theme.resizeOutline;return je(e)},n.prototype.getAnchorStyle=function(e){var t=this.graphModel.theme.anchor;return je(t)},n.prototype.getAnchorLineStyle=function(e){var t=this.graphModel.theme.anchorLine;return je(t)},n.prototype.getOutlineStyle=function(){var e=this.graphModel.theme.outline;return je(e)},n.prototype.isAllowConnectedAsSource=function(e,t,r,i){var o=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var a=!0,s="",l=0;l<o.length;l++){var u=o[l];if(!u.validate.call(this,this,e,t,r,i)){a=!1,s=u.message;break}}return{isAllPass:a,msg:s}},n.prototype.getConnectedSourceRules=function(){return this.sourceRules},n.prototype.isAllowConnectedAsTarget=function(e,t,r,i){var o=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var a=!0,s="",l=0;l<o.length;l++){var u=o[l];if(!u.validate.call(this,e,this,t,r,i)){a=!1,s=u.message;break}}return{isAllPass:a,msg:s}},n.prototype.isAllowMoveNode=function(e,t){var r,i,o=!0,a=!0,s=this.moveRules.concat(this.graphModel.nodeMoveRules);try{for(var l=bh(s),u=l.next();!u.done;u=l.next()){var c=u.value,f=c(this,e,t);if(!f)return!1;if(typeof f=="object"){var d=f;if(!d.x&&!d.y)return!1;o=o&&d.x,a=a&&d.y}}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return{x:o,y:a}},n.prototype.getConnectedTargetRules=function(){return this.targetRules},n.prototype.getAnchorsByOffset=function(){var e=this,t=e.anchorsOffset,r=e.id,i=e.x,o=e.y;return t&&t.length>0?t.map(function(a,s){return a.length?(a=a,{id:"".concat(r,"_").concat(s),x:i+a[0],y:o+a[1]}):(a=a,Nt(Nt({},a),{x:i+a.x,y:o+a.y,id:a.id||"".concat(r,"_").concat(s)}))}):this.getDefaultAnchor()},n.prototype.getDefaultAnchor=function(){return[]},n.prototype.getTargetAnchor=function(e){return UT(e,this)},n.prototype.getBounds=function(){return{minX:this.x-this.width/2,minY:this.y-this.height/2,maxX:this.x+this.width/2,maxY:this.y+this.height/2}},Object.defineProperty(n.prototype,"anchors",{get:function(){var e=this.getAnchorsByOffset(),t=this,r=t.x,i=t.y,o=t.rotate;return e.forEach(function(a){var s=a.x,l=a.y,u=WM(new Cl([s,l,1]).translate(-r,-i).rotate(o).translate(r,i)[0],2),c=u[0],f=u[1];a.x=c,a.y=f}),e},enumerable:!1,configurable:!0}),n.prototype.getAnchorInfo=function(e){if(!ti(e))for(var t=0;t<this.anchors.length;t++){var r=this.anchors[t];if(r.id===e)return r}},n.prototype.addNodeMoveRules=function(e){this.moveRules.includes(e)||this.moveRules.push(e)},n.prototype.isAllowMoveByXORY=function(e,t,r){var i,o;if(r)i=!0,o=!0;else{var a=this.isAllowMoveNode(e,t);typeof a=="boolean"?(i=a,o=a):(i=a.x,o=a.y)}return{isAllowMoveX:i,isAllowMoveY:o}},n.prototype.move=function(e,t,r){r===void 0&&(r=!1);var i=this.isAllowMoveByXORY(e,t,r),o=i.isAllowMoveX,a=i.isAllowMoveY;return o&&(this.x=this.x+e,this.text&&this.moveText(e,0)),a&&(this.y=this.y+t,this.text&&this.moveText(0,t)),(o||a)&&(this.rotate=this._rotate),o||a},n.prototype.getMoveDistance=function(e,t,r){r===void 0&&(r=!1);var i=this.isAllowMoveByXORY(e,t,r),o=i.isAllowMoveX,a=i.isAllowMoveY,s=0,l=0;return o&&e&&(this.x=this.x+e,this.text&&this.moveText(e,0),s=e),a&&t&&(this.y=this.y+t,this.text&&this.moveText(0,t),l=t),[s,l]},n.prototype.moveTo=function(e,t,r){r===void 0&&(r=!1);var i=e-this.x,o=t-this.y;return!r&&!this.isAllowMoveNode(i,o)?!1:(this.text&&this.moveText(i,o),this.x=e,this.y=t,!0)},n.prototype.moveText=function(e,t){var r=this.text,i=r.x,o=r.y,a=r.value,s=r.draggable,l=r.editable;this.text={value:a,editable:l,draggable:s,x:i+e,y:o+t}},n.prototype.updateText=function(e){this.text=Nt(Nt({},Pn(this.text)),{value:e})},n.prototype.addNodeResizeRules=function(e){this.resizeRules.includes(e)||this.resizeRules.push(e)},n.prototype.isAllowResizeNode=function(e,t,r,i){var o,a,s=this.resizeRules.concat(this.graphModel.nodeResizeRules);try{for(var l=bh(s),u=l.next();!u.done;u=l.next()){var c=u.value,f=c(this,e,t,r,i);if(!f)return!1}}catch(d){o={error:d}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return!0},n.prototype.setSelected=function(e){e===void 0&&(e=!0),this.isSelected=e},n.prototype.setHovered=function(e){e===void 0&&(e=!0),this.isHovered=e,this.setIsShowAnchor(e)},n.prototype.setIsShowAnchor=function(e){e===void 0&&(e=!0),this.isShowAnchor=e},n.prototype.setRotatable=function(e){e===void 0&&(e=!0),this.rotatable=e},n.prototype.setResizable=function(e){e===void 0&&(e=!0),this.resizable=e},n.prototype.setHitable=function(e){e===void 0&&(e=!0),this.isHitable=e},n.prototype.setHittable=function(e){e===void 0&&(e=!0),this.isHittable=e},n.prototype.setElementState=function(e,t){this.state=e,this.additionStateData=t},n.prototype.updateProperties=function(e,t){var r=Pn(this.properties);this.properties=e,this.setAttributes(),this.graphModel.eventCenter.emit(he.NODE_PROPERTIES_CHANGE,{id:this.id,keys:t,preProperties:r,properties:e})},n.prototype.setProperty=function(e,t){var r=Pn(this.properties),i=je(r);Bp(i,e,$t(t)),this.updateProperties(i,[e])},n.prototype.setProperties=function(e){var t=Pn(this.properties),r=Nt(Nt({},t),$t(e)),i=[];$v(e,function(o,a){(ss(t,a)&&t[a]!==o||!ss(t,a))&&i.push(a)}),this.updateProperties(r,i)},n.prototype.deleteProperty=function(e){delete this.properties[e],this.setAttributes()},n.prototype.setStyle=function(e,t){var r;this.style=Nt(Nt({},this.style),(r={},r[e]=$t(t),r))},n.prototype.setStyles=function(e){this.style=Nt(Nt({},this.style),$t(e))},n.prototype.updateStyles=function(e){this.style=Nt({},$t(e))},n.prototype.setZIndex=function(e){e===void 0&&(e=1),this.zIndex=e},n.prototype.updateAttributes=function(e){lt(this,e)},n.BaseType=Et.NODE,Ne([$],n.prototype,"type",void 0),Ne([$],n.prototype,"x",void 0),Ne([$],n.prototype,"y",void 0),Ne([$],n.prototype,"textMode",void 0),Ne([$],n.prototype,"text",void 0),Ne([$],n.prototype,"properties",void 0),Ne([$],n.prototype,"_width",void 0),Ne([$],n.prototype,"_height",void 0),Ne([$],n.prototype,"anchorsOffset",void 0),Ne([$],n.prototype,"isSelected",void 0),Ne([$],n.prototype,"isHovered",void 0),Ne([$],n.prototype,"isShowAnchor",void 0),Ne([$],n.prototype,"isDragging",void 0),Ne([$],n.prototype,"isHitable",void 0),Ne([$],n.prototype,"isHittable",void 0),Ne([$],n.prototype,"draggable",void 0),Ne([$],n.prototype,"visible",void 0),Ne([$],n.prototype,"rotatable",void 0),Ne([$],n.prototype,"resizable",void 0),Ne([$],n.prototype,"zIndex",void 0),Ne([$],n.prototype,"state",void 0),Ne([$],n.prototype,"autoToFront",void 0),Ne([$],n.prototype,"style",void 0),Ne([$],n.prototype,"transform",void 0),Ne([$],n.prototype,"_rotate",void 0),Ne([vt],n.prototype,"incoming",null),Ne([vt],n.prototype,"outgoing",null),Ne([H],n.prototype,"setTextMode",null),Ne([H],n.prototype,"addNodeMoveRules",null),Ne([H],n.prototype,"move",null),Ne([H],n.prototype,"getMoveDistance",null),Ne([H],n.prototype,"moveTo",null),Ne([H],n.prototype,"moveText",null),Ne([H],n.prototype,"updateText",null),Ne([H],n.prototype,"addNodeResizeRules",null),Ne([H],n.prototype,"setSelected",null),Ne([H],n.prototype,"setHovered",null),Ne([H],n.prototype,"setIsShowAnchor",null),Ne([H],n.prototype,"setRotatable",null),Ne([H],n.prototype,"setResizable",null),Ne([H],n.prototype,"setHitable",null),Ne([H],n.prototype,"setHittable",null),Ne([H],n.prototype,"setElementState",null),Ne([H],n.prototype,"setProperty",null),Ne([H],n.prototype,"setProperties",null),Ne([H],n.prototype,"deleteProperty",null),Ne([H],n.prototype,"setStyle",null),Ne([H],n.prototype,"setStyles",null),Ne([H],n.prototype,"updateStyles",null),Ne([H],n.prototype,"setZIndex",null),Ne([H],n.prototype,"updateAttributes",null),n}(),$M=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lo=function(){return Lo=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Lo.apply(this,arguments)},Ql=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ts=function(n){$M(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.modelType=He.CIRCLE_NODE,i.r=50,i.initNodeData(t),i.setAttributes(),i}return Object.defineProperty(e.prototype,"width",{get:function(){return this.r*2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.r*2},enumerable:!1,configurable:!0}),e.prototype.setAttributes=function(){n.prototype.setAttributes.call(this);var t=this.properties.r;t&&(this.r=t)},e.prototype.getNodeStyle=function(){var t=n.prototype.getNodeStyle.call(this),r=this.graphModel.theme.circle,i=this.properties.style,o=i===void 0?{}:i;return Lo(Lo(Lo({},t),je(r)),je(o))},e.prototype.getDefaultAnchor=function(){var t=this,r=t.x,i=t.y,o=t.r;return[{x:r,y:i-o,id:"".concat(this.id,"_0")},{x:r+o,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+o,id:"".concat(this.id,"_2")},{x:r-o,y:i,id:"".concat(this.id,"_3")}]},e.prototype.resize=function(t){var r=t.width,i=t.deltaX,o=t.deltaY;return this.move(i/2,o/2),this.r=r,this.setProperties({r}),this.getData()},Ql([$],e.prototype,"r",void 0),Ql([vt],e.prototype,"width",null),Ql([vt],e.prototype,"height",null),e}(Fr),XM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ko=function(){return ko=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ko.apply(this,arguments)},Ei=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ka=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Vu=function(n){XM(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.modelType=He.DIAMOND_NODE,i.rx=30,i.ry=50,i.initNodeData(t),i.setAttributes(),i}return e.prototype.setAttributes=function(){n.prototype.setAttributes.call(this);var t=this.properties,r=t.rx,i=t.ry;r&&(this.rx=r),i&&(this.ry=i)},e.prototype.getNodeStyle=function(){var t=n.prototype.getNodeStyle.call(this),r=this.graphModel.theme.diamond,i=this.properties.style,o=i===void 0?{}:i;return ko(ko(ko({},t),je(r)),je(o))},Object.defineProperty(e.prototype,"points",{get:function(){var t=this,r=t.x,i=t.y,o=t.rx,a=t.ry;return[[r,i-a],[r+o,i],[r,i+a],[r-o,i]]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointsPosition",{get:function(){return bn(this.points,function(t){var r=ka(t,2),i=r[0],o=r[1];return{x:i,y:o}})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return ot(this.points,function(i){var o=ka(i,1),a=o[0];a<t&&(t=a),a>r&&(r=a)}),r-t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return ot(this.points,function(i){var o=ka(i,2),a=o[1];a<t&&(t=a),a>r&&(r=a)}),r-t},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this;return bn(this.points,function(r,i){var o=ka(r,2),a=o[0],s=o[1];return{x:a,y:s,id:"".concat(t.id,"_").concat(i)}})},e.prototype.resize=function(t){var r=t.width,i=t.height,o=t.deltaX,a=t.deltaY;return this.move(o/2,a/2),this.rx=r,this.ry=i,this.setProperties({rx:r,ry:i}),this.getData()},Ei([$],e.prototype,"rx",void 0),Ei([$],e.prototype,"ry",void 0),Ei([vt],e.prototype,"points",null),Ei([vt],e.prototype,"pointsPosition",null),Ei([vt],e.prototype,"width",null),Ei([vt],e.prototype,"height",null),e}(Fr),zM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Io=function(){return Io=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Io.apply(this,arguments)},Ia=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ku=function(n){zM(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.modelType=He.ELLIPSE_NODE,i.rx=30,i.ry=45,i.initNodeData(t),i.setAttributes(),i}return e.prototype.setAttributes=function(){n.prototype.setAttributes.call(this);var t=this.properties,r=t.rx,i=t.ry;r&&(this.rx=r),i&&(this.ry=i)},e.prototype.getNodeStyle=function(){var t=n.prototype.getNodeStyle.call(this),r=this.graphModel.theme.ellipse,i=this.properties.style,o=i===void 0?{}:i;return Io(Io(Io({},t),je(r)),je(o))},Object.defineProperty(e.prototype,"width",{get:function(){return this.rx*2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.ry*2},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this,r=t.x,i=t.y,o=t.rx,a=t.ry;return[{x:r,y:i-a,id:"".concat(this.id,"_0")},{x:r+o,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+a,id:"".concat(this.id,"_2")},{x:r-o,y:i,id:"".concat(this.id,"_3")}]},e.prototype.resize=function(t){var r=t.width,i=t.height,o=t.deltaX,a=t.deltaY;return this.move(o/2,a/2),this.rx=r,this.ry=i,this.setProperties({rx:r,ry:i}),this.getData()},Ia([$],e.prototype,"rx",void 0),Ia([$],e.prototype,"ry",void 0),Ia([vt],e.prototype,"width",null),Ia([vt],e.prototype,"height",null),e}(Fr),UM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bo=function(){return Bo=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Bo.apply(this,arguments)},Ba=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ja=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Ms=function(n){UM(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.modelType=He.POLYGON_NODE,i.points=[[50,0],[100,50],[50,100],[0,50]],i.initNodeData(t),i.setAttributes(),i}return e.prototype.setAttributes=function(){n.prototype.setAttributes.call(this);var t=this.properties,r=t.points,i=t.width,o=t.height,a=r||this.points;this.points=WT(a,i,o)},e.prototype.getNodeStyle=function(){var t=n.prototype.getNodeStyle.call(this),r=this.graphModel.theme.polygon,i=this.properties.style,o=i===void 0?{}:i;return Bo(Bo(Bo({},t),je(r)),je(o))},Object.defineProperty(e.prototype,"pointsPosition",{get:function(){var t=this,r=t.x,i=t.y,o=t.width,a=t.height;return this.points.map(function(s){return{x:s[0]+r-o/2,y:s[1]+i-a/2}})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(i){var o=ja(i,1),a=o[0];a<t&&(t=a),a>r&&(r=a)}),r-t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(i){var o=ja(i,2),a=o[1];a<t&&(t=a),a>r&&(r=a)}),r-t},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this,r=this,i=r.x,o=r.y,a=r.width,s=r.height,l=r.points;return l.map(function(u,c){var f=ja(u,2),d=f[0],h=f[1];return{x:i+d-a/2,y:o+h-s/2,id:"".concat(t.id,"_").concat(c)}})},e.prototype.resize=function(t){var r=this,i=t.width,o=t.height,a=t.deltaX,s=t.deltaY;this.move(a/2,s/2);var l=bn(this.points,function(u){var c=ja(u,2),f=c[0],d=c[1];return[f*i/r.width,d*o/r.height]});return this.points=l,this.properties.points=l,this.getData()},Ba([$],e.prototype,"points",void 0),Ba([vt],e.prototype,"pointsPosition",null),Ba([vt],e.prototype,"width",null),Ba([vt],e.prototype,"height",null),e}(Fr),GM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jo=function(){return jo=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},jo.apply(this,arguments)},YM=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Gi=function(n){GM(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.modelType=He.RECT_NODE,i.radius=0,i.initNodeData(t),i.setAttributes(),i}return e.prototype.setAttributes=function(){n.prototype.setAttributes.call(this);var t=this.properties,r=t.width,i=t.height,o=t.radius;ti(r)||(this.width=r),ti(i)||(this.height=i),ti(o)||(this.radius=o)},e.prototype.getDefaultAnchor=function(){var t=this,r=t.x,i=t.y,o=t.width,a=t.height;return[{x:r,y:i-a/2,id:"".concat(this.id,"_0")},{x:r+o/2,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+a/2,id:"".concat(this.id,"_2")},{x:r-o/2,y:i,id:"".concat(this.id,"_3")}]},e.prototype.getNodeStyle=function(){var t=n.prototype.getNodeStyle.call(this),r=this.graphModel.theme.rect,i=this.properties.style,o=i===void 0?{}:i;return jo(jo(jo({},t),je(r)),je(o))},YM([$],e.prototype,"radius",void 0),e}(Fr),VM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fo=function(){return Fo=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Fo.apply(this,arguments)},xh=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},KM=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},qM=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},Eh=function(n){VM(e,n);function e(){var t=n.apply(this,qM([],KM(arguments),!1))||this;return t.modelType=He.TEXT_NODE,t}return e.prototype.getTextStyle=function(){var t=n.prototype.getTextStyle.call(this),r=this.graphModel.theme.text,i=this.properties.textStyle;return Fo(Fo(Fo({},t),je(r)),je(i))},Object.defineProperty(e.prototype,"width",{get:function(){var t=String(this.text.value).split(/[\r\n]/g),r=this.getTextStyle().fontSize,i=hh({rows:t,fontSize:r,rowsLength:t.length}).width;return i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=String(this.text.value).split(/[\r\n]/g),r=this.getTextStyle().fontSize,i=hh({rows:t,fontSize:r,rowsLength:t.length}).height;return i},enumerable:!1,configurable:!0}),xh([vt],e.prototype,"width",null),xh([vt],e.prototype,"height",null),e}(Fr),ZM=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qu=function(n){ZM(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.modelType=He.HTML_NODE,i.setAttributes(),i}return e.prototype.setAttributes=function(){n.prototype.setAttributes.call(this);var t=this.properties,r=t.width,i=t.height;r&&(this.width=r),i&&(this.height=i)},e.prototype.getDefaultAnchor=function(){var t=this,r=t.x,i=t.y,o=t.width,a=t.height;return[{x:r,y:i-a/2,id:"".concat(this.id,"_0")},{x:r+o/2,y:i,id:"".concat(this.id,"_1")},{x:r,y:i+a/2,id:"".concat(this.id,"_2")},{x:r-o/2,y:i,id:"".concat(this.id,"_3")}]},e}(Fr),it=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},JM={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotate:!1,allowResize:!1,nodeSelectedOutline:!0,textEdit:!1,nodeTextEdit:!1,edgeTextEdit:!1,textDraggable:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},Fa=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustEdgeStart","adjustEdgeEnd","adjustNodePosition","hideAnchors","allowRotate","allowResize","autoExpand","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","textEdit","nodeTextEdit","edgeTextEdit","textDraggable","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","textMode","nodeTextMode","edgeTextMode","nodeTextMultiple","edgeTextMultiple","nodeTextVertical","edgeTextVertical"],QM=function(){function n(e){this.isSilentMode=!1,this.stopZoomGraph=!1,this.stopMoveGraph=!1,this.stopScrollGraph=!1,this.textMode=mn.TEXT,this.textEdit=!0,this.textDraggable=!1,this.nodeTextEdit=!0,this.nodeTextDraggable=!1,this.nodeTextMultiple=!1,this.nodeTextVertical=!1,this.nodeTextMode=mn.TEXT,this.edgeTextMode=mn.TEXT,this.edgeTextEdit=!0,this.edgeTextDraggable=!1,this.edgeTextMultiple=!1,this.edgeTextVertical=!1,this.hideAnchors=!1,this.allowRotate=!1,this.allowResize=!1,this.hoverOutline=!0,this.nodeSelectedOutline=!0,this.adjustNodePosition=!0,this.autoExpand=!1,this.adjustEdge=!0,this.adjustEdgeMiddle=!1,this.adjustEdgeStartAndEnd=!1,this.adjustEdgeStart=!1,this.adjustEdgeEnd=!1,this.edgeSelectedOutline=!0,this.multipleSelectKey="",lt(this,this.computeConfig(e))}return n.prototype.updateEditConfig=function(e){var t=this.computeConfig(e);lt(this,t)},n.prototype.computeConfig=function(e){var t=e.isSilentMode,r=e.textDraggable,i=e.textMode,o=e.textEdit,a=e.adjustEdgeStartAndEnd,s={};if(t===!1&&lt(s,this.stagedConfig),t===!0&&t!==this.isSilentMode){var l=ei(JM,Fa);this.stagedConfig=ei(this,Fa),lt(s,l)}oi(o)||lt(s,{nodeTextEdit:o,edgeTextEdit:o}),oi(r)||lt(s,{nodeTextDraggable:r,edgeTextDraggable:r}),i&&lt(s,{nodeTextMode:i,edgeTextMode:i}),ls(a)&&lt(s,{adjustEdgeStart:a,adjustEdgeEnd:a});var u=ei(e,Fa);return lt(s,u)},n.prototype.updateTextMode=function(e){this.textMode=e,this.edgeTextMode=e,this.nodeTextMode=e},n.prototype.getConfig=function(){return ei(this,Fa)},it([$],n.prototype,"isSilentMode",void 0),it([$],n.prototype,"stopZoomGraph",void 0),it([$],n.prototype,"stopMoveGraph",void 0),it([$],n.prototype,"stopScrollGraph",void 0),it([$],n.prototype,"textMode",void 0),it([$],n.prototype,"textEdit",void 0),it([$],n.prototype,"textDraggable",void 0),it([$],n.prototype,"nodeTextEdit",void 0),it([$],n.prototype,"nodeTextDraggable",void 0),it([$],n.prototype,"nodeTextMultiple",void 0),it([$],n.prototype,"nodeTextVertical",void 0),it([$],n.prototype,"nodeTextMode",void 0),it([$],n.prototype,"edgeTextMode",void 0),it([$],n.prototype,"edgeTextEdit",void 0),it([$],n.prototype,"edgeTextDraggable",void 0),it([$],n.prototype,"edgeTextMultiple",void 0),it([$],n.prototype,"edgeTextVertical",void 0),it([$],n.prototype,"hideAnchors",void 0),it([$],n.prototype,"allowRotate",void 0),it([$],n.prototype,"allowResize",void 0),it([$],n.prototype,"hoverOutline",void 0),it([$],n.prototype,"nodeSelectedOutline",void 0),it([$],n.prototype,"adjustNodePosition",void 0),it([$],n.prototype,"autoExpand",void 0),it([$],n.prototype,"adjustEdge",void 0),it([$],n.prototype,"adjustEdgeMiddle",void 0),it([$],n.prototype,"adjustEdgeStartAndEnd",void 0),it([$],n.prototype,"adjustEdgeStart",void 0),it([$],n.prototype,"adjustEdgeEnd",void 0),it([$],n.prototype,"edgeSelectedOutline",void 0),it([H],n.prototype,"updateEditConfig",null),it([H],n.prototype,"updateTextMode",null),n}(),eN="*",tN=function(){function n(){this._events={}}return n.prototype.on=function(e,t,r){var i=this;e==null||e.split(",").forEach(function(o){o=o.trim(),i._events[o]||(i._events[o]=[]),i._events[o].push({callback:t,once:!!r})})},n.prototype.once=function(e,t){var r=this;e==null||e.split(",").forEach(function(i){i=i.trim(),r.on(i,t,!0)})},n.prototype.emit=function(e,t){var r=this;e==null||e.split(",").forEach(function(i){var o=r._events[i]||[],a=r._events[eN]||[],s=function(l){for(var u=l.length,c=0;c<u;c++)if(l[c]){var f=l[c],d=f.callback,h=f.once;h&&(l.splice(c,1),l.length===0&&delete r._events[i],u--,c--),d.apply(r,[t])}};s(o),s(a)})},n.prototype.off=function(e,t){var r=this;e||(this._events={}),e.split(",").forEach(function(i){if(!t)delete r._events[i];else{for(var o=r._events[i]||[],a=o.length,s=0;s<a;s++)o[s].callback===t&&(o.splice(s,1),a--,s--);o.length===0&&delete r._events[i]}})},n.prototype.getEvents=function(){return this._events},n}(),nN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zu=function(){return Zu=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Zu.apply(this,arguments)},rN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},iN=function(n){nN(e,n);function e(t){var r=n.call(this)||this;r.stepScrollX=0,r.stepScrollY=0,r.onDragging=function(s){var l=s.deltaX,u=s.deltaY;r.setState({isDragging:!0});var c=r.props.graphModel,f=c.transformModel,d=c.editConfigModel;d.stopMoveGraph!==!0&&f.translate(l,u)},r.onDragEnd=function(){r.setState({isDragging:!1})},r.zoomHandler=function(s){var l=r.props,u=l.graphModel,c=u.editConfigModel,f=u.transformModel,d=u.gridSize,h=l.graphModel,v=s.deltaX,p=s.deltaY;if(!c.stopScrollGraph&&!s.ctrlKey&&!s.metaKey){if(s.preventDefault(),r.stepScrollX+=v,r.stepScrollY+=p,Math.abs(r.stepScrollX)>=d){var g=r.stepScrollX%d,y=r.stepScrollX-g;f.translate(-y*f.SCALE_X,0),r.stepScrollX=g}if(Math.abs(r.stepScrollY)>=d){var b=r.stepScrollY%d,C=r.stepScrollY-b;f.translate(0,-C*f.SCALE_Y),r.stepScrollY=b}return}if(!c.stopZoomGraph){s.preventDefault();var D=h.getPointByClient({x:s.clientX,y:s.clientY}),B=D.canvasOverlayPosition,R=B.x,A=B.y;f.zoom(s.deltaY<0,[R,A])}},r.clickHandler=function(s){var l=s.target;if(l.getAttribute("name")==="canvas-overlay"){var u=r.props.graphModel,c=u.selectElements;c.size>0&&u.clearSelectElements(),u.eventCenter.emit(he.BLANK_CLICK,{e:s})}},r.handleContextMenu=function(s){var l=s.target;if(l.getAttribute("name")==="canvas-overlay"){s.preventDefault();var u=r.props.graphModel,c=u.getPointByClient({x:s.clientX,y:s.clientY});u.eventCenter.emit(he.BLANK_CONTEXTMENU,{e:s,position:c})}},r.mouseDownHandler=function(s){var l=r.props.graphModel,u=l.eventCenter,c=l.editConfigModel,f=l.transformModel.SCALE_X,d=l.gridSize,h=s.target,v=!c.adjustEdge&&!c.adjustNodePosition;(h.getAttribute("name")==="canvas-overlay"||v)&&(c.stopMoveGraph!==!0?(r.stepDrag.setStep(d*f),r.stepDrag.handleMouseDown(s)):u.emit(he.BLANK_MOUSEDOWN,{e:s}),r.clickHandler(s))};var i=t.graphModel,o=i.gridSize,a=i.eventCenter;return r.stepDrag=new Sn({onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:o,eventType:"BLANK",isStopPropagation:!1,eventCenter:a,model:void 0}),r.state={isDragging:!1},r}return e.prototype.render=function(){var t=this.props.graphModel.transformModel,r=t.getTransformStyle().transform,i=this.props,o=i.children,a=i.dnd,s=this.state.isDragging;return j("svg",Zu({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:s?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},a.eventMap(),{children:j("g",{transform:r,children:o})}))},e=rN([Gt],e),e}(Ue),Sy=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ra=function(){return ra=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ra.apply(this,arguments)},oN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},aN=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},wh=function(n){Sy(e,n);function e(){var t=n.call(this)||this;return t.onDragging=function(r){var i=r.event,o=t.props,a=o.graphModel,s=o.bezierModel,l=o.type,u=a.getPointByClient({x:i.clientX,y:i.clientY}).canvasOverlayPosition,c=u.x,f=u.y;s.updateAdjustAnchor({x:c,y:f},l),a.eventCenter.emit(he.EDGE_ADJUST,{data:s.getData()})},t.onDragEnd=function(){var r=t.props.bezierModel;r.isDragging=!1},t.dragHandler=new Sn({onDragging:t.onDragging,onDragEnd:t.onDragEnd}),t}return e.prototype.render=function(){var t=this,r=this.props.position,i=r.x,o=r.y,a=this.props.bezierModel,s=a.getEdgeStyle().adjustAnchor;return j(Ui,ra({className:"lf-bezier-adjust-anchor",x:i,y:o},s,{onMouseDown:function(l){t.dragHandler.handleMouseDown(l)}}))},e}(Ue),sN=function(n){Sy(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getBezierAdjust=function(t,r){var i=t.path,o=t.id,a=mf(i),s=aN(a,4),l=s[0],u=s[1],c=s[2],f=s[3],d=t.getEdgeStyle().adjustLine,h=[];return h.push(j(zi,ra({x1:l.x,y1:l.y,x2:u.x,y2:u.y},d))),h.push(j(wh,{position:u,bezierModel:t,graphModel:r,type:"sNext"},"".concat(o,"_ePre"))),h.push(j(zi,ra({x1:f.x,y1:f.y,x2:c.x,y2:c.y},d))),h.push(j(wh,{position:c,bezierModel:t,graphModel:r,type:"ePre"},"".concat(o,"_sNext"))),h},e.prototype.selectedBezierEdge=function(){for(var t=this.props.graphModel,r=t.edges,i=[],o=0;o<r.length;o++){var a=r[o];a.isSelected&&a.modelType===He.BEZIER_EDGE&&a.draggable&&i.push(this.getBezierAdjust(a,t))}return i},e.prototype.render=function(){return j("g",{className:"lf-bezier-adjust",children:this.selectedBezierEdge()})},e=oN([Gt],e),e}(Ue),lN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},cN=function(n){lN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(){var t=this.props.background;return j("div",{className:"lf-background",children:j("div",{style:tr(t)?t:{},className:"lf-background-area"})})},e=uN([Gt],e),e}(Ue),fN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ns=function(n){fN(e,n);function e(t){var r=n.call(this,t)||this;return r.id=Nr(),r.gridOptions=r.props.graphModel.grid,r}return e.prototype.renderDot=function(){var t=this.gridOptions,r=t.config,i=t.size,o=i===void 0?1:i,a=t.visible,s=r!=null?r:{},l=s.color,u=s.thickness,c=u===void 0?2:u,f=Math.min(Math.max(2,c),o/4),d=a?1:0;return j("g",{fill:l,opacity:d,children:[j("circle",{cx:0,cy:0,r:f/2}),j("circle",{cx:0,cy:o,r:f/2}),j("circle",{cx:o,cy:0,r:f/2}),j("circle",{cx:o,cy:o,r:f/2})]})},e.prototype.renderMesh=function(){var t=this.gridOptions,r=t.config,i=t.size,o=i===void 0?1:i,a=t.visible,s=r!=null?r:{},l=s.color,u=s.thickness,c=u===void 0?1:u,f=Math.min(Math.max(1,c),o/2),d="M 0 0 H ".concat(o," V ").concat(o," H 0 Z"),h=a?1:0;return j("path",{d,stroke:l,strokeWidth:f/2,opacity:h,fill:"transparent"})},e.prototype.render=function(){var t=this.props.graphModel.transformModel,r=this.gridOptions,i=r.type,o=r.size,a=o===void 0?1:o,s=t.SCALE_X,l=t.SKEW_Y,u=t.SKEW_X,c=t.SCALE_Y,f=t.TRANSLATE_X,d=t.TRANSLATE_Y,h=[s,l,u,c,f,d].join(","),v="matrix(".concat(h,")");return j("div",{className:"lf-grid",children:j("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",children:[j("defs",{children:j("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:v,x:"0",y:"0",width:a,height:a,children:[i==="dot"&&this.renderDot(),i==="mesh"&&this.renderMesh()]})}),j("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})]})})},e=dN([Gt],e),e}(Ue);(function(n){n.defaultProps={size:mT,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}};function e(t){var r=je(n.defaultProps);return typeof t=="number"?lt(r,{size:t}):typeof t=="boolean"?lt(r,{visible:t}):lt(r,t)}n.getGridOptions=e})(Ns||(Ns={}));var hN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vN=function(n){hN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(){var t=this.props.graphModel.transformModel,r=t.getTransformStyle().transform,i=this.props.children;return j("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay",children:j("g",{transform:r,children:i})})},e=pN([Gt],e),e}(Ue),gN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),br=function(){return br=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},br.apply(this,arguments)},yN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mN=function(n){gN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getNodesOutline=function(){var t=this.props.graphModel,r=t.nodes,i=t.editConfigModel,o=i.hoverOutline,a=i.nodeSelectedOutline,s=[];return r.forEach(function(l){if(l.isHovered||l.isSelected){var u=l.isHovered,c=l.isSelected,f=l.x,d=l.y,h=l.width,v=l.height;if(a&&c||o&&u){var p=l.getOutlineStyle(),g={};if(Object.keys(p).forEach(function(b){b!=="hover"&&(g[b]=p[b])}),u){var y=p.hover;g=br(br({},g),y)}s.push(j(gn,br({transform:l.transform,className:"lf-outline-node",x:f,y:d,width:h+10,height:v+10},g)))}}}),s},e.prototype.getEdgeOutline=function(){for(var t=this.props.graphModel,r=t.edges,i=t.editConfigModel,o=i.edgeSelectedOutline,a=i.hoverOutline,s=[],l=0;l<r.length;l++){var u=r[l];(o&&u.isSelected||a&&u.isHovered)&&(u.modelType===He.LINE_EDGE?s.push(this.getLineOutline(u)):u.modelType===He.POLYLINE_EDGE?s.push(this.getPolylineOutline(u)):u.modelType===He.BEZIER_EDGE&&s.push(this.getBezierOutline(u)))}return s},e.prototype.getLineOutline=function(t){var r=t.startPoint,i=t.endPoint,o=(r.x+i.x)/2,a=(r.y+i.y)/2,s=Math.abs(r.x-i.x)+10,l=Math.abs(r.y-i.y)+10,u=t.getOutlineStyle();return j(gn,br({className:"lf-outline-edge",x:o,y:a,width:s,height:l},u))},e.prototype.getPolylineOutline=function(t){var r=t.points,i=si(r),o=Jo(i,8),a=o.x,s=o.y,l=o.width,u=o.height,c=t.getOutlineStyle();return j(gn,br({className:"lf-outline",x:a,y:s,width:l,height:u},c))},e.prototype.getBezierOutline=function(t){var r=t.path,i=mf(r),o=Jo(i,8),a=o.x,s=o.y,l=o.width,u=o.height,c=t.getOutlineStyle();return j(gn,br({className:"lf-outline",x:a,y:s,width:l,height:u},c))},e.prototype.render=function(){return j("g",{className:"lf-outline",children:[this.getNodesOutline(),this.getEdgeOutline()]})},e=yN([Gt],e),e}(Ue),_N=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xr=function(){return xr=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},xr.apply(this,arguments)},bN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},xN=function(n){_N(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(){var t=this.props.snaplineModel,r=t!=null?t:{},i=r.position,o=r.isShowHorizontal,a=r.isShowVertical,s=t==null?void 0:t.getStyle(),l=i!=null?i:{},u=l.x,c=u===void 0?0:u,f=l.y,d=f===void 0?0:f,h=xr(xr({x1:-1e5,y1:d,x2:1e5,y2:d},s),{stroke:o?s==null?void 0:s.stroke:"none"}),v=xr(xr({x1:c,y1:-1e5,x2:c,y2:1e5},s),{stroke:a?s==null?void 0:s.stroke:"none"});return j("g",{className:"lf-snapline",children:[j(zi,xr({},h)),j(zi,xr({},v))]})},e=bN([Gt],e),e}(Ue),EN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},AN=function(n){EN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.componentDidMount=function(){this.triggerToolRender()},e.prototype.componentDidUpdate=function(){this.triggerToolRender()},e.prototype.getTools=function(){var t=this.props,r=t.tool,i=t.graphModel,o=i.textEditElement,a=r.getTools(),s=a.map(function(l){return be(l,{textEditElement:o,graphModel:i,lf:r.instance})});return r.components=s,s},e.prototype.triggerToolRender=function(){var t=this.props,r=t.tool,i=t.graphModel,o=document.querySelector("#ToolOverlay_".concat(i.flowId)),a=r.getInstance();a.components.forEach(function(s){return s(a,o)}),a.components=[]},e.prototype.render=function(){var t=this.props.graphModel;return j("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(t.flowId),children:this.getTools()})},e=wN([Gt],e),e}(Ue),Er=function(){return Er=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Er.apply(this,arguments)},fe=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},SN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rt=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},dn=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},CN=function(){function n(e){var t=this;this.modelMap=new Map,this.nodeModelMap=new Map,this.edgeModelMap=new Map,this.elementsModelMap=new Map,this.nodeMoveRules=[],this.nodeResizeRules=[],this.nodes=[],this.edges=[],this.overlapMode=Ln.DEFAULT,this.gridSize=1,this.partial=!1,this.waitCleanEffects=[];var r=e.container,i=e.partial,o=e.background,a=o===void 0?{}:o,s=e.grid,l=e.idGenerator,u=e.edgeGenerator,c=e.animation,f=e.customTrajectory;this.rootEl=r,this.partial=!!i,this.background=a,typeof s=="object"&&(this.gridSize=s.size||1),this.theme=Ay(e.style),this.grid=Ns.getGridOptions(s!=null?s:!1),this.edgeType=e.edgeType||"polyline",this.animation=vT(c),this.overlapMode=e.overlapMode||Ln.DEFAULT,this.width=e.width||this.rootEl.getBoundingClientRect().width,this.height=e.height||this.rootEl.getBoundingClientRect().height;var d=new ResizeObserver(Sc(function(h){var v,p;try{for(var g=SN(h),y=g.next();!y.done;y=g.next()){var b=y.value;b.target===t.rootEl&&(t.resize(),t.eventCenter.emit("graph:resize",{target:t.rootEl,contentRect:b.contentRect}))}}catch(C){v={error:C}}finally{try{y&&!y.done&&(p=g.return)&&p.call(g)}finally{if(v)throw v.error}}},16));d.observe(this.rootEl),this.waitCleanEffects.push(function(){d.disconnect()}),this.eventCenter=new tN,this.editConfigModel=new QM(e),this.transformModel=new MN(this.eventCenter,e),this.flowId=Nr(),this.idGenerator=l,this.edgeGenerator=FT(this,u),this.customTrajectory=f}return Object.defineProperty(n.prototype,"nodesMap",{get:function(){return this.nodes.reduce(function(e,t,r){return e[t.id]={index:r,model:t},e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"edgesMap",{get:function(){return this.edges.reduce(function(e,t,r){return e[t.id]={index:r,model:t},e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"modelsMap",{get:function(){return dn(dn([],Rt(this.nodes),!1),Rt(this.edges),!1).reduce(function(e,t){return e[t.id]=t,e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sortElements",{get:function(){for(var e=dn(dn([],Rt(this.nodes),!1),Rt(this.edges),!1).sort(function(s,l){return s.zIndex-l.zIndex}),t=[],r=[-Ma,-Ma],i=[this.width+Ma,this.height+Ma],o=0;o<e.length;o++){var a=e[o];a.visible&&(!this.partial||a.isSelected||this.isElementInArea(a,r,i,!1,!1))&&t.push(a)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textEditElement",{get:function(){var e=this.nodes.find(function(r){return r.state===Ze.TEXT_EDIT}),t=this.edges.find(function(r){return r.state===Ze.TEXT_EDIT});return e||t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selectElements",{get:function(){var e=new Map;return this.nodes.forEach(function(t){t.isSelected&&e.set(t.id,t)}),this.edges.forEach(function(t){t.isSelected&&e.set(t.id,t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selectNodes",{get:function(){var e=[];return this.nodes.forEach(function(t){t.isSelected&&e.push(t)}),e},enumerable:!1,configurable:!0}),n.prototype.getAreaElement=function(e,t,r,i,o){var a=this;r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=!1);var s=[];return ot(dn(dn([],Rt(this.nodes),!1),Rt(this.edges),!1),function(l){var u=a.isElementInArea(l,e,t,r,i);(!o||l.visible)&&u&&s.push(l)}),s},n.prototype.getModel=function(e){return this.modelMap.get(e)},n.prototype.getNodeModelById=function(e){var t;return this.fakeNode&&e===this.fakeNode.id?this.fakeNode:(t=this.nodesMap[e])===null||t===void 0?void 0:t.model},n.prototype.getPointByClient=function(e){var t=e.x,r=e.y,i=this.rootEl.getBoundingClientRect(),o={x:t-i.left,y:r-i.top},a=Rt(this.transformModel.HtmlPointToCanvasPoint([o.x,o.y]),2),s=a[0],l=a[1],u={x:s,y:l};return{domOverlayPosition:o,canvasOverlayPosition:u}},n.prototype.isElementInArea=function(e,t,r,i,o){var a;if(i===void 0&&(i=!0),o===void 0&&(o=!0),e.BaseType===Et.NODE){e=e;for(var s=Qt(e),l=s.minX,u=s.minY,c=s.maxX,f=s.maxY,d=[{x:l,y:u},{x:c,y:u},{x:c,y:f},{x:l,y:f}],h=o,v=0;v<d.length;v++){var p=d[v],g=p.x,y=p.y;if(a=Rt(this.transformModel.CanvasPointToHtmlPoint([g,y]),2),g=a[0],y=a[1],ql([g,y],t,r)!==o){h=!o;break}}return h}if(e.BaseType===Et.EDGE){e=e;var b=e.startPoint,C=e.endPoint,D=this.transformModel.CanvasPointToHtmlPoint([b.x,b.y]),B=this.transformModel.CanvasPointToHtmlPoint([C.x,C.y]),R=ql(D,t,r),A=ql(B,t,r);return i?R&&A:R||A}return!1},n.prototype.graphDataToModel=function(e){var t=this;if((!this.width||!this.height)&&this.resize(),!e){this.nodes=[],this.edges=[];return}if(e.nodes?this.nodes=bn(e.nodes,function(i){return t.getModelAfterSnapToGrid(i)}):this.nodes=[],e.edges){var r=this.edgeType;this.edges=bn(e.edges,function(i){var o,a=t.getModel((o=i.type)!==null&&o!==void 0?o:r);if(!a)throw new Error("找不到".concat(i.type,"对应的边。"));var s=new a(i,t),l=s.sourceNodeId,u=s.targetNodeId,c=s.sourceAnchorId,f=c===void 0?"":c,d=s.targetAnchorId,h=d===void 0?"":d,v=s.startPoint,p=s.endPoint,g=s.text,y=s.textPosition,b=function(ue,ce,w,M){var L=ue==null?void 0:ue.anchors.find(function(V){return V.id===ce});L&&!is(L,w)&&M(L)},C=t.getNodeModelById(l),D=t.getNodeModelById(u);if(b(C,f,v,s.updateStartPoint.bind(s)),b(D,h,p,s.updateEndPoint.bind(s)),g){var B=g.x,R=g.y,A=y.x,O=y.y;if(B&&R&&A&&O){var F=B-A,Z=R-O;s.resetTextPosition(),s.moveText(F,Z)}}return t.edgeModelMap.set(s.id,s),t.elementsModelMap.set(s.id,s),s})}else this.edges=[]},n.prototype.modelToGraphData=function(){var e=[];this.edges.forEach(function(r){var i=r.getData();i&&!r.virtual&&e.push(i)});var t=[];return this.nodes.forEach(function(r){var i=r.getData();i&&!r.virtual&&t.push(i)}),{nodes:t,edges:e}},n.prototype.modelToHistoryData=function(){for(var e=!1,t=[],r=0;r<this.nodes.length;r++){var i=this.nodes[r];if(i.isDragging){e=!0;break}else t.push(i.getHistoryData())}if(e)return!1;for(var o=!1,a=[],s=0;s<this.edges.length;s++){var l=this.edges[s];if(l.isDragging){o=!0;break}else a.push(l.getHistoryData())}return o?!1:{nodes:t,edges:a}},n.prototype.getEdgeModelById=function(e){var t;return(t=this.edgesMap[e])===null||t===void 0?void 0:t.model},n.prototype.getElement=function(e){return this.modelsMap[e]},n.prototype.getNodeEdges=function(e){for(var t=[],r=0;r<this.edges.length;r++){var i=this.edges[r],o=i.sourceNodeId===e,a=i.targetNodeId===e;(o||a)&&t.push(i)}return t},n.prototype.getSelectElements=function(e){e===void 0&&(e=!0);var t=this.selectElements,r={nodes:[],edges:[]};return t.forEach(function(i){if(i.BaseType===Et.NODE&&r.nodes.push(i.getData()),i.BaseType===Et.EDGE){var o=i.getData(),a=t.get(o.sourceNodeId)&&t.get(o.targetNodeId);(e||a)&&r.edges.push(o)}}),r},n.prototype.updateAttributes=function(e,t){var r=this.getElement(e);r==null||r.updateAttributes(t)},n.prototype.changeNodeId=function(e,t){return t||(t=Nr()),this.nodesMap[t]?(console.warn("当前流程图已存在节点".concat(t,", 修改失败")),""):this.nodesMap[e]?(this.edges.forEach(function(r){r.sourceNodeId===e&&(r.sourceNodeId=t),r.targetNodeId===e&&(r.targetNodeId=t)}),this.nodesMap[e].model.id=t,this.nodesMap[t]=this.nodesMap[e],t):(console.warn("当前流程图找不到节点".concat(e,", 修改失败")),"")},n.prototype.changeEdgeId=function(e,t){return t||(t=Nr()),this.edgesMap[t]?(console.warn("当前流程图已存在边: ".concat(t,", 修改失败")),""):this.edgesMap[e]?(this.edges.forEach(function(r){r.id===e&&r.changeEdgeId(t)}),t):(console.warn("当前流程图找不到边: ".concat(t,", 修改失败")),"")},n.prototype.getTextModel=function(e){var t=this.editConfigModel,r=t.textMode,i=t.nodeTextMode,o=t.edgeTextMode;if(e.BaseType===Et.NODE)return e.textMode||i||r||mn.TEXT;if(e.BaseType===Et.EDGE)return e.textMode||o||r||mn.TEXT},n.prototype.setTextMode=function(e,t){this.editConfigModel.updateEditConfig({textMode:e})},n.prototype.setFakeNode=function(e){this.fakeNode=e},n.prototype.removeFakeNode=function(){this.fakeNode=null},n.prototype.setModel=function(e,t){return this.modelMap.set(e,t)},n.prototype.toFront=function(e){var t,r,i,o=((t=this.nodesMap[e])===null||t===void 0?void 0:t.model)||((r=this.edgesMap[e])===null||r===void 0?void 0:r.model);o&&(this.overlapMode===Ln.DEFAULT&&((i=this.topElement)===null||i===void 0||i.setZIndex(),o.setZIndex(yT),this.topElement=o),this.overlapMode===Ln.INCREASE&&this.setElementZIndex(e,"top"))},n.prototype.setElementZIndex=function(e,t){var r,i,o=((r=this.nodesMap[e])===null||r===void 0?void 0:r.model)||((i=this.edgesMap[e])===null||i===void 0?void 0:i.model);if(o){var a=void 0;typeof t=="number"?a=t:(t==="top"&&(a=xf()),t==="bottom"&&(a=kM())),o.setZIndex(a)}},n.prototype.deleteNode=function(e){var t=this.nodesMap[e].model,r=t.getData();this.deleteEdgeBySource(e),this.deleteEdgeByTarget(e),this.nodes.splice(this.nodesMap[e].index,1),this.eventCenter.emit(he.NODE_DELETE,{data:r,model:t})},n.prototype.addNode=function(e,t,r){t===void 0&&(t=he.NODE_ADD);var i=$t(e),o=i.id;o&&this.nodesMap[o]&&delete i.id;var a=this.getModelAfterSnapToGrid(i);this.nodes.push(a);var s=a.getData(),l={data:s};return r&&(l.e=r),this.eventCenter.emit(t,l),a},n.prototype.getModelAfterSnapToGrid=function(e){var t=this.getModel(e.type);if(!t)throw new Error("找不到".concat(e.type,"对应的节点，请确认是否已注册此类型节点。"));var r=e.x,i=e.y;r&&i&&(e.x=Xi(r,this.gridSize),e.y=Xi(i,this.gridSize),typeof e.text=="object"&&e.text!==null&&(e.text.x+=e.x-r,e.text.y+=e.y-i));var o=new t(e,this);return this.nodeModelMap.set(o.id,o),this.elementsModelMap.set(o.id,o),o},n.prototype.cloneNode=function(e){var t=this.getNodeModelById(e),r=t==null?void 0:t.getData();if(r){r.x+=30,r.y+=30,r.id="",typeof r.text=="object"&&r.text!==null&&(r.text.x+=30,r.text.y+=30);var i=this.addNode(r);return i.setSelected(!0),t==null||t.setSelected(!1),i.getData()}},n.prototype.moveNode=function(e,t,r,i){var o;i===void 0&&(i=!1);var a=this.nodesMap[e];if(!a){console.warn("不存在id为".concat(e,"的节点"));return}var s=a.model;o=Rt(s.getMoveDistance(t,r,i),2),t=o[0],r=o[1],this.moveEdge(e,t,r)},n.prototype.moveNode2Coordinate=function(e,t,r,i){i===void 0&&(i=!1);var o=this.nodesMap[e];if(!o){console.warn("不存在id为".concat(e,"的节点"));return}var a=o.model,s=a.x,l=a.y,u=t-s,c=r-l;this.moveNode(e,u,c,i)},n.prototype.editText=function(e){this.setElementStateById(e,Ze.TEXT_EDIT)},n.prototype.addEdge=function(e){var t=$t(e),r=t.type;r||(r=this.edgeType),t.id&&this.edgesMap[t.id]&&delete t.id;var i=this.getModel(r);if(!i)throw new Error("找不到".concat(r,"对应的边，请确认是否已注册此类型边。"));var o=new i(Er(Er({},t),{type:r}),this);this.edgeModelMap.set(o.id,o),this.elementsModelMap.set(o.id,o);var a=o.getData();return this.edges.push(o),this.eventCenter.emit(he.EDGE_ADD,{data:a}),o},n.prototype.moveEdge=function(e,t,r){for(var i=0;i<this.edges.length;i++){var o=this.edges[i],a=o.textPosition,s=a.x,l=a.y,u=this.edges[i].sourceNodeId===e,c=this.edges[i].targetNodeId===e;u&&o.moveStartPoint(t,r),c&&o.moveEndPoint(t,r),(u||c)&&this.handleEdgeTextMove(o,s,l)}},n.prototype.handleEdgeTextMove=function(e,t,r){var i;if(e.customTextPosition){e.resetTextPosition();return}if(e.modelType===He.POLYLINE_EDGE&&(!((i=e.text)===null||i===void 0)&&i.value)){var o=e.text,a=gy(o,e.points);e.moveText(a.x-o.x,a.y-o.y)}var s=e.textPosition,l=s.x,u=s.y;e.moveText(l-t,u-r)},n.prototype.deleteEdgeBySourceAndTarget=function(e,t){for(var r=0;r<this.edges.length;r++)if(this.edges[r].sourceNodeId===e&&this.edges[r].targetNodeId===t){var i=this.edges[r].getData();this.edges.splice(r,1),r--,this.eventCenter.emit(he.EDGE_DELETE,{data:i})}},n.prototype.deleteEdgeById=function(e){var t=this.edgesMap[e];if(t){var r=this.edgesMap[e].index,i=this.edgesMap[e].model.getData();this.edges.splice(r,1),this.eventCenter.emit(he.EDGE_DELETE,{data:i})}},n.prototype.deleteEdgeBySource=function(e){for(var t=0;t<this.edges.length;t++)if(this.edges[t].sourceNodeId===e){var r=this.edges[t].getData();this.edges.splice(t,1),t--,this.eventCenter.emit(he.EDGE_DELETE,{data:r})}},n.prototype.deleteEdgeByTarget=function(e){for(var t=0;t<this.edges.length;t++)if(this.edges[t].targetNodeId===e){var r=this.edges[t].getData();this.edges.splice(t,1),t--,this.eventCenter.emit(he.EDGE_DELETE,{data:r})}},n.prototype.setElementStateById=function(e,t,r){this.nodes.forEach(function(i){i.id===e?i.setElementState(t,r):i.setElementState(Ze.DEFAULT)}),this.edges.forEach(function(i){i.id===e?i.setElementState(t,r):i.setElementState(Ze.DEFAULT)})},n.prototype.updateText=function(e,t){var r=Rr(dn(dn([],Rt(this.nodes),!1),Rt(this.edges),!1),function(i){return i.id===e});r==null||r.updateText(t)},n.prototype.selectNodeById=function(e,t){var r;t===void 0&&(t=!1),t||this.clearSelectElements();var i=(r=this.nodesMap[e])===null||r===void 0?void 0:r.model;i==null||i.setSelected(!0)},n.prototype.selectEdgeById=function(e,t){var r;t===void 0&&(t=!1),t||this.clearSelectElements();var i=(r=this.edgesMap[e])===null||r===void 0?void 0:r.model;i==null||i.setSelected(!0)},n.prototype.selectElementById=function(e,t){t===void 0&&(t=!1),t||this.clearSelectElements();var r=this.getElement(e);r==null||r.setSelected(!0)},n.prototype.clearSelectElements=function(){var e;this.selectElements.forEach(function(t){t==null||t.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===Ln.DEFAULT&&((e=this.topElement)===null||e===void 0||e.setZIndex())},n.prototype.moveNodes=function(e,t,r,i){var o,a,s,l=this;i===void 0&&(i=!1);for(var u=e.reduce(function(C,D){var B,R=(B=l.nodesMap[D])===null||B===void 0?void 0:B.model;return R&&(C[D]=R.getMoveDistance(t,r,i)),C},{}),c=0;c<this.edges.length;c++){var f=this.edges[c],d=f.textPosition,h=d.x,v=d.y,p=u[f.sourceNodeId],g=u[f.targetNodeId],y=void 0,b=void 0;p&&g&&f.modelType===He.POLYLINE_EDGE?(o=Rt(p,2),y=o[0],b=o[1],f.updatePointsList(y,b)):(p&&(a=Rt(p,2),y=a[0],b=a[1],f.moveStartPoint(y,b)),g&&(s=Rt(g,2),y=s[0],b=s[1],f.moveEndPoint(y,b))),(p||g)&&this.handleEdgeTextMove(f,h,v)}},n.prototype.addNodeMoveRules=function(e){this.nodeMoveRules.includes(e)||this.nodeMoveRules.push(e)},n.prototype.addNodeResizeRules=function(e){this.nodeResizeRules.includes(e)||this.nodeResizeRules.push(e)},n.prototype.setDefaultEdgeType=function(e){this.edgeType=e},n.prototype.changeNodeType=function(e,t){var r=this.getNodeModelById(e);if(!r){console.warn("找不到id为".concat(e,"的节点"));return}var i=r.getData();i.type=t;var o=this.getModel(t);if(!o)throw new Error("找不到".concat(t,"对应的节点，请确认是否已注册此类型节点。"));var a=new o(i,this);this.nodes.splice(this.nodesMap[e].index,1,a);var s=this.getNodeEdges(e);s.forEach(function(l){if(l.sourceNodeId===e){var u=dh(a,l.startPoint,a.width,a.height);l.updateStartPoint(u)}if(l.targetNodeId===e){var u=dh(a,l.endPoint,a.width,a.height);l.updateEndPoint(u)}})},n.prototype.changeEdgeType=function(e,t){var r=this.getEdgeModelById(e);if(!r){console.warn("找不到id为".concat(e,"的边"));return}if(r.type!==t){var i=r.getData();i.type=t;var o=this.getModel(t);if(!o)throw new Error("找不到".concat(t,"对应的节点，请确认是否已注册此类型节点。"));delete i.pointsList;var a=new o(i,this);this.edges.splice(this.edgesMap[e].index,1,a)}},n.prototype.getNodeIncomingEdge=function(e){var t=[];return this.edges.forEach(function(r){r.targetNodeId===e&&t.push(r)}),t},n.prototype.getNodeOutgoingEdge=function(e){var t=[];return this.edges.forEach(function(r){r.sourceNodeId===e&&t.push(r)}),t},n.prototype.getAnchorIncomingEdge=function(e){var t=[];return this.edges.forEach(function(r){r.targetAnchorId===e&&t.push(r)}),t},n.prototype.getAnchorOutgoingEdge=function(e){var t=[];return this.edges.forEach(function(r){r.sourceAnchorId===e&&t.push(r)}),t},n.prototype.getNodeIncomingNode=function(e){var t=this,r=[];return this.edges.forEach(function(i){var o;i.targetNodeId===e&&r.push((o=t.nodesMap[i.sourceNodeId])===null||o===void 0?void 0:o.model)}),r},n.prototype.getNodeOutgoingNode=function(e){var t=this,r=[];return this.edges.forEach(function(i){i.sourceNodeId===e&&r.push(t.nodesMap[i.targetNodeId].model)}),r},n.prototype.setTheme=function(e){this.theme=RM(Er(Er({},this.theme),e))},n.prototype.updateGridOptions=function(e){Li(this.grid,e)},n.prototype.updateBackgroundOptions=function(e){ls(e)||ls(this.background)?this.background=e:this.background=Er(Er({},this.background),e)},n.prototype.resize=function(e,t){this.width=e||this.rootEl.getBoundingClientRect().width,this.height=t||this.rootEl.getBoundingClientRect().height,(!this.width||!this.height)&&console.warn("渲染画布的时候无法获取画布宽高，请确认在container已挂载到DOM。@see https://github.com/didi/LogicFlow/issues/675")},n.prototype.clearData=function(){this.nodes=[],this.edges=[]},n.prototype.getVirtualRectSize=function(){var e=this.nodes,t=[],r=[];e.forEach(function(d){var h=d.x,v=d.y,p=d.width,g=d.height,y=d.getNodeStyle().strokeWidth,b=y===void 0?0:y,C=h+p/2+b,D=h-p/2-b,B=v+g/2+b,R=v-g/2-b;t=t.concat([C,D].filter(function(A){return!Number.isNaN(A)})),r=r.concat([B,R].filter(function(A){return!Number.isNaN(A)}))});var i=Math.min.apply(Math,dn([],Rt(t),!1)),o=Math.max.apply(Math,dn([],Rt(t),!1)),a=Math.min.apply(Math,dn([],Rt(r),!1)),s=Math.max.apply(Math,dn([],Rt(r),!1)),l=o-i||0,u=s-a||0,c=i+l/2,f=a+u/2;return{width:l,height:u,x:c,y:f}},n.prototype.translateCenter=function(){var e=this,t=e.nodes,r=e.width,i=e.height,o=e.rootEl,a=e.transformModel;if(t.length){var s=r||o.clientWidth,l=i||o.clientHeight,u=this.getVirtualRectSize(),c=u.x,f=u.y;a.focusOn(c,f,s,l)}},n.prototype.fitView=function(e,t){e===void 0&&(e=20),t===void 0&&(t=20);var r=this,i=r.nodes,o=r.width,a=r.height,s=r.rootEl,l=r.transformModel;if(i.length){var u=o||s.clientWidth,c=a||s.clientHeight,f=this.getVirtualRectSize(),d=f.width,h=f.height,v=f.x,p=f.y,g=(d+t)/u,y=(h+e)/c,b=1/Math.max(g,y),C=[u/2,c/2];l.zoom(b,C),l.focusOn(v,p,u,c)}},n.prototype.openEdgeAnimation=function(e){var t=this.getEdgeModelById(e);t==null||t.openEdgeAnimation()},n.prototype.closeEdgeAnimation=function(e){var t=this.getEdgeModelById(e);t==null||t.closeEdgeAnimation()},n.prototype.getPartial=function(){return this.partial},n.prototype.setPartial=function(e){this.partial=e},n.prototype.destroy=function(){try{this.waitCleanEffects.forEach(function(e){e()})}catch(e){console.warn("error on destroy GraphModel",e)}this.waitCleanEffects.length=0},fe([$],n.prototype,"width",void 0),fe([$],n.prototype,"height",void 0),fe([$],n.prototype,"grid",void 0),fe([$],n.prototype,"edgeType",void 0),fe([$],n.prototype,"nodes",void 0),fe([$],n.prototype,"edges",void 0),fe([$],n.prototype,"fakeNode",void 0),fe([$],n.prototype,"overlapMode",void 0),fe([$],n.prototype,"background",void 0),fe([$],n.prototype,"gridSize",void 0),fe([$],n.prototype,"transformModel",void 0),fe([$],n.prototype,"editConfigModel",void 0),fe([$],n.prototype,"partial",void 0),fe([vt],n.prototype,"nodesMap",null),fe([vt],n.prototype,"edgesMap",null),fe([vt],n.prototype,"modelsMap",null),fe([vt],n.prototype,"sortElements",null),fe([vt],n.prototype,"textEditElement",null),fe([vt],n.prototype,"selectElements",null),fe([vt],n.prototype,"selectNodes",null),fe([H],n.prototype,"setTextMode",null),fe([H],n.prototype,"setFakeNode",null),fe([H],n.prototype,"removeFakeNode",null),fe([H],n.prototype,"setModel",null),fe([H],n.prototype,"toFront",null),fe([H],n.prototype,"setElementZIndex",null),fe([H],n.prototype,"deleteNode",null),fe([H],n.prototype,"addNode",null),fe([H],n.prototype,"cloneNode",null),fe([H],n.prototype,"moveNode",null),fe([H],n.prototype,"moveNode2Coordinate",null),fe([H],n.prototype,"editText",null),fe([H],n.prototype,"addEdge",null),fe([H],n.prototype,"moveEdge",null),fe([H],n.prototype,"deleteEdgeBySourceAndTarget",null),fe([H],n.prototype,"deleteEdgeById",null),fe([H],n.prototype,"deleteEdgeBySource",null),fe([H],n.prototype,"deleteEdgeByTarget",null),fe([H],n.prototype,"setElementStateById",null),fe([H],n.prototype,"updateText",null),fe([H],n.prototype,"selectNodeById",null),fe([H],n.prototype,"selectEdgeById",null),fe([H],n.prototype,"selectElementById",null),fe([H],n.prototype,"clearSelectElements",null),fe([H],n.prototype,"moveNodes",null),fe([H],n.prototype,"setDefaultEdgeType",null),fe([H],n.prototype,"changeNodeType",null),fe([H],n.prototype,"changeEdgeType",null),fe([H],n.prototype,"getNodeIncomingEdge",null),fe([H],n.prototype,"getNodeOutgoingEdge",null),fe([H],n.prototype,"getAnchorIncomingEdge",null),fe([H],n.prototype,"getAnchorOutgoingEdge",null),fe([H],n.prototype,"getNodeIncomingNode",null),fe([H],n.prototype,"getNodeOutgoingNode",null),fe([H],n.prototype,"setTheme",null),fe([H],n.prototype,"resize",null),fe([H],n.prototype,"clearData",null),fe([H],n.prototype,"translateCenter",null),fe([H],n.prototype,"fitView",null),fe([H],n.prototype,"openEdgeAnimation",null),fe([H],n.prototype,"closeEdgeAnimation",null),fe([H],n.prototype,"setPartial",null),n}(),Zr=function(){return Zr=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Zr.apply(this,arguments)},yo=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ON=function(){function n(e){this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=e}return n.prototype.getStyle=function(){return Zr({},this.graphModel.theme.snapline)},n.prototype.getCenterSnapLine=function(e,t){for(var r=e.x,i=e.y,o=!1,a=!1,s=0;s<t.length;s++){var l=t[s];if(l.id!==e.id&&(r===l.x&&(o=!0),i===l.y&&(a=!0),o&&a))break}return{isShowVertical:o,isShowHorizontal:a,position:{x:r,y:i}}},n.prototype.getHorizontalSnapline=function(e,t){var r=!1,i=0,o=e.id,a;if(o){var s=this.graphModel.fakeNode;if(s&&s.id===o)a=Qt(s);else{var l=this.graphModel.getNodeModelById(o);l&&(a=Qt(l))}}for(var u=0;u<t.length;u++){var c=t[u];if(c.id!==e.id){var f=Qt(c);if(f.minY===(a==null?void 0:a.minY)||f.maxY===(a==null?void 0:a.minY)){r=!0,i=a.minY;break}if(f.minY===(a==null?void 0:a.maxY)||f.maxY===(a==null?void 0:a.maxY)){r=!0,i=a.maxY;break}}}return{isShowHorizontal:r,isShowVertical:this.isShowVertical,position:Zr(Zr({},this.position),{y:i})}},n.prototype.getVerticalSnapline=function(e,t){var r=!1,i=0,o=e.id,a;if(o){var s=this.graphModel.fakeNode;if(s&&s.id===o)a=Qt(s);else{var l=this.graphModel.getNodeModelById(o);l&&(a=Qt(l))}}for(var u=0;u<t.length;u++){var c=t[u];if(c.id!==e.id){var f=Qt(c);if(f.minX===(a==null?void 0:a.minX)||f.maxX===(a==null?void 0:a.minX)){r=!0,i=a.minX;break}if(f.minX===(a==null?void 0:a.maxX)||f.maxX===(a==null?void 0:a.maxX)){r=!0,i=a.maxX;break}}}return{isShowHorizontal:this.isShowHorizontal,isShowVertical:r,position:Zr(Zr({},this.position),{x:i})}},n.prototype.getSnapLinePosition=function(e,t){var r=this.getCenterSnapLine(e,t),i=r.isShowHorizontal,o=r.isShowVertical;if(!i){var a=this.getHorizontalSnapline(e,t);a.isShowHorizontal&&(r.isShowHorizontal=a.isShowHorizontal,r.position.y=a.position.y)}if(!o){var s=this.getVerticalSnapline(e,t);s.isShowVertical&&(r.isShowVertical=s.isShowVertical,r.position.x=s.position.x)}return r},n.prototype.setSnaplineInfo=function(e){var t=e.isShowHorizontal,r=e.isShowVertical,i=e.position;this.position=i,this.isShowHorizontal=t,this.isShowVertical=r},n.prototype.clearSnapline=function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1},n.prototype.setNodeSnapLine=function(e){var t=this.graphModel.nodes,r=this.getSnapLinePosition(e,t);this.setSnaplineInfo(r)},yo([$],n.prototype,"isShowHorizontal",void 0),yo([$],n.prototype,"isShowVertical",void 0),yo([$],n.prototype,"position",void 0),yo([H],n.prototype,"clearSnapline",null),yo([H],n.prototype,"setNodeSnapLine",null),n}(),Tn=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},wi=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},TN={false:[-1/0,-1/0,1/0,1/0],true:[-1/0,-1/0,1/0,1/0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},MN=function(){function n(e,t){this.MINI_SCALE_SIZE=.2,this.MAX_SCALE_SIZE=16,this.SCALE_X=1,this.SKEW_Y=0,this.SKEW_X=0,this.SCALE_Y=1,this.TRANSLATE_X=0,this.TRANSLATE_Y=0,this.ZOOM_SIZE=.04,this.translateLimitMinX=-1/0,this.translateLimitMinY=-1/0,this.translateLimitMaxX=1/0,this.translateLimitMaxY=1/0,this.eventCenter=e;var r=t.stopMoveGraph,i=r===void 0?!1:r;this.updateTranslateLimits(i)}return n.prototype.setZoomMiniSize=function(e){this.MINI_SCALE_SIZE=e},n.prototype.setZoomMaxSize=function(e){this.MAX_SCALE_SIZE=e},n.prototype.HtmlPointToCanvasPoint=function(e){var t=wi(e,2),r=t[0],i=t[1];return[(r-this.TRANSLATE_X)/this.SCALE_X,(i-this.TRANSLATE_Y)/this.SCALE_Y]},n.prototype.CanvasPointToHtmlPoint=function(e){var t=wi(e,2),r=t[0],i=t[1];return[r*this.SCALE_X+this.TRANSLATE_X,i*this.SCALE_Y+this.TRANSLATE_Y]},n.prototype.moveCanvasPointByHtml=function(e,t,r){var i=wi(e,2),o=i[0],a=i[1];return[o+t/this.SCALE_X,a+r/this.SCALE_Y]},n.prototype.fixDeltaXY=function(e,t){return[e/this.SCALE_X,t/this.SCALE_Y]},n.prototype.getTransformStyle=function(){var e=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(e,")")}},n.prototype.zoom=function(e,t){e===void 0&&(e=!1);var r=this.SCALE_X,i=this.SCALE_Y;return typeof e=="number"?(r=e,i=e):e?(r+=this.ZOOM_SIZE,i+=this.ZOOM_SIZE):(r-=this.ZOOM_SIZE,i-=this.ZOOM_SIZE),r<this.MINI_SCALE_SIZE||r>this.MAX_SCALE_SIZE?"".concat(this.SCALE_X*100,"%"):(t&&(this.TRANSLATE_X-=(r-this.SCALE_X)*t[0],this.TRANSLATE_Y-=(i-this.SCALE_Y)*t[1]),this.SCALE_X=r,this.SCALE_Y=i,this.emitGraphTransform("zoom"),"".concat(this.SCALE_X*100,"%"))},n.prototype.emitGraphTransform=function(e){this.eventCenter.emit(he.GRAPH_TRANSFORM,{type:e,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})},n.prototype.resetZoom=function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")},n.prototype.translate=function(e,t){this.TRANSLATE_X+e<=this.translateLimitMaxX&&this.TRANSLATE_X+e>=this.translateLimitMinX&&(this.TRANSLATE_X+=e),this.TRANSLATE_Y+t<=this.translateLimitMaxY&&this.TRANSLATE_Y+t>=this.translateLimitMinY&&(this.TRANSLATE_Y+=t),this.emitGraphTransform("translate")},n.prototype.focusOn=function(e,t,r,i){var o=wi(this.CanvasPointToHtmlPoint([e,t]),2),a=o[0],s=o[1],l=wi([r/2-a,i/2-s],2),u=l[0],c=l[1];this.TRANSLATE_X+=u,this.TRANSLATE_Y+=c,this.emitGraphTransform("focusOn")},n.prototype.updateTranslateLimits=function(e){var t;t=wi(Array.isArray(e)&&e.length===4?e:TN[e.toString()],4),this.translateLimitMinX=t[0],this.translateLimitMinY=t[1],this.translateLimitMaxX=t[2],this.translateLimitMaxY=t[3]},Tn([$],n.prototype,"SCALE_X",void 0),Tn([$],n.prototype,"SKEW_Y",void 0),Tn([$],n.prototype,"SKEW_X",void 0),Tn([$],n.prototype,"SCALE_Y",void 0),Tn([$],n.prototype,"TRANSLATE_X",void 0),Tn([$],n.prototype,"TRANSLATE_Y",void 0),Tn([$],n.prototype,"ZOOM_SIZE",void 0),Tn([H],n.prototype,"zoom",null),Tn([H],n.prototype,"resetZoom",null),Tn([H],n.prototype,"translate",null),Tn([H],n.prototype,"focusOn",null),n}(),NN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PN=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},RN=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},DN=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},LN=function(n){NN(e,n);function e(){var t=n.apply(this,DN([],RN(arguments),!1))||this;return t.handleResize=function(){t.props.graphModel.resize()},t.throttleResize=function(){return Ip(t.handleResize,200)},t}return e.prototype.componentDidMount=function(){window.addEventListener("resize",this.throttleResize)},e.prototype.componentDidUpdate=function(){var t=this.props.graphModel.modelToGraphData();this.props.graphModel.eventCenter.emit(he.GRAPH_UPDATED,{data:t})},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.throttleResize)},e.prototype.getComponent=function(t,r,i){i===void 0&&(i="canvas-overlay");var o=this.props.getView,a=o(t.type);return a?j(a,{model:t,graphModel:r,overlay:i},t.id):null},e.prototype.render=function(){var t=this,r=this.props,i=r.graphModel,o=r.tool,a=r.options,s=r.dnd,l=r.snaplineModel,u={};a.width&&(u.width="".concat(i.width,"px")),a.height&&(u.height="".concat(i.height,"px"));var c=i.fakeNode,f=i.editConfigModel,d=i.background,h=f.adjustEdge;return j("div",{className:"lf-graph","flow-id":i.flowId,style:u,children:[j(iN,{graphModel:i,dnd:s,children:[j("g",{className:"lf-base",children:bn(i.sortElements,function(v){return t.getComponent(v,i)})}),c?this.getComponent(c,i):""]}),j(vN,{graphModel:i,children:[j(mN,{graphModel:i}),h?j(sN,{graphModel:i}):"",a.snapline!==!1?j(xN,{snaplineModel:l}):""]}),j(AN,{graphModel:i,tool:o}),d&&j(cN,{background:d}),j(Ns,{graphModel:i})]})},e=PN([Gt],e),e}(Ue),kN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vn=function(){return Vn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Vn.apply(this,arguments)},IN=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},BN=function(n){kN(e,n);function e(){var t=n.call(this)||this;return t.onDragStart=function(r){var i=r.event,o=t.props,a=o.anchorData,s=o.nodeModel,l=o.graphModel;l.selectNodeById(s.id),s.autoToFront&&l.toFront(s.id),l.eventCenter.emit(he.ANCHOR_DRAGSTART,{data:a,e:i,nodeModel:s}),t.setState({startX:a.x,startY:a.y,endX:a.x,endY:a.y})},t.onDragging=function(r){var i=r.event,o=t.props,a=o.graphModel,s=o.nodeModel,l=o.anchorData,u=a.transformModel,c=a.eventCenter,f=a.width,d=a.height,h=a.editConfigModel,v=h.autoExpand,p=h.stopMoveGraph;if(i){var g=i.clientX,y=i.clientY,b=a.getPointByClient({x:g,y}),C=b.domOverlayPosition,D=C.x,B=C.y,R=b.canvasOverlayPosition,A=R.x,O=R.y;t.t&&Os(t.t);var F=[],Z=10;D<10?F=[Z,0]:D+10>f?F=[-Z,0]:B<10?F=[0,Z]:B+10>d&&(F=[0,-Z]),t.setState({endX:A,endY:O,dragging:!0}),t.moveAnchorEnd(A,O),F.length>0&&!p&&v&&(t.t=by(function(){var ue=IN(F,2),ce=ue[0],w=ue[1];u.translate(ce,w);var M=t.state,L=M.endX,V=M.endY;t.setState({endX:L-ce,endY:V-w}),t.moveAnchorEnd(L-ce,V-w)})),c.emit(he.ANCHOR_DRAG,{data:l,e:i,nodeModel:s})}},t.onDragEnd=function(r){var i=r.event;t.t&&Os(t.t);var o=t.checkEnd(i);t.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),t.sourceRuleResults.clear(),t.targetRuleResults.clear();var a=t.props,s=a.graphModel,l=a.nodeModel,u=a.anchorData;s.eventCenter.emit(he.ANCHOR_DRAGEND,{data:u,e:i,nodeModel:l,edgeModel:o!=null?o:void 0})},t.checkEnd=function(r){var i,o=t.props,a=o.graphModel,s=o.nodeModel,l=o.anchorData,u=l.x,c=l.y,f=l.id,d=t.state,h=d.endX,v=d.endY,p=d.dragging,g=Ss({x:h,y:v},a);if(t.preTargetNode&&t.preTargetNode.state!==Ze.DEFAULT&&t.preTargetNode.setElementState(Ze.DEFAULT),!!p&&g&&g.node){var y=g.node,b=g.anchor.id,C="".concat(s.id,"_").concat(y.id,"_").concat(b,"_").concat(f),D=t.sourceRuleResults.get(C)||{},B=D.isAllPass,R=D.msg,A=t.targetRuleResults.get(C)||{},O=A.isAllPass,F=A.msg;if(B&&O){y.setElementState(Ze.DEFAULT);var Z=a.getNodeModelById(g.node.id),ue=(i=a.edgeGenerator)===null||i===void 0?void 0:i.call(a,s.getData(),Z==null?void 0:Z.getData()),ce=a.addEdge(Vn(Vn({},ue),{sourceNodeId:s.id,sourceAnchorId:f,startPoint:{x:u,y:c},targetNodeId:g.node.id,targetAnchorId:g.anchor.id,endPoint:{x:g.anchor.x,y:g.anchor.y}})),w=t.props.anchorData;return a.eventCenter.emit(he.ANCHOR_DROP,{data:w,e:r,nodeModel:s,edgeModel:ce}),ce}var M=y.getData();return a.eventCenter.emit(he.CONNECTION_NOT_ALLOWED,{data:M,msg:F||R||"不允许添加连线"}),null}},t.sourceRuleResults=new Map,t.targetRuleResults=new Map,t.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},t.dragHandler=new Sn({onDragStart:t.onDragStart,onDragging:t.onDragging,onDragEnd:t.onDragEnd}),t}return e.prototype.getAnchorShape=function(){var t=this.props,r=t.anchorData,i=t.style,o=t.node,a=o.getAnchorShape(r);if(a)return a;var s=r.x,l=r.y,u=Vn(Vn({},i),i==null?void 0:i.hover);return j("g",{children:[j(Ui,Vn({className:"lf-node-anchor-hover"},u,{x:s,y:l})),j(Ui,Vn({className:"lf-node-anchor"},i,{x:s,y:l}))]})},Object.defineProperty(e.prototype,"customTrajectory",{get:function(){var t=this.props.graphModel.customTrajectory;return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relateEdges",{get:function(){var t=this.props,r=t.graphModel,i=r.getAnchorIncomingEdge,o=r.getAnchorOutgoingEdge,a=t.anchorData.id;return{incomingEdgeList:i(a),outgoingEdgeList:o(a)}},enumerable:!1,configurable:!0}),e.prototype.moveAnchorEnd=function(t,r){var i,o,a=this.props,s=a.graphModel,l=a.nodeModel,u=a.anchorData,c=Ss({x:t,y:r},s);if(c){var f=c.node,d=c.anchor.id;if(this.preTargetNode&&this.preTargetNode!==c.node&&this.preTargetNode.setElementState(Ze.DEFAULT),u.id===d)return;this.preTargetNode=f;var h="".concat(l.id,"_").concat(f.id,"_").concat(d,"_").concat(u.id);if(!this.targetRuleResults.has(h)){var v=c.anchor,p=l.isAllowConnectedAsSource(f,u,v),g=f.isAllowConnectedAsTarget(l,u,v);this.sourceRuleResults.set(h,Cs(p)),this.targetRuleResults.set(h,Cs(g))}var y=((i=this.sourceRuleResults.get(h))!==null&&i!==void 0?i:{}).isAllPass,b=((o=this.targetRuleResults.get(h))!==null&&o!==void 0?o:{}).isAllPass;y&&b?f.setElementState(Ze.ALLOW_CONNECT):f.setElementState(Ze.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Ze.DEFAULT&&this.preTargetNode.setElementState(Ze.DEFAULT)},e.prototype.isShowLine=function(){var t=this.state,r=t.startX,i=t.startY,o=t.endX,a=t.endY,s=kn(r,i,o,a);return s>10},e.prototype.render=function(){var t=this,r=this.state,i=r.startX,o=r.startY,a=r.endX,s=r.endY,l=this.props,u=l.anchorData.edgeAddable,c=l.edgeStyle;return j("g",{className:"lf-anchor",children:[j("g",{onMouseDown:function(f){u!==!1&&t.dragHandler.handleMouseDown(f)},children:this.getAnchorShape()}),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(Vn({sourcePoint:{x:i,y:o},targetPoint:{x:a,y:s}},c)):j(zi,Vn({x1:i,y1:o,x2:a,y2:s},c,{"pointer-events":"none"})))]})},e}(Ue),jN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ju=function(){return Ju=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ju.apply(this,arguments)},FN=function(n){jN(e,n);function e(t){var r=n.call(this,t)||this;return r.style={},r.onDragging=function(i){var o,a=i.event,s=r.props,l=s.graphModel,u=s.nodeModel,c=s.eventCenter,f=l.selectNodes,d=u.x,h=u.y,v=a.clientX,p=a.clientY,g=l.getPointByClient({x:v,y:p}).canvasOverlayPosition,y=g.x,b=g.y,C=new jt(y-d,b-h),D=((o=r.normal)===null||o===void 0?void 0:o.angle(C))-r.defaultAngle,B=new Ol(-d,-h).rotate(D).translate(d,h).toString();u.transform=B,u.rotate=D;var R=bn(f,function(O){return O.id});R.indexOf(u.id)===-1&&(R=[u.id]);var A=ag(R,function(O,F){var Z=l.getNodeModelById(F);return O[F]=Z==null?void 0:Z.getMoveDistance(0,0,!1),O},{});R.forEach(function(O){var F=l.getNodeEdges(O);F.forEach(function(Z){if(A[Z.sourceNodeId]){var ue=l.getNodeModelById(Z.sourceNodeId),ce=ue.anchors.find(function(w){return w.id===Z.sourceAnchorId});Z.updateStartPoint(ce)}if(A[Z.targetNodeId]){var ue=l.getNodeModelById(Z.targetNodeId),ce=ue.anchors.find(function(L){return L.id===Z.targetAnchorId});Z.updateEndPoint(ce)}})}),c.emit(he.NODE_ROTATE,{e:a,model:u,data:u.getData()})},r.style=t.style,r.stepperDrag=new Sn({onDragging:r.onDragging}),r}return e.prototype.render=function(){var t=this,r=this.props.nodeModel,i=r.x,o=r.y,a=r.width,s=r.height,l=i+a/2+20,u=o-s/2-20;return this.normal=new jt(1,0),this.defaultAngle=this.normal.angle(new jt(l-i,u-o)),r.defaultAngle=this.defaultAngle,j("g",{className:"lf-rotate-control",children:j("g",{onMouseDown:function(c){t.stepperDrag.handleMouseDown(c)},children:j(Ui,Ju({},this.style,{cx:l,cy:u}))})})},e}(Ue),eu={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Ah;function HN(){return Ah||(Ah=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=i(o,r(s)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)e.call(o,s)&&o[s]&&(a=i(a,s));return a}function i(o,a){return a?o?o+" "+a:o+a:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(eu)),eu.exports}var WN=HN();const Qu=rl(WN);var $N=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ec=function(){return ec=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ec.apply(this,arguments)},XN=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Cy=function(n){$N(e,n);function e(t){var r=n.call(this)||this;r.mouseDownHandler=function(o){var a=r.props,s=a.draggable,l=a.model,u=a.graphModel,c=u.editConfigModel.nodeTextDraggable;(s!=null?s:c)&&(r.stepperDrag.model=l,r.stepperDrag.handleMouseDown(o))},r.onDragging=function(o){var a=o.deltaX,s=o.deltaY,l=r.props,u=l.model,c=l.graphModel.transformModel;if(a||s){var f=XN(c.fixDeltaXY(a,s),2),d=f[0],h=f[1];u.moveText(d,h)}},r.dbClickHandler=function(){var o=r.props,a=o.editable,s=o.graphModel.eventCenter,l=o.model;a&&l.setElementState(Ze.TEXT_EDIT),s.emit(he.TEXT_DBCLICK,{data:l.text,model:l})};var i=t.draggable;return r.stepperDrag=new Sn({onDragging:r.onDragging,step:1,eventType:"TEXT",isStopPropagation:i}),r}return e.prototype.getShape=function(){var t=this.props,r=t.model,i=t.graphModel,o=i.editConfigModel,a=r.text,s=a.value,l=a.x,u=a.y,c=a.editable,f=a.draggable,d={x:l,y:u,className:"",value:s},h=r.getTextStyle(),v=o.nodeTextDraggable||f;return j(xy,ec({},d,h,{className:Qu({"lf-element-text":c,"lf-text-draggable":!c&&v,"lf-text-disabled":!c&&!v}),model:r}))},e.prototype.render=function(){var t=this.props.model.text;if(t)return j("g",{onMouseDown:this.mouseDownHandler,onDblClick:this.dbClickHandler,children:this.getShape()})},e}(Ue),zN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mn=function(){return Mn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Mn.apply(this,arguments)},Ha=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},UN=function(n){zN(e,n);function e(t){var r=n.call(this,t)||this;return r.setHoverOn=function(){r.setState({isHovered:!0})},r.setHoverOff=function(){r.setState({isHovered:!1})},r.state={isHovered:!1},r}return e.prototype.getBackground=function(){var t=this.state.isHovered,r=this.props.model,i=r.text,o=r.getTextStyle(),a=o.background||{};if(t&&o.hover&&o.hover.background&&(a=Mn(Mn({},a),o.hover.background)),i!=null&&i.value&&(a==null?void 0:a.fill)!=="transparent"){var s=o.fontSize,l=o.textWidth,u=o.lineHeight,c=o.overflowMode,f=a.wrapPadding,d=i==null?void 0:i.value.split(/[\r\n]/g),h=d.length,v=i.x,p=i.y,g={};if(c==="autoWrap"&&l){var y=_y({rows:d,style:{fontSize:"".concat(s,"px"),width:"".concat(l,"px"),lineHeight:u,padding:f},rowsLength:h,className:"lf-get-text-height"});g=Mn(Mn({},a),{x:v,y:p,width:l,height:y})}else{var b=HT({rows:d,rowsLength:h,fontSize:s}),C=b.width,D=b.height;if(c==="ellipsis"&&(C=l,D=s+2),typeof a.wrapPadding=="string"){var B=a.wrapPadding.split(",").filter(function(Je){return Je.trim()}).map(function(Je){return parseFloat(Je.trim())});if(B.length>0&&B.length<=4){if(B.length===1){var R=Ha(B,1),A=R[0];B=[A,A,A,A]}else if(B.length===2){var O=Ha(B,2),F=O[0],Z=O[1];B=[F,Z,F,Z]}else if(B.length===3){var ue=Ha(B,3),ce=ue[0],Z=ue[1],w=ue[2];B=[ce,Z,w,Z]}var M=Ha(B,4),L=M[0],V=M[1],pe=M[2],Ee=M[3];C+=V+Ee,D+=L+pe,v=v+(V-Ee)/2,p=p+(pe-L)/2}}g=Mn(Mn({},a),{x:v-1,y:p-1,width:C,height:D})}return j(gn,Mn({},g))}return null},e.prototype.getShape=function(){var t=this.props.model,r=t.text,i=r.x,o=r.y,a=r.value;if(!a)return null;var s=t.getTextStyle(),l=Mn({x:i,y:o,value:a,model:t,className:"lf-element-text"},s);return j("g",{className:"lf-line-text",onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,children:[this.getBackground(),j(xy,Mn({},l))]})},e}(Cy),GN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ps=function(){return Ps=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ps.apply(this,arguments)},YN=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},Wa=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Hr=function(n){GN(e,n);function e(t){var r=n.call(this)||this;r.onDragStart=function(l){var u=l.event,c=r.props,f=c.model,d=c.graphModel;if(u){var h=d.getPointByClient({x:u.clientX,y:u.clientY}).canvasOverlayPosition,v=h.x,p=h.y;r.moveOffset={dx:f.x-v,dy:f.y-p}}},r.onDragging=function(l){var u,c,f,d,h=l.event,v=r.props,p=v.model,g=v.graphModel,y=g.editConfigModel,b=y.stopMoveGraph,C=y.autoExpand,D=g.transformModel,B=g.selectNodes,R=g.width,A=g.height,O=g.gridSize;p.isDragging=!0;var F=h,Z=F.clientX,ue=F.clientY,ce=g.getPointByClient({x:Z,y:ue}).canvasOverlayPosition,w=ce.x,M=ce.y,L=Wa(D.CanvasPointToHtmlPoint([w,M]),2),V=L[0],pe=L[1];if(w=w+((c=(u=r.moveOffset)===null||u===void 0?void 0:u.dx)!==null&&c!==void 0?c:0),M=M+((d=(f=r.moveOffset)===null||f===void 0?void 0:f.dy)!==null&&d!==void 0?d:0),w=Xi(w,O),M=Xi(M,O),!R||!A){g.moveNode2Coordinate(p.id,w,M);return}var Ee=V<0||pe<0||V>R||pe>A;if(!(C&&!b&&Ee)){var Je=Wa(D.CanvasPointToHtmlPoint([w-p.width/2,M-p.height/2]),2),nt=Je[0],ge=Je[1],Le=Wa(D.CanvasPointToHtmlPoint([w+p.width/2,M+p.height/2]),2),$e=Le[0],Te=Le[1],Be=Math.max(O,20),N=[];nt<0?N=[Be,0]:$e>g.width?N=[-Be,0]:ge<0?N=[0,Be]:Te>g.height&&(N=[0,-Be]),r.t&&Os(r.t),p.transform=new Ol(-w,-M).rotate(p.rotate).translate(w,M).toString();var X=B.map(function(U){return U.id});X.indexOf(p.id)===-1&&(X=[p.id]),N.length>0&&!b&&C?r.t=by(function(){var U=Wa(N,2),ee=U[0],re=U[1];D.translate(ee!=null?ee:0,re!=null?re:0);var Me=-(ee!=null?ee:0)/D.SCALE_X,Ae=-(re!=null?re:0)/D.SCALE_X;g.moveNodes(X,Me,Ae)}):g.moveNodes(X,w-p.x,M-p.y)}},r.onDragEnd=function(){r.t&&Os(r.t);var l=r.props.model;l.isDragging=!1},r.onMouseOut=function(l){gT()&&r.setHoverOff(l)},r.handleMouseUp=function(){var l=r.props.model;r.mouseUpDrag=l.isDragging},r.handleClick=function(l){var u=r.mouseUpDrag===!1;if(r.startTime){var c=r.props,f=c.model,d=c.graphModel;if(u){var h=f.getData(),v=d.getPointByClient({x:l.clientX,y:l.clientY}),p={data:h,e:l,position:v,isSelected:!1,isMultiple:!1},g=l.button===2,y=l.detail===2;if(!g){var b=d.editConfigModel,C=yy(l,b);p.isMultiple=C,f.isSelected&&!y&&C?(p.isSelected=!1,f.setSelected(!1)):(d.selectNodeById(f.id,C),p.isSelected=!0,r.toFront()),y?(b.nodeTextEdit&&f.text.editable&&b.textMode===mn.TEXT&&(f.setSelected(!1),d.setElementStateById(f.id,Ze.TEXT_EDIT)),d.eventCenter.emit(he.NODE_DBCLICK,p)):(d.eventCenter.emit(he.ELEMENT_CLICK,p),d.eventCenter.emit(he.NODE_CLICK,p))}}}},r.handleContextMenu=function(l){l.preventDefault();var u=r.props,c=u.model,f=u.graphModel,d=c.getData(),h=f.getPointByClient({x:l.clientX,y:l.clientY});f.setElementStateById(c.id,Ze.SHOW_MENU,h.domOverlayPosition),c.isSelected||f.selectNodeById(c.id),f.eventCenter.emit(he.NODE_CONTEXTMENU,{data:d,e:l,position:h}),r.toFront()},r.handleMouseDown=function(l){var u=r.props,c=u.model,f=u.graphModel;r.startTime=new Date().getTime();var d=f.editConfigModel;d.adjustNodePosition&&c.draggable&&r.stepDrag&&r.stepDrag.handleMouseDown(l)},r.handleFocus=function(){var l=r.props,u=l.model,c=l.graphModel;c.eventCenter.emit(he.NODE_FOCUS,{data:u.getData()})},r.handleBlur=function(){var l=r.props,u=l.model,c=l.graphModel;c.eventCenter.emit(he.NODE_BLUR,{data:u.getData()})},r.setHoverOn=function(l){var u=r.props,c=u.model,f=u.graphModel;if(!c.isHovered){var d=c.getData();c.setHovered(!0),f.eventCenter.emit(he.NODE_MOUSEENTER,{data:d,e:l})}},r.setHoverOff=function(l){var u=r.props,c=u.model,f=u.graphModel,d=c.getData();c.isHovered&&(c.setHovered(!1),f.eventCenter.emit(he.NODE_MOUSELEAVE,{data:d,e:l}))};var i=t.graphModel,o=i.gridSize,a=i.eventCenter,s=t.model;return r.stepDrag=new Sn({onDragStart:r.onDragStart,onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:o,eventType:"NODE",isStopPropagation:!1,eventCenter:a,model:s}),r.modelDisposer=Gg(function(){return r.props},function(l){l&&l.model&&r.stepDrag.setModel(l.model)}),r}return e.prototype.componentWillUnmount=function(){this.modelDisposer&&this.modelDisposer()},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getAnchorShape=function(t){return null},e.prototype.getAnchors=function(){var t=this,r=this.props,i=r.model,o=r.graphModel,a=i.isSelected,s=i.isHitable,l=i.isDragging,u=i.isShowAnchor;return s&&(a||u)&&!l?bn(i.anchors,function(c,f){var d=i.getAnchorLineStyle(c),h=i.getAnchorStyle(c);return j(BN,{anchorData:c,node:t,style:h,edgeStyle:d,anchorIndex:f,nodeModel:i,graphModel:o,setHoverOff:t.setHoverOff})}):[]},e.prototype.getRotateControl=function(){var t=this.props,r=t.model,i=t.graphModel,o=i.editConfigModel,a=o.isSilentMode,s=o.allowRotate,l=r.isSelected,u=r.isHitable,c=r.rotatable,f=r.isHovered,d=s&&c,h=r.getRotateControlStyle();if(!a&&u&&(l||f)&&d)return j(FN,{graphModel:i,nodeModel:r,eventCenter:i.eventCenter,style:h})},e.prototype.getResizeControl=function(){var t=this.props,r=t.model,i=t.graphModel,o=i.editConfigModel,a=o.isSilentMode,s=o.allowResize,l=r.isSelected,u=r.isHitable,c=r.resizable,f=r.isHovered,d=s&&c,h=r.getResizeControlStyle();return!a&&u&&(l||f)&&d?j(pM,{style:h,model:r,graphModel:i}):null},e.prototype.getText=function(){var t,r=this.props,i=r.model,o=r.graphModel,a=o.editConfigModel;if(a.nodeTextMode!==mn.TEXT||i.state===Ze.TEXT_EDIT)return null;if(i.text){var s=!1;return a.nodeTextDraggable&&i.text.draggable&&(s=!0),j(Cy,{editable:a.nodeTextEdit&&((t=i.text.editable)!==null&&t!==void 0?t:!0),model:i,graphModel:o,draggable:s})}return null},e.prototype.getStateClassName=function(){var t=this.props.model,r=t.state,i=t.isDragging,o=t.isSelected,a="lf-node";switch(r){case Ze.ALLOW_CONNECT:a+=" lf-node-allow";break;case Ze.NOT_ALLOW_CONNECT:a+=" lf-node-not-allow";break;default:a+=" lf-node-default";break}return i&&(a+=" lf-dragging"),o&&(a+=" lf-node-selected"),a},e.prototype.toFront=function(){var t=this.props,r=t.model,i=t.graphModel;r.autoToFront&&i.toFront(r.id)},e.prototype.render=function(){var t=this.props,r=t.model,i=t.graphModel,o=i.editConfigModel,a=o.hideAnchors,s=o.adjustNodePosition,l=o.allowRotate,u=o.allowResize,c=i.gridSize,f=i.transformModel.SCALE_X,d=r.isHitable,h=r.draggable,v=r.transform,p=r.getOuterGAttributes(),g=p.className,y=g===void 0?"":g,b=YN(p,["className"]),C=j("g",{className:"lf-node-content",children:[j("g",{transform:v,children:[this.getShape(),this.getText(),l&&this.getRotateControl(),u&&this.getResizeControl()]}),!a&&this.getAnchors()]}),D;return d?(s&&h&&this.stepDrag.setStep(c*f),D=j("g",Ps({className:"".concat(this.getStateClassName()," ").concat(y),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverOn,onMouseOver:this.setHoverOn,onMouseLeave:this.setHoverOff,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu,onFocus:this.handleFocus,onBlur:this.handleBlur},b,{children:C}))):D=j("g",Ps({className:"".concat(this.getStateClassName()," ").concat(y)},b,{children:C})),D},e.isObserved=!1,e}(Ue),VN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tc=function(){return tc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},tc.apply(this,arguments)},li=function(n){VN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,r=t.getNodeStyle();return j(gn,tc({},r,{x:t.x,y:t.y,width:t.width,height:t.height,radius:t.radius}))},e}(Hr),KN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nc=function(){return nc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},nc.apply(this,arguments)},Rs=function(n){KN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.r,a=t.getNodeStyle();return j(Ui,nc({},a,{x:r,y:i,r:o}))},e}(Hr),qN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ds=function(){return Ds=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ds.apply(this,arguments)},Ls=function(n){qN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,r=t,i=r.x,o=r.y,a=r.width,s=r.height,l=r.points,u=t.getNodeStyle(),c={transform:"matrix(1 0 0 1 ".concat(i-a/2," ").concat(o-s/2,")")};return j("g",Ds({},c,{children:j(bf,Ds({},u,{points:l,x:i,y:o}))}))},e}(Hr),ZN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rc=function(){return rc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},rc.apply(this,arguments)},ic=function(n){ZN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,r=t.getNodeStyle();return j("g",{children:j(bf,rc({},r,{points:t.points,x:t.x,y:t.y}))})},e}(Hr),JN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oc=function(){return oc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},oc.apply(this,arguments)},ac=function(n){JN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,r=t.getNodeStyle();return j(sM,oc({},r,{x:t.x,y:t.y,rx:t.rx,ry:t.ry}))},e}(Hr),QN=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ho=function(){return Ho=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ho.apply(this,arguments)},Sh=function(n){QN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getBackground=function(){var t=this.props.model,r=t.getTextStyle(),i=t.width,o=t.height,a=t.x,s=t.y,l=Ho(Ho({},r.background),{x:a,y:s,width:i,height:o});return j(gn,Ho({},l))},e.prototype.getResizeControl=function(){return null},e.prototype.getShape=function(){return j("g",{children:this.getBackground()})},e}(Hr),eP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sc=function(){return sc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},sc.apply(this,arguments)},tP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},nP=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},lc=function(n){eP(e,n);function e(){var t=n.apply(this,nP([],tP(arguments),!1))||this;return t.ref=_l(),t}return Object.defineProperty(e.prototype,"rootEl",{get:function(){return this.ref.current},enumerable:!1,configurable:!0}),e.prototype.setHtml=function(t){t.appendChild(document.createElement("div"))},e.prototype.confirmUpdate=function(t){this.setHtml(t)},e.prototype.shouldUpdate=function(){return this.preProperties&&this.preProperties===this.currentProperties?!1:(this.preProperties=this.currentProperties,!0)},e.prototype.componentDidMount=function(){this.shouldUpdate()&&this.rootEl&&this.setHtml(this.rootEl)},e.prototype.componentDidUpdate=function(){this.shouldUpdate()&&this.rootEl&&this.confirmUpdate(this.rootEl)},e.prototype.componentWillUnmount=function(){this.rootEl.innerHTML=""},e.prototype.getShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.height,a=t.width,s=t.getNodeStyle();return this.currentProperties=JSON.stringify(t.properties),j("foreignObject",sc({},s,{x:r-a/2,y:i-o/2,width:a,height:o,ref:this.ref}))},e}(Hr),rP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nn=function(){return Nn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Nn.apply(this,arguments)},iP=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},oP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},qn;(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(qn||(qn={}));var Ch=function(n){rP(e,n);function e(t){var r=n.call(this)||this;r.handleMouseDown=function(l){r.stepDrag&&r.stepDrag.handleMouseDown(l)},r.onDragStart=function(){var l=r.props,u=l.x,c=l.y,f=l.edgeModel,d=f.startPoint,h=f.endPoint,v=f.pointsList;r.oldEdge={startPoint:d,endPoint:h,pointsList:v},r.setState({endX:u,endY:c,dragging:!0})},r.onDragging=function(l){var u=l.deltaX,c=l.deltaY,f=r.state,d=f.endX,h=f.endY,v=r.props,p=v.graphModel,g=v.type,y=p.transformModel,b=p.editConfigModel,C=oP(y.moveCanvasPointByHtml([d,h],u,c),2),D=C[0],B=C[1];r.setState({endX:D,endY:B,dragging:!0});var R=r.props.edgeModel,A=Ss({x:d,y:h},p);if(A&&A.node&&r.isAllowAdjust(A).pass){var O=R.startPoint,F=R.endPoint,Z=R.sourceNode,ue=R.targetNode,ce=g===qn.SOURCE?{startPoint:{x:A.anchor.x,y:A.anchor.y},endPoint:{x:F.x,y:F.y},sourceNode:A.node,targetNode:ue}:{startPoint:{x:O.x,y:O.y},endPoint:{x:A.anchor.x,y:A.anchor.y},sourceNode:Z,targetNode:A.node};R.updateAfterAdjustStartAndEnd(ce)}else g===qn.SOURCE?R.updateStartPoint({x:D,y:B}):R.updateEndPoint({x:D,y:B});R.text.value&&b.adjustEdge&&R.setText(Object.assign({},R.text,R.textPosition))},r.onDragEnd=function(l){var u,c,f,d=l.event;try{r.setState({dragging:!1});var h=r.props,v=h.graphModel,p=h.edgeModel,g=h.type,y=r.state,b=y.endX,C=y.endY,D=y.dragging,B=Ss({x:b,y:C},v);if(!D)return;var R=!1,A=void 0;if(B&&B.node){var O=r.isAllowAdjust(B),F=O.pass,Z=O.msg,ue=O.newTargetNode;if(F){var ce=p.getData(),w=ce.text,M=ce.sourceAnchorId,L=M===void 0?"":M,V=ce.targetAnchorId,pe=V===void 0?"":V,Ee=iP(ce,["text","sourceAnchorId","targetAnchorId"]);if(A=Nn(Nn({sourceAnchorId:L,targetAnchorId:pe},Ee),{text:(w==null?void 0:w.value)||""}),g===qn.SOURCE){var Je=v.getNodeModelById(B.node.id),nt=v.getNodeModelById(p.targetNodeId),ge=(u=v.edgeGenerator)===null||u===void 0?void 0:u.call(v,Je==null?void 0:Je.getData(),nt==null?void 0:nt.getData(),A);A=Nn(Nn({},ge),{sourceNodeId:B.node.id,sourceAnchorId:B.anchor.id,startPoint:{x:B.anchor.x,y:B.anchor.y},targetNodeId:p.targetNodeId,endPoint:Nn({},p.endPoint)}),p.sourceNodeId===B.node.id&&p.sourceAnchorId===B.anchor.id&&(R=!0)}else if(g===qn.TARGET){var Je=v.getNodeModelById(p.sourceNodeId),nt=v.getNodeModelById(B.node.id),ge=(c=v.edgeGenerator)===null||c===void 0?void 0:c.call(v,Je==null?void 0:Je.getData(),nt==null?void 0:nt.getData(),A);A=Nn(Nn({},ge),{sourceNodeId:p.sourceNodeId,startPoint:Nn({},p.startPoint),targetNodeId:B.node.id,targetAnchorId:B.anchor.id,endPoint:{x:B.anchor.x,y:B.anchor.y}}),p.targetNodeId===B.node.id&&p.targetAnchorId===B.anchor.id&&(R=!0)}}else{R=!0;var Le=ue.getData();v.eventCenter.emit(he.CONNECTION_NOT_ALLOWED,{data:Le,msg:Z})}}else R=!0;if(R)r.recoveryEdge();else{var $e=p.getData();v.deleteEdgeById(p.id);var Te=v.addEdge(Nn({},A));v.eventCenter.emit(he.EDGE_EXCHANGE_NODE,{data:{newEdge:Te.getData(),oldEdge:$e}})}(f=r.preTargetNode)===null||f===void 0||f.setElementState(Ze.DEFAULT)}finally{var v=r.props.graphModel;v.eventCenter.emit(he.ADJUST_POINT_DRAGEND,{e:d,data:r.stepDragData})}},r.recoveryEdge=function(){var l=r.props.edgeModel,u=r.oldEdge,c=u.startPoint,f=u.endPoint,d=u.pointsList;l.updateStartPoint(c),l.updateEndPoint(f),l.modelType!==He.LINE_EDGE&&(l.pointsList=d!=null?d:[],l.initPoints())},r.getAdjustPointStyle=function(){var l=r.props.graphModel.theme,u=l.edgeAdjust;return u},r.state={dragging:!1,endX:0,endY:0},r.targetRuleResults=new Map,r.sourceRuleResults=new Map;var i=t.type,o=t.edgeModel,a=t.graphModel,s=a.eventCenter;return r.stepDragData={type:i,edgeData:o.getData()},r.stepDrag=new Sn({onDragStart:r.onDragStart,onDragging:r.onDragging,onDragEnd:r.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:s,data:r.stepDragData}),r}return e.prototype.isAllowAdjust=function(t){var r=this.props,i=r.edgeModel,o=i.id,a=i.sourceNode,s=i.targetNode,l=i.sourceAnchorId,u=i.targetAnchorId,c=r.type,f,d,h,v;if(c===qn.SOURCE?(f=t.node,d=s,h=t.anchor,v=s.getAnchorInfo(u)):(f=a,d=t.node,v=t.anchor,h=a.getAnchorInfo(l)),this.preTargetNode&&this.preTargetNode!==t.node&&this.preTargetNode.setElementState(Ze.DEFAULT),this.preTargetNode=t.node,v.id===h.id)return{pass:!1,msg:"",newTargetNode:d};var p="".concat(f.id,"_").concat(d.id,"_").concat(h.id,"_").concat(v.id);if(!this.targetRuleResults.has(p)){var g=f.isAllowConnectedAsSource(d,h,v,o),y=d.isAllowConnectedAsTarget(f,h,v,o);this.sourceRuleResults.set(p,Cs(g)),this.targetRuleResults.set(p,Cs(y))}var b=this.sourceRuleResults.get(p),C=b.isAllPass,D=b.msg,B=this.targetRuleResults.get(p),R=B.isAllPass,A=B.msg,O=C&&R?Ze.ALLOW_CONNECT:Ze.NOT_ALLOW_CONNECT;return c===qn.SOURCE?f.setElementState(O):d.setElementState(O),{pass:C&&R,msg:A||D,newTargetNode:d}},e.prototype.render=function(){var t=this.props,r=t.x,i=t.y,o=t.getAdjustPointShape,a=t.edgeModel,s=this.state.dragging;return j("g",{pointerEvents:s?"none":"",onMouseDown:this.handleMouseDown,children:s?"":o(r,i,a)})},e}(Ue),aP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uc=function(){return uc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},uc.apply(this,arguments)};(function(n){aP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getArrowAttributes=function(){var t=this.props,r=t.arrowInfo,i=t.style,o=r.start,a=r.end,s={start:o,end:a,offset:i.offset,verticalLength:i.verticalLength,type:"end"},l=Zo(s),u=l.leftX,c=l.leftY,f=l.rightX,d=l.rightY;return uc({d:"M".concat(u," ").concat(c," L").concat(a.x," ").concat(a.y," L").concat(f," ").concat(d," z")},i)},e.prototype.getShape=function(){var t=this.getArrowAttributes(),r=t.d,i=t.strokeWidth,o=t.stroke,a=t.fill;return j(ea,{d:r,fill:a,strokeWidth:i,stroke:o})},e.prototype.render=function(){return j("g",{className:"lf-arrow",children:this.getShape()})},e})(Ue);var sP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wo=function(){return Wo=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Wo.apply(this,arguments)},lP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Ml=function(n){sP(e,n);function e(){var t=n.call(this)||this;return t.textRef=_l(),t.handleHover=function(r,i){var o=t.props,a=o.model,s=o.graphModel.eventCenter;a.setHovered(r);var l=r?he.EDGE_MOUSEENTER:he.EDGE_MOUSELEAVE,u=a.getData();s.emit(l,{data:u,e:i})},t.setHoverOn=function(r){var i=t.props.model.isHovered;i||(t.textRef&&t.textRef.current&&t.textRef.current.setHoverOn(),t.handleHover(!0,r))},t.setHoverOff=function(r){var i=t.props.model.isHovered;i&&(t.textRef&&t.textRef.current&&t.textRef.current.setHoverOff(),t.handleHover(!1,r))},t.handleContextMenu=function(r){r.preventDefault(),t.contextMenuTime=new Date().getTime(),t.clickTimer&&clearTimeout(t.clickTimer);var i=t.props,o=i.model,a=i.graphModel,s=a.getPointByClient({x:r.clientX,y:r.clientY});a.setElementStateById(o.id,Ze.SHOW_MENU,s.domOverlayPosition),t.toFront(),o.isSelected||a.selectEdgeById(o.id);var l=o==null?void 0:o.getData();a.eventCenter.emit(he.EDGE_CONTEXTMENU,{data:l,e:r,position:s})},t.handleMouseDown=function(r){r.stopPropagation(),t.startTime=new Date().getTime()},t.handleMouseUp=function(){var r=t.props.model;t.mouseUpDrag=r.isDragging},t.handleClick=function(r){if(t.startTime&&!t.mouseUpDrag){var i=r.button===2;if(!i){var o=r.detail===2,a=t.props,s=a.model,l=a.graphModel,u=s==null?void 0:s.getData(),c=l.getPointByClient({x:r.clientX,y:r.clientY});if(o){var f=l.editConfigModel,d=l.textEditElement,h=s.id,v=s.text,p=s.modelType;if(d&&d.id===h&&l.setElementStateById(h,Ze.DEFAULT),f.edgeTextEdit&&v.editable&&(s.setSelected(!1),l.setElementStateById(h,Ze.TEXT_EDIT)),p===He.POLYLINE_EDGE){var g=s,y=l.getPointByClient({x:r.x,y:r.y}).canvasOverlayPosition,b=y.x,C=y.y;g.dbClickPosition=gy({x:b,y:C},g.points)}l.eventCenter.emit(he.EDGE_DBCLICK,{data:u,e:r,position:c})}else l.eventCenter.emit(he.ELEMENT_CLICK,{data:u,e:r,position:c}),l.eventCenter.emit(he.EDGE_CLICK,{data:u,e:r,position:c});var D=l.editConfigModel;l.selectEdgeById(s.id,yy(r,D)),t.toFront()}}},t.handleFocus=function(){var r=t.props,i=r.model,o=r.graphModel;o.eventCenter.emit(he.EDGE_FOCUS,{data:i.getData()})},t.handleBlur=function(){var r=t.props,i=r.model,o=r.graphModel;o.eventCenter.emit(he.EDGE_BLUR,{data:i.getData()})},t}return e.prototype.getShape=function(){return j("g",{children:this.getEdge()})},e.prototype.getTextStyle=function(){},e.prototype.getText=function(){var t,r=this.props,i=r.model,o=r.graphModel,a=o.editConfigModel;if(a.edgeTextMode!==mn.TEXT||i.state===Ze.TEXT_EDIT)return null;if(i.text){var s=!1;return a.edgeTextDraggable&&i.text.draggable&&(s=!0),j(UN,{ref:this.textRef,editable:a.edgeTextEdit&&((t=i.text.editable)!==null&&t!==void 0?t:!0),model:i,graphModel:o,draggable:s})}return null},e.prototype.getArrowInfo=function(){var t=this.props.model,r=t.startPoint,i=t.endPoint,o=t.isSelected,a=this.state.hover;return{start:r,end:i,hover:a,isSelected:o}},e.prototype.getLastTwoPoints=function(){var t=this.props.model,r=t.startPoint,i=t.endPoint;return[r,i]},e.prototype.getArrowStyle=function(){return console.error("getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle"),null},e.prototype.getArrow=function(){var t=this.props.model,r=t.id,i=t.getArrowStyle(),o=i.refY,a=o===void 0?0:o,s=i.refX,l=s===void 0?2:s,u=lP(this.getLastTwoPoints(),2),c=u[0],f=u[1],d="auto";return c!==null&&f!==null&&(d=NM(MM({x:f.x-c.x,y:f.y-c.y,z:0}))),j("g",{children:j("defs",{children:[j("marker",{id:"marker-start-".concat(r),refX:-l,refY:a,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse",children:this.getStartArrow()}),j("marker",{id:"marker-end-".concat(r),refX:l,refY:a,overflow:"visible",orient:d,markerUnits:"userSpaceOnUse",children:this.getEndArrow()})]})})},e.prototype.getStartArrow=function(){return j("path",{})},e.prototype.getEndArrow=function(){var t=this.props.model,r=t.getArrowStyle(),i=r.stroke,o=r.strokeWidth,a=r.offset,s=r.verticalLength;return j("path",{stroke:i,fill:i,strokeWidth:o,transform:"rotate(180)",d:"M 0 0 L ".concat(a," -").concat(s," L ").concat(a," ").concat(s," Z")})},e.prototype.getAdjustPointShape=function(t,r,i){var o=i.getAdjustPointStyle();return j(Ui,Wo({className:"lf-edge-adjust-point"},o,{x:t,y:r}))},e.prototype.getAdjustPoints=function(){var t=this.props,r=t.model,i=t.graphModel,o=i.editConfigModel,a=o.adjustEdgeStartAndEnd,s=o.adjustEdgeStart,l=o.adjustEdgeEnd,u=r.getAdjustStart(),c=r.getAdjustEnd();return j("g",{children:[a&&s&&j(Ch,Wo({type:qn.SOURCE},u,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:r,graphModel:i})),a&&l&&j(Ch,Wo({type:qn.TARGET},c,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:r,graphModel:i}))]})},e.prototype.getAnimation=function(){console.error("getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle")},e.prototype.getAppendWidth=function(){return j("g",{})},e.prototype.getAppend=function(){return j("g",{className:"lf-edge-append",children:this.getAppendWidth()})},e.prototype.getEdge=function(){return null},e.prototype.toFront=function(){var t=this.props,r=t.graphModel,i=t.model;r.toFront(i.id)},e.prototype.render=function(){var t=this.props.model,r=t.isSelected,i=t.isHitable,o=t.isShowAdjustPoint;return j("g",{children:[j("g",{className:["lf-edge",!i&&"pointer-none",r&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverOn,onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,onFocus:this.handleFocus,onBlur:this.handleBlur,children:[this.getShape(),this.getAppend(),this.getText(),this.getArrow()]}),o&&r?this.getAdjustPoints():""]})},e.isObserved=!1,e}(Ue),uP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cc=function(){return cc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},cc.apply(this,arguments)},cP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Oh=function(n){uP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEdge=function(){var t=this.props.model,r=t.getEdgeStyle(),i=t,o=i.path,a=i.isAnimation,s=i.arrowConfig,l=t.getEdgeAnimationStyle(),u=l.strokeDasharray,c=l.stroke,f=l.strokeDashoffset,d=l.animationName,h=l.animationDuration,v=l.animationIterationCount,p=l.animationTimingFunction,g=l.animationDirection;return j(ea,cc({d:o},r,s,a?{strokeDasharray:u,stroke:c,style:{strokeDashoffset:f,animationName:d,animationDuration:h,animationIterationCount:v,animationTimingFunction:p,animationDirection:g}}:{}))},e.prototype.getAppendWidth=function(){var t=this.props.model.path;return j(ea,{d:t,strokeWidth:10,stroke:"transparent",fill:"none"})},e.prototype.getArrowInfo=function(){var t=this.props.model,r=this.state.hover,i=t.isSelected,o=t.getArrowStyle().offset,a=t.pointsList.map(function(f){return{x:f.x,y:f.y}}),s=cP(ah(a,o),2),l=s[0],u=s[1],c={start:l,end:u,hover:r,isSelected:i};return c},e.prototype.getLastTwoPoints=function(){var t=this.props.model,r=t.getArrowStyle().offset,i=t.pointsList.map(function(o){return{x:o.x,y:o.y}});return ah(i,r)},e}(Ml),fP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fc=function(){return fc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},fc.apply(this,arguments)},Th=function(n){fP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEdge=function(){var t=this.props.model,r=t.startPoint,i=t.endPoint,o=t.isAnimation,a=t.arrowConfig,s=t.getEdgeStyle(),l=t.getEdgeAnimationStyle(),u=l.strokeDasharray,c=l.stroke,f=l.strokeDashoffset,d=l.animationName,h=l.animationDuration,v=l.animationIterationCount,p=l.animationTimingFunction,g=l.animationDirection;return j(zi,fc({},s,{x1:r.x,y1:r.y,x2:i.x,y2:i.y},a,o?{strokeDasharray:u,stroke:c,style:{strokeDashoffset:f,animationName:d,animationDuration:h,animationIterationCount:v,animationTimingFunction:p,animationDirection:g}}:{}))},e.prototype.getAppendWidth=function(){var t=this.props.model,r=t.startPoint,i=t.endPoint,o={start:r,end:i},a=BT(o),s=a.d,l=a.strokeWidth,u=a.fill,c=a.strokeDasharray,f=a.stroke;return j(ea,{d:s,fill:u,strokeWidth:l,stroke:f,strokeDasharray:c})},e}(Ml),dP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Jr=function(){return Jr=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Jr.apply(this,arguments)},hP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},ia=function(n){dP(e,n);function e(){var t=n.call(this)||this;return t.onDragStart=function(){var r=t.props.model;r.dragAppendStart(),t.isShowAdjustPointTemp=r.isShowAdjustPoint,r.isShowAdjustPoint=!1},t.onDragging=function(r){var i=r.deltaX,o=r.deltaY,a=t.props,s=a.model,l=a.graphModel;t.isDragging=!0;var u=l.transformModel,c=l.editConfigModel,f=hP(u.fixDeltaXY(i,o),2),d=f[0],h=f[1],v=s,p=c.adjustEdgeMiddle;p?t.appendInfo=v.dragAppendSimple(t.appendInfo,{x:d,y:h}):t.appendInfo=v.dragAppend(t.appendInfo,{x:d,y:h})},t.onDragEnd=function(){var r,i=t.props,o=i.model,a=i.graphModel.eventCenter,s=o;s.dragAppendEnd(),t.isDragging=!1,s.isShowAdjustPoint=(r=t.isShowAdjustPointTemp)!==null&&r!==void 0?r:!1,t.appendInfo=void 0,a.emit(he.EDGE_ADJUST,{data:s.getData()})},t.beforeDragStart=function(r,i){i.draggable&&t.drag.handleMouseDown(r),t.appendInfo=i},t.drag=new Sn({onDragStart:t.onDragStart,onDragging:t.onDragging,onDragEnd:t.onDragEnd,isStopPropagation:!1}),t}return e.prototype.getEdge=function(){var t=this.props.model,r=t.points,i=t.isAnimation,o=t.arrowConfig,a=t.getEdgeStyle(),s=t.getEdgeAnimationStyle(),l=s.strokeDasharray,u=s.stroke,c=s.strokeDashoffset,f=s.animationName,d=s.animationDuration,h=s.animationIterationCount,v=s.animationTimingFunction,p=s.animationDirection;return j(cM,Jr({points:r},a,o,i?{strokeDasharray:l,stroke:u,style:{strokeDashoffset:c,animationName:f,animationDuration:d,animationIterationCount:h,animationTimingFunction:v,animationDirection:p}}:{}))},e.prototype.getArrowInfo=function(){var t=this.props.model,r=t.points,i=t.isSelected,o=this.state.hover,a=si(r),s=a[0],l=a[0];return a.length>=2&&(s=a[a.length-2],l=a[a.length-1]),{start:s,end:l,hover:o,isSelected:i}},e.prototype.getLastTwoPoints=function(){var t=this.props.model,r=t.points,i=si(r),o=i[0],a=i[0];return i.length>=2&&(o=i[i.length-2],a=i[i.length-1]),[o,a]},e.prototype.getAppendAttributes=function(t){var r=t.start,i=t.end,o;if(r.x===i.x&&r.y===i.y)o="";else{var a={start:r,end:i,offset:10,verticalLength:5},s=Zo(Jr(Jr({},a),{type:"start"})),l=Zo(Jr(Jr({},a),{type:"end"}));o="M".concat(s.leftX," ").concat(s.leftY,`
      L`).concat(s.rightX," ").concat(s.rightY,`
      L`).concat(l.rightX," ").concat(l.rightY,`
      L`).concat(l.leftX," ").concat(l.leftY," z")}return{d:o,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},e.prototype.getAppendShape=function(t){var r=this.getAppendAttributes(t),i=r.d,o=r.strokeWidth,a=r.fill,s=r.strokeDasharray,l=r.stroke;return j(ea,{d:i,fill:a,strokeWidth:o,stroke:l,strokeDasharray:s})},e.prototype.getAppendWidth=function(){for(var t=this,r=this.props,i=r.model,o=r.graphModel,a=i.pointsList,s=i.draggable,l=[],u=a.length,c=function(h){var v="lf-polyline-append",p={start:{x:a[h].x,y:a[h].y},end:{x:a[h+1].x,y:a[h+1].y},startIndex:h,endIndex:h+1,direction:_t.HORIZONTAL,draggable:!0},g=j("g",{className:v,children:f.getAppendShape(p)}),y=o.editConfigModel,b=y.adjustEdge,C=y.adjustEdgeMiddle;if(b&&s){var D=p.startIndex,B=p.endIndex,R=C&&(D===0||B===u-1);p.draggable=!R,p.start.x===p.end.x?(p.draggable&&(v+="-ew-resize"),p.direction=_t.VERTICAL):p.start.y===p.end.y&&(p.draggable&&(v+="-ns-resize"),p.direction=_t.HORIZONTAL),g=j("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(A){return t.beforeDragStart(A,p)},children:j("g",{className:v,children:f.getAppendShape(p)})})}l.push(g)},f=this,d=0;d<u-1;d++)c(d);return j("g",{children:l})},e}(Ml),Mi=function(){return Mi=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Mi.apply(this,arguments)},pP=function(){function n(e){var t=this;this.nodeConfig=null,this.fakeNode=null,this.stopDrag=function(){t.nodeConfig=null,window.document.removeEventListener("mouseup",t.stopDrag)},this.dragEnter=function(i){!t.nodeConfig||t.fakeNode||(t.fakeNode=t.lf.createFakeNode(Mi(Mi({},t.nodeConfig),t.clientToLocalPoint({x:i.clientX,y:i.clientY}))))},this.onDragOver=function(i){if(i.preventDefault(),t.fakeNode){var o=t.clientToLocalPoint({x:i.clientX,y:i.clientY}),a=o.x,s=o.y;t.fakeNode.moveTo(a,s);var l=t.fakeNode.getData();t.lf.setNodeSnapLine(l),t.lf.graphModel.eventCenter.emit(he.NODE_DND_DRAG,{data:l,e:i})}return!1},this.onDragLeave=function(){t.fakeNode&&(t.lf.removeNodeSnapLine(),t.lf.graphModel.removeFakeNode(),t.fakeNode=null)},this.onDrop=function(i){!t.lf.graphModel||!i||!t.nodeConfig||(t.lf.addNode(Mi(Mi({},t.nodeConfig),t.clientToLocalPoint({x:i.clientX,y:i.clientY})),he.NODE_DND_ADD,i),i.preventDefault(),i.stopPropagation(),t.nodeConfig=null,t.lf.removeNodeSnapLine(),t.lf.graphModel.removeFakeNode(),t.fakeNode=null)};var r=e.lf;this.lf=r}return n.prototype.clientToLocalPoint=function(e){var t=e.x,r=e.y,i=ua(this.lf.options,["grid","size"]),o=this.lf.graphModel.getPointByClient({x:t,y:r}),a=o.canvasOverlayPosition,s=a.x,l=a.y;return{x:Xi(s,i),y:Xi(l,i)}},n.prototype.startDrag=function(e){var t=this.lf.graphModel.editConfigModel;t!=null&&t.isSilentMode||(this.nodeConfig=e,window.document.addEventListener("mouseup",this.stopDrag))},n.prototype.eventMap=function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}},n}();function vP(n,e){n.on("node:mousemove",function(t){var r=t.data;e.setNodeSnapLine(r)}),n.on("node:mouseup",function(){e.clearSnapline()})}var gP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fr=function(){return fr=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},fr.apply(this,arguments)},yP=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mP=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},_P=function(n){gP(e,n);function e(t){var r=n.call(this,t)||this;return r.ref=_l(),r.__prevText={type:"",text:"",id:""},r.keyupHandler=function(i){var o=r.props.graphModel.textEditElement;i.key==="Enter"&&i.altKey&&(o==null||o.setElementState(Ze.DEFAULT))},r.inputHandler=function(i){var o=i.target.innerText,a=r.props.graphModel.textEditElement;a&&(r.__prevText={type:a.type,text:o.replace(/(\r\n)+$|(\n)+$/,""),id:a.id})},r.keydownHandler=function(i){i.stopPropagation()},r.state={style:{left:0,top:0}},r}return e.getDerivedStateFromProps=function(t){var r,i=t.textEditElement,o=t.graphModel,a=o.transformModel,s=o.theme,l=s.inputText,u;if(i){if(!(!((r=i.text)===null||r===void 0)&&r.value)&&i.BaseType===Et.EDGE){var c=i.text,f=i.textPosition,d=f.x,h=f.y;c.x=d,c.y=h,i.setText(c)}var v={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(i.BaseType===Et.EDGE){var p=s.edgeText,g=p.overflowMode,y=p.lineHeight,b=p.wrapPadding,C=p.textWidth;C&&g==="autoWrap"&&(u=fr(fr({},v),{width:C,minWidth:C,lineHeight:y,padding:b}))}else if(i.BaseType===Et.NODE){var D=s.nodeText,g=D.overflowMode,y=D.lineHeight,b=D.wrapPadding,C=D.textWidth,B=i.width,R=i.modelType,A=i.textWidth,O=A||C||B;(R!==He.TEXT_NODE&&g==="autoWrap"||R===He.TEXT_NODE&&C)&&(u=fr(fr({},v),{width:O,minWidth:O,lineHeight:y,padding:b}))}var F=i.text,Z=F.x,ue=F.y,ce=mP(a.CanvasPointToHtmlPoint([Z,ue]),2),w=ce[0],M=ce[1];return{style:fr(fr({left:w,top:M},u),l)}}return null},e.prototype.componentDidUpdate=function(){var t=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var r=this.__prevText,i=r.text,o=r.id;t.updateText(o,i),t.eventCenter.emit(he.TEXT_UPDATE,{data:fr({},this.__prevText)}),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}},e.prototype.placeCaretAtEnd=function(t){if(window.getSelection!==void 0&&document.createRange!==void 0){var r=document.createRange();r.selectNodeContents(t),r.collapse(!1);var i=window.getSelection();i==null||i.removeAllRanges(),i==null||i.addRange(r)}},e.prototype.render=function(){var t,r=this.props.graphModel.textEditElement,i=this.state.style;return r?j("div",{contentEditable:!0,className:"lf-text-input",style:i,ref:this.ref,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler,children:(t=r.text)===null||t===void 0?void 0:t.value},r.id):null},e.toolName="text-edit-tool",e=yP([Gt],e),e}(Ue),bP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xP=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},tu=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},EP=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},wP=function(n){bP(e,n);function e(t){var r=n.call(this,t)||this;r.handleMouseDown=function(s){r.stepDrag.handleMouseDown(s)},r.handleWheelEvent=function(s){var l,u;s.preventDefault();var c=s.deltaX,f=s.deltaY,d=s.clientX,h=s.clientY,v=s.ctrlKey,p=new WheelEvent("wheel",{deltaX:c,deltaY:f,clientX:d,clientY:h,ctrlKey:v});(u=(l=r.props.lf.container)===null||l===void 0?void 0:l.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||u===void 0||u.dispatchEvent(p)},r.onDragging=function(s){var l=s.deltaX,u=s.deltaY,c=r.props,f=c.graphModel,d=c.lf,h=d.getTransform(),v=h.SCALE_X,p=h.SCALE_Y,g=f.getSelectElements(!0);f.moveNodes(g.nodes.map(function(y){return y.id}),l/v,u/p)},r.handleContextMenu=function(s){s.preventDefault();var l=r.props,u=l.graphModel,c=l.graphModel,f=c.eventCenter,d=c.selectElements,h=u.getPointByClient({x:s.clientX,y:s.clientY}),v={nodes:[],edges:[]},p=EP([],tu(d.values()),!1);p.forEach(function(g){g.BaseType===Et.NODE&&v.nodes.push(g.getData()),g.BaseType===Et.EDGE&&v.edges.push(g.getData())}),f.emit(he.SELECTION_CONTEXTMENU,{data:v,e:s,position:h})};var i=t.graphModel,o=i.gridSize,a=i.eventCenter;return r.stepDrag=new Sn({onDragging:r.onDragging,step:o,eventType:"SELECTION",eventCenter:a}),r}return e.prototype.render=function(){var t,r,i=this.props.graphModel,o=i.selectElements,a=i.transformModel,s=this.props.lf.getTransform(),l=s.SCALE_X,u=s.SCALE_Y;if(!(o.size<=1)){var c=Number.MAX_SAFE_INTEGER,f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;o.forEach(function(p){var g;p.BaseType===Et.NODE&&(g=bT(p)),p.BaseType===Et.EDGE&&(g=AT(p)),g!==void 0&&(c=Math.min(c,g.x),f=Math.min(f,g.y),d=Math.max(d,g.x1),h=Math.max(h,g.y1))}),t=tu(a.CanvasPointToHtmlPoint([c,f]),2),c=t[0],f=t[1],r=tu(a.CanvasPointToHtmlPoint([d,h]),2),d=r[0],h=r[1];var v={left:"".concat(c-20*l/2,"px"),top:"".concat(f-20*u/2,"px"),width:"".concat(d-c+20*l,"px"),height:"".concat(h-f+20*u,"px"),"border-width":"".concat(2*l,"px")};return j("div",{className:"lf-multiple-select",style:v,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}},e.toolName="multiple-select-tool",e=xP([Gt],e),e}(Ue),nu=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},AP=[_P,wP],SP=function(){function n(e){var t=this;this.toolMap=new Map,this.disabledToolMap=new Map,this.instance=e,ot(AP,function(o){t.isDisabled(o.toolName)||t.registerTool(o.toolName,o)});var r=e.graphModel,i=r.eventCenter;i.on("".concat(he.GRAPH_TRANSFORM,",").concat(he.NODE_CLICK,",").concat(he.BLANK_CLICK," "),function(){var o,a=r.textEditElement,s=r.editConfigModel,l=s.edgeTextEdit,u=s.nodeTextEdit;(l||u)&&a&&((o=r.textEditElement)===null||o===void 0||o.setElementState(Ze.DEFAULT))})}return n.prototype.isDisabled=function(e){var t;return((t=this.instance.options.disabledTools)===null||t===void 0?void 0:t.indexOf(e))!==-1},n.prototype.registerTool=function(e,t){this.toolMap.set(e,t)},n.prototype.disableTool=function(e){var t=this.toolMap.get(e);if(t)return this.disabledToolMap.set(e,t),this.toolMap.delete(e),!0;throw new Error("禁用失败，不存在名为 ${tool} 的工具")},n.prototype.enableTool=function(e){var t=this.disabledToolMap.get(e);if(t)return this.toolMap.set(e,t),this.disabledToolMap.delete(e),!0;throw new Error("不存在名为 ${tool} 的工具")},n.prototype.getTools=function(){return Array.from(this.toolMap.values())},n.prototype.getInstance=function(){return this.instance},nu([$],n.prototype,"toolMap",void 0),nu([H],n.prototype,"disableTool",null),nu([H],n.prototype,"enableTool",null),n}();function CP(n){throw new Error("[mobx-utils] "+n)}function ks(n,e){e===void 0&&(e="Illegal state"),n||CP(e)}var Oy=function(n){return n&&n!==Object.prototype&&Object.getOwnPropertyNames(n).concat(Oy(Object.getPrototypeOf(n))||[])},OP=function(n){var e=Oy(n),t=e.filter(function(r,i){return e.indexOf(r)===i});return t},TP=function(n){return OP(n).filter(function(e){return e!=="constructor"&&!~e.indexOf("__")})},Ty="pending",Is="fulfilled",Ef="rejected";function MP(n){switch(this.state){case Ty:return n.pending&&n.pending(this.value);case Ef:return n.rejected&&n.rejected(this.value);case Is:return n.fulfilled?n.fulfilled(this.value):this.value}}function Mh(n,e){if(ks(arguments.length<=2,"fromPromise expects up to two arguments"),ks(typeof n=="function"||typeof n=="object"&&n&&typeof n.then=="function","Please pass a promise or function to fromPromise"),n.isPromiseBasedObservable===!0)return n;typeof n=="function"&&(n=new Promise(n));var t=n;n.then(H("observableFromPromise-resolve",function(i){t.value=i,t.state=Is}),H("observableFromPromise-reject",function(i){t.value=i,t.state=Ef})),t.isPromiseBasedObservable=!0,t.case=MP;var r=e&&e.state===Is?e.value:void 0;return Du(t,{value:r,state:Ty},{},{deep:!1}),t}(function(n){n.reject=H("fromPromise.reject",function(t){var r=n(Promise.reject(t));return r.state=Ef,r.value=t,r});function e(t){t===void 0&&(t=void 0);var r=n(Promise.resolve(t));return r.state=Is,r.value=t,r}n.resolve=H("fromPromise.resolve",e)})(Mh||(Mh={}));var $a=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};(function(){function n(e,t){var r=this;p1(function(){r.current=t,r.subscription=e.subscribe(r)})}return n.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},n.prototype.next=function(e){this.current=e},n.prototype.complete=function(){this.dispose()},n.prototype.error=function(e){this.current=e,this.dispose()},$a([$.ref],n.prototype,"current",void 0),$a([H.bound],n.prototype,"next",null),$a([H.bound],n.prototype,"complete",null),$a([H.bound],n.prototype,"error",null),n})();var Bs=function(){return Bs=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Bs.apply(this,arguments)},mo=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},NP=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function n(e){var t=this;this.model=e,this.localValues=$.map({}),this.localComputedValues=$.map({}),this.isPropertyDirty=function(r){return t.localValues.has(r)},ks(zn(e),"createViewModel expects an observable object"),TP(e).forEach(function(r){if(!(r===Pe||r==="__mobxDidRunLazyInitializers")){if(ks(NP.indexOf(r)===-1,"The propertyname "+r+" is reserved and cannot be used with viewModels"),_d(e,r)){var i=Al(e,r).derivation;t.localComputedValues.set(r,vt(i.bind(t)))}var o=Object.getOwnPropertyDescriptor(e,r),a=o?{enumerable:o.enumerable}:{};Object.defineProperty(t,r,Bs(Bs({},a),{configurable:!0,get:function(){return _d(e,r)?t.localComputedValues.get(r).get():t.isPropertyDirty(r)?t.localValues.get(r):t.model[r]},set:H(function(s){s!==t.model[r]?t.localValues.set(r,s):t.localValues.delete(r)})}))}})}return Object.defineProperty(n.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),n.prototype.submit=function(){var e=this;$i(this.localValues).forEach(function(t){var r=e.localValues.get(t),i=e.model[t];sr(i)?i.replace(r):an(i)?(i.clear(),i.merge(r)):x1(r)||(e.model[t]=r)}),this.localValues.clear()},n.prototype.reset=function(){this.localValues.clear()},n.prototype.resetProperty=function(e){this.localValues.delete(e)},mo([vt],n.prototype,"isDirty",null),mo([vt],n.prototype,"changedValues",null),mo([H.bound],n.prototype,"submit",null),mo([H.bound],n.prototype,"reset",null),mo([H.bound],n.prototype,"resetProperty",null),n})();function ru(n){if(!n)return"ROOT";for(var e=[];n.parent;)e.push(n.path),n=n.parent;return e.reverse().join("/")}function iu(n){return zn(n)||sr(n)||an(n)}function PP(n,e){var t=new WeakMap;function r(s){var l=t.get(s.object);i(s,l),e(s,ru(l),n)}function i(s,l){switch(s.type){case"add":o(s.newValue,l,s.name);break;case"update":a(s.oldValue),o(s.newValue,l,s.name||""+s.index);break;case"remove":case"delete":a(s.oldValue);break;case"splice":s.removed.map(a),s.added.forEach(function(f,d){return o(f,l,""+(s.index+d))});for(var u=s.index+s.addedCount;u<s.object.length;u++)if(iu(s.object[u])){var c=t.get(s.object[u]);c&&(c.path=""+u)}break}}function o(s,l,u){if(iu(s)){var c=t.get(s);if(c){if(c.parent!==l||c.path!==u)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+ru(l)+"/"+u+"',")+(" but it already exists at '"+ru(c.parent)+"/"+c.path+"'"))}else{var f={parent:l,path:u,dispose:Qg(s,r)};t.set(s,f),A1(s).forEach(function(d){var h=d[0],v=d[1];return o(v,f,h)})}}}function a(s){if(iu(s)){var l=t.get(s);if(!l)return;t.delete(s),l.dispose(),w1(s).forEach(a)}}return o(n,void 0,""),function(){a(n)}}var RP=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){RP(e,n);function e(t,r,i){var o=i===void 0?{}:i,a=o.name,s=a===void 0?"ogm"+(Math.random()*1e3|0):a,l=o.keyToName,u=l===void 0?function(d){return""+d}:l,c=n.call(this)||this;c._keyToName=u,c._groupBy=r,c._ogmInfoKey=Symbol("ogmInfo"+s),c._base=t;for(var f=0;f<t.length;f++)c._addItem(t[f]);return c._disposeBaseObserver=Qg(c._base,function(d){if(d.type==="splice")Dn(function(){for(var h=0,v=d.removed;h<v.length;h++){var p=v[h];c._removeItem(p)}for(var g=0,y=d.added;g<y.length;g++){var b=y[g];c._addItem(b)}});else if(d.type==="update")Dn(function(){c._removeItem(d.oldValue),c._addItem(d.newValue)});else throw new Error("illegal state")}),c}return e.prototype.clear=function(){throw new Error("not supported")},e.prototype.delete=function(t){throw new Error("not supported")},e.prototype.set=function(t,r){throw new Error("not supported")},e.prototype.dispose=function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var r=this._base[t],i=r[this._ogmInfoKey];i.reaction(),delete r[this._ogmInfoKey]}},e.prototype._getGroupArr=function(t){var r=n.prototype.get.call(this,t);return r===void 0&&(r=$([],{name:"GroupArray["+this._keyToName(t)+"]",deep:!1}),n.prototype.set.call(this,t,r)),r},e.prototype._removeFromGroupArr=function(t,r){var i=n.prototype.get.call(this,t);i.length===1?n.prototype.delete.call(this,t):(r===i.length-1||(i[r]=i[i.length-1],i[r][this._ogmInfoKey].groupArrIndex=r),i.length--)},e.prototype._addItem=function(t){var r=this,i=this._groupBy(t),o=this._getGroupArr(i),a={groupByValue:i,groupArrIndex:o.length,reaction:Gg(function(){return r._groupBy(t)},function(s,l){var u=t[r._ogmInfoKey];r._removeFromGroupArr(u.groupByValue,u.groupArrIndex);var c=r._getGroupArr(s),f=c.length;c.push(t),u.groupByValue=s,u.groupArrIndex=f})};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),o.push(t)},e.prototype._removeItem=function(t){var r=t[this._ogmInfoKey];this._removeFromGroupArr(r.groupByValue,r.groupArrIndex),r.reaction(),delete t[this._ogmInfoKey]},e})(pf);Promise.resolve(),typeof queueMicrotask!="undefined"||typeof process!="undefined"&&process.nextTick;var dc=function(){return dc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},dc.apply(this,arguments)},DP=function(){function n(e){this.undos=[],this.redos=[],this.callbacks=[],this.stopWatch=null,this.curData=null,this.maxSize=50,this.waitTime=100,this.eventCenter=e}return n.prototype.add=function(e){is(nn(this.undos),e)||(this.undos.push(e),is(this.curData,e)||(this.redos=[]),this.eventCenter.emit(he.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undoAble(),redoAble:this.redoAble()}}),this.undos.length>this.maxSize&&this.undos.shift())},n.prototype.undoAble=function(){return this.undos.length>1},n.prototype.undo=function(){if(this.undoAble()){var e=this.undos.pop();this.redos.push(e);var t=this.undos.pop();return this.curData=je(t),t}},n.prototype.redoAble=function(){return this.redos.length>0},n.prototype.redo=function(){if(this.redoAble()){var e=this.redos.pop();return this.curData=je(e),e}},n.prototype.watch=function(e){var t=this;this.stopWatch&&this.stopWatch(),this.undos.push(e.modelToGraphData()),this.stopWatch=PP(e,Sc(function(){var r=e.modelToHistoryData();r&&t.add(dc({},r))},this.waitTime))},n}(),ou={exports:{}},Nh;function LP(){return Nh||(Nh=1,function(n){(function(e,t,r){if(!e)return;for(var i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l,u=1;u<20;++u)i[111+u]="f"+u;for(u=0;u<=9;++u)i[u+96]=u.toString();function c(A,O,F){if(A.addEventListener){A.addEventListener(O,F,!1);return}A.attachEvent("on"+O,F)}function f(A){if(A.type=="keypress"){var O=String.fromCharCode(A.which);return A.shiftKey||(O=O.toLowerCase()),O}return i[A.which]?i[A.which]:o[A.which]?o[A.which]:String.fromCharCode(A.which).toLowerCase()}function d(A,O){return A.sort().join(",")===O.sort().join(",")}function h(A){var O=[];return A.shiftKey&&O.push("shift"),A.altKey&&O.push("alt"),A.ctrlKey&&O.push("ctrl"),A.metaKey&&O.push("meta"),O}function v(A){if(A.preventDefault){A.preventDefault();return}A.returnValue=!1}function p(A){if(A.stopPropagation){A.stopPropagation();return}A.cancelBubble=!0}function g(A){return A=="shift"||A=="ctrl"||A=="alt"||A=="meta"}function y(){if(!l){l={};for(var A in i)A>95&&A<112||i.hasOwnProperty(A)&&(l[i[A]]=A)}return l}function b(A,O,F){return F||(F=y()[A]?"keydown":"keypress"),F=="keypress"&&O.length&&(F="keydown"),F}function C(A){return A==="+"?["+"]:(A=A.replace(/\+{2}/g,"+plus"),A.split("+"))}function D(A,O){var F,Z,ue,ce=[];for(F=C(A),ue=0;ue<F.length;++ue)Z=F[ue],s[Z]&&(Z=s[Z]),O&&O!="keypress"&&a[Z]&&(Z=a[Z],ce.push("shift")),g(Z)&&ce.push(Z);return O=b(Z,ce,O),{key:Z,modifiers:ce,action:O}}function B(A,O){return A===null||A===t?!1:A===O?!0:B(A.parentNode,O)}function R(A){var O=this;if(A=A||t,!(O instanceof R))return new R(A);O.target=A,O._callbacks={},O._directMap={};var F={},Z,ue=!1,ce=!1,w=!1;function M(ge){ge=ge||{};var Le=!1,$e;for($e in F){if(ge[$e]){Le=!0;continue}F[$e]=0}Le||(w=!1)}function L(ge,Le,$e,Te,Be,N){var X,U,ee=[],re=$e.type;if(!O._callbacks[ge])return[];for(re=="keyup"&&g(ge)&&(Le=[ge]),X=0;X<O._callbacks[ge].length;++X)if(U=O._callbacks[ge][X],!(!Te&&U.seq&&F[U.seq]!=U.level)&&re==U.action&&(re=="keypress"&&!$e.metaKey&&!$e.ctrlKey||d(Le,U.modifiers))){var Me=!Te&&U.combo==Be,Ae=Te&&U.seq==Te&&U.level==N;(Me||Ae)&&O._callbacks[ge].splice(X,1),ee.push(U)}return ee}function V(ge,Le,$e,Te){O.stopCallback(Le,Le.target||Le.srcElement,$e,Te)||ge(Le,$e)===!1&&(v(Le),p(Le))}O._handleKey=function(ge,Le,$e){var Te=L(ge,Le,$e),Be,N={},X=0,U=!1;for(Be=0;Be<Te.length;++Be)Te[Be].seq&&(X=Math.max(X,Te[Be].level));for(Be=0;Be<Te.length;++Be){if(Te[Be].seq){if(Te[Be].level!=X)continue;U=!0,N[Te[Be].seq]=1,V(Te[Be].callback,$e,Te[Be].combo,Te[Be].seq);continue}U||V(Te[Be].callback,$e,Te[Be].combo)}var ee=$e.type=="keypress"&&ce;$e.type==w&&!g(ge)&&!ee&&M(N),ce=U&&$e.type=="keydown"};function pe(ge){typeof ge.which!="number"&&(ge.which=ge.keyCode);var Le=f(ge);if(Le){if(ge.type=="keyup"&&ue===Le){ue=!1;return}O.handleKey(Le,h(ge),ge)}}function Ee(){clearTimeout(Z),Z=setTimeout(M,1e3)}function Je(ge,Le,$e,Te){F[ge]=0;function Be(re){return function(){w=re,++F[ge],Ee()}}function N(re){V($e,re,ge),Te!=="keyup"&&(ue=f(re)),setTimeout(M,10)}for(var X=0;X<Le.length;++X){var U=X+1===Le.length,ee=U?N:Be(Te||D(Le[X+1]).action);nt(Le[X],ee,Te,ge,X)}}function nt(ge,Le,$e,Te,Be){O._directMap[ge+":"+$e]=Le,ge=ge.replace(/\s+/g," ");var N=ge.split(" "),X;if(N.length>1){Je(ge,N,Le,$e);return}X=D(ge,$e),O._callbacks[X.key]=O._callbacks[X.key]||[],L(X.key,X.modifiers,{type:X.action},Te,ge,Be),O._callbacks[X.key][Te?"unshift":"push"]({callback:Le,modifiers:X.modifiers,action:X.action,seq:Te,level:Be,combo:ge})}O._bindMultiple=function(ge,Le,$e){for(var Te=0;Te<ge.length;++Te)nt(ge[Te],Le,$e)},c(A,"keypress",pe),c(A,"keydown",pe),c(A,"keyup",pe)}R.prototype.bind=function(A,O,F){var Z=this;return A=A instanceof Array?A:[A],Z._bindMultiple.call(Z,A,O,F),Z},R.prototype.unbind=function(A,O){var F=this;return F.bind.call(F,A,function(){},O)},R.prototype.trigger=function(A,O){var F=this;return F._directMap[A+":"+O]&&F._directMap[A+":"+O]({},A),F},R.prototype.reset=function(){var A=this;return A._callbacks={},A._directMap={},A},R.prototype.stopCallback=function(A,O){var F=this;if((" "+O.className+" ").indexOf(" mousetrap ")>-1||B(O,F.target))return!1;if("composedPath"in A&&typeof A.composedPath=="function"){var Z=A.composedPath()[0];Z!==A.target&&(O=Z)}return O.tagName=="INPUT"||O.tagName=="SELECT"||O.tagName=="TEXTAREA"||O.isContentEditable},R.prototype.handleKey=function(){var A=this;return A._handleKey.apply(A,arguments)},R.addKeycodes=function(A){for(var O in A)A.hasOwnProperty(O)&&(i[O]=A[O]);l=null},R.init=function(){var A=R(t);for(var O in A)O.charAt(0)!=="_"&&(R[O]=function(F){return function(){return A[F].apply(A,arguments)}}(O))},R.init(),e.Mousetrap=R,n.exports&&(n.exports=R)})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)}(ou)),ou.exports}var kP=LP();const IP=rl(kP);var Gn=null;function Ph(n,e){return n.x+=e,n.y+=e,Xc(n.text)||(n.text.x+=e,n.text.y+=e),n}function Rh(n,e){return n.startPoint&&(n.startPoint.x+=e,n.startPoint.y+=e),n.endPoint&&(n.endPoint.x+=e,n.endPoint.y+=e),n.pointsList&&n.pointsList.length>0&&n.pointsList.forEach(function(t){t.x+=e,t.y+=e}),Xc(n.text)||(n.text.x+=e,n.text.y+=e),n}var Ai=40,Xa=40;function BP(n,e){var t=n.keyboard,r=t.options.keyboard;t.on(["cmd + c","ctrl + c"],function(){if(Xa=Ai,!(r!=null&&r.enabled)||e.textEditElement)return!0;var i=n.options.guards,o=e.getSelectElements(!1),a=i&&i.beforeClone?i.beforeClone(o):!0;return!a||o.nodes.length===0&&o.edges.length===0?(Gn=null,!0):(Gn=o,Gn.nodes.forEach(function(s){return Ph(s,Ai)}),Gn.edges.forEach(function(s){return Rh(s,Ai)}),!1)}),t.on(["cmd + v","ctrl + v"],function(){if(!(r!=null&&r.enabled)||e.textEditElement)return!0;if(Gn&&(Gn.nodes||Gn.edges)){n.clearSelectElements();var i=n.addElements(Gn,Xa);if(!i)return!0;i.nodes.forEach(function(o){return n.selectElementById(o.id,!0)}),i.edges.forEach(function(o){return n.selectElementById(o.id,!0)}),Gn.nodes.forEach(function(o){return Ph(o,Ai)}),Gn.edges.forEach(function(o){return Rh(o,Ai)}),Xa=Xa+Ai}return!1}),t.on(["cmd + z","ctrl + z"],function(){return!(r!=null&&r.enabled)||e.textEditElement?!0:(n.undo(),!1)}),t.on(["cmd + y","ctrl + y"],function(){return!(r!=null&&r.enabled)||e.textEditElement?!0:(n.redo(),!1)}),t.on(["backspace"],function(){if(!(r!=null&&r.enabled)||e.textEditElement)return!0;var i=e.getSelectElements(!0);return n.clearSelectElements(),i.edges.forEach(function(o){return o.id&&n.deleteEdge(o.id)}),i.nodes.forEach(function(o){return o.id&&n.deleteNode(o.id)}),!1})}var jP=function(){function n(e){e.keyboard||(e.keyboard={enabled:!1}),this.options=e;var t=e.lf;this.target=t.container,this.mousetrap=new IP(this.target),e.keyboard.enabled&&!t.options.isSilentMode&&this.enable(!0)}return n.prototype.initShortcuts=function(){var e=this,t,r=((t=this.options.keyboard)!==null&&t!==void 0?t:{}).shortcuts;if(r)if(dt(r))r.forEach(function(s){var l=s.keys,u=s.callback,c=s.action;return e.on(l,u,c)});else{var i=r.keys,o=r.callback,a=r.action;this.on(i,o,a)}},n.prototype.on=function(e,t,r){this.mousetrap.bind(this.getKeys(e),t,r)},Object.defineProperty(n.prototype,"disabled",{get:function(){var e,t;return((t=(e=this.options)===null||e===void 0?void 0:e.keyboard)===null||t===void 0?void 0:t.enabled)!==!0},enumerable:!1,configurable:!0}),n.prototype.off=function(e,t){this.mousetrap.unbind(this.getKeys(e),t)},n.prototype.enable=function(e){(this.disabled||e)&&(this.options.keyboard&&(this.options.keyboard.enabled=!0),this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))},n.prototype.disable=function(){this.disabled||(this.options.keyboard&&(this.options.keyboard.enabled=!1),this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))},n.prototype.getKeys=function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(r){return t.formatKey(r)})},n.prototype.formatKey=function(e){return e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")},n}(),wr=function(){return wr=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},wr.apply(this,arguments)},za=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},au=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},su=Symbol("plugin registered by Logicflow.use"),hc=function(){function n(e){var t=this,r;this.viewMap=new Map,this.components=[],this.extension={},this.setView=function(u,c){return t.viewMap.set(u,c)},this.getView=function(u){return t.viewMap.get(u)};var i=Ko.get(e),o=i.container,a=i.width,s=i.height;this.options=i,this.container=this.initContainer(o,a,s),this.graphModel=new CN(wr(wr({},i),{container:this.container})),this.plugins=(r=i.plugins)!==null&&r!==void 0?r:[];var l=this.graphModel.eventCenter;this.tool=new SP(this),this.dnd=new pP({lf:this}),this.history=new DP(l),this.keyboard=new jP({lf:this,keyboard:i.keyboard}),i.snapline!==!1&&(this.snaplineModel=new ON(this.graphModel),vP(l,this.snaplineModel)),i.isSilentMode||(BP(this,this.graphModel),this.keyboard.initShortcuts()),this.defaultRegister(),this.installPlugins(i.disabledPlugins)}return n.prototype.initContainer=function(e,t,r){var i=document.createElement("div");return i.style.position="relative",i.style.width=t?"".concat(t,"px"):"100%",i.style.height=r?"".concat(r,"px"):"100%",e.innerHTML="",e.appendChild(i),i},Object.defineProperty(n.prototype,Symbol.toStringTag,{get:function(){return n.toStringTag},enumerable:!1,configurable:!0}),n.prototype.register=function(e,t,r){if(r===void 0&&(r=!0),typeof e!="string"){this.registerElement(e);return}var i={BaseEdge:Ml,BaseEdgeModel:Tl,BaseNode:Hr,BaseNodeModel:Fr,RectNode:li,RectNodeModel:Gi,CircleNode:Rs,CircleNodeModel:Ts,PolygonNode:Ls,PolygonNodeModel:Ms,TextNode:Sh,TextNodeModel:Eh,LineEdge:Th,LineEdgeModel:mh,DiamondNode:ic,DiamondNodeModel:Vu,PolylineEdge:ia,PolylineEdgeModel:na,BezierEdge:Oh,BezierEdgeModel:gh,EllipseNode:ac,EllipseNodeModel:Ku,HtmlNode:lc,HtmlNodeModel:qu,h:be,type:e};if(this.viewMap.forEach(function(u){var c=u.extendKey;c&&(i[c]=u)}),this.graphModel.modelMap.forEach(function(u){var c=u.extendKey;c&&(i[c]=u)}),t){var o=t(i),a=o.view,s=o.model,l=a;r&&!l.isObserved&&(l.isObserved=!0,l=Gt(l)),this.setView(e,l),this.graphModel.setModel(e,s)}},n.prototype.registerElement=function(e){var t=e.view;e.isObserverView!==!1&&!t.isObserved&&(t.isObserved=!0,t=Gt(t)),this.setView(e.type,t),this.graphModel.setModel(e.type,e.model)},n.prototype.batchRegister=function(e){var t=this;e===void 0&&(e=[]),ot(e,function(r){t.registerElement(r)})},n.prototype.defaultRegister=function(){var e=[{type:"rect",view:li,model:Gi},{type:"circle",view:Rs,model:Ts},{type:"polygon",view:Ls,model:Ms},{type:"text",view:Sh,model:Eh},{type:"ellipse",view:ac,model:Ku},{type:"diamond",view:ic,model:Vu},{type:"html",view:lc,model:qu},{type:"line",view:Th,model:mh},{type:"polyline",view:ia,model:na},{type:"bezier",view:Oh,model:gh}];this.batchRegister(e)},n.prototype.addNode=function(e,t,r){return t===void 0&&(t=he.NODE_ADD),this.graphModel.addNode(e,t,r)},n.prototype.deleteNode=function(e){var t=this.graphModel.getNodeModelById(e);if(!t)return!1;var r=t.getData(),i=this.options.guards,o=i!=null&&i.beforeDelete?i.beforeDelete(r):!0;return o&&this.graphModel.deleteNode(e),o},n.prototype.cloneNode=function(e){var t=this.graphModel.getNodeModelById(e),r=t==null?void 0:t.getData();if(r){var i=this.options.guards,o=i!=null&&i.beforeClone?i.beforeClone(r):!0;if(o)return this.graphModel.cloneNode(e)}},n.prototype.changeNodeId=function(e,t){return this.graphModel.changeNodeId(e,t)},n.prototype.changeNodeType=function(e,t){this.graphModel.changeNodeType(e,t)},n.prototype.getNodeModelById=function(e){return this.graphModel.getNodeModelById(e)},n.prototype.getNodeDataById=function(e){var t=this.getNodeModelById(e);return t==null?void 0:t.getData()},n.prototype.getNodeIncomingEdge=function(e){return this.graphModel.getNodeIncomingEdge(e)},n.prototype.getNodeOutgoingEdge=function(e){return this.graphModel.getNodeOutgoingEdge(e)},n.prototype.getNodeIncomingNode=function(e){return this.graphModel.getNodeIncomingNode(e)},n.prototype.getNodeOutgoingNode=function(e){return this.graphModel.getNodeOutgoingNode(e)},n.prototype.createFakeNode=function(e){var t=this.graphModel.modelMap.get(e.type);if(!t)return console.warn("不存在为".concat(e.type,"类型的节点")),null;var r=new t(wr(wr({},e),{virtual:!0}),this.graphModel);return this.graphModel.setFakeNode(r),r},n.prototype.removeFakeNode=function(){this.graphModel.removeFakeNode()},n.prototype.setNodeSnapLine=function(e){var t;(t=this.snaplineModel)===null||t===void 0||t.setNodeSnapLine(e)},n.prototype.removeNodeSnapLine=function(){var e;(e=this.snaplineModel)===null||e===void 0||e.clearSnapline()},n.prototype.setDefaultEdgeType=function(e){this.graphModel.setDefaultEdgeType(e)},n.prototype.addEdge=function(e){return this.graphModel.addEdge(e)},n.prototype.getEdgeDataById=function(e){var t=this.getEdgeModelById(e);return t==null?void 0:t.getData()},n.prototype.getEdgeModelById=function(e){return this.graphModel.getEdgeModelById(e)},n.prototype.getEdgeModels=function(e){var t=e.sourceNodeId,r=e.targetNodeId,i=[],o=this.graphModel.edges;return t&&r?ot(o,function(a){a.sourceNodeId===t&&a.targetNodeId===r&&i.push(a)}):t?ot(o,function(a){a.sourceNodeId===t&&i.push(a)}):r&&ot(o,function(a){a.targetNodeId===r&&i.push(a)}),i},n.prototype.changeEdgeId=function(e,t){return this.graphModel.changeEdgeId(e,t)},n.prototype.changeEdgeType=function(e,t){this.graphModel.changeEdgeType(e,t)},n.prototype.deleteEdge=function(e){var t=this.graphModel.getEdgeModelById(e);if(!t)return!1;var r=t.getData(),i=this.options.guards,o=i!=null&&i.beforeDelete?i.beforeDelete(r):!0;return o&&this.graphModel.deleteEdgeById(e),o},n.prototype.deleteEdgeByNodeId=function(e){var t=e.sourceNodeId,r=e.targetNodeId;t&&r?this.graphModel.deleteEdgeBySourceAndTarget(t,r):t?this.graphModel.deleteEdgeBySource(t):r&&this.graphModel.deleteEdgeByTarget(r)},n.prototype.getNodeEdges=function(e){return this.graphModel.getNodeEdges(e)},n.prototype.addElements=function(e,t){var r=this,i=e.nodes,o=e.edges;t===void 0&&(t=40),console.log("distance",t);var a={},s={nodes:[],edges:[]};return ot(i,function(l){var u=l.id,c=r.addNode(l);u&&(a[u]=c.id),s.nodes.push(c)}),ot(o,function(l){var u=l.sourceNodeId,c=l.targetNodeId;a[u]&&(u=a[u]),a[c]&&(c=a[c]);var f=r.graphModel.addEdge(wr(wr({},l),{sourceNodeId:u,targetNodeId:c}));s.edges.push(f)}),s},n.prototype.selectElementById=function(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),this.graphModel.selectElementById(e,t),!t&&r&&this.graphModel.toFront(e)},n.prototype.getSelectElements=function(e){return e===void 0&&(e=!0),this.graphModel.getSelectElements(e)},n.prototype.clearSelectElements=function(){this.graphModel.clearSelectElements()},n.prototype.getModelById=function(e){return this.graphModel.getElement(e)},n.prototype.getDataById=function(e){var t;return(t=this.graphModel.getElement(e))===null||t===void 0?void 0:t.getData()},n.prototype.deleteElement=function(e){var t,r,i,o=this.getModelById(e);if(!o)return!1;var a=(t={},t[Et.NODE]=this.deleteNode,t[Et.EDGE]=this.deleteEdge,t);return(i=(r=a[o.BaseType])===null||r===void 0?void 0:r.call(this,e))!==null&&i!==void 0?i:!1},n.prototype.setElementZIndex=function(e,t){return this.graphModel.setElementZIndex(e,t)},n.prototype.getAreaElement=function(e,t,r,i,o){return r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=!1),this.graphModel.getAreaElement(e,t,r,i,o).map(function(a){return a.getData()})},n.prototype.setProperties=function(e,t){var r;(r=this.graphModel.getElement(e))===null||r===void 0||r.setProperties($t(t))},n.prototype.getProperties=function(e){var t;return(t=this.graphModel.getElement(e))===null||t===void 0?void 0:t.getProperties()},n.prototype.deleteProperty=function(e,t){var r;(r=this.graphModel.getElement(e))===null||r===void 0||r.deleteProperty(t)},n.prototype.updateAttributes=function(e,t){this.graphModel.updateAttributes(e,t)},n.prototype.editText=function(e){this.graphModel.editText(e)},n.prototype.updateText=function(e,t){this.graphModel.updateText(e,t)},n.prototype.updateEditConfig=function(e){var t=this.graphModel,r=t.editConfigModel,i=t.transformModel;r.updateEditConfig(e),(e==null?void 0:e.stopMoveGraph)!==void 0&&i.updateTranslateLimits(e.stopMoveGraph),e!=null&&e.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)},n.prototype.getEditConfig=function(){return this.graphModel.editConfigModel.getConfig()},n.prototype.setTheme=function(e){this.graphModel.setTheme(e)},n.prototype.focusByElement=function(e){var t=void 0,r=this.getNodeModelById(e);if(r){var i=r.getData(),o=i.x,a=i.y;t={x:o,y:a}}var s=this.getEdgeModelById(e);if(s){var l=s.textPosition,o=l.x,a=l.y;t={x:o,y:a}}t&&this.focusByCoordinate(t)},n.prototype.focusByCoordinate=function(e){var t=this.graphModel,r=t.transformModel,i=t.width,o=t.height,a=e.x,s=e.y;r.focusOn(a,s,i,o)},n.prototype.focusOn=function(e){if(typeof e=="string")this.focusByElement(e);else if("x"in e&&"y"in e)this.focusByCoordinate(e);else{var t=e.id,r=e.coordinate;t&&this.focusByElement(t),r&&this.focusByCoordinate(r)}},n.prototype.resize=function(e,t){this.graphModel.resize(e,t),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height},n.prototype.toFront=function(e){this.graphModel.toFront(e)},n.prototype.getPointByClient=function(e,t){if(typeof e=="object")return this.graphModel.getPointByClient(e);if(typeof t=="number")return this.graphModel.getPointByClient({x:e,y:t})},n.prototype.getGraphData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.getGraphRawData();return this.adapterOut?this.adapterOut.apply(this,au([r],za(e),!1)):r},n.prototype.getGraphRawData=function(){return this.graphModel.modelToGraphData()},n.prototype.clearData=function(){this.graphModel.clearData()},n.prototype.renderRawData=function(e){this.graphModel.graphDataToModel($t(e)),this.options.history!==!1&&this.history.watch(this.graphModel),sT(j(LN,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(he.GRAPH_RENDERED,{data:this.graphModel.modelToGraphData(),graphModel:this.graphModel})},n.prototype.render=function(e){var t=je(e);this.adapterIn&&(t=this.adapterIn(t)),this.renderRawData(t)},n.prototype.undo=function(){if(this.history.undoAble()){var e=$t(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(e)}},n.prototype.redo=function(){if(this.history.redoAble()){var e=$t(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(e)}},n.prototype.zoom=function(e,t){var r=this.graphModel.transformModel;return r.zoom(e,t)},n.prototype.resetZoom=function(){var e=this.graphModel.transformModel;e.resetZoom()},n.prototype.setZoomMiniSize=function(e){var t=this.graphModel.transformModel;t.setZoomMiniSize(e)},n.prototype.setZoomMaxSize=function(e){var t=this.graphModel.transformModel;t.setZoomMaxSize(e)},n.prototype.getTransform=function(){var e=this.graphModel.transformModel,t=e.SCALE_X,r=e.SCALE_Y,i=e.TRANSLATE_X,o=e.TRANSLATE_Y;return{SCALE_X:t,SCALE_Y:r,TRANSLATE_X:i,TRANSLATE_Y:o}},n.prototype.translate=function(e,t){var r=this.graphModel.transformModel;r.translate(e,t)},n.prototype.resetTranslate=function(){var e=this.graphModel.transformModel,t=e.TRANSLATE_X,r=e.TRANSLATE_Y;this.translate(-t,-r)},n.prototype.translateCenter=function(){this.graphModel.translateCenter()},n.prototype.fitView=function(e,t){t===void 0&&(t=e),this.graphModel.fitView(e,t)},n.prototype.openEdgeAnimation=function(e){this.graphModel.openEdgeAnimation(e)},n.prototype.closeEdgeAnimation=function(e){this.graphModel.closeEdgeAnimation(e)},n.prototype.on=function(e,t){this.graphModel.eventCenter.on(e,t)},n.prototype.off=function(e,t){this.graphModel.eventCenter.off(e,t)},n.prototype.once=function(e,t){this.graphModel.eventCenter.once(e,t)},n.prototype.emit=function(e,t){this.graphModel.eventCenter.emit(e,t)},n.use=function(e,t){var r,i=e.pluginName;if(!i)throw new Error("请给插件指定 pluginName!");this.extensions.set(i,(r={},r[su]=su,r.extension=e,r.props=t,r))},n.prototype.installPlugins=function(e){var t=this;e===void 0&&(e=[]);var r=Array.from(n.extensions,function(o){var a=za(o,2),s=a[1];return s}),i=au(au([],za(this.plugins),!1),za(r),!1);ot(i,function(o){var a,s;su in o?(a=o.extension,s=o.props):a=o;var l=a==null?void 0:a.pluginName;Iv(e,l)===-1&&t.installPlugin(a,s)})},n.prototype.installPlugin=function(e,t){var r,i;if("pluginName"in e&&"install"in e){var o=e.pluginName,a=e.install,s=e.render;o&&(a&&a.call(e,this,n),s&&this.components.push(s.bind(e)),this.extension[o]=e);return}var l=e,u=l.pluginName,c=new l({lf:this,LogicFlow:n,props:t,options:(i=(r=this.options.pluginsOptions)===null||r===void 0?void 0:r[u])!==null&&i!==void 0?i:{}});c.render&&this.components.push(c.render.bind(c)),this.extension[u]=c},n.prototype.destroy=function(){this.graphModel.destroy()},n.extensions=new Map,n}();(function(n){n.toStringTag="LF.".concat(n.name)})(hc||(hc={}));const Ur=hc;function Gt(n){return yf(n)}var Dh={width:40,height:40},Lh={width:40,height:40},kh={width:40,height:40},Ih={width:100,height:80},Bh={width:100,height:80},FP={rect:{radius:5,stroke:"rgb(24, 125, 255)"},circle:{r:18,stroke:"rgb(24, 125, 255)"},polygon:{stroke:"rgb(24, 125, 255)"},polyline:{stroke:"rgb(24, 125, 255)",hoverStroke:"rgb(24, 125, 255)",selectedStroke:"rgb(24, 125, 255)"},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"white",height:14,stroke:"transparent",radius:3}}},HP=function(){function n(){globalThis._ids=this,this._ids=new Set}return n.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,function(e){var t=Math.random()*16|0,r=e==="x"?t:t&3|8;return r.toString(16)})},n.prototype.next=function(){for(var e=this.generateId();this._ids.has(e);)e=this.generateId();return this._ids.add(e),e},n}(),WP=(globalThis==null?void 0:globalThis._ids)||new HP;function so(){return WP.next()}var My=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$P=function(n){My(e,n);function e(t,r){return t.id||(t.id="Event_".concat(so())),t.text||(t.text=""),t.text&&typeof t.text=="string"&&(t.text={value:t.text,x:t.x,y:t.y+40}),n.call(this,t,r)||this}return e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedTargetRules=function(){var t=n.prototype.getConnectedTargetRules.call(this),r={message:"起始节点不能作为边的终点",validate:function(){return!1}};return t.push(r),t},e.extendKey="StartEventModel",e}(Ts),XP=function(n){My(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.extendKey="StartEventNode",e}(Rs),zP={type:"bpmn:startEvent",view:XP,model:$P},Ny=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),js=function(){return js=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},js.apply(this,arguments)},UP=function(n){Ny(e,n);function e(t,r){return t.id||(t.id="Event_".concat(so())),t.text||(t.text=""),t.text&&typeof t.text=="string"&&(t.text={value:t.text,x:t.x,y:t.y+40}),n.call(this,t,r)||this}return e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedSourceRules=function(){var t=n.prototype.getConnectedSourceRules.call(this),r={message:"结束节点不能作为边的起点",validate:function(){return!1}};return t.push(r),t},e.extendKey="EndEventModel",e}(Ts),GP=function(n){Ny(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var t=this.props.model,r=t.getNodeStyle(),i=t,o=i.x,a=i.y,s=i.r,l=n.prototype.getShape.call(this);return be("g",{},l,be("circle",js(js({},r),{cx:o,cy:a,r:s-5})))},e.extendKey="EndEventView",e}(Rs),YP={type:"bpmn:endEvent",view:GP,model:UP},Py=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VP=function(n){Py(e,n);function e(t,r){return t.id||(t.id="Flow_".concat(so())),n.call(this,t,r)||this}return e.extendKey="SequenceFlowModel",e}(na),KP=function(n){Py(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.extendKey="SequenceFlowEdge",e}(ia),qP={type:"bpmn:sequenceFlow",view:KP,model:VP},Ry=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$o=function(){return $o=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},$o.apply(this,arguments)},ZP=function(n){Ry(e,n);function e(t,r){var i=this;return t.id||(t.id="Gateway_".concat(so())),t.text||(t.text=""),t.text&&typeof t.text=="string"&&(t.text={value:t.text,x:t.x,y:t.y+40}),i=n.call(this,t,r)||this,i.points=[[25,0],[50,25],[25,50],[0,25]],i}return e.extendKey="ExclusiveGatewayModel",e}(Ms),JP=function(n){Ry(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getShape=function(){var t=this.props.model,r=t,i=r.x,o=r.y,a=r.width,s=r.height,l=r.points,u=t.getNodeStyle();return be("g",{transform:"matrix(1 0 0 1 ".concat(i-a/2," ").concat(o-s/2,")")},be("polygon",$o($o({},u),{x:i,y:o,points:l})),be("path",$o({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},u)))},e.extendKey="ExclusiveGatewayNode",e}(Ls),QP={type:"bpmn:exclusiveGateway",view:JP,model:ZP},Dy=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pc=function(){return pc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},pc.apply(this,arguments)},eR=function(n){Dy(e,n);function e(t,r){return t.id||(t.id="Activity_".concat(so())),n.call(this,t,r)||this}return e.extendKey="ServiceTaskModel",e}(Gi),tR=function(n){Dy(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.getNodeStyle();return be("svg",{x:r-o/2+5,y:i-a/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},be("path",{fill:s.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},e.prototype.getShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.radius,l=t.getNodeStyle();return be("g",{},[be("rect",pc({x:r-o/2,y:i-a/2,rx:s,ry:s,width:o,height:a},l)),this.getLabelShape()])},e.extendKey="ServiceTaskNode",e}(li),nR={type:"bpmn:serviceTask",view:tR,model:eR},Ly=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fs=function(){return Fs=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Fs.apply(this,arguments)},rR=function(n){Ly(e,n);function e(t,r){return t.id||(t.id="Activity_".concat(so())),n.call(this,t,r)||this}return e.extendKey="UserTaskModel",e}(Gi),iR=function(n){Ly(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.getNodeStyle();return be("svg",{x:r-o/2+5,y:i-a/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},be("path",{fill:s.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},e.prototype.getShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.radius,l=t.getNodeStyle();return be("g",{},[be("rect",Fs(Fs({},l),{x:r-o/2,y:i-a/2,rx:s,ry:s,width:o,height:a})),this.getLabelShape()])},e.extendKey="UserTaskNode",e}(li),oR={type:"bpmn:userTask",view:iR,model:rR},aR={pluginName:"bpmnElement",install:function(n){n.setTheme(FP),n.register(zP),n.register(YP),n.register(QP),n.register(oR),n.register(nR),n.options.customBpmnEdge||(n.register(qP),n.setDefaultEdgeType("bpmn:sequenceFlow"))}},sR=function(){function n(){globalThis._ids=this,this._ids=new Set}return n.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,function(e){var t=Math.random()*16|0,r=e==="x"?t:t&3|8;return r.toString(16)})},n.prototype.next=function(){for(var e=this.generateId();this._ids.has(e);)e=this.generateId();return this._ids.add(e),e},n}(),lR=(globalThis==null?void 0:globalThis._ids)||new sR;function jh(){return lR.next()}function ky(n){return Object.prototype.toString.call(n)}function uR(n){return"  ".repeat(n)}function Hs(n){var e=n;return ky(n)==="[object Object]"?(e={},Object.keys(n).forEach(function(t){var r=t;t.charAt(0)==="-"&&(r=t.substring(1)),e[r]=Hs(n[t])})):Array.isArray(n)&&(e=[],n.forEach(function(t,r){e[r]=Hs(t)})),e}function cR(n){var e=n;try{typeof e!="string"&&(e=JSON.parse(n))}catch(t){e=JSON.stringify(Hs(n)).replace(/"/g,"'")}return e}var Gr=`	
`;function Ja(n,e,t){var r=uR(t);if(n!==0&&n!==!1&&!n)return Gr+r+"<".concat(e," />");var i="";if(e==="#text")return Gr+r+n;if(e==="#cdata-section")return Gr+r+"<![CDATA["+n+"]]>";if(e==="#comment")return Gr+r+"<!--"+n+"-->";if("".concat(e).charAt(0)==="-")return" "+e.substring(1)+'="'+cR(n)+'"';if(Array.isArray(n))n.forEach(function(l){i+=Ja(l,e,t+1)});else if(ky(n)==="[object Object]"){var o=Object.keys(n),a="",s="";i+=(t===0?"":Gr+r)+"<"+e,o.forEach(function(l){l.charAt(0)==="-"?a+=Ja(n[l],l,t+1):s+=Ja(n[l],l,t+1)}),i+=a+(s!==""?">".concat(s).concat(Gr+r,"</").concat(e,">"):" />")}else i+=Gr+r+"<".concat(e,">").concat(n.toString(),"</").concat(e,">");return i}function fR(n){var e="";for(var t in n)e+=Ja(n[t],t,0);return e}var Kt=function(){};Kt.ObjTree=function(){return this};Kt.ObjTree.VERSION="0.23";Kt.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;Kt.ObjTree.prototype.attr_prefix="-";Kt.ObjTree.prototype.parseXML=function(n){var e;if(window.DOMParser){var t=new DOMParser,r=t.parseFromString(n,"application/xml");if(!r)return;e=r.documentElement}else window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(n),e=t.documentElement);if(e)return this.parseDOM(e)};Kt.ObjTree.prototype.parseHTTP=function(n,e,t){var r={};for(var i in e)r[i]=e[i];if(r.method||(typeof r.postBody=="undefined"&&typeof r.postbody=="undefined"&&typeof r.parameters=="undefined"?r.method="get":r.method="post"),t){r.asynchronous=!0;var o=this,a=t,s=r.onComplete;r.onComplete=function(c){var f;c&&c.responseXML&&c.responseXML.documentElement&&(f=o.parseDOM(c.responseXML.documentElement)),a(f,c),s&&s(c)}}else r.asynchronous=!1;var l;if(typeof HTTP!="undefined"&&HTTP.Request){r.uri=n;var u=new HTTP.Request(r);u&&(l=u.transport)}else if(typeof Ajax!="undefined"&&Ajax.Request){var u=new Ajax.Request(n,r);u&&(l=u.transport)}if(t)return l;if(l&&l.responseXML&&l.responseXML.documentElement)return this.parseDOM(l.responseXML.documentElement)};Kt.ObjTree.prototype.parseDOM=function(n){if(n){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var t=this.parseElement(n);if(this.__force_array[n.nodeName]&&(t=[t]),n.nodeType!=11){var r={};r[n.nodeName]=t,t=r}return t}};Kt.ObjTree.prototype.parseElement=function(n){if(n.nodeType!=7){if(n.nodeType==3||n.nodeType==4||n.nodeType==8){var e=n.nodeValue.match(/[^\x00-\x20]/);return e==null?void 0:n.nodeValue}var t=null,r={};if(n.attributes&&n.attributes.length){t={};for(var i=0;i<n.attributes.length;i++){var o=n.attributes[i].nodeName;if(typeof o=="string"){var a=n.attributes[i].nodeValue;try{a=JSON.parse(n.attributes[i].nodeValue.replace(/'/g,'"'))}catch(u){a=n.attributes[i].nodeValue}a&&(o=this.attr_prefix+o,typeof r[o]=="undefined"&&(r[o]=0),r[o]++,this.addNode(t,o,r[o],a))}}}if(n.childNodes&&n.childNodes.length){var s=!0;t&&(s=!1);for(var i=0;i<n.childNodes.length&&s;i++){var l=n.childNodes[i].nodeType;l==3||l==4||l==8||(s=!1)}if(s){t||(t="");for(var i=0;i<n.childNodes.length;i++)t+=n.childNodes[i].nodeValue}else{t||(t={});for(var i=0;i<n.childNodes.length;i++){var o=n.childNodes[i].nodeName;if(typeof o=="string"){var a=this.parseElement(n.childNodes[i]);a&&(typeof r[o]=="undefined"&&(r[o]=0),r[o]++,this.addNode(t,o,r[o],a))}}}}else t===null&&(t={});return t}};Kt.ObjTree.prototype.addNode=function(n,e,t,r){this.__force_array[e]?(t==1&&(n[e]=[]),n[e][n[e].length]=r):t==1?n[e]=r:t==2?n[e]=[n[e],r]:n[e][n[e].length]=r};Kt.ObjTree.prototype.writeXML=function(n){var e=this.hash_to_xml(null,n);return this.xmlDecl+e};Kt.ObjTree.prototype.hash_to_xml=function(n,e){var t=[],r=[];for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];i.charAt(0)!=this.attr_prefix?typeof o=="undefined"||o==null?t[t.length]="<"+i+" />":typeof o=="object"&&o.constructor==Array?t[t.length]=this.array_to_xml(i,o):typeof o=="object"?t[t.length]=this.hash_to_xml(i,o):t[t.length]=this.scalar_to_xml(i,o):r[r.length]=" "+i.substring(1)+'="'+this.xml_escape(o)+'"'}var a=r.join(""),s=t.join("");return typeof n=="undefined"||n==null||(t.length>0?s.match(/\n/)?s="<"+n+a+`>
`+s+"</"+n+`>
`:s="<"+n+a+">"+s+"</"+n+`>
`:s="<"+n+a+` />
`),s};Kt.ObjTree.prototype.array_to_xml=function(n,e){for(var t=[],r=0;r<e.length;r++){var i=e[r];typeof i=="undefined"||i==null?t[t.length]="<"+n+" />":typeof i=="object"&&i.constructor==Array?t[t.length]=this.array_to_xml(n,i):typeof i=="object"?t[t.length]=this.hash_to_xml(n,i):t[t.length]=this.scalar_to_xml(n,i)}return t.join("")};Kt.ObjTree.prototype.scalar_to_xml=function(n,e){return n=="#text"?this.xml_escape(e):"<"+n+">"+this.xml_escape(e)+"</"+n+`>
`};Kt.ObjTree.prototype.xml_escape=function(n){return n.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var dR=function(n){return new Kt.ObjTree().parseXML(n)},hR=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vc=function(){return vc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},vc.apply(this,arguments)},Nl=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},ir;(function(n){n.START="bpmn:startEvent",n.END="bpmn:endEvent",n.GATEWAY="bpmn:exclusiveGateway",n.USER="bpmn:userTask",n.SYSTEM="bpmn:serviceTask",n.FLOW="bpmn:sequenceFlow"})(ir||(ir={}));var Iy=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],Fh=["properties","startPoint","endPoint","pointsList"];function Hh(n){var e=n?Fh.concat(n):Fh;return function(t){function r(i){var o={};return typeof i=="string"?i:Array.isArray(i)?i.map(function(a){return r(a)}):(Object.entries(i).forEach(function(a){var s=Nl(a,2),l=s[0],u=s[1];typeof u!="object"?l.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(l)?o[l]=u:o["-".concat(l)]=u:e.includes(l)?o["-".concat(l)]=r(u):o[l]=r(u)}),o)}return r(t)}}function Ws(n){var e={};return Object.entries(n).forEach(function(t){var r=Nl(t,2),i=r[0],o=r[1];i.indexOf("-")===0?e[i.substring(1)]=Hs(o):typeof o=="string"?e[i]=o:Object.prototype.toString.call(o)==="[object Object]"?e[i]=Ws(o):Array.isArray(o)?e[i]=o.map(function(a){return Ws(a)}):e[i]=o}),e}function pR(n,e,t){var r=new Map;e.nodes.forEach(function(o){var a,s={"-id":o.id};if(!((a=o.text)===null||a===void 0)&&a.value&&(s["-name"]=o.text.value),o.properties){var l=Hh(t)(o.properties);Object.assign(s,l)}r.set(o.id,s),n[o.type]?Array.isArray(n[o.type])?n[o.type].push(s):n[o.type]=[n[o.type],s]:n[o.type]=s});var i=e.edges.map(function(o){var a,s,l=r.get(o.targetNodeId);l["bpmn:incoming"]?Array.isArray(l["bpmn:incoming"])?l["bpmn:incoming"].push(o.id):l["bpmn:incoming"]=[l["bpmn:incoming"],o.id]:l["bpmn:incoming"]=o.id;var u={"-id":o.id,"-sourceRef":o.sourceNodeId,"-targetRef":o.targetNodeId};if(!((a=o.text)===null||a===void 0)&&a.value&&(u["-name"]=(s=o.text)===null||s===void 0?void 0:s.value),o.properties){var c=Hh(t)(o.properties);Object.assign(u,c)}return u});e.edges.forEach(function(o){var a=r.get(o.sourceNodeId);a["bpmn:outgoing"]?Array.isArray(a["bpmn:outgoing"])?a["bpmn:outgoing"].push(o.id):a["bpmn:outgoing"]=[a["bpmn:outgoing"],o.id]:a["bpmn:outgoing"]=o.id}),n[ir.FLOW]=i}function vR(n,e){n["bpmndi:BPMNEdge"]=e.edges.map(function(t){var r,i=t.id,o=t.pointsList.map(function(s){var l=s.x,u=s.y;return{"-x":l,"-y":u}}),a={"-id":"".concat(i,"_di"),"-bpmnElement":i,"di:waypoint":o};return!((r=t.text)===null||r===void 0)&&r.value&&(a["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),a}),n["bpmndi:BPMNShape"]=e.nodes.map(function(t){var r,i=t.id,o=100,a=80,s=t.x,l=t.y,u=Wr.shapeConfigMap.get(t.type);u&&(o=u.width,a=u.height),s-=o/2,l-=a/2;var c={"-id":"".concat(i,"_di"),"-bpmnElement":i,"dc:Bounds":{"-x":s,"-y":l,"-width":o,"-height":a}};return!((r=t.text)===null||r===void 0)&&r.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),c})}function gR(n){var e=[],t=[],r=n["bpmn:definitions"];if(r){var i=r["bpmn:process"];Object.keys(i).forEach(function(o){if(o.indexOf("bpmn:")===0){var a=i[o];if(o===ir.FLOW){var s=r["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];t=mR(a,s)}else{var l=r["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];e=e.concat(yR(a,l,o))}}})}return{nodes:e,edges:t}}function yR(n,e,t){var r=[];if(Array.isArray(n))n.forEach(function(a){var s;Array.isArray(e)?s=e.find(function(u){return u["-bpmnElement"]===a["-id"]}):s=e;var l=Wh(s,t,a);r.push(l)});else{var i=void 0;Array.isArray(e)?i=e.find(function(a){return a["-bpmnElement"]===n["-id"]}):i=e;var o=Wh(i,t,n);r.push(o)}return r}function Wh(n,e,t){var r=Number(n["dc:Bounds"]["-x"]),i=Number(n["dc:Bounds"]["-y"]),o=t["-name"],a=Wr.shapeConfigMap.get(e);a&&(r+=a.width/2,i+=a.height/2);var s;Object.entries(t).forEach(function(f){var d=Nl(f,2),h=d[0],v=d[1];Iy.indexOf(h)===-1&&(s||(s={}),s[h]=v)}),s&&(s=Ws(s));var l;if(o&&(l={x:r,y:i,value:o},n["bpmndi:BPMNLabel"]&&n["bpmndi:BPMNLabel"]["dc:Bounds"])){var u=n["bpmndi:BPMNLabel"]["dc:Bounds"];l.x=Number(u["-x"])+Number(u["-width"])/2,l.y=Number(u["-y"])+Number(u["-height"])/2}var c={id:n["-bpmnElement"],type:e,x:r,y:i,properties:s};return l&&(c.text=l),c}function mR(n,e){var t=[];if(Array.isArray(n))n.forEach(function(i){var o;Array.isArray(e)?o=e.find(function(a){return a["-bpmnElement"]===i["-id"]}):o=e,t.push($h(o,i))});else{var r=void 0;Array.isArray(e)?r=e.find(function(i){return i["-bpmnElement"]===n["-id"]}):r=e,t.push($h(r,n))}return t}function $h(n,e){var t,r=e["-name"]?"".concat(e["-name"]):"";if(r){var i=n["bpmndi:BPMNLabel"]["dc:Bounds"],o=0;r.split(`
`).forEach(function(l){o<l.length&&(o=l.length)}),t={value:r,x:Number(i["-x"])+o*10/2,y:Number(i["-y"])+7}}var a;Object.entries(e).forEach(function(l){var u=Nl(l,2),c=u[0],f=u[1];Iy.indexOf(c)===-1&&(a||(a={}),a[c]=f)}),a&&(a=Ws(a));var s={id:e["-id"],type:ir.FLOW,pointsList:n["di:waypoint"].map(function(l){return{x:Number(l["-x"]),y:Number(l["-y"])}}),sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:a};return t&&(s.text=t),s}var Wr=function(){function n(e){var t=e.lf,r=this;this.adapterOut=function(i,o){var a=vc({},r.processAttributes);pR(a,i,o);var s={"-id":"BPMNPlane_1","-bpmnElement":a["-id"]};vR(s,i);var l=r.definitionAttributes;l["bpmn:process"]=a,l["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":s};var u={"bpmn:definitions":l};return u},this.adapterIn=function(i){if(i)return gR(i)},t.adapterIn=function(i){return r.adapterIn(i)},t.adapterOut=function(i,o){return r.adapterOut(i,o)},this.processAttributes={"-isExecutable":"true","-id":"Process_".concat(jh())},this.definitionAttributes={"-id":"Definitions_".concat(jh()),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return n.prototype.setCustomShape=function(e,t){n.shapeConfigMap.set(e,t)},n.pluginName="bpmn-adapter",n.shapeConfigMap=new Map,n}();Wr.shapeConfigMap.set(ir.START,{width:Dh.width,height:Dh.height});Wr.shapeConfigMap.set(ir.END,{width:Lh.width,height:Lh.height});Wr.shapeConfigMap.set(ir.GATEWAY,{width:kh.width,height:kh.height});Wr.shapeConfigMap.set(ir.SYSTEM,{width:Ih.width,height:Ih.height});Wr.shapeConfigMap.set(ir.USER,{width:Bh.width,height:Bh.height});(function(n){hR(e,n);function e(t){var r=n.call(this,t)||this;r.adapterXmlIn=function(o){var a=dR(o);return r.adapterIn(a)},r.adapterXmlOut=function(o,a){var s=r.adapterOut(o,a);return fR(s)};var i=t.lf;return i.adapterIn=r.adapterXmlIn,i.adapterOut=r.adapterXmlOut,r}return e.pluginName="bpmnXmlAdapter",e})(Wr);var _R=function(){function n(){globalThis._ids=this,this._ids=new Set}return n.prototype.generateId=function(){var e="xxxxxxx".replace(/[x]/g,function(t){var r=Math.random()*16|0,i=t==="x"?r:r&3|8;return i.toString(16)});return e},n.prototype.next=function(){for(var e=this.generateId();this._ids.has(e);)e=this.generateId();return this._ids.add(e),e},n}(),bR=(globalThis==null?void 0:globalThis._ids)||new _R;function xR(){return bR.next()}be("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),be("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),be("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),be("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),be("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),be("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),be("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),be("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),be("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),be("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),be("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),be("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),be("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),be("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});be("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});be("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});var ER=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qr=function(){return Qr=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Qr.apply(this,arguments)},wR=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},AR=Sn,SR=function(n){ER(e,n);function e(t){var r=n.call(this)||this;return r.updatePosition=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.x,u=s.y;r.nodeModel.x=l+o/2,r.nodeModel.y=u+a/2,r.nodeModel.moveText(o/2,a/2)},r.getResize=function(i){var o=i.index,a=i.deltaX,s=i.deltaY,l=i.width,u=i.height,c=i.PCTResizeInfo,f=i.pct,d=f===void 0?1:f,h=i.freezeWidth,v=h===void 0?!1:h,p=i.freezeHeight,g=p===void 0?!1:p,y={width:l,height:u,deltaX:a,deltaY:s};if(c){var b=4,C=0,D=0;switch(o){case 0:D=(a*-1-s)/b;break;case 1:D=(a-s)/b;break;case 2:D=(a+s)/b;break;case 3:D=(a*-1+s)/b;break}D!==0&&(C=Math.round(D/c.ResizeBasis.basisHeight*1e5)/1e3),c.ResizePCT.widthPCT=Math.max(Math.min(c.ResizePCT.widthPCT+C,c.ScaleLimit.maxScaleLimit),c.ScaleLimit.minScaleLimit),c.ResizePCT.heightPCT=Math.max(Math.min(c.ResizePCT.heightPCT+C,c.ScaleLimit.maxScaleLimit),c.ScaleLimit.minScaleLimit);var B=Math.round(c.ResizePCT.widthPCT*c.ResizeBasis.basisWidth/100),R=Math.round(c.ResizePCT.heightPCT*c.ResizeBasis.basisHeight/100);switch(o){case 0:a=l-B,s=u-R;break;case 1:a=B-l,s=u-R;break;case 2:a=B-l,s=R-u;break;case 3:a=l-B,s=R-u;break}return y.width=B,y.height=R,y.deltaX=a/d,y.deltaY=s/d,y}switch(o){case 0:y.width=v?l:l-a*d,y.height=g?u:u-s*d;break;case 1:y.width=v?l:l+a*d,y.height=g?u:u-s*d;break;case 2:y.width=v?l:l+a*d,y.height=g?u:u+s*d;break;case 3:y.width=v?l:l-a*d,y.height=g?u:u+s*d;break}return y},r.updateEdgePointByAnchors=function(){var i=r.nodeModel,o=i.id,a=i.anchors,s=r.getNodeEdges(o);s.sourceEdges.forEach(function(l){var u=a.find(function(c){return c.id===l.sourceAnchorId});u&&l.updateStartPoint({x:u.x,y:u.y})}),s.targetEdges.forEach(function(l){var u=a.find(function(c){return c.id===l.targetAnchorId});u&&l.updateEndPoint({x:u.x,y:u.y})})},r.updateRect=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.x,u=s.y,c=s.width,f=s.height,d=s.radius,h=s.PCTResizeInfo,v=r.nodeModel,p=v.minWidth,g=v.minHeight,y=v.maxWidth,b=v.maxHeight,C=r.index,D=p===y,B=g===b,R=r.getResize({index:C,deltaX:o,deltaY:a,width:c,height:f,PCTResizeInfo:h,pct:1,freezeWidth:D,freezeHeight:B});if(R.width<p||R.width>y||R.height<g||R.height>b){r.dragHandler.cancelDrag();return}r.updatePosition({deltaX:D?0:R.deltaX,deltaY:B?0:R.deltaY}),r.nodeModel.width=R.width,r.nodeModel.height=R.height,r.nodeModel.setProperties({nodeSize:{width:R.width,height:R.height}});var A={x:l,y:u,width:c,height:f,radius:d},O={x:r.nodeModel.x,y:r.nodeModel.y,width:r.nodeModel.width,height:r.nodeModel.height,radius:d};r.updateEdgePointByAnchors(),r.eventEmit({deltaX:o,deltaY:a,beforeNode:A,afterNode:O})},r.updateEllipse=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.rx,u=s.ry,c=s.x,f=s.y,d=s.PCTResizeInfo,h=r.index,v=r.nodeModel,p=v.minWidth,g=v.minHeight,y=v.maxWidth,b=v.maxHeight,C=p===y,D=g===b,B=l,R=u,A=r.getResize({index:h,deltaX:o,deltaY:a,width:B,height:R,PCTResizeInfo:d,pct:1/2,freezeWidth:C,freezeHeight:D});if(A.width<p/2||A.width>y/2||A.height<g/2||A.height>b/2){r.dragHandler.cancelDrag();return}r.updatePosition({deltaX:C?0:A.deltaX,deltaY:D?0:A.deltaY}),r.nodeModel.rx=A.width,r.nodeModel.ry=A.height,r.nodeModel.setProperties({nodeSize:{rx:A.width,ry:A.height}});var O={x:c,y:f},F={rx:A.width,ry:A.height,x:r.nodeModel.x,y:r.nodeModel.y};r.updateEdgePointByAnchors(),r.eventEmit({deltaX:o,deltaY:a,beforeNode:Qr(Qr({},O),{rx:l,ry:u}),afterNode:F})},r.updateDiamond=function(i){var o=i.deltaX,a=i.deltaY,s=r.nodeModel,l=s.rx,u=s.ry,c=s.x,f=s.y,d=s.PCTResizeInfo,h=r.index,v=r.nodeModel,p=v.minWidth,g=v.minHeight,y=v.maxWidth,b=v.maxHeight,C=p===y,D=g===b,B=l,R=u,A=r.getResize({index:h,deltaX:o,deltaY:a,width:B,height:R,PCTResizeInfo:d,pct:1/2,freezeWidth:C,freezeHeight:D});if(A.width<p/2||A.width>y/2||A.height<g/2||A.height>b/2){r.dragHandler.cancelDrag();return}r.updatePosition({deltaX:C?0:A.deltaX,deltaY:D?0:A.deltaY}),r.nodeModel.rx=A.width,r.nodeModel.ry=A.height,r.nodeModel.setProperties({nodeSize:{rx:A.width,ry:A.height}});var O={x:c,y:f,rx:l,ry:u},F={rx:A.width,ry:A.height,x:r.nodeModel.x,y:r.nodeModel.y};r.updateEdgePointByAnchors(),r.eventEmit({deltaX:o,deltaY:a,beforeNode:O,afterNode:F})},r.eventEmit=function(i){var o=i.deltaX,a=i.deltaY,s=i.beforeNode,l=i.afterNode,u=r.nodeModel,c=u.id,f=u.modelType,d=u.type,h=Qr({id:c,modelType:f,type:d},s),v=Qr({id:c,modelType:f,type:d},l);r.graphModel.eventCenter.emit("node:resize",{preData:h,data:v,deltaX:o,deltaY:a,index:r.index,model:r.nodeModel})},r.onDragging=function(i){var o,a=i.deltaX,s=i.deltaY,l=r.graphModel.transformModel,u=r.nodeModel.modelType;o=wR(l.fixDeltaXY(a,s),2),a=o[0],s=o[1],u===He.RECT_NODE||u===He.HTML_NODE?r.updateRect({deltaX:a,deltaY:s}):u===He.ELLIPSE_NODE?r.updateEllipse({deltaX:a,deltaY:s}):u===He.DIAMOND_NODE&&r.updateDiamond({deltaX:a,deltaY:s})},r.onDragEnd=function(){var i=r.graphModel.gridSize,o=i===void 0?1:i,a=o*Math.round(r.nodeModel.x/o),s=o*Math.round(r.nodeModel.y/o);r.nodeModel.moveTo(a,s),r.updateEdgePointByAnchors()},r.index=t.index,r.nodeModel=t.model,r.graphModel=t.graphModel,r.dragHandler=new AR({onDragging:r.onDragging,onDragEnd:r.onDragEnd,step:1}),r}return e.prototype.getNodeEdges=function(t){for(var r=this.graphModel,i=r.edges,o=[],a=[],s=0;s<i.length;s++){var l=i[s];l.sourceNodeId===t?o.push(l):i[s].targetNodeId===t&&a.push(l)}return{sourceEdges:o,targetEdges:a}},e.prototype.render=function(){var t=this.props,r=t.x,i=t.y,o=t.index,a=t.model,s=a.getControlPointStyle();return j("g",{className:"lf-resize-control-".concat(o),children:j(gn,Qr({className:"lf-node-control",x:r,y:i},s,{onMouseDown:this.dragHandler.handleMouseDown}))})},e}(Ue),CR=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$s=function(){return $s=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},$s.apply(this,arguments)},Pl=function(n){CR(e,n);function e(){var t=n.call(this)||this;return t.state={},t}return e.prototype.getResizeControl=function(){var t=this.props,r=t.model,i=t.graphModel,o=r.x,a=r.y,s=r.width,l=r.height,u={minX:o-s/2,minY:a-l/2,maxX:o+s/2,maxY:a+l/2},c=u.minX,f=u.minY,d=u.maxX,h=u.maxY,v=[{x:c,y:f},{x:d,y:f},{x:d,y:h},{x:c,y:h}];return v.map(function(p,g){return j(SR,$s({index:g},p,{model:r,graphModel:i}))})},e.prototype.getGroupSolid=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.getResizeOutlineStyle();return j(gn,$s({},s,{x:r,y:i,width:o,height:a}))},e.prototype.render=function(){return j("g",{className:"lf-resize-control",children:[this.getGroupSolid(),this.getResizeControl()]})},e}(Ue),By=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){By(e,n);function e(t,r){var i=n.call(this,t,r)||this,o=t.properties.nodeSize;return o&&(i.rx=o.rx,i.ry=o.ry),i}return e.prototype.initNodeData=function(t){n.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var t=n.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},o={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e})(Ku);(function(n){By(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props,r=t.model,i=t.graphModel;return j(Pl,{model:r,graphModel:i})},e.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,r=t.model,i=t.graphModel.editConfigModel.isSilentMode;return j("g",{children:[this.getResizeShape(),r.isSelected&&!i?this.getControlGroup():""]})},e})(ac);var jy=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gc=function(){return gc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},gc.apply(this,arguments)};(function(n){jy(e,n);function e(t,r){var i=n.call(this,t,r)||this,o=t.properties.nodeSize;return o&&(i.rx=o.rx,i.ry=o.ry),i}return e.prototype.initNodeData=function(t){n.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},e.prototype.getOutlineStyle=function(){var t=n.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},o={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e})(Vu);(function(n){jy(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props,r=t.model,i=t.graphModel;return j(Pl,{model:r,graphModel:i})},e.prototype.getResizeShape=function(){var t=this.props.model,r=t.points,i=t.getNodeStyle();return j("g",{children:j(bf,gc({},i,{points:r}))})},e.prototype.getShape=function(){var t=this.props,r=t.model.isSelected,i=t.graphModel.editConfigModel.isSilentMode;return j("g",{children:[this.getResizeShape(),r&&!i?this.getControlGroup():""]})},e})(ic);var Fy=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){Fy(e,n);function e(t,r){var i=n.call(this,t,r)||this,o=t.properties.nodeSize;return o&&(i.width=o.width,i.height=o.height),i}return e.prototype.initNodeData=function(t){n.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var t=n.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.width,basisHeight:this.height},o={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e})(qu);(function(n){Fy(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props,r=t.model,i=t.graphModel;return j(Pl,{model:r,graphModel:i})},e.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,r=t.model.isSelected,i=t.graphModel.editConfigModel.isSilentMode;return j("g",{children:[this.getResizeShape(),r&&!i?this.getControlGroup():""]})},e})(lc);var Hy=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),OR=function(n){Hy(e,n);function e(t,r){var i=n.call(this,t,r)||this,o=t.properties.nodeSize;return o&&(i.width=o.width,i.height=o.height),i}return e.prototype.initNodeData=function(t){n.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var t=n.prototype.getOutlineStyle.call(this),r=this.graphModel.editConfigModel.isSilentMode;return r||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var r={widthPCT:100,heightPCT:100},i={basisWidth:this.width,basisHeight:this.height},o={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:r,ResizeBasis:i,ScaleLimit:o}}else delete this.PCTResizeInfo},e}(Gi),TR=function(n){Hy(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props,r=t.model,i=t.graphModel;return j(Pl,{model:r,graphModel:i})},e.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,r=t.model.isSelected,i=t.graphModel.editConfigModel.isSilentMode;return j("g",{children:[this.getResizeShape(),r&&!i?this.getControlGroup():""]})},e}(li),Wy=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xs=function(){return Xs=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Xs.apply(this,arguments)},Yr=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Vr=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},Xh=500,zh=300,MR=-1e4;(function(n){Wy(e,n);function e(){var t=n.apply(this,Vr([],Yr(arguments),!1))||this;return t.isGroup=!0,t.isFolded=!1,t.unfoldedWidth=Xh,t.unfoldedHeight=zh,t.childrenLastFoldStatus={},t}return e.prototype.initNodeData=function(t){var r=this;n.prototype.initNodeData.call(this,t);var i=[];dt(t.children)&&(i=t.children),this.children=new Set(i),this.width=Xh,this.height=zh,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=MR,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=!!this.properties.isFolded,setTimeout(function(){r.isFolded&&r.foldGroup(r.isFolded)})},e.prototype.getResizeOutlineStyle=function(){var t=n.prototype.getResizeOutlineStyle.call(this);return t.stroke="none",t},e.prototype.foldGroup=function(t){var r=this;if(t!==this.isFolded){this.setProperty("isFolded",t),this.isFolded=t,t?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHeight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHeight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var i=Vr(Vr([],Yr(this.incoming.edges),!1),Yr(this.outgoing.edges),!1);this.children.forEach(function(o){var a=r.graphModel.getElement(o);if(a){var s=a.isFolded;if(a.isGroup&&!a.isFolded&&a.foldGroup(t),a.isGroup&&!t){var l=r.childrenLastFoldStatus[o];l!==void 0&&l!==a.isFolded&&a.foldGroup(l)}r.childrenLastFoldStatus[o]=!!s,a.visible=!t;var u=a.incoming.edges,c=a.outgoing.edges;i=Vr(Vr(Vr([],Yr(i),!1),Yr(u),!1),Yr(c),!1)}}),this.foldEdge(t,i)}},e.prototype.getAnchorStyle=function(t){var r=n.prototype.getAnchorStyle.call(this,t);return r.stroke="transparent",r.fill="transparent",r.hover.fill="transparent",r.hover.stroke="transparent",r},e.prototype.foldEdge=function(t,r){var i=this;r.forEach(function(o,a){var s=o.id,l=o.sourceNodeId,u=o.targetNodeId,c=o.startPoint,f=o.endPoint,d=o.type,h=o.text,v=o.getProperties(),p={id:"".concat(s,"__").concat(a),sourceNodeId:l,targetNodeId:u,startPoint:c,endPoint:f,type:d,properties:v,text:h==null?void 0:h.value};o.virtual&&i.graphModel.deleteEdgeById(o.id);var g=i.graphModel.group.getNodeGroup(u);g||(g=i.graphModel.getNodeModelById(u));var y=i.graphModel.group.getNodeGroup(l);y||(y=i.graphModel.getNodeModelById(l)),t&&o.visible!==!1&&(i.children.has(l)||i.id===l?(p.startPoint=void 0,p.sourceNodeId=i.id):(p.endPoint=void 0,p.targetNodeId=i.id),(g.id!==i.id||y.id!==i.id)&&i.createVirtualEdge(p),o.visible=!1),!t&&o.visible===!1&&(g&&g.isGroup&&g.isFolded?(p.targetNodeId=g.id,p.endPoint=void 0,i.createVirtualEdge(p)):y&&y.isGroup&&y.isFolded?(p.sourceNodeId=y.id,p.startPoint=void 0,i.createVirtualEdge(p)):o.visible=!0)})},e.prototype.createVirtualEdge=function(t){t.pointsList=void 0;var r=this.graphModel.addEdge(t);r.virtual=!0,r.text.editable=!1,r.isFoldedEdge=!0},e.prototype.isInRange=function(t){var r=t.minX,i=t.minY,o=t.maxX,a=t.maxY;return r>=this.x-this.width/2&&o<=this.x+this.width/2&&i>=this.y-this.height/2&&a<=this.y+this.height/2},e.prototype.isAllowMoveTo=function(t){var r=t.minX,i=t.minY,o=t.maxX,a=t.maxY;return{x:r>=this.x-this.width/2&&o<=this.x+this.width/2,y:i>=this.y-this.height/2&&a<=this.y+this.height/2}},e.prototype.setAllowAppendChild=function(t){this.setProperty("groupAddable",t)},e.prototype.addChild=function(t){this.children.add(t),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},e.prototype.removeChild=function(t){this.children.delete(t),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},e.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},e.prototype.getData=function(){var t=this,r=n.prototype.getData.call(this);r.children=[],console.log("this.children",this.children),this.children.forEach(function(o){var a=t.graphModel.getNodeModelById(o);a&&!a.virtual&&r.children.push(o)});var i=r.properties;return i==null||delete i.groupAddable,i==null||delete i.isFolded,r},e.prototype.getHistoryData=function(){var t=n.prototype.getData.call(this);t.children=Vr([],Yr(this.children),!1),t.isGroup=!0;var r=t.properties;return r==null||delete r.groupAddable,r!=null&&r.isFolded&&(t.x=t.x+this.unfoldedWidth/2-this.foldedWidth/2,t.y=t.y+this.unfoldedHeight/2-this.foldedHeight/2),t},e.prototype.isAllowAppendIn=function(t){return console.info("_nodeData",t),!0},e.prototype.toBack=function(){this.zIndex--},e})(OR);(function(n){Wy(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getControlGroup=function(){var t=this.props.model,r=t.resizable,i=t.properties;return r&&!i.isFolded?n.prototype.getControlGroup.call(this):null},e.prototype.getAddableShape=function(){var t=this.props.model,r=t.width,i=t.height,o=t.x,a=t.y,s=t.radius,l=t.properties,u=t.getAddableOutlineStyle;if(!l.groupAddable)return null;var c=this.props.model.getNodeStyle().strokeWidth,f=c===void 0?0:c,d=u(),h=r+f+8,v=i+f+8;return be("rect",Xs(Xs({},d),{width:h,height:v,x:o-h/2,y:a-v/2,rx:s,ry:s}))},e.prototype.getFoldIcon=function(){var t=this.props.model,r=t.x-t.width/2+5,i=t.y-t.height/2+5;if(!t.foldable)return null;var o=be("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:t.properties.isFolded?"M ".concat(r+3,",").concat(i+6," ").concat(r+11,",").concat(i+6," M").concat(r+7,",").concat(i+2," ").concat(r+7,",").concat(i+10):"M ".concat(r+3,",").concat(i+6," ").concat(r+11,",").concat(i+6," ")});return be("g",{},[be("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:t.x-t.width/2+5,y:t.y-t.height/2+5,onClick:function(){t.foldGroup(!t.properties.isFolded)}}),o])},e.prototype.getResizeShape=function(){return be("g",{},[this.getAddableShape(),n.prototype.getResizeShape.call(this),this.getFoldIcon()])},e})(TR);var Uh=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xo=function(){return Xo=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Xo.apply(this,arguments)};function NR(n){var e=function(r){Uh(i,r);function i(o,a){o.id||(o.id="Flow_".concat(xR()));var s=Xo(Xo(Xo({},{}),o.properties),{isDefaultFlow:!1});return o.properties=s,r.call(this,o,a)||this}return i.extendKey="SequenceFlowModel",i}(na),t=function(r){Uh(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.getStartArrow=function(){var o=this.props.model,a=o.properties.isDefaultFlow;return a?be("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):be("path",{d:""})},i.extendKey="SequenceFlowEdge",i}(ia);return{type:"bpmn:sequenceFlow",view:t,model:e}}NR();var Gh={width:40,height:40},Yh={width:40,height:40},Vh={width:100,height:80},zs={width:100,height:80},Kh={width:100,height:80},qh={width:100,height:80},Zh={width:100,height:80},Jh={width:100,height:80},Qh={width:100,height:80},ep={width:100,height:80},qt=function(){};qt.ObjTree=function(){return this};qt.ObjTree.VERSION="0.23";qt.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;qt.ObjTree.prototype.attr_prefix="-";qt.ObjTree.prototype.parseXML=function(n){var e;if(window.DOMParser){var t=new DOMParser,r=t.parseFromString(n,"application/xml");if(!r)return;e=r.documentElement}else window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(n),e=t.documentElement);if(e){var i=this.parseDOM(e);return i}};qt.ObjTree.prototype.parseHTTP=function(n,e,t){var r={};for(var i in e)r[i]=e[i];if(r.method||(typeof r.postBody=="undefined"&&typeof r.postbody=="undefined"&&typeof r.parameters=="undefined"?r.method="get":r.method="post"),t){r.asynchronous=!0;var o=this,a=t,s=r.onComplete;r.onComplete=function(c){var f;c&&c.responseXML&&c.responseXML.documentElement&&(f=o.parseDOM(c.responseXML.documentElement)),a(f,c),s&&s(c)}}else r.asynchronous=!1;var l;if(typeof HTTP!="undefined"&&HTTP.Request){r.uri=n;var u=new HTTP.Request(r);u&&(l=u.transport)}else if(typeof Ajax!="undefined"&&Ajax.Request){var u=new Ajax.Request(n,r);u&&(l=u.transport)}if(t)return l;if(l&&l.responseXML&&l.responseXML.documentElement)return this.parseDOM(l.responseXML.documentElement)};qt.ObjTree.prototype.parseDOM=function(n){if(n){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var t=this.parseElement(n);if(this.__force_array[n.nodeName]&&(t=[t]),n.nodeType!==11){var r={};r[n.nodeName]=t,t=r}return t}};qt.ObjTree.prototype.parseElement=function(n){if(n.nodeType!==7){if(n.nodeType===3||n.nodeType===4||n.nodeType===8){var e=n.nodeValue.match(/[^\x00-\x20]/);return e==null?void 0:n.nodeValue}var t=null,r={};if(n.attributes&&n.attributes.length){t={};for(var i=0;i<n.attributes.length;i++){var o=n.attributes[i].nodeName;if(typeof o=="string"){var a=n.attributes[i].nodeValue;try{a=JSON.parse(n.attributes[i].nodeValue.replace(/'/g,'"'))}catch(u){a=n.attributes[i].nodeValue}a!=null&&(o=this.attr_prefix+o,typeof r[o]=="undefined"&&(r[o]=0),r[o]++,this.addNode(t,o,r[o],a))}}}if(n.childNodes&&n.childNodes.length){var s=!0;t&&(s=!1);for(var i=0;i<n.childNodes.length&&s;i++){var l=n.childNodes[i].nodeType;l===3||l===4||l===8||(s=!1)}if(s){t||(t="");for(var i=0;i<n.childNodes.length;i++)t+=n.childNodes[i].nodeValue}else{t||(t={});for(var i=0;i<n.childNodes.length;i++){var o=n.childNodes[i].nodeName;if(typeof o=="string"){var a=this.parseElement(n.childNodes[i]);a&&(typeof r[o]=="undefined"&&(r[o]=0),r[o]++,this.addNode(t,o,r[o],a))}}}}else t===null&&(t={});return t}};qt.ObjTree.prototype.addNode=function(n,e,t,r){this.__force_array[e]?(t===1&&(n[e]=[]),n[e][n[e].length]=r):t===1?n[e]=r:t===2?n[e]=[n[e],r]:n[e][n[e].length]=r};qt.ObjTree.prototype.writeXML=function(n){var e=this.hash_to_xml(null,n);return this.xmlDecl+e};qt.ObjTree.prototype.hash_to_xml=function(n,e){var t=[],r=[];for(var i in e)if(ss(e,i)){var o=e[i];i.charAt(0)!==this.attr_prefix?typeof o=="undefined"||o==null?t[t.length]="<".concat(i," />"):typeof o=="object"&&o.constructor===Array?t[t.length]=this.array_to_xml(i,o):typeof o=="object"?t[t.length]=this.hash_to_xml(i,o):t[t.length]=this.scalar_to_xml(i,o):r[r.length]=" ".concat(i.substring(1),'="').concat(this.xml_escape(o),'"')}var a=r.join(""),s=t.join("");return typeof n=="undefined"||n==null||(t.length>0?s.match(/\n/)?s="<".concat(n).concat(a,`>
`).concat(s,"</").concat(n,`>
`):s="<".concat(n).concat(a,">").concat(s,"</").concat(n,`>
`):s="<".concat(n).concat(a,` />
`)),s};qt.ObjTree.prototype.array_to_xml=function(n,e){for(var t=[],r=0;r<e.length;r++){var i=e[r];typeof i=="undefined"||i==null?t[t.length]="<".concat(n," />"):typeof i=="object"&&i.constructor===Array?t[t.length]=this.array_to_xml(n,i):typeof i=="object"?t[t.length]=this.hash_to_xml(n,i):t[t.length]=this.scalar_to_xml(n,i)}return t.join("")};qt.ObjTree.prototype.scalar_to_xml=function(n,e){return n==="#text"?this.xml_escape(e):"<".concat(n,">").concat(this.xml_escape(e),"</").concat(n,`>
`)};qt.ObjTree.prototype.xml_escape=function(n){return n.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var PR=function(n){return new qt.ObjTree().parseXML(n)};function $y(n){return Object.prototype.toString.call(n)}function tp(n){return"  ".repeat(n)}function Us(n){return $y(n)==="[object Object]"?Object.keys(n).reduce(function(e,t){var r=t;return t.charAt(0)==="-"&&(r=t.substring(1)),e[r]=Us(n[t]),e},{}):Array.isArray(n)?n.map(function(e){return Us(e)}):n}function RR(n){var e=n;try{typeof e!="string"&&(e=JSON.parse(n))}catch(t){e=JSON.stringify(Us(n)).replace(/"/g,"'")}return e}var np=`	
`;function Qa(n,e,t){var r=tp(t),i="",o=np+r;if(e==="-json")return"";if(e==="#text")return o+n;if(e==="#cdata-section")return"".concat(o,"<![CDATA[").concat(n,"]]>");if(e==="#comment")return"".concat(o,"<!--").concat(n,"-->");if("".concat(e).charAt(0)==="-")return" ".concat(e.substring(1),'="').concat(RR(n),'"');if(Array.isArray(n))i+=n.map(function(u){return Qa(u,e,t+1)}).join("");else if($y(n)==="[object Object]"){var a=Object.keys(n),s="",l=n["-json"]?np+tp(t+1)+n["-json"]:"";i+="".concat(t===0?"":o,"<").concat(e),a.forEach(function(u){u.charAt(0)==="-"?s+=Qa(n[u],u,t+1):l+=Qa(n[u],u,t+1)}),i+=s+(l!==""?">".concat(l).concat(o,"</").concat(e,">"):" />")}else i+="".concat(o,"<").concat(e,">").concat(n.toString(),"</").concat(e,">");return i}function DR(n){var e="";for(var t in n)e+=Qa(n[t],t,0);return e}var LR=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yc=function(){return yc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},yc.apply(this,arguments)},rp=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},wf=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wt=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},Rn=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},Yt;(function(n){n.START="bpmn:startEvent",n.END="bpmn:endEvent",n.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",n.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",n.BOUNDARY="bpmn:boundaryEvent",n.PARALLEL_GATEWAY="bpmn:parallelGateway",n.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",n.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",n.USER="bpmn:userTask",n.SYSTEM="bpmn:serviceTask",n.FLOW="bpmn:sequenceFlow",n.SUBPROCESS="bpmn:subProcess"})(Yt||(Yt={}));var Xy=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],kR=["properties","startPoint","endPoint","pointsList"],Gs={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},zy=function(n,e){var t=Object.keys(e||{});return t.forEach(function(r){if(n[r]){var i=e[r],o=i.in,a=i.out;o&&(n[r].in=o),a&&(n[r].out=a)}else n[r]=e[r]}),n},pn={"bpmn:startEvent":{out:function(n){var e,t,r=n.properties;return((t=(e=pn[r.definitionType])===null||e===void 0?void 0:e.out)===null||t===void 0?void 0:t.call(e,n))||{}}},"bpmn:intermediateCatchEvent":{out:function(n){var e,t,r=n.properties;return((t=(e=pn[r.definitionType])===null||e===void 0?void 0:e.out)===null||t===void 0?void 0:t.call(e,n))||{}}},"bpmn:intermediateThrowEvent":{out:function(n){var e,t,r=n.properties;return((t=(e=pn[r.definitionType])===null||e===void 0?void 0:e.out)===null||t===void 0?void 0:t.call(e,n))||{}}},"bpmn:boundaryEvent":{out:function(n){var e,t,r=n.properties;return((t=(e=pn[r.definitionType])===null||e===void 0?void 0:e.out)===null||t===void 0?void 0:t.call(e,n))||{}}},"bpmn:sequenceFlow":{out:function(n){var e=n.properties,t=e.expressionType,r=e.condition;return r?t==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'.concat(r,"}]]></bpmn:conditionExpression>")}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'.concat(r,"</bpmn:conditionExpression>")}:{json:""}}},"bpmn:timerEventDefinition":{out:function(n){var e=n.properties,t=e.timerType,r=e.timerValue,i=e.definitionId,o=function(){return"<bpmn:".concat(t,' xsi:type="bpmn:tFormalExpression">').concat(r,"</bpmn:").concat(t,">")};return{json:'<bpmn:timerEventDefinition id="'.concat(i,'"').concat(t&&r?">".concat(o(),"</bpmn:timerEventDefinition>"):"/>")}},in:function(n,e){var t,r,i,o,a=n,s=e["-id"],l="",u="";try{for(var c=wf(Object.keys(e)),f=c.next();!f.done;f=c.next()){var d=f.value;d.includes("bpmn:")&&(i=Wt(d.split(":"),2),l=i[1],u=(o=e[d])===null||o===void 0?void 0:o["#text"])}}catch(h){t={error:h}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return{"-definitionId":s,"-definitionType":a,"-timerType":l,"-timerValue":u}}},"bpmn:conditionExpression":{in:function(n,e){var t,r="",i="";return e["#cdata-section"]?(i="cdata",r=((t=/^\$\{(.*)\}$/g.exec(e["#cdata-section"]))===null||t===void 0?void 0:t[1])||""):e["#text"]&&(i="normal",r=e["#text"]),{"-condition":r,"-expressionType":i}}}};function IR(n){var e=n!=null?n:{},t=e.retainedAttrsFields,r=e.excludeFields,i=e.transformer,o=new Set(Rn(Rn([],Wt(kR),!1),Wt(t||[]),!1)),a={in:new Set(Rn(Rn([],Wt(Gs.in),!1),Wt((r==null?void 0:r.in)||[]),!1)),out:new Set(Rn(Rn([],Wt(Gs.out),!1),Wt((r==null?void 0:r.out)||[]),!1))};return pn=zy(pn,i),function(s){var l=s.nodes,u=s.edges;function c(f,d){var h,v;if((f==null?void 0:f.flag)!==1){var p;if((p=pn[f.type])&&p.out){var g=p.out(f),y=Object.keys(g);y.length>0&&y.forEach(function(F){f[F]=g[F]})}f!=null&&f.children&&(f.children=f.children.map(function(F){var Z=l.find(function(ue){return ue.id===F})||u.find(function(ue){return ue.id===F});return Z||{}}));var b={};if(typeof f=="string")return f;if(Array.isArray(f))return f.map(function(F){return c(F,"")}).filter(function(F){return F!=null});try{for(var C=wf(Object.entries(f)),D=C.next();!D.done;D=C.next()){var B=Wt(D.value,2),R=B[0],A=B[1];if((A==null?void 0:A.flag)===1)return;var O=[d,R].filter(function(F){return F}).join(".");a.out.has(O)||(typeof A!="object"?R.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(R)?b[R]=A:b["-".concat(R)]=A:o.has(O)?b["-".concat(R)]=c(A,O):b[R]=c(A,O))}}catch(F){h={error:F}}finally{try{D&&!D.done&&(v=C.return)&&v.call(C)}finally{if(h)throw h.error}}return b}}return c(s,"")}}function Ys(n){var e,t,r={};try{for(var i=wf(Object.entries(n)),o=i.next();!o.done;o=i.next()){var a=Wt(o.value,2),s=a[0],l=a[1];s.indexOf("-")===0?r[s.substring(1)]=Us(l):typeof l=="string"?r[s]=l:Object.prototype.toString.call(l)==="[object Object]"?r[s]=Ys(l):Array.isArray(l)?r[s]=l.map(function(u){return Ys(u)}):r[s]=l}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r}function BR(n,e,t){var r,i=new Map,o=IR(t)(e);o.nodes.forEach(function(s){var l=s["-id"],u=s["-type"],c=s.text,f=s.children,d=rp(s,["-id","-type","text","children"]),h={"-id":l};c!=null&&c["-value"]&&(h["-name"]=c["-value"]),d["-json"]&&(h["-json"]=d["-json"]),d["-properties"]&&Object.assign(h,d["-properties"]),f&&(h.children=f),n[u]||(n[u]=[]),n[u].push(h),i.set(l,h)});var a=o.edges.map(function(s){var l=s["-id"],u=s["-sourceNodeId"],c=s["-targetNodeId"],f=s.text,d=rp(s,["-id","-sourceNodeId","-targetNodeId","text"]),h=i.get(c);h["bpmn:incoming"]||(h["bpmn:incoming"]=[]),h["bpmn:incoming"].push(l);var v={"-id":l,"-sourceRef":u,"-targetRef":c};return f!=null&&f["-value"]&&(v["-name"]=f["-value"]),d["-json"]&&(v["-json"]=d["-json"]),d["-properties"]&&Object.assign(v,d["-properties"]),v});return e.edges.forEach(function(s){var l=s.sourceNodeId,u=s.id,c=i.get(l);c["bpmn:outgoing"]||(c["bpmn:outgoing"]=[]),c["bpmn:outgoing"].push(u)}),(r=n["bpmn:subProcess"])===null||r===void 0||r.forEach(function(s){var l={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},u=[];s.children.forEach(function(p){var g,y=i.get(p["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function(C){y[C]&&y[C].forEach(function(D){l[C].add(D)})});var b=(g=n[p["-type"]])===null||g===void 0?void 0:g.findIndex(function(C){return C["-id"]===p["-id"]});b>=0&&n[p["-type"]].splice(b,1),i.delete(p["-id"]),s[p["-type"]]||(s[p["-type"]]=[]),s[p["-type"]].push(y)});var c=l["bpmn:incoming"],f=l["bpmn:outgoing"];f.forEach(function(p){c.has(p)&&u.push(p)});for(var d=function(p){var g=a.findIndex(function(y){return y["-id"]===u[p]});g>=0?(s["bpmn:sequenceFlow"]||(s["bpmn:sequenceFlow"]=[]),s["bpmn:sequenceFlow"].push(a[g]),a.splice(g,1)):p++,h=p},h,v=0;v<u.length;)d(v),v=h;delete s.children}),n[Yt.FLOW]=a,n}function jR(n,e){n["bpmndi:BPMNEdge"]=e.edges.map(function(t){var r,i=t.id,o=t.pointsList.map(function(s){var l=s.x,u=s.y;return{"-x":l,"-y":u}}),a={"-id":"".concat(i,"_di"),"-bpmnElement":i,"di:waypoint":o};return!((r=t.text)===null||r===void 0)&&r.value&&(a["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),a}),n["bpmndi:BPMNShape"]=e.nodes.map(function(t){var r,i=t.id,o=100,a=80,s=t.x,l=t.y,u=sn.shapeConfigMap.get(t.type);u&&(o=u.width,a=u.height),s-=o/2,l-=a/2;var c={"-id":"".concat(i,"_di"),"-bpmnElement":i,"dc:Bounds":{"-x":s,"-y":l,"-width":o,"-height":a}};return!((r=t.text)===null||r===void 0)&&r.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),c})}var FR=["bpmn:incoming","bpmn:outgoing"];function HR(n,e){var t=[],r=[],i=new Map,o=e!=null?e:{},a=o.transformer,s=o.excludeFields,l={in:new Set(Rn(Rn([],Wt(Gs.in),!1),Wt((s==null?void 0:s.in)||[]),!1)),out:new Set(Rn(Rn([],Wt(Gs.out),!1),Wt((s==null?void 0:s.out)||[]),!1))};pn=zy(pn,a);var u=n["bpmn:definitions"];if(u){var c=u["bpmn:process"];(function(d,h){h.forEach(function(v){try{Object.keys(d).forEach(function(p){try{v(p)}catch(g){console.error(g)}})}catch(p){console.error(p)}})})(c,[function(d){function h(p){p["-children"]||(p["-children"]=[]),Object.keys(p).forEach(function(g){var y;g.indexOf("bpmn:")===0&&!FR.includes(g)&&(c[g]||(c[g]=[]),!Array.isArray(c[g])&&(c[g]=[c[g]]),Array.isArray(p[g])?(y=c[g]).push.apply(y,Rn([],Wt(p[g]),!1)):c[g].push(p[g]),Array.isArray(p[g])?p[g].forEach(function(b){!g.includes("Flow")&&p["-children"].push(b["-id"])}):!g.includes("Flow")&&p["-children"].push(p[g]["-id"]),delete p[g])})}if(d==="bpmn:subProcess"){var v=c[d];Array.isArray(v)?v.forEach(function(p){d==="bpmn:subProcess"&&h(p)}):h(v)}},function(d){var h=function(p){Object.keys(p).forEach(function(g){var y,b;if(g.includes("bpmn:")){var C={};pn[g]&&pn[g].in?(C=(b=(y=pn[g]).in)===null||b===void 0?void 0:b.call(y,g,m.cloneDeep(p[g])),delete p[g]):v(p[g]);var D=void 0;(D=Reflect.ownKeys(C)).length>0&&D.forEach(function(B){Reflect.set(p,B,C[B])})}})};function v(p){i.set(p["-id"],p),Array.isArray(p)?p.forEach(function(g){v(g)}):typeof p=="object"&&h(p)}v(c[d])},function(d){if(d.indexOf("bpmn:")===0){var h=c[d];if(d==="bpmn:sequenceFlow"){var v=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];r=$R(h,v)}else{var p=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(d==="bpmn:boundaryEvent"){var g=c[d],y=function(b){var C=b["-attachedToRef"],D=i.get(C);D["-boundaryEvents"]||(D["-boundaryEvents"]=[]),D["-boundaryEvents"].push(b["-id"])};Array.isArray(g)?g.forEach(function(b){y(b)}):y(g)}t=t.concat(WR(h,p,d))}}}])}var f=function(d,h,v){Object.keys(d).forEach(function(p){var g=v?"".concat(v,".").concat(p):p;h.has(g)?delete d[p]:typeof d[p]=="object"&&f(d[p],h,g)})};return t.forEach(function(d){var h,v;if(!((h=e==null?void 0:e.mapping)===null||h===void 0)&&h.in){var p=(v=e==null?void 0:e.mapping)===null||v===void 0?void 0:v.in,g=d.type;p[g]&&(d.type=p[g])}f(d,l.in,"")}),r.forEach(function(d){var h,v;if(!((h=e==null?void 0:e.mapping)===null||h===void 0)&&h.in){var p=(v=e==null?void 0:e.mapping)===null||v===void 0?void 0:v.in,g=d.type;p[g]&&(d.type=p[g])}f(d,l.in,"")}),{nodes:t,edges:r}}function WR(n,e,t){var r=[];if(Array.isArray(n))n.forEach(function(a){var s;Array.isArray(e)?s=e.find(function(u){return u["-bpmnElement"]===a["-id"]}):s=e;var l=ip(s,t,a);r.push(l)});else{var i=void 0;Array.isArray(e)?i=e.find(function(a){return a["-bpmnElement"]===n["-id"]}):i=e;var o=ip(i,t,n);r.push(o)}return r}function ip(n,e,t){var r=Number(n["dc:Bounds"]["-x"]),i=Number(n["dc:Bounds"]["-y"]),o=t["-children"],a=t["-name"],s=sn.shapeConfigMap.get(e);s&&(r+=s.width/2,i+=s.height/2);var l={};Object.entries(t).forEach(function(d){var h=Wt(d,2),v=h[0],p=h[1];Xy.includes(v)||(l[v]=p)}),l=Ys(l);var u;if(a&&(u={x:r,y:i,value:a},n["bpmndi:BPMNLabel"]&&n["bpmndi:BPMNLabel"]["dc:Bounds"])){var c=n["bpmndi:BPMNLabel"]["dc:Bounds"];u.x=Number(c["-x"])+Number(c["-width"])/2,u.y=Number(c["-y"])+Number(c["-height"])/2}var f={id:n["-bpmnElement"],type:e,x:r,y:i,properties:l};return o&&(f.children=o),u&&(f.text=u),f}function $R(n,e){var t=[];if(Array.isArray(n))n.forEach(function(i){var o;Array.isArray(e)?o=e.find(function(a){return a["-bpmnElement"]===i["-id"]}):o=e,t.push(op(o,i))});else{var r=void 0;Array.isArray(e)?r=e.find(function(i){return i["-bpmnElement"]===n["-id"]}):r=e,t.push(op(r,n))}return t}function op(n,e){var t,r=e["-name"]?"".concat(e["-name"]):"";if(r){var i=n["bpmndi:BPMNLabel"]["dc:Bounds"],o=0;r.split(`
`).forEach(function(u){o<u.length&&(o=u.length)}),t={value:r,x:Number(i["-x"])+o*10/2,y:Number(i["-y"])+7}}var a={};Object.entries(e).forEach(function(u){var c=Wt(u,2),f=c[0],d=c[1];Xy.includes(f)||(a[f]=d)}),a=Ys(a);var s=n["di:waypoint"].map(function(u){return{x:Number(u["-x"]),y:Number(u["-y"])}}),l={id:e["-id"],type:Yt.FLOW,pointsList:s,sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:a};return t&&(l.text=t),l}var sn=function(){function n(e){var t=e.lf,r=this;this.adapterOut=function(i,o){var a,s,l=yc({},r.processAttributes);BR(l,i,o);var u={"-id":"BPMNPlane_1","-bpmnElement":l["-id"]};jR(u,i);var c=r.definitionAttributes;c["bpmn:process"]=l,c["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":u};var f={"bpmn:definitions":c};if(!((a=o==null?void 0:o.mapping)===null||a===void 0)&&a.out){var d=(s=o==null?void 0:o.mapping)===null||s===void 0?void 0:s.out,h=function(v){Array.isArray(v)&&v.forEach(function(p){return h(p)}),typeof v=="object"&&Object.keys(v).forEach(function(p){var g;(g=d[p])?(v[g]=m.cloneDeep(v[p]),delete v[p],h(v[g])):h(v[p])})};h(f)}return f},this.adapterIn=function(i,o){if(i)return HR(i,o)},t.adapterIn=this.adapterIn,t.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return n.prototype.setCustomShape=function(e,t){n.shapeConfigMap.set(e,t)},n.pluginName="bpmn-adapter",n.shapeConfigMap=new Map,n}();sn.shapeConfigMap.set(Yt.START,{width:Gh.width,height:Gh.height});sn.shapeConfigMap.set(Yt.END,{width:Yh.width,height:Yh.height});sn.shapeConfigMap.set(Yt.INTERMEDIATE_CATCH,{width:zs.width,height:zs.height});sn.shapeConfigMap.set(Yt.INTERMEDIATE_THROW,{width:zs.width,height:zs.height});sn.shapeConfigMap.set(Yt.BOUNDARY,{width:Vh.width,height:Vh.height});sn.shapeConfigMap.set(Yt.PARALLEL_GATEWAY,{width:Kh.width,height:Kh.height});sn.shapeConfigMap.set(Yt.INCLUSIVE_GATEWAY,{width:qh.width,height:qh.height});sn.shapeConfigMap.set(Yt.EXCLUSIVE_GATEWAY,{width:Zh.width,height:Zh.height});sn.shapeConfigMap.set(Yt.SYSTEM,{width:Jh.width,height:Jh.height});sn.shapeConfigMap.set(Yt.USER,{width:Qh.width,height:Qh.height});sn.shapeConfigMap.set(Yt.SUBPROCESS,{width:ep.width,height:ep.height});(function(n){LR(e,n);function e(t){var r=n.call(this,t)||this;r.adapterXmlIn=function(a){var s=PR(a);return r.adapterIn(s,r.props)},r.adapterXmlOut=function(a){var s=r.adapterOut(a,r.props);return DR(s)};var i=t.lf,o=t.props;return i.adapterIn=r.adapterXmlIn,i.adapterOut=r.adapterXmlOut,r.props=o,r}return e.pluginName="BPMNAdapter",e})(sn);function XR(n,e,t){var r=e.x,i=e.y,o=n.x,a=n.y,s=o-r,l=a-i,u=s*Math.cos(t)-l*Math.sin(t),c=s*Math.sin(t)+l*Math.cos(t),f=u+r,d=c+i;return{x:f,y:d}}var zR=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vs=function(){return Vs=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Vs.apply(this,arguments)},UR=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},GR=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))};(function(n){zR(e,n);function e(){var t=n.apply(this,GR([],UR(arguments),!1))||this;return t.childrenPositionMap=new Map,t.onNodeRotate=function(r){var i=r.model,o=t.props,a=o.model,s=o.graphModel,l=a.transformWithContainer,u=a.isRestrict,c=t.childrenPositionMap;if(!(!l||u)&&i.id===a.id){var f={x:a.x,y:a.y};ot(Array.from(a.children),function(d){var h=s.getNodeModelById(d);if(h){var v={x:h.x,y:h.y};c.has(h.id)?v=c.get(h.id):c.set(h.id,v);var p=i.rotate*(180/Math.PI);p<0&&(p+=360);var g=p*(Math.PI/180),y=XR(v,f,g);h.moveTo(y.x,y.y),h.rotate=i.rotate}})}},t.onNodeResize=function(r){var i=r.deltaX,o=r.deltaY,a=r.index,s=r.model,l=r.preData,u=t.props,c=u.model,f=u.graphModel,d=c.transformWithContainer,h=c.isRestrict;if(!(!d||h)&&s.id===c.id){var v=l.properties,p=v||{},g=p.width,y=p.height;ot(Array.from(c.children),function(b){var C=f.getNodeModelById(b);if(C){var D=C.width/g*i,B=C.height/y*o;wy({deltaX:D,deltaY:B,index:a,nodeModel:C,graphModel:f,cancelCallback:function(){}})}})}},t.onNodeMouseMove=function(r){var i=r.deltaX,o=r.deltaY,a=r.data,s=t.props,l=s.model,u=s.graphModel,c=u.transformModel,f=c.SCALE_X,d=c.SCALE_Y;if(a.id===l.id){var h=t.getNodesInGroup(l,u);u.moveNodes(h,i/f,o/d,!0)}},t.graphRendered=function(){var r=t.props.model;r.isCollapsed&&r.toggleCollapse(!0)},t}return e.prototype.componentDidMount=function(){n.prototype.componentDidMount.call(this);var t=this.props.graphModel.eventCenter;t.on("node:rotate",this.onNodeRotate),t.on("node:resize",this.onNodeResize),t.on("node:mousemove",this.onNodeMouseMove),t.on("graph:rendered",this.graphRendered)},e.prototype.componentWillUnmount=function(){n.prototype.componentWillUnmount.call(this);var t=this.props.graphModel.eventCenter;t.off("node:rotate",this.onNodeRotate),t.off("node:resize",this.onNodeResize),t.off("node:mousemove",this.onNodeMouseMove),t.off("graph:rendered",this.graphRendered)},e.prototype.getNodesInGroup=function(t,r){var i=this,o=[];return t.isGroup&&ot(Array.from(t.children),function(a){o.push(a);var s=r.getNodeModelById(a);s!=null&&s.isGroup&&(o=o.concat(i.getNodesInGroup(s,r)))}),o},e.prototype.getResizeControl=function(){var t=this.props.model,r=t.resizable,i=t.isCollapsed,o=r&&!i;return o?n.prototype.getResizeControl.call(this):null},e.prototype.getAppendAreaShape=function(){var t=this.props.model,r=t.width,i=t.height,o=t.x,a=t.y,s=t.radius,l=t.groupAddable;if(!l)return null;var u=t.getNodeStyle().strokeWidth,c=u===void 0?0:u,f=t.getAddableOutlineStyle(),d=r+c+8,h=i+c+8;return be("rect",Vs(Vs({},f),{width:d,height:h,x:o-d/2,y:a-h/2,rx:s,ry:s}))},e.prototype.getCollapseIcon=function(t,r){return"M ".concat(t+3,",").concat(r+6," ").concat(t+11,",").concat(r+6," M").concat(t+7,",").concat(r+2," ").concat(t+7,",").concat(r+10)},e.prototype.getExpandIcon=function(t,r){return"M ".concat(t+3,",").concat(r+6," ").concat(t+11,",").concat(r+6," ")},e.prototype.getOperateIcon=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=r-o/2+10,l=i-a/2+10;if(!t.collapsible)return null;var u=t!=null&&t.isCollapsed?this.getCollapseIcon(s,l):this.getExpandIcon(s,l),c=be("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:u});return be("g",{},[be("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#f4f5f6",stroke:"#cecece",cursor:"pointer",x:s,y:l,onClick:function(){t.toggleCollapse(!t.isCollapsed)}}),c])},e.prototype.getShape=function(){return be("g",{},[this.getAppendAreaShape(),n.prototype.getShape.call(this),this.getOperateIcon()])},e})(li);var YR=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ks=function(){return Ks=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ks.apply(this,arguments)},lu=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},_o=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},bo=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},VR=400,KR=230,qR=80,ZR=60,JR=-1e4;(function(n){YR(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.isGroup=!0,i.isRestrict=!1,i.autoResize=!1,i.collapsible=!0,i.isCollapsed=!1,i.groupAddable=!1,i.transformWithContainer=!1,i.childrenLastCollapseStateDict=new Map,i.childrenLastCollapseStateDict=new Map,i.initNodeData(t),i.setAttributes(),i}return e.prototype.initNodeData=function(t){var r;n.prototype.initNodeData.call(this,t);var i=(r=t.properties)!==null&&r!==void 0?r:{},o=i.children,a=i.width,s=i.height,l=i.collapsedWidth,u=i.collapsedHeight,c=i.collapsible,f=i.isCollapsed,d=i.zIndex,h=i.isRestrict,v=i.autoResize,p=i.autoToFront,g=i.transformWithContainer;this.children=o?new Set(o):new Set,this.zIndex=d!=null?d:JR,this.isCollapsed=f!=null?f:!1;var y=a!=null?a:VR,b=s!=null?s:KR;this.width=y,this.height=b,this.expandWidth=y,this.expandHeight=b,this.collapsedWidth=l!=null?l:qR,this.collapsedHeight=u!=null?u:ZR,this.isRestrict=h!=null?h:!1,this.transformWithContainer=g!=null?g:!1,this.autoResize=v!=null?v:!1,this.collapsible=c!=null?c:!0,this.autoToFront=p!=null?p:!1,this.text.editable=!1,this.text.draggable=!1},e.prototype.setAttributes=function(){n.prototype.setAttributes.call(this)},e.prototype.getData=function(){var t=this,r=n.prototype.getData.call(this),i=[];return ot(Array.from(this.children),function(o){var a=t.graphModel.getNodeModelById(o);a&&!a.virtual&&i.push(o)}),r.children=i,r.properties&&(r.properties.children=i,r.properties.isCollapsed=this.isCollapsed),r},e.prototype.getHistoryData=function(){var t=n.prototype.getHistoryData.call(this);t.children=Array.from(this.children),t.isGroup=!0;var r=this,i=r.x,o=r.y,a=r.collapsedWidth,s=r.collapsedHeight,l=r.expandWidth,u=r.expandHeight,c=r.isCollapsed;return c&&(t.x=i+l/2-a/2,t.y=o+u/2-s/2,t.text&&(t.text.x=t.text.x+l/2-a/2,t.text.y=t.text.y+u/2-s/2)),t},e.prototype.toggleCollapse=function(t){var r=this,i=!!t;this.isCollapsed=i,i?this.collapse():this.expand();var o=bo(bo([],_o(this.incoming.edges),!1),_o(this.outgoing.edges),!1),a=Array.from(this.children);ot(a,function(s){var l,u,c=r.graphModel.elementsModelMap.get(s);if(c){var f=c.isCollapsed;if(c.isGroup){var d=c;if(d.isCollapsed||d.toggleCollapse(t),!t){var h=(l=r.childrenLastCollapseStateDict)===null||l===void 0?void 0:l.get(s);h!==void 0&&h!==c.isCollapsed&&d.toggleCollapse(h)}}if((u=r.childrenLastCollapseStateDict)===null||u===void 0||u.set(s,!!f),c.visible=!t,c.BaseType===Et.NODE){var v=c.incoming.edges,p=c.outgoing.edges;o=bo(bo(bo([],_o(o),!1),_o(v),!1),_o(p),!1)}}}),this.collapseEdge(i,o)},e.prototype.collapse=function(){var t=this,r=t.x,i=t.y,o=t.text,a=t.width,s=t.height,l=t.collapsedWidth,u=t.collapsedHeight;this.x=r-a/2+l/2,this.y=i-s/2+u/2,this.text.x=o.x-a/2+l/2,this.text.y=o.y-s/2+u/2,this.expandWidth=a,this.expandHeight=s,this.width=l,this.height=u},e.prototype.expand=function(){var t=this,r=t.x,i=t.y,o=t.text,a=t.expandWidth,s=t.expandHeight,l=t.collapsedWidth,u=t.collapsedHeight;this.width=a,this.height=s,this.x=r+this.width/2-l/2,this.y=i+this.height/2-u/2,this.text.x=o.x+this.width/2-l/2,this.text.y=o.y+this.height/2-u/2},e.prototype.createVirtualEdge=function(t){t.pointsList=void 0;var r=this.graphModel.addEdge(t);r.virtual=!0,r.text.editable=!1,r.isCollapsedEdge=!0},e.prototype.collapseEdge=function(t,r){var i=this,o=this.graphModel;ot(r,function(a,s){var l,u=a.getData(),c=u.targetNodeId,f=u.sourceNodeId,d=Ks(Ks({},u),{id:"".concat(u.id,"__").concat(s),text:(l=u.text)===null||l===void 0?void 0:l.value});a.virtual&&o.deleteEdgeById(a.id);var h=o.dynamicGroup.getGroupByNodeId(c);h||(h=o.getNodeModelById(c));var v=o.dynamicGroup.getGroupByNodeId(f);v||(v=o.getNodeModelById(f)),t&&a.visible&&(i.children.has(f)||i.id===f?(d.startPoint=void 0,d.sourceNodeId=i.id):(d.endPoint=void 0,d.targetNodeId=i.id),(h.id!==i.id||v.id!==i.id)&&i.createVirtualEdge(d),a.visible=!1),!t&&!a.visible&&(h&&h.isGroup&&h.isCollapsed?(d.targetNodeId=h.id,d.endPoint=void 0,i.createVirtualEdge(d)):v&&v.isGroup&&v.isCollapsed?(d.sourceNodeId=v.id,d.startPoint=void 0,i.createVirtualEdge(d)):a.visible=!0)})},e.prototype.isAllowAppendIn=function(t){return!0},e.prototype.setAllowAppendChild=function(t){this.groupAddable=t},e.prototype.addChild=function(t){this.children.add(t);var r=this.getData();this.graphModel.eventCenter.emit("group:add-node",{data:r})},e.prototype.removeChild=function(t){this.children.delete(t);var r=this.getData();this.graphModel.eventCenter.emit("group:remove-node",{data:r})},e.prototype.toBack=function(){this.zIndex--},e.prototype.getResizeOutlineStyle=function(){var t=n.prototype.getResizeOutlineStyle.call(this);return t.stroke="none",t},e.prototype.getAnchorStyle=function(){var t=n.prototype.getAnchorStyle.call(this);return t.stroke="transparent",t.fill="transparent",t.hover&&(t.hover.fill="transparent",t.hover.stroke="transparent"),t},e.prototype.getAddableOutlineStyle=function(){return{stroke:"#feb663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},lu([$],e.prototype,"isCollapsed",void 0),lu([$],e.prototype,"groupAddable",void 0),lu([$],e.prototype,"transformWithContainer",void 0),e})(Gi);var ap;(function(n){n.HORIZONTAL="horizontal",n.VERTICAL="vertical"})(ap||(ap={}));var QR=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zo=function(){return zo=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},zo.apply(this,arguments)},eD=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},tD=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},nD=function(n){QR(e,n);function e(t){var r=n.call(this,t)||this;r.textRef=_l(),r.setHoverOn=function(){var l=r.props.element;l.isDragging||r.state.isHovered||(r.setState({isHovered:!0}),l.setHovered(!0))},r.setHoverOff=function(){var l=r.props.element;r.state.isHovered&&(r.setState({isHovered:!1}),l.setHovered(!1))},r.handleMouseDown=function(l){var u,c=r.props,f=c.label,d=c.graphModel,h=d.editConfigModel.nodeTextDraggable;((u=f.draggable)!==null&&u!==void 0?u:h)&&!r.state.isDragging&&!r.state.isEditing&&r.stepDrag.handleMouseDown(l)},r.handleMouseUp=function(l){r.state.isDragging&&r.stepDrag.handleMouseUp(l)},r.handleDragging=function(l){var u=l.deltaX,c=l.deltaY;r.state.isDragging||r.setState({isDragging:!0});var f=r.props,d=f.label,h=f.graphModel,v=h.transformModel,p=tD(v.fixDeltaXY(u,c),2),g=p[0],y=p[1];r.setElementModelLabelInfo({x:d.x+g,y:d.y+y}),h.eventCenter.emit("label:drag",{data:d.getData(),model:d})},r.handleDragEnd=function(){r.setState({isDragging:!1})},r.handleClick=function(l){var u=r.props,c=u.label,f=u.element,d=u.graphModel;f.setSelected(!r.state.isSelected),r.setState({isSelected:!r.state.isSelected}),r.setElementModelLabelInfo({isSelected:!0}),d.eventCenter.emit("label:click",{data:c.getData(),e:l,model:f})},r.handleDbClick=function(l){var u=r.props,c=u.label,f=u.element,d=u.graphModel;if(d.eventCenter.emit("label:dblclick",{data:c.getData(),e:l,model:f}),!c.editable){f.setSelected(!0);return}if(f.setSelected(),f.setElementState(Ze.TEXT_EDIT),r.setState({isEditing:!0}),r.textRef.current){r.textRef.current.contentEditable="true",r.textRef.current.focus();var h=document.createRange(),v=window.getSelection();h.selectNodeContents(r.textRef.current),h.collapse(!1),v==null||v.removeAllRanges(),v==null||v.addRange(h)}},r.handleBlur=function(l){var u=r.props,c=u.label,f=u.element,d=u.graphModel.eventCenter;d.emit("label:blur",{e:l,model:f,data:c.getData(),element:r.textRef.current}),r.setState({isDragging:!1,isHovered:!1,isSelected:!1})},r.reCalcLabelSize=function(){};var i=t.label,o=t.graphModel,a=o.gridSize,s=o.eventCenter;return r.stepDrag=new Sn({onDragging:r.handleDragging,onDragEnd:r.handleDragEnd,step:a,eventType:"LABEL",model:i,eventCenter:s}),r.state={isEditing:!1,isHovered:!1,isDragging:!1,isSelected:!1},r}return e.prototype.setElementModelLabelInfo=function(t){var r=this.props,i=r.label,o=r.element,a=r.graphModel,s=o.properties._label,l=s,u=jc(l,function(d){return d.id===i.id}),c=l[u];l[u]=zo(zo({},c),t);var f=a.getElement(o.id);f==null||f.setProperty("_label",l)},e.prototype.componentDidMount=function(){var t=this,r=this.props,i=r.label,o=r.element,a=r.graphModel;a.eventCenter.on("blank:click,node:click,edge:click,label:click",function(s){var l,u,c,f,d=s.data;if(((d==null?void 0:d.type)!=="label"||d.type==="label"&&d.id!==i.id||t.state.isSelected)&&t.setState({isSelected:!1}),((d==null?void 0:d.type)!=="label"||d.type=="label"&&d.id!==i.id)&&t.state.isEditing){t.setState({isEditing:!1});var h=(u=(l=t.textRef.current)===null||l===void 0?void 0:l.innerText)!==null&&u!==void 0?u:"",v=(f=(c=t.textRef.current)===null||c===void 0?void 0:c.innerHTML)!==null&&f!==void 0?f:"";t.setElementModelLabelInfo({value:h,content:v,isSelected:!1}),o.setElementState(Ze.DEFAULT)}((d==null?void 0:d.type)!=="label"||d.type=="label"&&d.id!==i.id)&&t.textRef.current&&(t.textRef.current.contentEditable="false")})},e.prototype.componentDidUpdate=function(){},e.prototype.componentWillUnmount=function(){var t=this.props.graphModel;t.eventCenter.off("blank:click,node:click,edge:click")},e.prototype.render=function(){var t,r=this.props,i=r.label,o=r.element,a=r.graphModel,s=this.state,l=s.isDragging,u=s.isHovered,c=s.isSelected,f=s.isEditing,d=a.transformModel,h=d.getTransformStyle().transform,v=i.id,p=i.x,g=i.y,y=i.zIndex,b=i.vertical,C=i.style,D=i.rotate,B=i.content,R=i.labelWidth,A=i.textOverflowMode,O=R!=null?R:o.BaseType==="node"?o.width-20:80,F={left:"".concat(p-O/2,"px"),top:"".concat(g-10,"px"),width:"".concat(O,"px"),height:"20px",zIndex:y!=null?y:1,transform:D?"".concat(h," rotate(").concat(D,"deg)"):"".concat(h," rotate(").concat(b?-.25:0,"turn)")};return j("div",{id:"element-container-".concat(v),className:Qu("lf-label-editor-container"),style:F,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onDblClick:this.handleDbClick,onBlur:this.handleBlur,onMouseEnter:this.setHoverOn,onMouseOver:this.setHoverOn,onMouseLeave:this.setHoverOff,children:j("div",{ref:this.textRef,id:"editor-container-".concat(v),className:Qu("lf-label-editor",(t={"lf-label-editor-dragging":l,"lf-label-editor-editing":f,"lf-label-editor-hover":!f&&(u||c)},t["lf-label-editor-".concat(A)]=!f,t)),style:zo({maxWidth:"".concat(O,"px"),boxSizing:"border-box",display:"inline-block",background:f||o.BaseType==="edge"?"#fff":"transparent"},C),dangerouslySetInnerHTML:{__html:B}})})},e=eD([Gt],e),e}(Ue),hn=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},rD=Nr,iD=function(){function n(e,t,r){var i;this.type="label",this.content="",this.value="",this.style={},this.vertical=!1,this.editable=!0,this.draggable=!0,this.textOverflowMode="default",this.element=t,this.graphModel=r,this.id=(i=e.id)!==null&&i!==void 0?i:rD(),this.initLabelData(e)}return n.prototype.initLabelData=function(e){lt(this,e)},n.prototype.getData=function(){return{id:this.id,x:this.x,y:this.y,type:"label",content:this.content,value:this.value,rotate:this.rotate,style:Pn(this.style),draggable:this.draggable,editable:this.editable,labelWidth:this.labelWidth,textOverflowMode:this.textOverflowMode,vertical:this.vertical}},hn([$],n.prototype,"x",void 0),hn([$],n.prototype,"y",void 0),hn([$],n.prototype,"content",void 0),hn([$],n.prototype,"value",void 0),hn([$],n.prototype,"rotate",void 0),hn([$],n.prototype,"style",void 0),hn([$],n.prototype,"zIndex",void 0),hn([$],n.prototype,"vertical",void 0),hn([$],n.prototype,"editable",void 0),hn([$],n.prototype,"draggable",void 0),hn([$],n.prototype,"labelWidth",void 0),hn([$],n.prototype,"textOverflowMode",void 0),n}(),es={exports:{}},uu=es.exports,sp;function oD(){return sp||(sp=1,function(n){/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */"classList"in document.createElement("_")||function(e){if("Element"in e){var t="classList",r="prototype",i=e.Element[r],o=Object,a=String[r].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[r].indexOf||function(v){for(var p=0,g=this.length;p<g;p++)if(p in this&&this[p]===v)return p;return-1},l=function(v,p){this.name=v,this.code=DOMException[v],this.message=p},u=function(v,p){if(p==="")throw new l("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(p))throw new l("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(v,p)},c=function(v){for(var p=a.call(v.getAttribute("class")||""),g=p?p.split(/\s+/):[],y=0,b=g.length;y<b;y++)this.push(g[y]);this._updateClassName=function(){v.setAttribute("class",this.toString())}},f=c[r]=[],d=function(){return new c(this)};if(l[r]=Error[r],f.item=function(v){return this[v]||null},f.contains=function(v){return v+="",u(this,v)!==-1},f.add=function(){var v=arguments,p=0,g=v.length,y,b=!1;do y=v[p]+"",u(this,y)===-1&&(this.push(y),b=!0);while(++p<g);b&&this._updateClassName()},f.remove=function(){var v=arguments,p=0,g=v.length,y,b=!1,C;do for(y=v[p]+"",C=u(this,y);C!==-1;)this.splice(C,1),b=!0,C=u(this,y);while(++p<g);b&&this._updateClassName()},f.toggle=function(v,p){v+="";var g=this.contains(v),y=g?p!==!0&&"remove":p!==!1&&"add";return y&&this[y](v),p===!0||p===!1?p:!g},f.toString=function(){return this.join(" ")},o.defineProperty){var h={get:d,enumerable:!0,configurable:!0};try{o.defineProperty(i,t,h)}catch(v){v.number===-2146823252&&(h.enumerable=!1,o.defineProperty(i,t,h))}}else o[r].__defineGetter__&&i.__defineGetter__(t,d)}}(self);/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */(function(e){if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{new Blob;return}catch(i){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(i){var o=function(A){return Object.prototype.toString.call(A).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},s=function(O,F,Z){this.data=O,this.size=O.length,this.type=F,this.encoding=Z},l=a.prototype,u=s.prototype,c=i.FileReaderSync,f=function(A){this.code=this[this.name=A]},d="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),h=d.length,v=i.URL||i.webkitURL||i,p=v.createObjectURL,g=v.revokeObjectURL,y=v,b=i.btoa,C=i.atob,D=i.ArrayBuffer,B=i.Uint8Array,R=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(s.fake=u.fake=!0;h--;)f.prototype[d[h]]=h+1;return v.createObjectURL||(y=i.URL=function(A){var O=document.createElementNS("http://www.w3.org/1999/xhtml","a"),F;return O.href=A,"origin"in O||(O.protocol.toLowerCase()==="data:"?O.origin=null:(F=A.match(R),O.origin=F&&F[1])),O}),y.createObjectURL=function(A){var O=A.type,F;if(O===null&&(O="application/octet-stream"),A instanceof s)return F="data:"+O,A.encoding==="base64"?F+";base64,"+A.data:A.encoding==="URI"?F+","+decodeURIComponent(A.data):b?F+";base64,"+b(A.data):F+","+encodeURIComponent(A.data);if(p)return p.call(v,A)},y.revokeObjectURL=function(A){A.substring(0,5)!=="data:"&&g&&g.call(v,A)},l.append=function(A){var O=this.data;if(B&&(A instanceof D||A instanceof B)){for(var F="",Z=new B(A),ue=0,ce=Z.length;ue<ce;ue++)F+=String.fromCharCode(Z[ue]);O.push(F)}else if(o(A)==="Blob"||o(A)==="File")if(c){var w=new c;O.push(w.readAsBinaryString(A))}else throw new f("NOT_READABLE_ERR");else A instanceof s?A.encoding==="base64"&&C?O.push(C(A.data)):A.encoding==="URI"?O.push(decodeURIComponent(A.data)):A.encoding==="raw"&&O.push(A.data):(typeof A!="string"&&(A+=""),O.push(unescape(encodeURIComponent(A))))},l.getBlob=function(A){return arguments.length||(A=null),new s(this.data.join(""),A,"raw")},l.toString=function(){return"[object BlobBuilder]"},u.slice=function(A,O,F){var Z=arguments.length;return Z<3&&(F=null),new s(this.data.slice(A,Z>1?O:this.data.length),F,this.encoding)},u.toString=function(){return"[object Blob]"},u.close=function(){this.size=0,delete this.data},a}(e);e.Blob=function(i,o){var a=o&&o.type||"",s=new t;if(i)for(var l=0,u=i.length;l<u;l++)Uint8Array&&i[l]instanceof Uint8Array?s.append(i[l].buffer):s.append(i[l]);var c=s.getBlob(a);return!c.slice&&c.webkitSlice&&(c.slice=c.webkitSlice),c};var r=Object.getPrototypeOf||function(i){return i.__proto__};e.Blob.prototype=r(new e.Blob)})(typeof self!="undefined"&&self||typeof window!="undefined"&&window||uu.content||uu),function(e,t){var r=typeof process!="undefined"&&process&&process.versions&&process.versions.electron;r?e.MediumEditor=t:n.exports=t}(uu,function(){function e(t,r){return this.init(t,r)}return e.extensions={},function(t){function r(l,u){var c,f=Array.prototype.slice.call(arguments,2);u=u||{};for(var d=0;d<f.length;d++){var h=f[d];if(h)for(c in h)h.hasOwnProperty(c)&&typeof h[c]!="undefined"&&(l||u.hasOwnProperty(c)===!1)&&(u[c]=h[c])}return u}var i=!1;try{var o=document.createElement("div"),a=document.createTextNode(" ");o.appendChild(a),i=o.contains(a)}catch(l){}var s={isIE:navigator.appName==="Microsoft Internet Explorer"||navigator.appName==="Netscape"&&new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)!==null,isEdge:/Edge\/\d+/.exec(navigator.userAgent)!==null,isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:t.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(l){return!!(s.isMac&&l.metaKey||!s.isMac&&l.ctrlKey)},isKey:function(l,u){var c=s.getKeyCode(l);return Array.isArray(u)===!1?c===u:u.indexOf(c)!==-1},getKeyCode:function(l){var u=l.which;return u===null&&(u=l.charCode!==null?l.charCode:l.keyCode),u},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var u=[!0].concat(Array.prototype.slice.call(arguments));return r.apply(this,u)},defaults:function(){var u=[!1].concat(Array.prototype.slice.call(arguments));return r.apply(this,u)},createLink:function(l,u,c,f){var d=l.createElement("a");return s.moveTextRangeIntoElement(u[0],u[u.length-1],d),d.setAttribute("href",c),f&&(f==="_blank"&&d.setAttribute("rel","noopener noreferrer"),d.setAttribute("target",f)),d},findOrCreateMatchingTextNodes:function(l,u,c){for(var f=l.createTreeWalker(u,NodeFilter.SHOW_ALL,null,!1),d=[],h=0,v=!1,p=null,g=null;(p=f.nextNode())!==null;)if(!(p.nodeType>3))if(p.nodeType===3){if(!v&&c.start<h+p.nodeValue.length&&(v=!0,g=s.splitStartNodeIfNeeded(p,c.start,h)),v&&s.splitEndNodeIfNeeded(p,g,c.end,h),v&&h===c.end)break;if(v&&h>c.end+1)throw new Error("PerformLinking overshot the target!");v&&d.push(g||p),h+=p.nodeValue.length,g!==null&&(h+=g.nodeValue.length,f.nextNode()),g=null}else p.tagName.toLowerCase()==="img"&&(!v&&c.start<=h&&(v=!0),v&&d.push(p));return d},splitStartNodeIfNeeded:function(l,u,c){return u!==c?l.splitText(u-c):null},splitEndNodeIfNeeded:function(l,u,c,f){var d,h;d=f+l.nodeValue.length+(u?u.nodeValue.length:0)-1,h=c-f-(u?l.nodeValue.length:0),d>=c&&f!==d&&h!==0&&(u||l).splitText(h)},splitByBlockElements:function(l){if(l.nodeType!==3&&l.nodeType!==1)return[];var u=[],c=e.util.blockContainerElementNames.join(",");if(l.nodeType===3||l.querySelectorAll(c).length===0)return[l];for(var f=0;f<l.childNodes.length;f++){var d=l.childNodes[f];if(d.nodeType===3)u.push(d);else if(d.nodeType===1){var h=d.querySelectorAll(c);h.length===0?u.push(d):u=u.concat(e.util.splitByBlockElements(d))}}return u},findAdjacentTextNodeWithContent:function(u,c,f){var d=!1,h,v=f.createNodeIterator(u,NodeFilter.SHOW_TEXT,null,!1);for(h=v.nextNode();h;){if(h===c)d=!0;else if(d&&h.nodeType===3&&h.nodeValue&&h.nodeValue.trim().length>0)break;h=v.nextNode()}return h},findPreviousSibling:function(l){if(!l||s.isMediumEditorElement(l))return!1;for(var u=l.previousSibling;!u&&!s.isMediumEditorElement(l.parentNode);)l=l.parentNode,u=l.previousSibling;return u},isDescendant:function(u,c,f){if(!u||!c)return!1;if(u===c)return!!f;if(u.nodeType!==1)return!1;if(i||c.nodeType!==3)return u.contains(c);for(var d=c.parentNode;d!==null;){if(d===u)return!0;d=d.parentNode}return!1},isElement:function(u){return!!(u&&u.nodeType===1)},throttle:function(l,u){var c=50,f,d,h,v=null,p=0,g=function(){p=Date.now(),v=null,h=l.apply(f,d),v||(f=d=null)};return!u&&u!==0&&(u=c),function(){var y=Date.now(),b=u-(y-p);return f=this,d=arguments,b<=0||b>u?(v&&(clearTimeout(v),v=null),p=y,h=l.apply(f,d),v||(f=d=null)):v||(v=setTimeout(g,b)),h}},traverseUp:function(l,u){if(!l)return!1;do{if(l.nodeType===1){if(u(l))return l;if(s.isMediumEditorElement(l))return!1}l=l.parentNode}while(l);return!1},htmlEntities:function(l){return String(l).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(l,u){var c,f,d,h,v,p,g,y=!1,b=["insertHTML",!1,u];if(!e.util.isEdge&&l.queryCommandSupported("insertHTML"))try{return l.execCommand.apply(l,b)}catch(C){}if(c=l.getSelection(),c.rangeCount){if(f=c.getRangeAt(0),g=f.commonAncestorContainer,s.isMediumEditorElement(g)&&!g.firstChild)f.selectNode(g.appendChild(l.createTextNode("")));else if(g.nodeType===3&&f.startOffset===0&&f.endOffset===g.nodeValue.length||g.nodeType!==3&&g.innerHTML===f.toString()){for(;!s.isMediumEditorElement(g)&&g.parentNode&&g.parentNode.childNodes.length===1&&!s.isMediumEditorElement(g.parentNode);)g=g.parentNode;f.selectNode(g)}for(f.deleteContents(),d=l.createElement("div"),d.innerHTML=u,h=l.createDocumentFragment();d.firstChild;)v=d.firstChild,p=h.appendChild(v);f.insertNode(h),p&&(f=f.cloneRange(),f.setStartAfter(p),f.collapse(!0),e.selection.selectRange(l,f)),y=!0}return l.execCommand.callListeners&&l.execCommand.callListeners(b,y),y},execFormatBlock:function(l,u){var c=s.getTopBlockContainer(e.selection.getSelectionStart(l)),f;if(u==="blockquote"){if(c&&(f=Array.prototype.slice.call(c.childNodes),f.some(function(d){return s.isBlockContainer(d)})))return l.execCommand("outdent",!1,null);if(s.isIE)return l.execCommand("indent",!1,u)}if(c&&u===c.nodeName.toLowerCase()&&(u="p"),s.isIE&&(u="<"+u+">"),c&&c.nodeName.toLowerCase()==="blockquote"){if(s.isIE&&u==="<p>")return l.execCommand("outdent",!1,u);if((s.isFF||s.isEdge)&&u==="p")return f=Array.prototype.slice.call(c.childNodes),f.some(function(d){return!s.isBlockContainer(d)})&&l.execCommand("formatBlock",!1,u),l.execCommand("outdent",!1,u)}return l.execCommand("formatBlock",!1,u)},setTargetBlank:function(l,u){var c,f=u||!1;if(l.nodeName.toLowerCase()==="a")l.target="_blank",l.rel="noopener noreferrer";else for(l=l.getElementsByTagName("a"),c=0;c<l.length;c+=1)(f===!1||f===l[c].attributes.href.value)&&(l[c].target="_blank",l[c].rel="noopener noreferrer")},removeTargetBlank:function(l,u){var c;if(l.nodeName.toLowerCase()==="a")l.removeAttribute("target"),l.removeAttribute("rel");else for(l=l.getElementsByTagName("a"),c=0;c<l.length;c+=1)u===l[c].attributes.href.value&&(l[c].removeAttribute("target"),l[c].removeAttribute("rel"))},addClassToAnchors:function(l,u){var c=u.split(" "),f,d;if(l.nodeName.toLowerCase()==="a")for(d=0;d<c.length;d+=1)l.classList.add(c[d]);else{var h=l.getElementsByTagName("a");if(h.length===0){var v=s.getClosestTag(l,"a");l=v?[v]:[]}else l=h;for(f=0;f<l.length;f+=1)for(d=0;d<c.length;d+=1)l[f].classList.add(c[d])}},isListItem:function(l){if(!l)return!1;if(l.nodeName.toLowerCase()==="li")return!0;for(var u=l.parentNode,c=u.nodeName.toLowerCase();c==="li"||!s.isBlockContainer(u)&&c!=="div";){if(c==="li")return!0;if(u=u.parentNode,u)c=u.nodeName.toLowerCase();else return!1}return!1},cleanListDOM:function(l,u){if(u.nodeName.toLowerCase()==="li"){var c=u.parentElement;c.parentElement.nodeName.toLowerCase()==="p"&&(s.unwrap(c.parentElement,l),e.selection.moveCursor(l,u.firstChild,u.firstChild.textContent.length))}},splitOffDOMTree:function(l,u,c){for(var f=u,d=null,h=!c;f!==l;){var v=f.parentNode,p=v.cloneNode(!1),g=h?f:v.firstChild,y;for(d&&(h?p.appendChild(d):y=d),d=p;g;){var b=g.nextSibling;g===f?(g.hasChildNodes()?g=g.cloneNode(!1):g.parentNode.removeChild(g),g.textContent&&d.appendChild(g),g=h?b:null):(g.parentNode.removeChild(g),(g.hasChildNodes()||g.textContent)&&d.appendChild(g),g=b)}y&&d.appendChild(y),f=v}return d},moveTextRangeIntoElement:function(l,u,c){if(!l||!u)return!1;var f=s.findCommonRoot(l,u);if(!f)return!1;if(u===l){var d=l.parentNode,h=l.nextSibling;return d.removeChild(l),c.appendChild(l),h?d.insertBefore(c,h):d.appendChild(c),c.hasChildNodes()}for(var v=[],p,g,y,b=0;b<f.childNodes.length;b++)if(y=f.childNodes[b],!p)s.isDescendant(y,l,!0)&&(p=y);else if(s.isDescendant(y,u,!0)){g=y;break}else v.push(y);var C=g.nextSibling,D=f.ownerDocument.createDocumentFragment();return p===l?(p.parentNode.removeChild(p),D.appendChild(p)):D.appendChild(s.splitOffDOMTree(p,l)),v.forEach(function(B){B.parentNode.removeChild(B),D.appendChild(B)}),g===u?(g.parentNode.removeChild(g),D.appendChild(g)):D.appendChild(s.splitOffDOMTree(g,u,!0)),c.appendChild(D),g.parentNode===f?f.insertBefore(c,g):C?f.insertBefore(c,C):f.appendChild(c),c.hasChildNodes()},depthOfNode:function(l){for(var u=0,c=l;c.parentNode!==null;)c=c.parentNode,u++;return u},findCommonRoot:function(l,u){for(var c=s.depthOfNode(l),f=s.depthOfNode(u),d=l,h=u;c!==f;)c>f?(d=d.parentNode,c-=1):(h=h.parentNode,f-=1);for(;d!==h;)d=d.parentNode,h=h.parentNode;return d},isElementAtBeginningOfBlock:function(l){for(var u,c;!s.isBlockContainer(l)&&!s.isMediumEditorElement(l);){for(c=l;c=c.previousSibling;)if(u=c.nodeType===3?c.nodeValue:c.textContent,u.length>0)return!1;l=l.parentNode}return!0},isMediumEditorElement:function(l){return l&&l.getAttribute&&!!l.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(l){return s.traverseUp(l,function(u){return s.isMediumEditorElement(u)})},isBlockContainer:function(l){return l&&l.nodeType!==3&&s.blockContainerElementNames.indexOf(l.nodeName.toLowerCase())!==-1},getClosestBlockContainer:function(l){return s.traverseUp(l,function(u){return s.isBlockContainer(u)||s.isMediumEditorElement(u)})},getTopBlockContainer:function(l){var u=s.isBlockContainer(l)?l:!1;return s.traverseUp(l,function(c){return s.isBlockContainer(c)&&(u=c),!u&&s.isMediumEditorElement(c)?(u=c,!0):!1}),u},getFirstSelectableLeafNode:function(l){for(;l&&l.firstChild;)l=l.firstChild;if(l=s.traverseUp(l,function(c){return s.emptyElementNames.indexOf(c.nodeName.toLowerCase())===-1}),l.nodeName.toLowerCase()==="table"){var u=l.querySelector("th, td");u&&(l=u)}return l},getFirstTextNode:function(l){return s.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),s._getFirstTextNode(l)},_getFirstTextNode:function(l){if(l.nodeType===3)return l;for(var u=0;u<l.childNodes.length;u++){var c=s._getFirstTextNode(l.childNodes[u]);if(c!==null)return c}return null},ensureUrlHasProtocol:function(l){return l.indexOf("://")===-1?"http://"+l:l},warn:function(){t.console!==void 0&&typeof t.console.warn=="function"&&t.console.warn.apply(t.console,arguments)},deprecated:function(l,u,c){var f=l+" is deprecated, please use "+u+" instead.";c&&(f+=" Will be removed in "+c),s.warn(f)},deprecatedMethod:function(l,u,c,f){s.deprecated(l,u,f),typeof this[u]=="function"&&this[u].apply(this,c)},cleanupAttrs:function(l,u){u.forEach(function(c){l.removeAttribute(c)})},cleanupTags:function(l,u){u.indexOf(l.nodeName.toLowerCase())!==-1&&l.parentNode.removeChild(l)},unwrapTags:function(l,u){u.indexOf(l.nodeName.toLowerCase())!==-1&&e.util.unwrap(l,document)},getClosestTag:function(l,u){return s.traverseUp(l,function(c){return c.nodeName.toLowerCase()===u.toLowerCase()})},unwrap:function(l,u){for(var c=u.createDocumentFragment(),f=Array.prototype.slice.call(l.childNodes),d=0;d<f.length;d++)c.appendChild(f[d]);c.childNodes.length?l.parentNode.replaceChild(c,l):l.parentNode.removeChild(l)},guid:function(){function l(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return l()+l()+"-"+l()+"-"+l()+"-"+l()+"-"+l()+l()+l()}};e.util=s}(window),function(){var t=function(r){e.util.extend(this,r)};t.extend=function(r){var i=this,o;r&&r.hasOwnProperty("constructor")?o=r.constructor:o=function(){return i.apply(this,arguments)},e.util.extend(o,i);var a=function(){this.constructor=o};return a.prototype=i.prototype,o.prototype=new a,r&&e.util.extend(o.prototype,r),o},t.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(r){return this.base.options[r]}},["execAction","on","off","subscribe","trigger"].forEach(function(r){t.prototype[r]=function(){return this.base[r].apply(this.base,arguments)}}),e.Extension=t}(),function(){function t(i){return e.util.isBlockContainer(i)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var r={findMatchingSelectionParent:function(i,o){var a=o.getSelection(),s,l;return a.rangeCount===0?!1:(s=a.getRangeAt(0),l=s.commonAncestorContainer,e.util.traverseUp(l,i))},getSelectionElement:function(i){return this.findMatchingSelectionParent(function(o){return e.util.isMediumEditorElement(o)},i)},exportSelection:function(i,o){if(!i)return null;var a=null,s=o.getSelection();if(s.rangeCount>0){var l=s.getRangeAt(0),u=l.cloneRange(),c;u.selectNodeContents(i),u.setEnd(l.startContainer,l.startOffset),c=u.toString().length,a={start:c,end:c+l.toString().length},this.doesRangeStartWithImages(l,o)&&(a.startsWithImage=!0);var f=this.getTrailingImageCount(i,a,l.endContainer,l.endOffset);if(f&&(a.trailingImageCount=f),c!==0){var d=this.getIndexRelativeToAdjacentEmptyBlocks(o,i,l.startContainer,l.startOffset);d!==-1&&(a.emptyBlocksIndex=d)}}return a},importSelection:function(i,o,a,s){if(!(!i||!o)){var l=a.createRange();l.setStart(o,0),l.collapse(!0);var u=o,c=[],f=0,d=!1,h=!1,v=0,p=!1,g,y=!1,b=null;for((s||i.startsWithImage||typeof i.emptyBlocksIndex!="undefined")&&(y=!0);!p&&u;){if(u.nodeType>3){u=c.pop();continue}if(u.nodeType===3&&!h)g=f+u.length,!d&&i.start>=f&&i.start<=g&&(y||i.start<g?(l.setStart(u,i.start-f),d=!0):b=u),d&&i.end>=f&&i.end<=g&&(i.trailingImageCount?h=!0:(l.setEnd(u,i.end-f),p=!0)),f=g;else{if(i.trailingImageCount&&h&&(u.nodeName.toLowerCase()==="img"&&v++,v===i.trailingImageCount)){for(var C=0;u.parentNode.childNodes[C]!==u;)C++;l.setEnd(u.parentNode,C+1),p=!0}if(!p&&u.nodeType===1)for(var D=u.childNodes.length-1;D>=0;)c.push(u.childNodes[D]),D-=1}p||(u=c.pop())}!d&&b&&(l.setStart(b,b.length),l.setEnd(b,b.length)),typeof i.emptyBlocksIndex!="undefined"&&(l=this.importSelectionMoveCursorPastBlocks(a,o,i.emptyBlocksIndex,l)),s&&(l=this.importSelectionMoveCursorPastAnchor(i,l)),this.selectRange(a,l)}},importSelectionMoveCursorPastAnchor:function(i,o){var a=function(f){return f.nodeName.toLowerCase()==="a"};if(i.start===i.end&&o.startContainer.nodeType===3&&o.startOffset===o.startContainer.nodeValue.length&&e.util.traverseUp(o.startContainer,a)){for(var s=o.startContainer,l=o.startContainer.parentNode;l!==null&&l.nodeName.toLowerCase()!=="a";)l.childNodes[l.childNodes.length-1]!==s?l=null:(s=l,l=l.parentNode);if(l!==null&&l.nodeName.toLowerCase()==="a"){for(var u=null,c=0;u===null&&c<l.parentNode.childNodes.length;c++)l.parentNode.childNodes[c]===l&&(u=c);o.setStart(l.parentNode,u+1),o.collapse(!0)}}return o},importSelectionMoveCursorPastBlocks:function(i,o,a,s){var l=i.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,t,!1),u=s.startContainer,c,f,d=0;for(a=a||1,u.nodeType===3&&e.util.isBlockContainer(u.previousSibling)?c=u.previousSibling:c=e.util.getClosestBlockContainer(u);l.nextNode();)if(!f)c===l.currentNode&&(f=l.currentNode);else if(f=l.currentNode,d++,d===a||f.textContent.length>0)break;return f||(f=c),s.setStart(e.util.getFirstSelectableLeafNode(f),0),s},getIndexRelativeToAdjacentEmptyBlocks:function(i,o,a,s){if(a.textContent.length>0&&s>0)return-1;var l=a;if(l.nodeType!==3&&(l=a.childNodes[s]),l){if(!e.util.isElementAtBeginningOfBlock(l))return-1;var u=e.util.findPreviousSibling(l);if(u){if(u.nodeValue)return-1}else return-1}for(var c=e.util.getClosestBlockContainer(a),f=i.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,t,!1),d=0;f.nextNode();){var h=f.currentNode.textContent==="";if((h||d>0)&&(d+=1),f.currentNode===c)return d;h||(d=0)}return d},doesRangeStartWithImages:function(i,o){if(i.startOffset!==0||i.startContainer.nodeType!==1)return!1;if(i.startContainer.nodeName.toLowerCase()==="img")return!0;var a=i.startContainer.querySelector("img");if(!a)return!1;for(var s=o.createTreeWalker(i.startContainer,NodeFilter.SHOW_ALL,null,!1);s.nextNode();){var l=s.currentNode;if(l===a)break;if(l.nodeValue)return!1}return!0},getTrailingImageCount:function(i,o,a,s){if(s===0||a.nodeType!==1||a.nodeName.toLowerCase()!=="img"&&!a.querySelector("img"))return 0;for(var l=a.childNodes[s-1];l.hasChildNodes();)l=l.lastChild;for(var u=i,c=[],f=0,d=!1,h=!1,v=!1,p,g=0;!v&&u;){if(u.nodeType>3){u=c.pop();continue}if(u.nodeType===3&&!h)g=0,p=f+u.length,!d&&o.start>=f&&o.start<=p&&(d=!0),d&&o.end>=f&&o.end<=p&&(h=!0),f=p;else if(u.nodeName.toLowerCase()==="img"&&g++,u===l)v=!0;else if(u.nodeType===1)for(var y=u.childNodes.length-1;y>=0;)c.push(u.childNodes[y]),y-=1;v||(u=c.pop())}return g},selectionContainsContent:function(i){var o=i.getSelection();if(!o||o.isCollapsed||!o.rangeCount)return!1;if(o.toString().trim()!=="")return!0;var a=this.getSelectedParentElement(o.getRangeAt(0));return!!(a&&(a.nodeName.toLowerCase()==="img"||a.nodeType===1&&a.querySelector("img")))},selectionInContentEditableFalse:function(i){var o,a=this.findMatchingSelectionParent(function(s){var l=s&&s.getAttribute("contenteditable");return l==="true"&&(o=!0),s.nodeName!=="#text"&&l==="false"},i);return!o&&a},getSelectionHtml:function(o){var a,s="",l=o.getSelection(),u,c;if(l.rangeCount){for(c=o.createElement("div"),a=0,u=l.rangeCount;a<u;a+=1)c.appendChild(l.getRangeAt(a).cloneContents());s=c.innerHTML}return s},getCaretOffsets:function(o,a){var s,l;return a||(a=window.getSelection().getRangeAt(0)),s=a.cloneRange(),l=a.cloneRange(),s.selectNodeContents(o),s.setEnd(a.endContainer,a.endOffset),l.selectNodeContents(o),l.setStart(a.endContainer,a.endOffset),{left:s.toString().length,right:l.toString().length}},rangeSelectsSingleNode:function(i){var o=i.startContainer;return o===i.endContainer&&o.hasChildNodes()&&i.endOffset===i.startOffset+1},getSelectedParentElement:function(i){return i?this.rangeSelectsSingleNode(i)&&i.startContainer.childNodes[i.startOffset].nodeType!==3?i.startContainer.childNodes[i.startOffset]:i.startContainer.nodeType===3?i.startContainer.parentNode:i.startContainer:null},getSelectedElements:function(i){var o=i.getSelection(),a,s,l;if(!o.rangeCount||o.isCollapsed||!o.getRangeAt(0).commonAncestorContainer)return[];if(a=o.getRangeAt(0),a.commonAncestorContainer.nodeType===3){for(s=[],l=a.commonAncestorContainer;l.parentNode&&l.parentNode.childNodes.length===1;)s.push(l.parentNode),l=l.parentNode;return s}return[].filter.call(a.commonAncestorContainer.getElementsByTagName("*"),function(u){return typeof o.containsNode=="function"?o.containsNode(u,!0):!0})},selectNode:function(i,o){var a=o.createRange();a.selectNodeContents(i),this.selectRange(o,a)},select:function(i,o,a,s,l){var u=i.createRange();return u.setStart(o,a),s?u.setEnd(s,l):u.collapse(!0),this.selectRange(i,u),u},clearSelection:function(i,o){o?i.getSelection().collapseToStart():i.getSelection().collapseToEnd()},moveCursor:function(i,o,a){this.select(i,o,a)},getSelectionRange:function(i){var o=i.getSelection();return o.rangeCount===0?null:o.getRangeAt(0)},selectRange:function(i,o){var a=i.getSelection();a.removeAllRanges(),a.addRange(o)},getSelectionStart:function(i){var o=i.getSelection().anchorNode,a=o&&o.nodeType===3?o.parentNode:o;return a}};e.selection=r}(),function(){function t(i,o){return i?i.some(function(a){if(typeof a.getInteractionElements!="function")return!1;var s=a.getInteractionElements();return s?(Array.isArray(s)||(s=[s]),s.some(function(l){return e.util.isDescendant(l,o,!0)})):!1}):!1}var r=function(i){this.base=i,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};r.prototype={InputEventOnContenteditableSupported:!e.util.isIE&&!e.util.isEdge,attachDOMEvent:function(i,o,a,s){var l=this.base.options.contentWindow,u=this.base.options.ownerDocument;i=e.util.isElement(i)||[l,u].indexOf(i)>-1?[i]:i,Array.prototype.forEach.call(i,function(c){c.addEventListener(o,a,s),this.events.push([c,o,a,s])}.bind(this))},detachDOMEvent:function(i,o,a,s){var l,u,c=this.base.options.contentWindow,f=this.base.options.ownerDocument;i&&(i=e.util.isElement(i)||[c,f].indexOf(i)>-1?[i]:i,Array.prototype.forEach.call(i,function(d){l=this.indexOfListener(d,o,a,s),l!==-1&&(u=this.events.splice(l,1)[0],u[0].removeEventListener(u[1],u[2],u[3]))}.bind(this)))},indexOfListener:function(i,o,a,s){var l,u,c;for(l=0,u=this.events.length;l<u;l=l+1)if(c=this.events[l],c[0]===i&&c[1]===o&&c[2]===a&&c[3]===s)return l;return-1},detachAllDOMEvents:function(){for(var i=this.events.pop();i;)i[0].removeEventListener(i[1],i[2],i[3]),i=this.events.pop()},detachAllEventsFromElement:function(i){for(var o=this.events.filter(function(u){return u&&u[0].getAttribute&&u[0].getAttribute("medium-editor-index")===i.getAttribute("medium-editor-index")}),a=0,s=o.length;a<s;a++){var l=o[a];this.detachDOMEvent(l[0],l[1],l[2],l[3])}},attachAllEventsToElement:function(i){this.listeners.editableInput&&(this.contentCache[i.getAttribute("medium-editor-index")]=i.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(o){this.attachDOMEvent(i,o.name,o.handler.bind(this))},this)},enableCustomEvent:function(i){this.disabledEvents[i]!==void 0&&delete this.disabledEvents[i]},disableCustomEvent:function(i){this.disabledEvents[i]=!0},attachCustomEvent:function(i,o){this.setupListener(i),this.customEvents[i]||(this.customEvents[i]=[]),this.customEvents[i].push(o)},detachCustomEvent:function(i,o){var a=this.indexOfCustomListener(i,o);a!==-1&&this.customEvents[i].splice(a,1)},indexOfCustomListener:function(i,o){return!this.customEvents[i]||!this.customEvents[i].length?-1:this.customEvents[i].indexOf(o)},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(i,o,a){this.customEvents[i]&&!this.disabledEvents[i]&&this.customEvents[i].forEach(function(s){s(o,a)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(i){i.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(i){this.handleDocumentExecCommand(i)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var i=this.options.ownerDocument;if(!(!this.execCommandListener||!i.execCommand.listeners)){var o=i.execCommand.listeners.indexOf(this.execCommandListener);o!==-1&&i.execCommand.listeners.splice(o,1),i.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var i=this.options.ownerDocument;if(!i.execCommand.listeners){var o=function(s,l){i.execCommand.listeners&&i.execCommand.listeners.forEach(function(u){u({command:s[0],value:s[2],args:s,result:l})})},a=function(){var s=i.execCommand.orig.apply(this,arguments);if(!i.execCommand.listeners)return s;var l=Array.prototype.slice.call(arguments);return o(l,s),s};a.orig=i.execCommand,a.listeners=[],a.callListeners=o,i.execCommand=a}},unwrapExecCommand:function(){var i=this.options.ownerDocument;i.execCommand.orig&&(i.execCommand=i.execCommand.orig)},setupListener:function(i){if(!this.listeners[i]){switch(i){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(o){this.contentCache[o.getAttribute("medium-editor-index")]=o.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste);break}this.listeners[i]=!0}},attachToEachElement:function(i,o){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(a){this.attachDOMEvent(a,i,o.bind(this))},this),this.eventsCache.push({name:i,handler:o})},cleanupElement:function(i){var o=i.getAttribute("medium-editor-index");o&&(this.detachAllEventsFromElement(i),this.contentCache&&delete this.contentCache[o])},focusElement:function(i){i.focus(),this.updateFocus(i,{target:i,type:"focus"})},updateFocus:function(i,o){var a=this.base.getFocusedElement(),s;a&&o.type==="click"&&this.lastMousedownTarget&&(e.util.isDescendant(a,this.lastMousedownTarget,!0)||t(this.base.extensions,this.lastMousedownTarget))&&(s=a),s||this.base.elements.some(function(u){return!s&&e.util.isDescendant(u,i,!0)&&(s=u),!!s},this);var l=!e.util.isDescendant(a,i,!0)&&!t(this.base.extensions,i);s!==a&&(a&&l&&(a.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",o,a)),s&&(s.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",o,s))),l&&this.triggerCustomEvent("externalInteraction",o)},updateInput:function(i,o){if(this.contentCache){var a=i.getAttribute("medium-editor-index"),s=i.innerHTML;s!==this.contentCache[a]&&this.triggerCustomEvent("editableInput",o,i),this.contentCache[a]=s}},handleDocumentSelectionChange:function(i){if(i.currentTarget&&i.currentTarget.activeElement){var o=i.currentTarget.activeElement,a;this.base.elements.some(function(s){return e.util.isDescendant(s,o,!0)?(a=s,!0):!1},this),a&&this.updateInput(a,{target:o,currentTarget:a})}},handleDocumentExecCommand:function(){var i=this.base.getFocusedElement();i&&this.updateInput(i,{target:i,currentTarget:i})},handleBodyClick:function(i){this.updateFocus(i.target,i)},handleBodyFocus:function(i){this.updateFocus(i.target,i)},handleBodyMousedown:function(i){this.lastMousedownTarget=i.target},handleInput:function(i){this.updateInput(i.currentTarget,i)},handleClick:function(i){this.triggerCustomEvent("editableClick",i,i.currentTarget)},handleBlur:function(i){this.triggerCustomEvent("editableBlur",i,i.currentTarget)},handleKeypress:function(i){if(this.triggerCustomEvent("editableKeypress",i,i.currentTarget),this.keypressUpdateInput){var o={target:i.target,currentTarget:i.currentTarget};setTimeout(function(){this.updateInput(o.currentTarget,o)}.bind(this),0)}},handleKeyup:function(i){this.triggerCustomEvent("editableKeyup",i,i.currentTarget)},handleMouseover:function(i){this.triggerCustomEvent("editableMouseover",i,i.currentTarget)},handleDragging:function(i){this.triggerCustomEvent("editableDrag",i,i.currentTarget)},handleDrop:function(i){this.triggerCustomEvent("editableDrop",i,i.currentTarget)},handlePaste:function(i){this.triggerCustomEvent("editablePaste",i,i.currentTarget)},handleKeydown:function(i){if(this.triggerCustomEvent("editableKeydown",i,i.currentTarget),e.util.isKey(i,e.util.keyCode.SPACE))return this.triggerCustomEvent("editableKeydownSpace",i,i.currentTarget);if(e.util.isKey(i,e.util.keyCode.ENTER)||i.ctrlKey&&e.util.isKey(i,e.util.keyCode.M))return this.triggerCustomEvent("editableKeydownEnter",i,i.currentTarget);if(e.util.isKey(i,e.util.keyCode.TAB))return this.triggerCustomEvent("editableKeydownTab",i,i.currentTarget);if(e.util.isKey(i,[e.util.keyCode.DELETE,e.util.keyCode.BACKSPACE]))return this.triggerCustomEvent("editableKeydownDelete",i,i.currentTarget)}},e.Events=r}(),function(){var t=e.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(r){t.isBuiltInButton(r)?e.Extension.call(this,this.defaults[r]):e.Extension.call(this,r)},init:function(){e.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return typeof this.action=="function"?this.action(this.base.options):this.action},getAria:function(){return typeof this.aria=="function"?this.aria(this.base.options):this.aria},getTagNames:function(){return typeof this.tagNames=="function"?this.tagNames(this.base.options):this.tagNames},createButton:function(){var r=this.document.createElement("button"),i=this.contentDefault,o=this.getAria(),a=this.getEditorOption("buttonLabels");return r.classList.add("medium-editor-action"),r.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(s){r.classList.add(s)}),r.setAttribute("data-action",this.getAction()),o&&(r.setAttribute("title",o),r.setAttribute("aria-label",o)),this.attrs&&Object.keys(this.attrs).forEach(function(s){r.setAttribute(s,this.attrs[s])},this),a==="fontawesome"&&this.contentFA&&(i=this.contentFA),r.innerHTML=i,r},handleClick:function(r){r.preventDefault(),r.stopPropagation();var i=this.getAction();i&&this.execAction(i)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var r=null;return this.useQueryState&&(r=this.base.queryCommandState(this.getAction())),r},isAlreadyApplied:function(r){var i=!1,o=this.getTagNames(),a,s;return this.knownState===!1||this.knownState===!0?this.knownState:(o&&o.length>0&&(i=o.indexOf(r.nodeName.toLowerCase())!==-1),!i&&this.style&&(a=this.style.value.split("|"),s=this.window.getComputedStyle(r,null).getPropertyValue(this.style.prop),a.forEach(function(l){this.knownState||(i=s.indexOf(l)!==-1,(i||this.style.prop!=="text-decoration")&&(this.knownState=i))},this)),i)}});t.isBuiltInButton=function(r){return typeof r=="string"&&e.extensions.button.prototype.defaults.hasOwnProperty(r)},e.extensions.button=t}(),function(){e.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var t=e.extensions.button.extend({init:function(){e.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return this.hasForm?this.getForm().classList.contains(this.activeClass):!1},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var r=this.base.getExtensionByName("toolbar");r&&r.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var r=this.base.getExtensionByName("toolbar");r&&r.hideToolbarDefaultActions()},setToolbarPosition:function(){var r=this.base.getExtensionByName("toolbar");r&&r.setToolbarPosition()}});e.extensions.form=t}(),function(){var t=e.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(r){r.preventDefault(),r.stopPropagation();var i=e.selection.getSelectionRange(this.document);return i.startContainer.nodeName.toLowerCase()==="a"||i.endContainer.nodeName.toLowerCase()==="a"||e.util.getClosestTag(e.selection.getSelectedParentElement(i),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(r){e.util.isKey(r,e.util.keyCode.K)&&e.util.isMetaCtrlKey(r)&&!r.shiftKey&&this.handleClick(r)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var r=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return r.push('<a href="#" class="medium-editor-toolbar-save">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),r.push('<a href="#" class="medium-editor-toolbar-close">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&r.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&r.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),r.join("")},isDisplayed:function(){return e.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){e.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(r){var i=this.getInput(),o=this.getAnchorTargetCheckbox(),a=this.getAnchorButtonCheckbox();if(r=r||{value:""},typeof r=="string"&&(r={value:r}),this.base.saveSelection(),this.hideToolbarDefaultActions(),e.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),i.value=r.value,i.focus(),o&&(o.checked=r.target==="_blank"),a){var s=r.buttonClass?r.buttonClass.split(" "):[];a.checked=s.indexOf(this.customClassOption)!==-1}},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},getFormOpts:function(){var r=this.getAnchorTargetCheckbox(),i=this.getAnchorButtonCheckbox(),o={value:this.getInput().value.trim()};return this.linkValidation&&(o.value=this.checkLinkFormat(o.value)),o.target="_self",r&&r.checked&&(o.target="_blank"),i&&i.checked&&(o.buttonClass=this.customClassOption),o},doFormSave:function(){var r=this.getFormOpts();this.completeFormSave(r)},completeFormSave:function(r){this.base.restoreSelection(),this.execAction(this.action,r),this.base.checkSelection()},ensureEncodedUri:function(r){return r===decodeURI(r)?encodeURI(r):r},ensureEncodedUriComponent:function(r){return r===decodeURIComponent(r)?encodeURIComponent(r):r},ensureEncodedParam:function(r){var i=r.split("="),o=i[0],a=i[1];return o+(a===void 0?"":"="+this.ensureEncodedUriComponent(a))},ensureEncodedQuery:function(r){return r.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(r){var i=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,o=i.test(r),a="",s=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,l=r.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),u=l[1],c=l[2],f=l[3];if(s.test(r))return"tel:"+r;if(!o){var d=u.split("/")[0];(d.match(/.+(\.|:).+/)||d==="localhost")&&(a="http://")}return a+this.ensureEncodedUri(u)+(c===void 0?"":"?"+this.ensureEncodedQuery(c))+(f===void 0?"":"#"+f)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(r){var i=r.querySelector(".medium-editor-toolbar-close"),o=r.querySelector(".medium-editor-toolbar-save"),a=r.querySelector(".medium-editor-toolbar-input");this.on(r,"click",this.handleFormClick.bind(this)),this.on(a,"keyup",this.handleTextboxKeyup.bind(this)),this.on(i,"click",this.handleCloseClick.bind(this)),this.on(o,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var r=this.document,i=r.createElement("div");return i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),i.innerHTML=this.getTemplate(),this.attachFormEvents(i),i},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(r){if(r.keyCode===e.util.keyCode.ENTER){r.preventDefault(),this.doFormSave();return}r.keyCode===e.util.keyCode.ESCAPE&&(r.preventDefault(),this.doFormCancel())},handleFormClick:function(r){r.stopPropagation()},handleSaveClick:function(r){r.preventDefault(),this.doFormSave()},handleCloseClick:function(r){r.preventDefault(),this.doFormCancel()}});e.extensions.anchor=t}(),function(){var t=e.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var r=this.document.createElement("div");return r.id="medium-editor-anchor-preview-"+this.getEditorId(),r.className="medium-editor-anchor-preview",r.innerHTML=this.getTemplate(),this.on(r,"click",this.handleClick.bind(this)),r},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(r){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||r.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=r.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=r.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=r,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(r){r=r||this.activeAnchor;var i=this.window.innerWidth,o=this.anchorPreview.offsetHeight,a=r.getBoundingClientRect(),s=this.diffLeft,l=this.diffTop,u=this.getEditorOption("elementsContainer"),c=["absolute","fixed"].indexOf(window.getComputedStyle(u).getPropertyValue("position"))>-1,f={},d,h,v,p,g;d=this.anchorPreview.offsetWidth/2;var y=this.base.getExtensionByName("toolbar");y&&(s=y.diffLeft,l=y.diffTop),h=s-d,c?(p=u.getBoundingClientRect(),["top","left"].forEach(function(b){f[b]=a[b]-p[b]}),f.width=a.width,f.height=a.height,a=f,i=p.width,g=u.scrollTop):g=this.window.pageYOffset,v=a.left+a.width/2,g+=o+a.top+a.height-l-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(g)+"px",this.anchorPreview.style.right="initial",v<d?(this.anchorPreview.style.left=h+d+"px",this.anchorPreview.style.right="initial"):i-v<d?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=h+v+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(r){var i=this.base.getExtensionByName("anchor"),o=this.activeAnchor;i&&o&&(r.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(o){var a={value:o.attributes.href.value,target:o.getAttribute("target"),buttonClass:o.getAttribute("class")};i.showForm(a),o=null}}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(r){var i=e.util.getClosestTag(r.target,"a");if(i!==!1){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(i.outerHTML)||/href=["']#\S+["']/.test(i.outerHTML)))return!0;var o=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&o&&o.isDisplayed&&o.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==i&&this.detachPreviewHandlers(),this.anchorToPreview=i,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=new Date().getTime(),this.hovering=!0},handlePreviewMouseout:function(r){(!r.relatedTarget||!/anchor-preview/.test(r.relatedTarget.className))&&(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var r=new Date().getTime()-this.lastOver;r>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=new Date().getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});e.extensions.anchorPreview=t}(),function(){var t,r,i,o,a;t=[" ","	",`
`,"\r"," "," "," "," "," ","\u2028","\u2029"],r="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",i="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+r+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?«»“”‘’])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+r+"))",o=new RegExp("^("+r+")$","i"),a=new RegExp(i,"gi");function s(u){return!e.util.getClosestTag(u,"a")}var l=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var u=0,c=0;c<this.window._mediumEditors.length;c++){var f=this.window._mediumEditors[c];f!==null&&f.getExtensionByName("autoLink")!==void 0&&u++}return u===1},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(u,c){this.performLinking(c)},onKeypress:function(u){this.disableEventHandling||e.util.isKey(u,[e.util.keyCode.SPACE,e.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var c=this.base.exportSelection();this.performLinking(u.target)&&this.base.importSelection(c,!0)}catch(f){window.console&&window.console.error("Failed to perform linking",f),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(u){var c=e.util.splitByBlockElements(u),f=!1;c.length===0&&(c=[u]);for(var d=0;d<c.length;d++)f=this.removeObsoleteAutoLinkSpans(c[d])||f,f=this.performLinkingWithinElement(c[d])||f;return this.base.events.updateInput(u,{target:u,currentTarget:u}),f},removeObsoleteAutoLinkSpans:function(u){if(!u||u.nodeType===3)return!1;for(var c=u.querySelectorAll('span[data-auto-link="true"]'),f=!1,d=0;d<c.length;d++){var h=c[d].textContent;if(h.indexOf("://")===-1&&(h=e.util.ensureUrlHasProtocol(h)),c[d].getAttribute("data-href")!==h&&s(c[d])){f=!0;var v=h.replace(/\s+$/,"");if(c[d].getAttribute("data-href")===v){var p=h.length-v.length,g=e.util.splitOffDOMTree(c[d],this.splitTextBeforeEnd(c[d],p));c[d].parentNode.insertBefore(g,c[d].nextSibling)}else e.util.unwrap(c[d],this.document)}}return f},splitTextBeforeEnd:function(u,c){for(var f=this.document.createTreeWalker(u,NodeFilter.SHOW_TEXT,null,!1),d=!0;d;)d=f.lastChild()!==null;for(var h,v,p;c>0&&p!==null;)h=f.currentNode,v=h.nodeValue,v.length>c?(p=h.splitText(v.length-c),c=0):(p=f.previousNode(),c-=v.length);return p},performLinkingWithinElement:function(u){for(var c=this.findLinkableText(u),f=!1,d=0;d<c.length;d++){var h=e.util.findOrCreateMatchingTextNodes(this.document,u,c[d]);this.shouldNotLink(h)||this.createAutoLink(h,c[d].href)}return f},shouldNotLink:function(u){for(var c=!1,f=0;f<u.length&&c===!1;f++)c=!!e.util.traverseUp(u[f],function(d){return d.nodeName.toLowerCase()==="a"||d.getAttribute&&d.getAttribute("data-auto-link")==="true"});return c},findLinkableText:function(u){for(var c=u.textContent,f=null,d=[];(f=a.exec(c))!==null;){var h=!0,v=f.index+f[0].length;h=(f.index===0||t.indexOf(c[f.index-1])!==-1)&&(v===c.length||t.indexOf(c[v])!==-1),h=h&&(f[0].indexOf("/")!==-1||o.test(f[0].split(".").pop().split("?").shift())),h&&d.push({href:f[0],start:f.index,end:v})}return d},createAutoLink:function(u,c){c=e.util.ensureUrlHasProtocol(c);var f=e.util.createLink(this.document,u,c,this.getEditorOption("targetBlank")?"_blank":null),d=this.document.createElement("span");for(d.setAttribute("data-auto-link","true"),d.setAttribute("data-href",c),f.insertBefore(d,f.firstChild);f.childNodes.length>1;)d.appendChild(f.childNodes[1])}});e.extensions.autoLink=l}(),function(){var t="medium-editor-dragover";function r(o){var a=e.util.getContainerEditorElement(o),s=Array.prototype.slice.call(a.parentElement.querySelectorAll("."+t));s.forEach(function(l){l.classList.remove(t)})}var i=e.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(o){o.preventDefault(),o.dataTransfer.dropEffect="copy";var a=o.target.classList?o.target:o.target.parentElement;r(a),o.type==="dragover"&&a.classList.add(t)},handleDrop:function(o){o.preventDefault(),o.stopPropagation(),this.base.selectElement(o.target);var a=this.base.exportSelection();a.start=a.end,this.base.importSelection(a),o.dataTransfer.files&&Array.prototype.slice.call(o.dataTransfer.files).forEach(function(s){this.isAllowedFile(s)&&s.type.match("image")&&this.insertImageFile(s)},this),r(o.target)},isAllowedFile:function(o){return this.allowedTypes.some(function(a){return!!o.type.match(a)})},insertImageFile:function(o){if(typeof FileReader=="function"){var a=new FileReader;a.readAsDataURL(o),a.addEventListener("load",function(s){var l=this.document.createElement("img");l.src=s.target.result,e.util.insertHTMLCommand(this.document,l.outerHTML)}.bind(this))}}});e.extensions.fileDragging=i}(),function(){var t=e.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(r){var i=r.key.charCodeAt(0);this.keys[i]||(this.keys[i]=[]),this.keys[i].push(r)},this)},handleKeydown:function(r){var i=e.util.getKeyCode(r);if(this.keys[i]){var o=e.util.isMetaCtrlKey(r),a=!!r.shiftKey,s=!!r.altKey;this.keys[i].forEach(function(l){l.meta===o&&l.shift===a&&(l.alt===s||l.alt===void 0)&&(r.preventDefault(),r.stopPropagation(),typeof l.command=="function"?l.command.apply(this):l.command!==!1&&this.execAction(l.command))},this)}}});e.extensions.keyboardCommands=t}(),function(){var t=e.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(r){if(r.preventDefault(),r.stopPropagation(),!this.isDisplayed()){var i=this.document.queryCommandValue("fontName")+"";this.showForm(i)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(r){var i=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),i.value=r||"",i.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var r=this.document,i=r.createElement("div"),o=r.createElement("select"),a=r.createElement("a"),s=r.createElement("a"),l;i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(i,"click",this.handleFormClick.bind(this));for(var u=0;u<this.fonts.length;u++)l=r.createElement("option"),l.innerHTML=this.fonts[u],l.value=this.fonts[u],o.appendChild(l);return o.className="medium-editor-toolbar-select",i.appendChild(o),this.on(o,"change",this.handleFontChange.bind(this)),s.setAttribute("href","#"),s.className="medium-editor-toobar-save",s.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;",i.appendChild(s),this.on(s,"click",this.handleSaveClick.bind(this),!0),a.setAttribute("href","#"),a.className="medium-editor-toobar-close",a.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;",i.appendChild(a),this.on(a,"click",this.handleCloseClick.bind(this)),i},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){e.selection.getSelectedElements(this.document).forEach(function(r){r.nodeName.toLowerCase()==="font"&&r.hasAttribute("face")&&r.removeAttribute("face")})},handleFontChange:function(){var r=this.getSelect().value;r===""?this.clearFontName():this.execAction("fontName",{value:r})},handleFormClick:function(r){r.stopPropagation()},handleSaveClick:function(r){r.preventDefault(),this.doFormSave()},handleCloseClick:function(r){r.preventDefault(),this.doFormCancel()}});e.extensions.fontName=t}(),function(){var t=e.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(r){if(r.preventDefault(),r.stopPropagation(),!this.isDisplayed()){var i=this.document.queryCommandValue("fontSize")+"";this.showForm(i)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(r){var i=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),i.value=r||"",i.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var r=this.document,i=r.createElement("div"),o=r.createElement("input"),a=r.createElement("a"),s=r.createElement("a");return i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(i,"click",this.handleFormClick.bind(this)),o.setAttribute("type","range"),o.setAttribute("min","1"),o.setAttribute("max","7"),o.className="medium-editor-toolbar-input",i.appendChild(o),this.on(o,"change",this.handleSliderChange.bind(this)),s.setAttribute("href","#"),s.className="medium-editor-toobar-save",s.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;",i.appendChild(s),this.on(s,"click",this.handleSaveClick.bind(this),!0),a.setAttribute("href","#"),a.className="medium-editor-toobar-close",a.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;",i.appendChild(a),this.on(a,"click",this.handleCloseClick.bind(this)),i},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){e.selection.getSelectedElements(this.document).forEach(function(r){r.nodeName.toLowerCase()==="font"&&r.hasAttribute("size")&&r.removeAttribute("size")})},handleSliderChange:function(){var r=this.getInput().value;r==="4"?this.clearFontSize():this.execAction("fontSize",{value:r})},handleFormClick:function(r){r.stopPropagation()},handleSaveClick:function(r){r.preventDefault(),this.doFormSave()},handleCloseClick:function(r){r.preventDefault(),this.doFormCancel()}});e.extensions.fontSize=t}(),function(){var t="%ME_PASTEBIN%",r=null,i=null,o=function(u){u.stopPropagation()};function a(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function s(u,c,f){var d=u.clipboardData||c.clipboardData||f.dataTransfer,h={};if(!d)return h;if(d.getData){var v=d.getData("Text");v&&v.length>0&&(h["text/plain"]=v)}if(d.types)for(var p=0;p<d.types.length;p++){var g=d.types[p];h[g]=d.getData(g)}return h}var l=e.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){e.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(u){this.on(u,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(u,c){this.on(c,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(u,c){if(!u.defaultPrevented){var f=s(u,this.window,this.document),d=f["text/html"],h=f["text/plain"];this.window.clipboardData&&u.clipboardData===void 0&&!d&&(d=h),(d||h)&&(u.preventDefault(),this.doPaste(d,h,c))}},doPaste:function(u,c,f){var d,h="",v;if(this.cleanPastedHTML&&u)return this.cleanPaste(u);if(c){if(this.getEditorOption("disableReturn")||f&&f.getAttribute("data-disable-return"))h=e.util.htmlEntities(c);else if(d=c.split(/[\r\n]+/g),d.length>1)for(v=0;v<d.length;v+=1)d[v]!==""&&(h+="<p>"+e.util.htmlEntities(d[v])+"</p>");else h=e.util.htmlEntities(d[0]);e.util.insertHTMLCommand(this.document,h)}},handlePasteBinPaste:function(u){if(u.defaultPrevented){this.removePasteBin();return}var c=s(u,this.window,this.document),f=c["text/html"],d=c["text/plain"],h=i;if(!this.cleanPastedHTML||f){u.preventDefault(),this.removePasteBin(),this.doPaste(f,d,h),this.trigger("editablePaste",{currentTarget:h,target:h},h);return}setTimeout(function(){this.cleanPastedHTML&&(f=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(f,d,h),this.trigger("editablePaste",{currentTarget:h,target:h},h)}.bind(this),0)},handleKeydown:function(u,c){e.util.isKey(u,e.util.keyCode.V)&&e.util.isMetaCtrlKey(u)&&(u.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(c))},createPasteBin:function(u){var c,f=e.selection.getSelectionRange(this.document),d=this.window.pageYOffset;i=u,f&&(c=f.getClientRects(),c.length?d+=c[0].top:f.startContainer.getBoundingClientRect!==void 0?d+=f.startContainer.getBoundingClientRect().top:d+=f.getBoundingClientRect().top),r=f;var h=this.document.createElement("div");h.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),h.setAttribute("style","border: 1px red solid; position: absolute; top: "+d+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),h.setAttribute("contentEditable",!0),h.innerHTML=t,this.document.body.appendChild(h),this.on(h,"focus",o),this.on(h,"focusin",o),this.on(h,"focusout",o),h.focus(),e.selection.selectNode(h,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(h,"paste",this.boundHandlePaste)},removePasteBin:function(){r!==null&&(e.selection.selectRange(this.document,r),r=null),i!==null&&(i=null);var u=this.getPasteBin();u&&u&&(this.off(u,"focus",o),this.off(u,"focusin",o),this.off(u,"focusout",o),this.off(u,"paste",this.boundHandlePaste),u.parentElement.removeChild(u))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var u=this.getPasteBin();if(!u||u.firstChild&&u.firstChild.id==="mcepastebin")return!1;var c=u.innerHTML;return!c||c===t?!1:c},cleanPaste:function(u){var c,f,d,h,v=/<p|<br|<div/.test(u),p=[].concat(this.preCleanReplacements||[],a(),this.cleanReplacements||[]);for(c=0;c<p.length;c+=1)u=u.replace(p[c][0],p[c][1]);if(!v)return this.pasteHTML(u);for(d=this.document.createElement("div"),d.innerHTML="<p>"+u.split("<br><br>").join("</p><p>")+"</p>",f=d.querySelectorAll("a,p,div,br"),c=0;c<f.length;c+=1)switch(h=f[c],h.innerHTML=h.innerHTML.replace(/\n/gi," "),h.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(h);break;case"br":this.filterLineBreak(h);break}this.pasteHTML(d.innerHTML)},pasteHTML:function(u,c){c=e.util.defaults({},c,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var f,d,h,v,p=this.document.createDocumentFragment();for(p.appendChild(this.document.createElement("body")),v=p.querySelector("body"),v.innerHTML=u,this.cleanupSpans(v),f=v.querySelectorAll("*"),h=0;h<f.length;h+=1)d=f[h],d.nodeName.toLowerCase()==="a"&&this.getEditorOption("targetBlank")&&e.util.setTargetBlank(d),e.util.cleanupAttrs(d,c.cleanAttrs),e.util.cleanupTags(d,c.cleanTags),e.util.unwrapTags(d,c.unwrapTags);e.util.insertHTMLCommand(this.document,v.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(u){return u&&(u.nodeName.toLowerCase()==="p"||u.nodeName.toLowerCase()==="div")},filterCommonBlocks:function(u){/^\s*$/.test(u.textContent)&&u.parentNode&&u.parentNode.removeChild(u)},filterLineBreak:function(u){this.isCommonBlock(u.previousElementSibling)?this.removeWithParent(u):this.isCommonBlock(u.parentNode)&&(u.parentNode.firstChild===u||u.parentNode.lastChild===u)?this.removeWithParent(u):u.parentNode&&u.parentNode.childElementCount===1&&u.parentNode.textContent===""&&this.removeWithParent(u)},removeWithParent:function(u){u&&u.parentNode&&(u.parentNode.parentNode&&u.parentNode.childElementCount===1?u.parentNode.parentNode.removeChild(u.parentNode):u.parentNode.removeChild(u))},cleanupSpans:function(u){var c,f,d,h=u.querySelectorAll(".replace-with"),v=function(p){return p&&p.nodeName!=="#text"&&p.getAttribute("contenteditable")==="false"};for(c=0;c<h.length;c+=1)f=h[c],d=this.document.createElement(f.classList.contains("bold")?"b":"i"),f.classList.contains("bold")&&f.classList.contains("italic")?d.innerHTML="<i>"+f.innerHTML+"</i>":d.innerHTML=f.innerHTML,f.parentNode.replaceChild(d,f);for(h=u.querySelectorAll("span"),c=0;c<h.length;c+=1){if(f=h[c],e.util.traverseUp(f,v))return!1;e.util.unwrap(f,this.document)}}});e.extensions.paste=l}(),function(){var t=e.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(r,i){this.initElement(i)},initElement:function(r){r.getAttribute("data-placeholder")||r.setAttribute("data-placeholder",this.text),this.updatePlaceholder(r)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(r,i){this.cleanupElement(i)},cleanupElement:function(r){r.getAttribute("data-placeholder")===this.text&&r.removeAttribute("data-placeholder")},showPlaceholder:function(r){r&&(e.util.isFF&&r.childNodes.length===0?(r.classList.add("medium-editor-placeholder-relative"),r.classList.remove("medium-editor-placeholder")):(r.classList.add("medium-editor-placeholder"),r.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(r){r&&(r.classList.remove("medium-editor-placeholder"),r.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(r,i){if(r.querySelector("img, blockquote, ul, ol, table")||r.textContent.replace(/^\s+|\s+$/g,"")!=="")return this.hidePlaceholder(r);i||this.showPlaceholder(r)},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(r,i){var o=this.hideOnClick&&i===this.base.getFocusedElement();this.updatePlaceholder(i,o)},handleFocus:function(r,i){this.hidePlaceholder(i)},handleBlur:function(r,i){this.updatePlaceholder(i)}});e.extensions.placeholder=t}(),function(){var t=e.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(r,i){return this.base.extensions.forEach(function(o){if(o!==this)return r.apply(i||this,arguments)},this)},createToolbar:function(){var r=this.document.createElement("div");return r.id="medium-editor-toolbar-"+this.getEditorId(),r.className="medium-editor-toolbar",this.static?r.className+=" static-toolbar":this.relativeContainer?r.className+=" medium-editor-relative-toolbar":r.className+=" medium-editor-stalker-toolbar",r.appendChild(this.createToolbarButtons()),this.forEachExtension(function(i){i.hasForm&&r.appendChild(i.getForm())}),this.attachEventHandlers(),r},createToolbarButtons:function(){var r=this.document.createElement("ul"),i,o,a,s,l,u;return r.id="medium-editor-toolbar-actions"+this.getEditorId(),r.className="medium-editor-toolbar-actions",r.style.display="block",this.buttons.forEach(function(c){typeof c=="string"?(l=c,u=null):(l=c.name,u=c),s=this.base.addBuiltInExtension(l,u),s&&typeof s.getButton=="function"&&(o=s.getButton(this.base),i=this.document.createElement("li"),e.util.isElement(o)?i.appendChild(o):i.innerHTML=o,r.appendChild(i))},this),a=r.querySelectorAll("button"),a.length>0&&(a[0].classList.add(this.firstButtonClass),a[a.length-1].classList.add(this.lastButtonClass)),r},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=e.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(r){if(r&&r.target&&e.util.isDescendant(this.getToolbarElement(),r.target))return!1;this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return this.getToolbarActionsElement().style.display==="block"},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(r){r.hasForm&&r.isDisplayed()&&r.hideForm()})},multipleBlockElementsSelected:function(){var r=/<[^\/>][^>]*><\/[^>]+>/gim,i=new RegExp("<("+e.util.blockContainerElementNames.join("|")+")[^>]*>","g"),o=e.selection.getSelectionHtml(this.document).replace(r,""),a=o.match(i);return!!a&&a.length>1},modifySelection:function(){var r=this.window.getSelection(),i=r.getRangeAt(0);if(this.standardizeSelectionStart&&i.startContainer.nodeValue&&i.startOffset===i.startContainer.nodeValue.length){var o=e.util.findAdjacentTextNodeWithContent(e.selection.getSelectionElement(this.window),i.startContainer,this.document);if(o){for(var a=0;o.nodeValue.substr(a,1).trim().length===0;)a=a+1;i=e.selection.select(this.document,o,a,i.endContainer,i.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||e.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var r=e.selection.getSelectionElement(this.window);if(!r||this.getEditorElements().indexOf(r)===-1||r.getAttribute("data-disable-toolbar"))return this.hideToolbar();if(this.updateOnEmptySelection&&this.static)return this.showAndUpdateToolbar();if(!e.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected())return this.hideToolbar();this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(r){typeof r.isActive=="function"&&typeof r.setInactive=="function"&&r.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var r=[],i=null,o=e.selection.getSelectionRange(this.document),a,s=function(l){typeof l.checkState=="function"?l.checkState(a):typeof l.isActive=="function"&&typeof l.isAlreadyApplied=="function"&&typeof l.setActive=="function"&&!l.isActive()&&l.isAlreadyApplied(a)&&l.setActive()};if(o&&(this.forEachExtension(function(l){if(typeof l.queryCommandState=="function"&&(i=l.queryCommandState(),i!==null)){i&&typeof l.setActive=="function"&&l.setActive();return}r.push(l)}),a=e.selection.getSelectedParentElement(o),!!this.getEditorElements().some(function(l){return e.util.isDescendant(l,a,!0)})))for(;a&&(r.forEach(s),!e.util.isMediumEditorElement(a));)a=a.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var r=this.base.getFocusedElement(),i=this.window.getSelection();if(!r)return this;(this.static||!i.isCollapsed)&&(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(r):this.positionToolbar(i)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))},positionStaticToolbar:function(r){this.getToolbarElement().style.left="0";var i=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,o=this.window.innerWidth,a=this.getToolbarElement(),s=r.getBoundingClientRect(),l=s.top+i,u=s.left+s.width/2,c=a.offsetHeight,f=a.offsetWidth,d=f/2,h;switch(this.sticky?i>l+r.offsetHeight-c-this.stickyTopOffset?(a.style.top=l+r.offsetHeight-c+"px",a.classList.remove("medium-editor-sticky-toolbar")):i>l-c-this.stickyTopOffset?(a.classList.add("medium-editor-sticky-toolbar"),a.style.top=this.stickyTopOffset+"px"):(a.classList.remove("medium-editor-sticky-toolbar"),a.style.top=l-c+"px"):a.style.top=l-c+"px",this.align){case"left":h=s.left;break;case"right":h=s.right-f;break;case"center":h=u-d;break}h<0?h=0:h+f>o&&(h=o-Math.ceil(f)-1),a.style.left=h+"px"},positionToolbar:function(r){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var i=r.getRangeAt(0),o=i.getBoundingClientRect();(!o||o.height===0&&o.width===0&&i.startContainer===i.endContainer)&&(i.startContainer.nodeType===1&&i.startContainer.querySelector("img")?o=i.startContainer.querySelector("img").getBoundingClientRect():o=i.startContainer.getBoundingClientRect());var a=this.window.innerWidth,s=this.getToolbarElement(),l=s.offsetHeight,u=s.offsetWidth,c=u/2,f=50,d=this.diffLeft-c,h=this.getEditorOption("elementsContainer"),v=["absolute","fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position"))>-1,p={},g={},y,b;v?(b=h.getBoundingClientRect(),["top","left"].forEach(function(C){g[C]=o[C]-b[C]}),g.width=o.width,g.height=o.height,o=g,a=b.width,p.top=h.scrollTop):p.top=this.window.pageYOffset,y=o.left+o.width/2,p.top+=o.top-l,o.top<f?(s.classList.add("medium-toolbar-arrow-over"),s.classList.remove("medium-toolbar-arrow-under"),p.top+=f+o.height-this.diffTop):(s.classList.add("medium-toolbar-arrow-under"),s.classList.remove("medium-toolbar-arrow-over"),p.top+=this.diffTop),y<c?(p.left=d+c,p.right="initial"):a-y<c?(p.left="auto",p.right=0):(p.left=d+y,p.right="initial"),["top","left","right"].forEach(function(C){s.style[C]=p[C]+(isNaN(p[C])?"":"px")})}});e.extensions.toolbar=t}(),function(){var t=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(r){var i="medium-editor-dragover";r.preventDefault(),r.dataTransfer.dropEffect="copy",r.type==="dragover"?r.target.classList.add(i):r.type==="dragleave"&&r.target.classList.remove(i)},handleDrop:function(r){var i="medium-editor-dragover",o;r.preventDefault(),r.stopPropagation(),r.dataTransfer.files&&(o=Array.prototype.slice.call(r.dataTransfer.files,0),o.some(function(a){if(a.type.match("image")){var s,l;s=new FileReader,s.readAsDataURL(a),l="medium-img-"+ +new Date,e.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+l+'" />'),s.onload=function(){var u=this.document.getElementById(l);u&&(u.removeAttribute("id"),u.removeAttribute("class"),u.src=s.result)}.bind(this)}}.bind(this))),r.target.classList.remove(i)}});e.extensions.imageDragging=t}(),function(){function t(w){var M=e.selection.getSelectionStart(this.options.ownerDocument),L=M.textContent,V=e.selection.getCaretOffsets(M);(L[V.left-1]===void 0||L[V.left-1].trim()===""||L[V.left]!==void 0&&L[V.left].trim()==="")&&w.preventDefault()}function r(w,M){if(this.options.disableReturn||M.getAttribute("data-disable-return"))w.preventDefault();else if(this.options.disableDoubleReturn||M.getAttribute("data-disable-double-return")){var L=e.selection.getSelectionStart(this.options.ownerDocument);(L&&L.textContent.trim()===""&&L.nodeName.toLowerCase()!=="li"||L.previousElementSibling&&L.previousElementSibling.nodeName.toLowerCase()!=="br"&&L.previousElementSibling.textContent.trim()==="")&&w.preventDefault()}}function i(w){var M=e.selection.getSelectionStart(this.options.ownerDocument),L=M&&M.nodeName.toLowerCase();L==="pre"&&(w.preventDefault(),e.util.insertHTMLCommand(this.options.ownerDocument,"    ")),e.util.isListItem(M)&&(w.preventDefault(),w.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function o(w){var M,L=e.selection.getSelectionStart(this.options.ownerDocument),V=L.nodeName.toLowerCase(),pe=/^(\s+|<br\/?>)?$/i,Ee=/h\d/i;e.util.isKey(w,[e.util.keyCode.BACKSPACE,e.util.keyCode.ENTER])&&L.previousElementSibling&&Ee.test(V)&&e.selection.getCaretOffsets(L).left===0?e.util.isKey(w,e.util.keyCode.BACKSPACE)&&pe.test(L.previousElementSibling.innerHTML)?(L.previousElementSibling.parentNode.removeChild(L.previousElementSibling),w.preventDefault()):!this.options.disableDoubleReturn&&e.util.isKey(w,e.util.keyCode.ENTER)&&(M=this.options.ownerDocument.createElement("p"),M.innerHTML="<br>",L.previousElementSibling.parentNode.insertBefore(M,L),w.preventDefault()):e.util.isKey(w,e.util.keyCode.DELETE)&&L.nextElementSibling&&L.previousElementSibling&&!Ee.test(V)&&pe.test(L.innerHTML)&&Ee.test(L.nextElementSibling.nodeName.toLowerCase())?(e.selection.moveCursor(this.options.ownerDocument,L.nextElementSibling),L.previousElementSibling.parentNode.removeChild(L),w.preventDefault()):e.util.isKey(w,e.util.keyCode.BACKSPACE)&&V==="li"&&pe.test(L.innerHTML)&&!L.previousElementSibling&&!L.parentElement.previousElementSibling&&L.nextElementSibling&&L.nextElementSibling.nodeName.toLowerCase()==="li"?(M=this.options.ownerDocument.createElement("p"),M.innerHTML="<br>",L.parentElement.parentElement.insertBefore(M,L.parentElement),e.selection.moveCursor(this.options.ownerDocument,M),L.parentElement.removeChild(L),w.preventDefault()):e.util.isKey(w,e.util.keyCode.BACKSPACE)&&e.util.getClosestTag(L,"blockquote")!==!1&&e.selection.getCaretOffsets(L).left===0?(w.preventDefault(),e.util.execFormatBlock(this.options.ownerDocument,"p")):e.util.isKey(w,e.util.keyCode.ENTER)&&e.util.getClosestTag(L,"blockquote")!==!1&&e.selection.getCaretOffsets(L).right===0?(M=this.options.ownerDocument.createElement("p"),M.innerHTML="<br>",L.parentElement.insertBefore(M,L.nextSibling),e.selection.moveCursor(this.options.ownerDocument,M),w.preventDefault()):e.util.isKey(w,e.util.keyCode.BACKSPACE)&&e.util.isMediumEditorElement(L.parentElement)&&!L.previousElementSibling&&L.nextElementSibling&&pe.test(L.innerHTML)&&(w.preventDefault(),e.selection.moveCursor(this.options.ownerDocument,L.nextSibling),L.parentElement.removeChild(L))}function a(w){var M=e.selection.getSelectionStart(this.options.ownerDocument),L;M&&(e.util.isMediumEditorElement(M)&&M.children.length===0&&!e.util.isBlockContainer(M)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),e.util.isKey(w,e.util.keyCode.ENTER)&&!e.util.isListItem(M)&&!e.util.isBlockContainer(M)&&(L=M.nodeName.toLowerCase(),L==="a"?this.options.ownerDocument.execCommand("unlink",!1,null):!w.shiftKey&&!w.ctrlKey&&this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function s(w,M){var L=M.parentNode.querySelector('textarea[medium-editor-textarea-id="'+M.getAttribute("medium-editor-textarea-id")+'"]');L&&(L.value=M.innerHTML.trim())}function l(w){w._mediumEditors||(w._mediumEditors=[null]),this.id||(this.id=w._mediumEditors.length),w._mediumEditors[this.id]=this}function u(w){!w._mediumEditors||!w._mediumEditors[this.id]||(w._mediumEditors[this.id]=null)}function c(w,M,L){var V=[];if(w||(w=[]),typeof w=="string"&&(w=M.querySelectorAll(w)),e.util.isElement(w)&&(w=[w]),L)for(var pe=0;pe<w.length;pe++){var Ee=w[pe];e.util.isElement(Ee)&&!Ee.getAttribute("data-medium-editor-element")&&!Ee.getAttribute("medium-editor-textarea-id")&&V.push(Ee)}else V=Array.prototype.slice.apply(w);return V}function f(w){var M=w.parentNode.querySelector('textarea[medium-editor-textarea-id="'+w.getAttribute("medium-editor-textarea-id")+'"]');M&&(M.classList.remove("medium-editor-hidden"),M.removeAttribute("medium-editor-textarea-id")),w.parentNode&&w.parentNode.removeChild(w)}function d(w,M){return Object.keys(M).forEach(function(L){w[L]===void 0&&(w[L]=M[L])}),w}function h(w,M,L){var V={window:L.options.contentWindow,document:L.options.ownerDocument,base:L};return w=d(w,V),typeof w.init=="function"&&w.init(),w.name||(w.name=M),w}function v(){return this.elements.every(function(w){return!!w.getAttribute("data-disable-toolbar")})?!1:this.options.toolbar!==!1}function p(){return v.call(this)?this.options.anchorPreview!==!1:!1}function g(){return this.options.placeholder!==!1}function y(){return this.options.autoLink!==!1}function b(){return this.options.imageDragging!==!1}function C(){return this.options.keyboardCommands!==!1}function D(){return!this.options.extensions.imageDragging}function B(w){for(var M=this.options.ownerDocument.createElement("div"),L=Date.now(),V="medium-editor-"+L,pe=w.attributes;this.options.ownerDocument.getElementById(V);)L++,V="medium-editor-"+L;M.className=w.className,M.id=V,M.innerHTML=w.value,w.setAttribute("medium-editor-textarea-id",V);for(var Ee=0,Je=pe.length;Ee<Je;Ee++)M.hasAttribute(pe[Ee].nodeName)||M.setAttribute(pe[Ee].nodeName,pe[Ee].value);return w.form&&this.on(w.form,"reset",function(nt){nt.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(V))}.bind(this)),w.classList.add("medium-editor-hidden"),w.parentNode.insertBefore(M,w),M}function R(w,M){if(!w.getAttribute("data-medium-editor-element")){w.nodeName.toLowerCase()==="textarea"&&(w=B.call(this,w),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=s.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),!this.options.disableEditing&&!w.getAttribute("data-disable-editing")&&(w.setAttribute("contentEditable",!0),w.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(w.getAttribute("data-disable-return")||w.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=r.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),!this.options.disableReturn&&!w.getAttribute("data-disable-return")&&this.on(w,"keyup",a.bind(this));var L=e.util.guid();w.setAttribute("data-medium-editor-element",!0),w.classList.add("medium-editor-element"),w.setAttribute("role","textbox"),w.setAttribute("aria-multiline",!0),w.setAttribute("data-medium-editor-editor-index",M),w.setAttribute("medium-editor-index",L),ce[L]=w.innerHTML,this.events.attachAllEventsToElement(w)}return w}function A(){this.subscribe("editableKeydownTab",i.bind(this)),this.subscribe("editableKeydownDelete",o.bind(this)),this.subscribe("editableKeydownEnter",o.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",t.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=r.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function O(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(pe){pe!=="toolbar"&&this.options.extensions[pe]&&this.extensions.push(h(this.options.extensions[pe],pe,this))},this),D.call(this)){var w=this.options.fileDragging;w||(w={},b.call(this)||(w.allowedTypes=[])),this.addBuiltInExtension("fileDragging",w)}var M={paste:!0,"anchor-preview":p.call(this),autoLink:y.call(this),keyboardCommands:C.call(this),placeholder:g.call(this)};Object.keys(M).forEach(function(pe){M[pe]&&this.addBuiltInExtension(pe)},this);var L=this.options.extensions.toolbar;if(!L&&v.call(this)){var V=e.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});L=new e.extensions.toolbar(V)}L&&this.extensions.push(h(L,"toolbar",this))}function F(w,M){var L=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return M&&L.forEach(function(V){M.hasOwnProperty(V[0])&&M[V[0]]!==void 0&&e.util.deprecated(V[0],V[1],"v6.0.0")}),e.util.defaults({},M,w)}function Z(w,M){var L=/^append-(.+)$/gi,V=/justify([A-Za-z]*)$/g,pe,Ee;if(pe=L.exec(w),pe)return e.util.execFormatBlock(this.options.ownerDocument,pe[1]);if(w==="fontSize")return M.size&&e.util.deprecated(".size option for fontSize command",".value","6.0.0"),Ee=M.value||M.size,this.options.ownerDocument.execCommand("fontSize",!1,Ee);if(w==="fontName")return M.name&&e.util.deprecated(".name option for fontName command",".value","6.0.0"),Ee=M.value||M.name,this.options.ownerDocument.execCommand("fontName",!1,Ee);if(w==="createLink")return this.createLink(M);if(w==="image"){var Je=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,Je)}if(w==="html"){var nt=this.options.contentWindow.getSelection().toString().trim();return e.util.insertHTMLCommand(this.options.ownerDocument,nt)}if(V.exec(w)){var ge=this.options.ownerDocument.execCommand(w,!1,null),Le=e.selection.getSelectedParentElement(e.selection.getSelectionRange(this.options.ownerDocument));return Le&&ue.call(this,e.util.getTopBlockContainer(Le)),ge}return Ee=M&&M.value,this.options.ownerDocument.execCommand(w,!1,Ee)}function ue(w){if(w){var M,L=Array.prototype.slice.call(w.childNodes).filter(function(V){var pe=V.nodeName.toLowerCase()==="div";return pe&&!M&&(M=V.style.textAlign),pe});L.length&&(this.saveSelection(),L.forEach(function(V){if(V.style.textAlign===M){var pe=V.lastChild;if(pe){e.util.unwrap(V,this.options.ownerDocument);var Ee=this.options.ownerDocument.createElement("BR");pe.parentNode.insertBefore(Ee,pe.nextSibling)}}},this),w.style.textAlign=M,this.restoreSelection())}}var ce={};e.prototype={init:function(w,M){return this.options=F.call(this,this.defaults,M),this.origElements=w,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(l.call(this,this.options.contentWindow),this.events=new e.Events(this),this.elements=[],this.addElements(this.origElements),this.elements.length!==0&&(this.isActive=!0,O.call(this),A.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(w){typeof w.destroy=="function"&&w.destroy()},this),this.events.destroy(),this.elements.forEach(function(w){this.options.spellcheck&&(w.innerHTML=w.innerHTML),w.removeAttribute("contentEditable"),w.removeAttribute("spellcheck"),w.removeAttribute("data-medium-editor-element"),w.classList.remove("medium-editor-element"),w.removeAttribute("role"),w.removeAttribute("aria-multiline"),w.removeAttribute("medium-editor-index"),w.removeAttribute("data-medium-editor-editor-index"),w.getAttribute("medium-editor-textarea-id")&&f(w)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,u.call(this,this.options.contentWindow))},on:function(w,M,L,V){return this.events.attachDOMEvent(w,M,L,V),this},off:function(w,M,L,V){return this.events.detachDOMEvent(w,M,L,V),this},subscribe:function(w,M){return this.events.attachCustomEvent(w,M),this},unsubscribe:function(w,M){return this.events.detachCustomEvent(w,M),this},trigger:function(w,M,L){return this.events.triggerCustomEvent(w,M,L),this},delay:function(w){var M=this;return setTimeout(function(){M.isActive&&w()},this.options.delay)},serialize:function(){var w,M,L={},V=this.elements.length;for(w=0;w<V;w+=1)M=this.elements[w].id!==""?this.elements[w].id:"element-"+w,L[M]={value:this.elements[w].innerHTML.trim()};return L},getExtensionByName:function(w){var M;return this.extensions&&this.extensions.length&&this.extensions.some(function(L){return L.name===w?(M=L,!0):!1}),M},addBuiltInExtension:function(w,M){var L=this.getExtensionByName(w),V;if(L)return L;switch(w){case"anchor":V=e.util.extend({},this.options.anchor,M),L=new e.extensions.anchor(V);break;case"anchor-preview":L=new e.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":L=new e.extensions.autoLink;break;case"fileDragging":L=new e.extensions.fileDragging(M);break;case"fontname":L=new e.extensions.fontName(this.options.fontName);break;case"fontsize":L=new e.extensions.fontSize(M);break;case"keyboardCommands":L=new e.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":L=new e.extensions.paste(this.options.paste);break;case"placeholder":L=new e.extensions.placeholder(this.options.placeholder);break;default:e.extensions.button.isBuiltInButton(w)&&(M?(V=e.util.defaults({},M,e.extensions.button.prototype.defaults[w]),L=new e.extensions.button(V)):L=new e.extensions.button(w))}return L&&this.extensions.push(h(L,w,this)),L},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var w=this.getExtensionByName("toolbar");return w&&w.checkState(),this},queryCommandState:function(w){var M=/^full-(.+)$/gi,L,V=null;L=M.exec(w),L&&(w=L[1]);try{V=this.options.ownerDocument.queryCommandState(w)}catch(pe){V=null}return V},execAction:function(w,M){var L=/^full-(.+)$/gi,V,pe;return V=L.exec(w),V?(this.saveSelection(),this.selectAllContents(),pe=Z.call(this,V[1],M),this.restoreSelection()):pe=Z.call(this,w,M),(w==="insertunorderedlist"||w==="insertorderedlist")&&e.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),pe},getSelectedParentElement:function(w){return w===void 0&&(w=this.options.contentWindow.getSelection().getRangeAt(0)),e.selection.getSelectedParentElement(w)},selectAllContents:function(){var w=e.selection.getSelectionElement(this.options.contentWindow);if(w){for(;w.children.length===1;)w=w.children[0];this.selectElement(w)}},selectElement:function(w){e.selection.selectNode(w,this.options.ownerDocument);var M=e.selection.getSelectionElement(this.options.contentWindow);M&&this.events.focusElement(M)},getFocusedElement:function(){var w;return this.elements.some(function(M){return!w&&M.getAttribute("data-medium-focused")&&(w=M),!!w},this),w},exportSelection:function(){var w=e.selection.getSelectionElement(this.options.contentWindow),M=this.elements.indexOf(w),L=null;return M>=0&&(L=e.selection.exportSelection(w,this.options.ownerDocument)),L!==null&&M!==0&&(L.editableElementIndex=M),L},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(w,M){if(w){var L=this.elements[w.editableElementIndex||0];e.selection.importSelection(w,L,this.options.ownerDocument,M)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(w){var M=e.selection.getSelectionElement(this.options.contentWindow),L={},V;if(this.elements.indexOf(M)!==-1){try{if(this.events.disableCustomEvent("editableInput"),w.url&&e.util.deprecated(".url option for createLink",".value","6.0.0"),V=w.url||w.value,V&&V.trim().length>0){var pe=this.options.contentWindow.getSelection();if(pe){var Ee=pe.getRangeAt(0),Je=Ee.commonAncestorContainer,nt,ge,Le,$e;if(Ee.endContainer.nodeType===3&&Ee.startContainer.nodeType!==3&&Ee.startOffset===0&&Ee.startContainer.firstChild===Ee.endContainer&&(Je=Ee.endContainer),ge=e.util.getClosestBlockContainer(Ee.startContainer),Le=e.util.getClosestBlockContainer(Ee.endContainer),Je.nodeType!==3&&Je.textContent.length!==0&&ge===Le){var Te=ge||M,Be=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),nt=this.exportSelection(),Be.appendChild(Te.cloneNode(!0)),M===Te?e.selection.select(this.options.ownerDocument,Te.firstChild,0,Te.lastChild,Te.lastChild.nodeType===3?Te.lastChild.nodeValue.length:Te.lastChild.childNodes.length):e.selection.select(this.options.ownerDocument,Te,0,Te,Te.childNodes.length);var N=this.exportSelection();$e=e.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,Be,{start:nt.start-N.start,end:nt.end-N.start,editableElementIndex:nt.editableElementIndex}),$e.length===0&&(Be=this.options.ownerDocument.createDocumentFragment(),Be.appendChild(Je.cloneNode(!0)),$e=[Be.firstChild.firstChild,Be.firstChild.lastChild]),e.util.createLink(this.options.ownerDocument,$e,V.trim());var X=(Be.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;e.util.insertHTMLCommand(this.options.ownerDocument,Be.firstChild.innerHTML.replace(/^\s+/,"")),nt.start-=X,nt.end-=X,this.importSelection(nt)}else this.options.ownerDocument.execCommand("createLink",!1,V);this.options.targetBlank||w.target==="_blank"?e.util.setTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),V):e.util.removeTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),V),w.buttonClass&&e.util.addClassToAnchors(e.selection.getSelectionStart(this.options.ownerDocument),w.buttonClass)}}if(this.options.targetBlank||w.target==="_blank"||w.buttonClass){L=this.options.ownerDocument.createEvent("HTMLEvents"),L.initEvent("input",!0,!0,this.options.contentWindow);for(var U=0,ee=this.elements.length;U<ee;U+=1)this.elements[U].dispatchEvent(L)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",L,M)}},cleanPaste:function(w){this.getExtensionByName("paste").cleanPaste(w)},pasteHTML:function(w,M){this.getExtensionByName("paste").pasteHTML(w,M)},setContent:function(w,M){if(M=M||0,this.elements[M]){var L=this.elements[M];L.innerHTML=w,this.checkContentChanged(L)}},getContent:function(w){return w=w||0,this.elements[w]?this.elements[w].innerHTML.trim():null},checkContentChanged:function(w){w=w||e.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(w,{target:w,currentTarget:w})},resetContent:function(w){if(w){var M=this.elements.indexOf(w);M!==-1&&this.setContent(ce[w.getAttribute("medium-editor-index")],M);return}this.elements.forEach(function(L,V){this.setContent(ce[L.getAttribute("medium-editor-index")],V)},this)},addElements:function(w){var M=c(w,this.options.ownerDocument,!0);if(M.length===0)return!1;M.forEach(function(L){L=R.call(this,L,this.id),this.elements.push(L),this.trigger("addElement",{target:L,currentTarget:L},L)},this)},removeElements:function(w){var M=c(w,this.options.ownerDocument),L=M.map(function(V){return V.getAttribute("medium-editor-textarea-id")&&V.parentNode?V.parentNode.querySelector('div[medium-editor-textarea-id="'+V.getAttribute("medium-editor-textarea-id")+'"]'):V});this.elements=this.elements.filter(function(V){return L.indexOf(V)!==-1?(this.events.cleanupElement(V),V.getAttribute("medium-editor-textarea-id")&&f(V),this.trigger("removeElement",{target:V,currentTarget:V},V),!1):!0},this)}},e.getEditorFromElement=function(w){var M=w.getAttribute("data-medium-editor-editor-index"),L=w&&w.ownerDocument&&(w.ownerDocument.defaultView||w.ownerDocument.parentWindow);return L&&L._mediumEditors&&L._mediumEditors[M]?L._mediumEditors[M]:null}}(),function(){e.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),e.parseVersionString=function(t){var r=t.split("-"),i=r[0].split("."),o=r.length>1?r[1]:"";return{major:parseInt(i[0],10),minor:parseInt(i[1],10),revision:parseInt(i[2],10),preRelease:o,toString:function(){return[i[0],i[1],i[2]].join(".")+(o?"-"+o:"")}}},e.version=e.parseVersionString.call(this,"5.23.3"),e}())}(es)),es.exports}var aD=oD();const qs=rl(aD);/*!
 * vanilla-picker v2.12.3
 * https://vanilla-picker.js.org
 *
 * Copyright 2017-2024 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
 * Released under the ISC license.
 */var Af=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},Sf=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Ua=function(){function n(e,t){var r=[],i=!0,o=!1,a=void 0;try{for(var s=e[Symbol.iterator](),l;!(i=(l=s.next()).done)&&(r.push(l.value),!(t&&r.length===t));i=!0);}catch(u){o=!0,a=u}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return r}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();String.prototype.startsWith=String.prototype.startsWith||function(n){return this.indexOf(n)===0};String.prototype.padStart=String.prototype.padStart||function(n,e){for(var t=this;t.length<n;)t=e+t;return t};var sD={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function lp(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=e>0?n.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):n.toString();return t||"0"}var lD=function(){function n(e,t,r,i){Af(this,n);var o=this;function a(l){if(l.startsWith("hsl")){var u=l.match(/([\-\d\.e]+)/g).map(Number),c=Ua(u,4),f=c[0],d=c[1],h=c[2],v=c[3];v===void 0&&(v=1),f/=360,d/=100,h/=100,o.hsla=[f,d,h,v]}else if(l.startsWith("rgb")){var p=l.match(/([\-\d\.e]+)/g).map(Number),g=Ua(p,4),y=g[0],b=g[1],C=g[2],D=g[3];D===void 0&&(D=1),o.rgba=[y,b,C,D]}else l.startsWith("#")?o.rgba=n.hexToRgb(l):o.rgba=n.nameToRgb(l)||n.hexToRgb(l)}if(e!==void 0)if(Array.isArray(e))this.rgba=e;else if(r===void 0){var s=e&&""+e;s&&a(s.toLowerCase())}else this.rgba=[e,t,r,i===void 0?1:i]}return Sf(n,[{key:"printRGB",value:function(t){var r=t?this.rgba:this.rgba.slice(0,3),i=r.map(function(o,a){return lp(o,a===3?3:0)});return t?"rgba("+i+")":"rgb("+i+")"}},{key:"printHSL",value:function(t){var r=[360,100,100,1],i=["","%","%",""],o=t?this.hsla:this.hsla.slice(0,3),a=o.map(function(s,l){return lp(s*r[l],l===3?3:1)+i[l]});return t?"hsla("+a+")":"hsl("+a+")"}},{key:"printHex",value:function(t){var r=this.hex;return t?r:r.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=n.hslToRgb(this._hsla)},set:function(t){t.length===3&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=n.rgbToHsl(this._rgba)},set:function(t){t.length===3&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){var t=this.rgba,r=t.map(function(i,o){return o<3?i.toString(16):Math.round(i*255).toString(16)});return"#"+r.map(function(i){return i.padStart(2,"0")}).join("")},set:function(t){this.rgba=n.hexToRgb(t)}}],[{key:"hexToRgb",value:function(t){var r=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!r.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var i=r.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(o){return parseInt(o,16)});return i[3]=i[3]/255,i}},{key:"nameToRgb",value:function(t){var r=t.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),i=sD[r];return i===void 0?i:n.hexToRgb(i.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var r=Ua(t,4),i=r[0],o=r[1],a=r[2],s=r[3];i/=255,o/=255,a/=255;var l=Math.max(i,o,a),u=Math.min(i,o,a),c=void 0,f=void 0,d=(l+u)/2;if(l===u)c=f=0;else{var h=l-u;switch(f=d>.5?h/(2-l-u):h/(l+u),l){case i:c=(o-a)/h+(o<a?6:0);break;case o:c=(a-i)/h+2;break;case a:c=(i-o)/h+4;break}c/=6}return[c,f,d,s]}},{key:"hslToRgb",value:function(t){var r=Ua(t,4),i=r[0],o=r[1],a=r[2],s=r[3],l=void 0,u=void 0,c=void 0;if(o===0)l=u=c=a;else{var f=function(g,y,b){return b<0&&(b+=1),b>1&&(b-=1),b<.16666666666666666?g+(y-g)*6*b:b<.5?y:b<.6666666666666666?g+(y-g)*(.6666666666666666-b)*6:g},d=a<.5?a*(1+o):a+o-a*o,h=2*a-d;l=f(h,d,i+1/3),u=f(h,d,i),c=f(h,d,i-1/3)}var v=[l*255,u*255,c*255].map(Math.round);return v[3]=s,v}}]),n}(),uD=function(){function n(){Af(this,n),this._events=[]}return Sf(n,[{key:"add",value:function(t,r,i){t.addEventListener(r,i,!1),this._events.push({target:t,type:r,handler:i})}},{key:"remove",value:function(t,r,i){this._events=this._events.filter(function(o){var a=!0;return t&&t!==o.target&&(a=!1),r&&r!==o.type&&(a=!1),i&&i!==o.handler&&(a=!1),a&&n._doRemove(o.target,o.type,o.handler),!a})}},{key:"destroy",value:function(){this._events.forEach(function(t){return n._doRemove(t.target,t.type,t.handler)}),this._events=[]}}],[{key:"_doRemove",value:function(t,r,i){t.removeEventListener(r,i,!1)}}]),n}();function cD(n){var e=document.createElement("div");return e.innerHTML=n,e.firstElementChild}function cu(n,e,t){var r=!1;function i(l,u,c){return Math.max(u,Math.min(l,c))}function o(l,u,c){if(c&&(r=!0),!!r){l.preventDefault();var f=e.getBoundingClientRect(),d=f.width,h=f.height,v=u.clientX,p=u.clientY,g=i(v-f.left,0,d),y=i(p-f.top,0,h);t(g/d,y/h)}}function a(l,u){var c=l.buttons===void 0?l.which:l.buttons;c===1?o(l,l,u):r=!1}function s(l,u){l.touches.length===1?o(l,l.touches[0],u):r=!1}n.add(e,"mousedown",function(l){a(l,!0)}),n.add(e,"touchstart",function(l){s(l,!0)}),n.add(window,"mousemove",a),n.add(e,"touchmove",s),n.add(window,"mouseup",function(l){r=!1}),n.add(e,"touchend",function(l){r=!1}),n.add(e,"touchcancel",function(l){r=!1})}var fD=`linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,
                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em`,dD=360,Uy="keydown",Ga="mousedown",fu="focusin";function Yn(n,e){return(e||document).querySelector(n)}function hD(n){n.preventDefault(),n.stopPropagation()}function du(n,e,t,r,i){n.add(e,Uy,function(o){t.indexOf(o.key)>=0&&r(o)})}var Gy=function(){function n(e){Af(this,n),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new uD,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return Sf(n,[{key:"setOptions",value:function(t){var r=this;if(!t)return;var i=this.settings;function o(u,c,f){for(var d in u)c[d]=u[d]}if(t instanceof HTMLElement)i.parent=t;else{i.parent&&t.parent&&i.parent!==t.parent&&(this._events.remove(i.parent),this._popupInited=!1),o(t,i),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var a=t.color||t.colour;a&&this._setColor(a)}var s=i.parent;if(s&&i.popup&&!this._popupInited){var l=function(c){return r.openHandler(c)};this._events.add(s,"click",l),du(this._events,s,[" ","Spacebar","Enter"],l),this._popupInited=!0}else t.parent&&!i.popup&&this.show()}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var r=t&&t.type===Uy?this._domEdit:this.domElement;setTimeout(function(){return r.focus()},100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var r=t&&t.type,i=!1;if(!t)i=!0;else if(r===Ga||r===fu){var o=(this.__containedEvent||0)+100;t.timeStamp>o&&(i=!0)}else hD(t),i=!0;i&&this.hide()&&(this.settings.parent.style.pointerEvents="",r!==Ga&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,r){this.closeHandler(),this.setOptions(t),r&&this.openHandler()}},{key:"setColor",value:function(t,r){this._setColor(t,{silent:r})}},{key:"_setColor",value:function(t,r){if(typeof t=="string"&&(t=t.trim()),!!t){r=r||{};var i=void 0;try{i=new lD(t)}catch(a){if(r.failSilently)return;throw a}if(!this.settings.alpha){var o=i.hsla;o[3]=1,i.hsla=o}this.colour=this.color=i,this._setHSLA(null,null,null,null,r)}}},{key:"setColour",value:function(t,r){this.setColor(t,r)}},{key:"show",value:function(){var t=this.settings.parent;if(!t)return!1;if(this.domElement){var r=this._toggleDOM(!0);return this._setPosition(),r}var i=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',o=cD(i);return this.domElement=o,this._domH=Yn(".picker_hue",o),this._domSL=Yn(".picker_sl",o),this._domA=Yn(".picker_alpha",o),this._domEdit=Yn(".picker_editor input",o),this._domSample=Yn(".picker_sample",o),this._domOkay=Yn(".picker_done button",o),this._domCancel=Yn(".picker_cancel button",o),o.classList.add("layout_"+this.settings.layout),this.settings.alpha||o.classList.add("no_alpha"),this.settings.editor||o.classList.add("no_editor"),this.settings.cancelButton||o.classList.add("no_cancel"),this._ifPopup(function(){return o.classList.add("popup")}),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,r=this,i=this.domElement,o=this._events;function a(u,c,f){o.add(u,c,f)}a(i,"click",function(u){return u.preventDefault()}),cu(o,this._domH,function(u,c){return r._setHSLA(u)}),cu(o,this._domSL,function(u,c){return r._setHSLA(null,u,1-c)}),this.settings.alpha&&cu(o,this._domA,function(u,c){return r._setHSLA(null,null,null,1-c)});var s=this._domEdit;a(s,"input",function(u){r._setColor(this.value,{fromEditor:!0,failSilently:!0})}),a(s,"focus",function(u){var c=this;c.selectionStart===c.selectionEnd&&c.select()}),this._ifPopup(function(){var u=function(d){return t.closeHandler(d)};a(window,Ga,u),a(window,fu,u),du(o,i,["Esc","Escape"],u);var c=function(d){t.__containedEvent=d.timeStamp};a(i,Ga,c),a(i,fu,c),a(t._domCancel,"click",u)});var l=function(c){t._ifPopup(function(){return t.closeHandler(c)}),t.onDone&&t.onDone(t.colour)};a(this._domOkay,"click",l),du(o,i,["Enter"],l)}},{key:"_setPosition",value:function(){var t=this.settings.parent,r=this.domElement;t!==r.parentNode&&t.appendChild(r),this._ifPopup(function(i){getComputedStyle(t).position==="static"&&(t.style.position="relative");var o=i===!0?"popup_right":"popup_"+i;["popup_top","popup_bottom","popup_left","popup_right"].forEach(function(a){a===o?r.classList.add(a):r.classList.remove(a)}),r.classList.add(o)})}},{key:"_setHSLA",value:function(t,r,i,o,a){a=a||{};var s=this.colour,l=s.hsla;[t,r,i,o].forEach(function(u,c){(u||u===0)&&(l[c]=u)}),s.hsla=l,this._updateUI(a),this.onChange&&!a.silent&&this.onChange(s)}},{key:"_updateUI",value:function(t){if(!this.domElement)return;t=t||{};var r=this.colour,i=r.hsla,o="hsl("+i[0]*dD+", 100%, 50%)",a=r.hslString,s=r.hslaString,l=this._domH,u=this._domSL,c=this._domA,f=Yn(".picker_selector",l),d=Yn(".picker_selector",u),h=Yn(".picker_selector",c);function v(R,A,O){A.style.left=O*100+"%"}function p(R,A,O){A.style.top=O*100+"%"}v(l,f,i[0]),this._domSL.style.backgroundColor=this._domH.style.color=o,v(u,d,i[1]),p(u,d,1-i[2]),u.style.color=a,p(c,h,1-i[3]);var g=a,y=g.replace("hsl","hsla").replace(")",", 0)"),b="linear-gradient("+[g,y]+")";if(this._domA.style.background=b+", "+fD,!t.fromEditor){var C=this.settings.editorFormat,D=this.settings.alpha,B=void 0;switch(C){case"rgb":B=r.printRGB(D);break;case"hsl":B=r.printHSL(D);break;default:B=r.printHex(D)}this._domEdit.value=B}this._domSample.style.color=s}},{key:"_ifPopup",value:function(t,r){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):r&&r()}},{key:"_toggleDOM",value:function(t){var r=this.domElement;if(!r)return!1;var i=t?"":"none",o=r.style.display!==i;return o&&(r.style.display=i),o}}]),n}();{var hu=document.createElement("style");hu.textContent='.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}',document.documentElement.firstElementChild.appendChild(hu),Gy.StyleElement=hu}var pu={exports:{}},up;function Yy(){return up||(up=1,function(n,e){(function(t,r){n.exports=t()})(function(){var t="object",r="function",i="undefined",o=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],a=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],s=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],l=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function u(N,X){var U=typeof N[X];return U==r||!!(U==t&&N[X])||U=="unknown"}function c(N,X){return!!(typeof N[X]==t&&N[X])}function f(N,X){return typeof N[X]!=i}function d(N){return function(X,U){for(var ee=U.length;ee--;)if(!N(X,U[ee]))return!1;return!0}}var h=d(u),v=d(c),p=d(f);function g(N){return N&&h(N,l)&&p(N,s)}function y(N){return c(N,"body")?N.body:N.getElementsByTagName("body")[0]}var b=[].forEach?function(N,X){N.forEach(X)}:function(N,X){for(var U=0,ee=N.length;U<ee;++U)X(N[U],U)},C={},D=typeof window!=i&&typeof document!=i,B={isHostMethod:u,isHostObject:c,isHostProperty:f,areHostMethods:h,areHostObjects:v,areHostProperties:p,isTextRange:g,getBody:y,forEach:b},R={version:"1.3.1",initialized:!1,isBrowser:D,supported:!0,util:B,features:{},modules:C,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==i?!0:rangyAutoInitialize}};function A(N){typeof console!=i&&u(console,"log")&&console.log(N)}function O(N,X){D&&X?alert(N):A(N)}function F(N){R.initialized=!0,R.supported=!1,O("Rangy is not supported in this environment. Reason: "+N,R.config.alertOnFail)}R.fail=F;function Z(N){O("Rangy warning: "+N,R.config.alertOnWarn)}R.warn=Z;var ue;({}).hasOwnProperty?(B.extend=ue=function(N,X,U){var ee,re;for(var Me in X)X.hasOwnProperty(Me)&&(ee=N[Me],re=X[Me],U&&ee!==null&&typeof ee=="object"&&re!==null&&typeof re=="object"&&ue(ee,re,!0),N[Me]=re);return X.hasOwnProperty("toString")&&(N.toString=X.toString),N},B.createOptions=function(N,X){var U={};return ue(U,X),N&&ue(U,N),U}):F("hasOwnProperty not supported"),D||F("Rangy can only run in a browser"),function(){var N;if(D){var X=document.createElement("div");X.appendChild(document.createElement("span"));var U=[].slice;try{U.call(X.childNodes,0)[0].nodeType==1&&(N=function(ee){return U.call(ee,0)})}catch(ee){}}N||(N=function(ee){for(var re=[],Me=0,Ae=ee.length;Me<Ae;++Me)re[Me]=ee[Me];return re}),B.toArray=N}();var ce;D&&(u(document,"addEventListener")?ce=function(N,X,U){N.addEventListener(X,U,!1)}:u(document,"attachEvent")?ce=function(N,X,U){N.attachEvent("on"+X,U)}:F("Document does not have required addEventListener or attachEvent method"),B.addListener=ce);var w=[];function M(N){return N.message||N.description||String(N)}function L(){if(!(!D||R.initialized)){var N,X=!1,U=!1;u(document,"createRange")&&(N=document.createRange(),h(N,a)&&p(N,o)&&(X=!0));var ee=y(document);if(!ee||ee.nodeName.toLowerCase()!="body"){F("No body element found");return}if(ee&&u(ee,"createTextRange")&&(N=ee.createTextRange(),g(N)&&(U=!0)),!X&&!U){F("Neither Range nor TextRange are available");return}R.initialized=!0,R.features={implementsDomRange:X,implementsTextRange:U};var re,Me;for(var Ae in C)(re=C[Ae])instanceof nt&&re.init(re,R);for(var yt=0,xt=w.length;yt<xt;++yt)try{w[yt](R)}catch(Ct){Me="Rangy init listener threw an exception. Continuing. Detail: "+M(Ct),A(Me)}}}function V(N,X,U){U&&(N+=" in module "+U.name),R.warn("DEPRECATED: "+N+" is deprecated. Please use "+X+" instead.")}function pe(N,X,U,ee){N[X]=function(){return V(X,U,ee),N[U].apply(N,B.toArray(arguments))}}B.deprecationNotice=V,B.createAliasForDeprecatedMethod=pe,R.init=L,R.addInitListener=function(N){R.initialized?N(R):w.push(N)};var Ee=[];R.addShimListener=function(N){Ee.push(N)};function Je(N){N=N||window,L();for(var X=0,U=Ee.length;X<U;++X)Ee[X](N)}D&&(R.shim=R.createMissingNativeApi=Je,pe(R,"createMissingNativeApi","shim"));function nt(N,X,U){this.name=N,this.dependencies=X,this.initialized=!1,this.supported=!1,this.initializer=U}nt.prototype={init:function(){for(var N=this.dependencies||[],X=0,U=N.length,ee,re;X<U;++X){if(re=N[X],ee=C[re],!ee||!(ee instanceof nt))throw new Error("required module '"+re+"' not found");if(ee.init(),!ee.supported)throw new Error("required module '"+re+"' not supported")}this.initializer(this)},fail:function(N){throw this.initialized=!0,this.supported=!1,new Error(N)},warn:function(N){R.warn("Module "+this.name+": "+N)},deprecationNotice:function(N,X){R.warn("DEPRECATED: "+N+" in module "+this.name+" is deprecated. Please use "+X+" instead")},createError:function(N){return new Error("Error in Rangy "+this.name+" module: "+N)}};function ge(N,X,U){var ee=new nt(N,X,function(re){if(!re.initialized){re.initialized=!0;try{U(R,re),re.supported=!0}catch(Ae){var Me="Module '"+N+"' failed to load: "+M(Ae);A(Me),Ae.stack&&A(Ae.stack)}}});return C[N]=ee,ee}R.createModule=function(N){var X,U;arguments.length==2?(X=arguments[1],U=[]):(X=arguments[2],U=arguments[1]);var ee=ge(N,U,X);R.initialized&&R.supported&&ee.init()},R.createCoreModule=function(N,X,U){ge(N,X,U)};function Le(){}R.RangePrototype=Le,R.rangePrototype=new Le;function $e(){}R.selectionPrototype=new $e,R.createCoreModule("DomUtil",[],function(N,X){var U="undefined",ee=N.util,re=ee.getBody;ee.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||X.fail("document missing a Node creation method"),ee.isHostMethod(document,"getElementsByTagName")||X.fail("document missing getElementsByTagName method");var Me=document.createElement("div");ee.areHostMethods(Me,["insertBefore","appendChild","cloneNode"])||X.fail("Incomplete Element implementation"),ee.isHostProperty(Me,"innerHTML")||X.fail("Element is missing innerHTML property");var Ae=document.createTextNode("test");ee.areHostMethods(Ae,["splitText","deleteData","insertData","appendData","cloneNode"])||X.fail("Incomplete Text Node implementation");var yt=function(W,ne){for(var ke=W.length;ke--;)if(W[ke]===ne)return!0;return!1};function xt(W){var ne;return typeof W.namespaceURI==U||(ne=W.namespaceURI)===null||ne=="http://www.w3.org/1999/xhtml"}function Ct(W){var ne=W.parentNode;return ne.nodeType==1?ne:null}function rt(W){for(var ne=0;W=W.previousSibling;)++ne;return ne}function Pt(W){switch(W.nodeType){case 7:case 10:return 0;case 3:case 8:return W.length;default:return W.childNodes.length}}function Dt(W,ne){var ke=[],we;for(we=W;we;we=we.parentNode)ke.push(we);for(we=ne;we;we=we.parentNode)if(yt(ke,we))return we;return null}function E(W,ne,ke){for(var we=ke?ne:ne.parentNode;we;){if(we===W)return!0;we=we.parentNode}return!1}function S(W,ne){return E(W,ne,!0)}function T(W,ne,ke){for(var we,bt=ke?W:W.parentNode;bt;){if(we=bt.parentNode,we===ne)return bt;bt=we}return null}function z(W){var ne=W.nodeType;return ne==3||ne==4||ne==8}function P(W){if(!W)return!1;var ne=W.nodeType;return ne==3||ne==8}function q(W,ne){var ke=ne.nextSibling,we=ne.parentNode;return ke?we.insertBefore(W,ke):we.appendChild(W),W}function Y(W,ne,ke){var we=W.cloneNode(!1);if(we.deleteData(0,ne),W.deleteData(ne,W.length-ne),q(we,W),ke)for(var bt=0,st;st=ke[bt++];)st.node==W&&st.offset>ne?(st.node=we,st.offset-=ne):st.node==W.parentNode&&st.offset>rt(W)&&++st.offset;return we}function J(W){if(W.nodeType==9)return W;if(typeof W.ownerDocument!=U)return W.ownerDocument;if(typeof W.document!=U)return W.document;if(W.parentNode)return J(W.parentNode);throw X.createError("getDocument: no document found for node")}function Ce(W){var ne=J(W);if(typeof ne.defaultView!=U)return ne.defaultView;if(typeof ne.parentWindow!=U)return ne.parentWindow;throw X.createError("Cannot get a window object for node")}function ve(W){if(typeof W.contentDocument!=U)return W.contentDocument;if(typeof W.contentWindow!=U)return W.contentWindow.document;throw X.createError("getIframeDocument: No Document object found for iframe element")}function ie(W){if(typeof W.contentWindow!=U)return W.contentWindow;if(typeof W.contentDocument!=U)return W.contentDocument.defaultView;throw X.createError("getIframeWindow: No Window object found for iframe element")}function Ke(W){return W&&ee.isHostMethod(W,"setTimeout")&&ee.isHostObject(W,"document")}function Xe(W,ne,ke){var we;if(W?ee.isHostProperty(W,"nodeType")?we=W.nodeType==1&&W.tagName.toLowerCase()=="iframe"?ve(W):J(W):Ke(W)&&(we=W.document):we=document,!we)throw ne.createError(ke+"(): Parameter must be a Window object or DOM node");return we}function Ge(W){for(var ne;ne=W.parentNode;)W=ne;return W}function Lt(W,ne,ke,we){var bt,st,Cn,un,zt;if(W==ke)return ne===we?0:ne<we?-1:1;if(bt=T(ke,W,!0))return ne<=rt(bt)?-1:1;if(bt=T(W,ke,!0))return rt(bt)<we?-1:1;if(st=Dt(W,ke),!st)throw new Error("comparePoints error: nodes have no common ancestor");if(Cn=W===st?st:T(W,st,!0),un=ke===st?st:T(ke,st,!0),Cn===un)throw X.createError("comparePoints got to case 4 and childA and childB are the same!");for(zt=st.firstChild;zt;){if(zt===Cn)return-1;if(zt===un)return 1;zt=zt.nextSibling}}var oe=!1;function ye(W){var ne;try{return ne=W.parentNode,!1}catch(ke){return!0}}(function(){var W=document.createElement("b");W.innerHTML="1";var ne=W.firstChild;W.innerHTML="<br />",oe=ye(ne),N.features.crashyTextNodes=oe})();function Qe(W){if(!W)return"[No node]";if(oe&&ye(W))return"[Broken node]";if(z(W))return'"'+W.data+'"';if(W.nodeType==1){var ne=W.id?' id="'+W.id+'"':"";return"<"+W.nodeName+ne+">[index:"+rt(W)+",length:"+W.childNodes.length+"]["+(W.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return W.nodeName}function pt(W){for(var ne=J(W).createDocumentFragment(),ke;ke=W.firstChild;)ne.appendChild(ke);return ne}var Ot;typeof window.getComputedStyle!=U?Ot=function(W,ne){return Ce(W).getComputedStyle(W,null)[ne]}:typeof document.documentElement.currentStyle!=U?Ot=function(W,ne){return W.currentStyle?W.currentStyle[ne]:""}:X.fail("No means of obtaining computed style properties found");function ln(W,ne,ke){var we=re(W),bt=W.createElement("div");bt.contentEditable=""+!!ke,ne&&(bt.innerHTML=ne);var st=we.firstChild;return st?we.insertBefore(bt,st):we.appendChild(bt),bt}function Xt(W){return W.parentNode.removeChild(W)}function kt(W){this.root=W,this._next=W}kt.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var W=this._current=this._next,ne,ke;if(this._current)if(ne=W.firstChild,ne)this._next=ne;else{for(ke=null;W!==this.root&&!(ke=W.nextSibling);)W=W.parentNode;this._next=ke}return this._current},detach:function(){this._current=this._next=this.root=null}};function It(W){return new kt(W)}function Ft(W,ne){this.node=W,this.offset=ne}Ft.prototype={equals:function(W){return!!W&&this.node===W.node&&this.offset==W.offset},inspect:function(){return"[DomPosition("+Qe(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};function Zt(W){this.code=this[W],this.codeName=W,this.message="DOMException: "+this.codeName}Zt.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},Zt.prototype.toString=function(){return this.message},N.dom={arrayContains:yt,isHtmlNamespace:xt,parentElement:Ct,getNodeIndex:rt,getNodeLength:Pt,getCommonAncestor:Dt,isAncestorOf:E,isOrIsAncestorOf:S,getClosestAncestorIn:T,isCharacterDataNode:z,isTextOrCommentNode:P,insertAfter:q,splitDataNode:Y,getDocument:J,getWindow:Ce,getIframeWindow:ie,getIframeDocument:ve,getBody:re,isWindow:Ke,getContentDocument:Xe,getRootContainer:Ge,comparePoints:Lt,isBrokenNode:ye,inspectNode:Qe,getComputedStyleProperty:Ot,createTestElement:ln,removeNode:Xt,fragmentFromNodeChildren:pt,createIterator:It,DomPosition:Ft},N.DOMException=Zt}),R.createCoreModule("DomRange",["DomUtil"],function(N,X){var U=N.dom,ee=N.util,re=U.DomPosition,Me=N.DOMException,Ae=U.isCharacterDataNode,yt=U.getNodeIndex,xt=U.isOrIsAncestorOf,Ct=U.getDocument,rt=U.comparePoints,Pt=U.splitDataNode,Dt=U.getClosestAncestorIn,E=U.getNodeLength,S=U.arrayContains,T=U.getRootContainer,z=N.features.crashyTextNodes,P=U.removeNode;function q(x,k){return x.nodeType!=3&&(xt(x,k.startContainer)||xt(x,k.endContainer))}function Y(x){return x.document||Ct(x.startContainer)}function J(x){return T(x.startContainer)}function Ce(x){return new re(x.parentNode,yt(x))}function ve(x){return new re(x.parentNode,yt(x)+1)}function ie(x,k,G){var te=x.nodeType==11?x.firstChild:x;return Ae(k)?G==k.length?U.insertAfter(x,k):k.parentNode.insertBefore(x,G==0?k:Pt(k,G)):G>=k.childNodes.length?k.appendChild(x):k.insertBefore(x,k.childNodes[G]),te}function Ke(x,k,G){if(ct(x),ct(k),Y(k)!=Y(x))throw new Me("WRONG_DOCUMENT_ERR");var te=rt(x.startContainer,x.startOffset,k.endContainer,k.endOffset),me=rt(x.endContainer,x.endOffset,k.startContainer,k.startOffset);return G?te<=0&&me>=0:te<0&&me>0}function Xe(x){for(var k,G,te=Y(x.range).createDocumentFragment(),me;G=x.next();){if(k=x.isPartiallySelectedSubtree(),G=G.cloneNode(!k),k&&(me=x.getSubtreeIterator(),G.appendChild(Xe(me)),me.detach()),G.nodeType==10)throw new Me("HIERARCHY_REQUEST_ERR");te.appendChild(G)}return te}function Ge(x,k,G){var te,me;G=G||{stop:!1};for(var Ve,Q;Ve=x.next();)if(x.isPartiallySelectedSubtree()){if(k(Ve)===!1){G.stop=!0;return}else if(Q=x.getSubtreeIterator(),Ge(Q,k,G),Q.detach(),G.stop)return}else for(te=U.createIterator(Ve);me=te.next();)if(k(me)===!1){G.stop=!0;return}}function Lt(x){for(var k;x.next();)x.isPartiallySelectedSubtree()?(k=x.getSubtreeIterator(),Lt(k),k.detach()):x.remove()}function oe(x){for(var k,G=Y(x.range).createDocumentFragment(),te;k=x.next();){if(x.isPartiallySelectedSubtree()?(k=k.cloneNode(!1),te=x.getSubtreeIterator(),k.appendChild(oe(te)),te.detach()):x.remove(),k.nodeType==10)throw new Me("HIERARCHY_REQUEST_ERR");G.appendChild(k)}return G}function ye(x,k,G){var te=!!(k&&k.length),me,Ve=!!G;te&&(me=new RegExp("^("+k.join("|")+")$"));var Q=[];return Ge(new pt(x,!1),function(de){if(!(te&&!me.test(de.nodeType))&&!(Ve&&!G(de))){var Oe=x.startContainer;if(!(de==Oe&&Ae(Oe)&&x.startOffset==Oe.length)){var ze=x.endContainer;de==ze&&Ae(ze)&&x.endOffset==0||Q.push(de)}}}),Q}function Qe(x){var k=typeof x.getName=="undefined"?"Range":x.getName();return"["+k+"("+U.inspectNode(x.startContainer)+":"+x.startOffset+", "+U.inspectNode(x.endContainer)+":"+x.endOffset+")]"}function pt(x,k){if(this.range=x,this.clonePartiallySelectedTextNodes=k,!x.collapsed){this.sc=x.startContainer,this.so=x.startOffset,this.ec=x.endContainer,this.eo=x.endOffset;var G=x.commonAncestorContainer;this.sc===this.ec&&Ae(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===G&&!Ae(this.sc)?this.sc.childNodes[this.so]:Dt(this.sc,G,!0),this._last=this.ec===G&&!Ae(this.ec)?this.ec.childNodes[this.eo-1]:Dt(this.ec,G,!0))}}pt.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var x=this._current=this._next;return x&&(this._next=x!==this._last?x.nextSibling:null,Ae(x)&&this.clonePartiallySelectedTextNodes&&(x===this.ec&&(x=x.cloneNode(!0)).deleteData(this.eo,x.length-this.eo),this._current===this.sc&&(x=x.cloneNode(!0)).deleteData(0,this.so))),x},remove:function(){var x=this._current,k,G;Ae(x)&&(x===this.sc||x===this.ec)?(k=x===this.sc?this.so:0,G=x===this.ec?this.eo:x.length,k!=G&&x.deleteData(k,G-k)):x.parentNode&&P(x)},isPartiallySelectedSubtree:function(){var x=this._current;return q(x,this.range)},getSubtreeIterator:function(){var x;if(this.isSingleCharacterDataNode)x=this.range.cloneRange(),x.collapse(!1);else{x=new Tt(Y(this.range));var k=this._current,G=k,te=0,me=k,Ve=E(k);xt(k,this.sc)&&(G=this.sc,te=this.so),xt(k,this.ec)&&(me=this.ec,Ve=this.eo),et(x,G,te,me,Ve)}return new pt(x,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Ot=[1,3,4,5,7,8,10],ln=[2,9,11],Xt=[5,6,10,12],kt=[1,3,4,5,7,8,10,11],It=[1,3,4,5,7,8];function Ft(x){return function(k,G){for(var te,me=G?k:k.parentNode;me;){if(te=me.nodeType,S(x,te))return me;me=me.parentNode}return null}}var Zt=Ft([9,11]),W=Ft(Xt),ne=Ft([6,10,12]),ke=Ft([1]);function we(x,k){if(ne(x,k))throw new Me("INVALID_NODE_TYPE_ERR")}function bt(x,k){if(!S(k,x.nodeType))throw new Me("INVALID_NODE_TYPE_ERR")}function st(x,k){if(k<0||k>(Ae(x)?x.length:x.childNodes.length))throw new Me("INDEX_SIZE_ERR")}function Cn(x,k){if(Zt(x,!0)!==Zt(k,!0))throw new Me("WRONG_DOCUMENT_ERR")}function un(x){if(W(x,!0))throw new Me("NO_MODIFICATION_ALLOWED_ERR")}function zt(x,k){if(!x)throw new Me(k)}function lo(x,k){return k<=(Ae(x)?x.length:x.childNodes.length)}function $r(x){return!!x.startContainer&&!!x.endContainer&&!(z&&(U.isBrokenNode(x.startContainer)||U.isBrokenNode(x.endContainer)))&&T(x.startContainer)==T(x.endContainer)&&lo(x.startContainer,x.startOffset)&&lo(x.endContainer,x.endOffset)}function ct(x){if(!$r(x))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+x.inspect()+")")}var uo=document.createElement("style"),lr=!1;try{uo.innerHTML="<b>x</b>",lr=uo.firstChild.nodeType==3}catch(x){}N.features.htmlParsingConforms=lr;var co=lr?function(x){var k=this.startContainer,G=Ct(k);if(!k)throw new Me("INVALID_STATE_ERR");var te=null;return k.nodeType==1?te=k:Ae(k)&&(te=U.parentElement(k)),te===null||te.nodeName=="HTML"&&U.isHtmlNamespace(Ct(te).documentElement)&&U.isHtmlNamespace(te)?te=G.createElement("body"):te=te.cloneNode(!1),te.innerHTML=x,U.fragmentFromNodeChildren(te)}:function(x){var k=Y(this),G=k.createElement("body");return G.innerHTML=x,U.fragmentFromNodeChildren(G)};function vi(x,k){ct(x);var G=x.startContainer,te=x.startOffset,me=x.endContainer,Ve=x.endOffset,Q=G===me;Ae(me)&&Ve>0&&Ve<me.length&&Pt(me,Ve,k),Ae(G)&&te>0&&te<G.length&&(G=Pt(G,te,k),Q?(Ve-=te,me=G):me==G.parentNode&&Ve>=yt(G)&&Ve++,te=0),x.setStartAndEnd(G,te,me,Ve)}function Ie(x){ct(x);var k=x.commonAncestorContainer.parentNode.cloneNode(!1);return k.appendChild(x.cloneContents()),k.innerHTML}var gi=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],yi=0,Xr=1,xa=2,mr=3,zr=0,fo=1,ho=2,mi=3;ee.extend(N.rangePrototype,{compareBoundaryPoints:function(x,k){ct(this),Cn(this.startContainer,k.startContainer);var G,te,me,Ve,Q=x==mr||x==yi?"start":"end",de=x==Xr||x==yi?"start":"end";return G=this[Q+"Container"],te=this[Q+"Offset"],me=k[de+"Container"],Ve=k[de+"Offset"],rt(G,te,me,Ve)},insertNode:function(x){if(ct(this),bt(x,kt),un(this.startContainer),xt(x,this.startContainer))throw new Me("HIERARCHY_REQUEST_ERR");var k=ie(x,this.startContainer,this.startOffset);this.setStartBefore(k)},cloneContents:function(){ct(this);var x,k;if(this.collapsed)return Y(this).createDocumentFragment();if(this.startContainer===this.endContainer&&Ae(this.startContainer))return x=this.startContainer.cloneNode(!0),x.data=x.data.slice(this.startOffset,this.endOffset),k=Y(this).createDocumentFragment(),k.appendChild(x),k;var G=new pt(this,!0);return x=Xe(G),G.detach(),x},canSurroundContents:function(){ct(this),un(this.startContainer),un(this.endContainer);var x=new pt(this,!0),k=x._first&&q(x._first,this)||x._last&&q(x._last,this);return x.detach(),!k},surroundContents:function(x){if(bt(x,It),!this.canSurroundContents())throw new Me("INVALID_STATE_ERR");var k=this.extractContents();if(x.hasChildNodes())for(;x.lastChild;)x.removeChild(x.lastChild);ie(x,this.startContainer,this.startOffset),x.appendChild(k),this.selectNode(x)},cloneRange:function(){ct(this);for(var x=new Tt(Y(this)),k=gi.length,G;k--;)G=gi[k],x[G]=this[G];return x},toString:function(){ct(this);var x=this.startContainer;if(x===this.endContainer&&Ae(x))return x.nodeType==3||x.nodeType==4?x.data.slice(this.startOffset,this.endOffset):"";var k=[],G=new pt(this,!0);return Ge(G,function(te){(te.nodeType==3||te.nodeType==4)&&k.push(te.data)}),G.detach(),k.join("")},compareNode:function(x){ct(this);var k=x.parentNode,G=yt(x);if(!k)throw new Me("NOT_FOUND_ERR");var te=this.comparePoint(k,G),me=this.comparePoint(k,G+1);return te<0?me>0?ho:zr:me>0?fo:mi},comparePoint:function(x,k){return ct(this),zt(x,"HIERARCHY_REQUEST_ERR"),Cn(x,this.startContainer),rt(x,k,this.startContainer,this.startOffset)<0?-1:rt(x,k,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:co,toHtml:function(){return Ie(this)},intersectsNode:function(x,k){if(ct(this),T(x)!=J(this))return!1;var G=x.parentNode,te=yt(x);if(!G)return!0;var me=rt(G,te,this.endContainer,this.endOffset),Ve=rt(G,te+1,this.startContainer,this.startOffset);return k?me<=0&&Ve>=0:me<0&&Ve>0},isPointInRange:function(x,k){return ct(this),zt(x,"HIERARCHY_REQUEST_ERR"),Cn(x,this.startContainer),rt(x,k,this.startContainer,this.startOffset)>=0&&rt(x,k,this.endContainer,this.endOffset)<=0},intersectsRange:function(x){return Ke(this,x,!1)},intersectsOrTouchesRange:function(x){return Ke(this,x,!0)},intersection:function(x){if(this.intersectsRange(x)){var k=rt(this.startContainer,this.startOffset,x.startContainer,x.startOffset),G=rt(this.endContainer,this.endOffset,x.endContainer,x.endOffset),te=this.cloneRange();return k==-1&&te.setStart(x.startContainer,x.startOffset),G==1&&te.setEnd(x.endContainer,x.endOffset),te}return null},union:function(x){if(this.intersectsOrTouchesRange(x)){var k=this.cloneRange();return rt(x.startContainer,x.startOffset,this.startContainer,this.startOffset)==-1&&k.setStart(x.startContainer,x.startOffset),rt(x.endContainer,x.endOffset,this.endContainer,this.endOffset)==1&&k.setEnd(x.endContainer,x.endOffset),k}else throw new Me("Ranges do not intersect")},containsNode:function(x,k){return k?this.intersectsNode(x,!1):this.compareNode(x)==mi},containsNodeContents:function(x){return this.comparePoint(x,0)>=0&&this.comparePoint(x,E(x))<=0},containsRange:function(x){var k=this.intersection(x);return k!==null&&x.equals(k)},containsNodeText:function(x){var k=this.cloneRange();k.selectNode(x);var G=k.getNodes([3]);if(G.length>0){k.setStart(G[0],0);var te=G.pop();return k.setEnd(te,te.length),this.containsRange(k)}else return this.containsNodeContents(x)},getNodes:function(x,k){return ct(this),ye(this,x,k)},getDocument:function(){return Y(this)},collapseBefore:function(x){this.setEndBefore(x),this.collapse(!1)},collapseAfter:function(x){this.setStartAfter(x),this.collapse(!0)},getBookmark:function(x){var k=Y(this),G=N.createRange(k);x=x||U.getBody(k),G.selectNodeContents(x);var te=this.intersection(G),me=0,Ve=0;return te&&(G.setEnd(te.startContainer,te.startOffset),me=G.toString().length,Ve=me+te.toString().length),{start:me,end:Ve,containerNode:x}},moveToBookmark:function(x){var k=x.containerNode,G=0;this.setStart(k,0),this.collapse(!0);for(var te=[k],me,Ve=!1,Q=!1,de,Oe,ze;!Q&&(me=te.pop());)if(me.nodeType==3)de=G+me.length,!Ve&&x.start>=G&&x.start<=de&&(this.setStart(me,x.start-G),Ve=!0),Ve&&x.end>=G&&x.end<=de&&(this.setEnd(me,x.end-G),Q=!0),G=de;else for(ze=me.childNodes,Oe=ze.length;Oe--;)te.push(ze[Oe])},getName:function(){return"DomRange"},equals:function(x){return Tt.rangesEqual(this,x)},isValid:function(){return $r(this)},inspect:function(){return Qe(this)},detach:function(){}});function _(x){x.START_TO_START=yi,x.START_TO_END=Xr,x.END_TO_END=xa,x.END_TO_START=mr,x.NODE_BEFORE=zr,x.NODE_AFTER=fo,x.NODE_BEFORE_AND_AFTER=ho,x.NODE_INSIDE=mi}function I(x){_(x),_(x.prototype)}function K(x,k){return function(){ct(this);var G=this.startContainer,te=this.startOffset,me=this.commonAncestorContainer,Ve=new pt(this,!0),Q,de;G!==me&&(Q=Dt(G,me,!0),de=ve(Q),G=de.node,te=de.offset),Ge(Ve,un),Ve.reset();var Oe=x(Ve);return Ve.detach(),k(this,G,te,G,te),Oe}}function ae(x,k){function G(Q,de){return function(Oe){bt(Oe,Ot),bt(T(Oe),ln);var ze=(Q?Ce:ve)(Oe);(de?te:me)(this,ze.node,ze.offset)}}function te(Q,de,Oe){var ze=Q.endContainer,Ut=Q.endOffset;(de!==Q.startContainer||Oe!==Q.startOffset)&&((T(de)!=T(ze)||rt(de,Oe,ze,Ut)==1)&&(ze=de,Ut=Oe),k(Q,de,Oe,ze,Ut))}function me(Q,de,Oe){var ze=Q.startContainer,Ut=Q.startOffset;(de!==Q.endContainer||Oe!==Q.endOffset)&&((T(de)!=T(ze)||rt(de,Oe,ze,Ut)==-1)&&(ze=de,Ut=Oe),k(Q,ze,Ut,de,Oe))}var Ve=function(){};Ve.prototype=N.rangePrototype,x.prototype=new Ve,ee.extend(x.prototype,{setStart:function(Q,de){we(Q,!0),st(Q,de),te(this,Q,de)},setEnd:function(Q,de){we(Q,!0),st(Q,de),me(this,Q,de)},setStartAndEnd:function(){var Q=arguments,de=Q[0],Oe=Q[1],ze=de,Ut=Oe;switch(Q.length){case 3:Ut=Q[2];break;case 4:ze=Q[2],Ut=Q[3];break}we(de,!0),st(de,Oe),we(ze,!0),st(ze,Ut),k(this,de,Oe,ze,Ut)},setBoundary:function(Q,de,Oe){this["set"+(Oe?"Start":"End")](Q,de)},setStartBefore:G(!0,!0),setStartAfter:G(!1,!0),setEndBefore:G(!0,!1),setEndAfter:G(!1,!1),collapse:function(Q){ct(this),Q?k(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):k(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(Q){we(Q,!0),k(this,Q,0,Q,E(Q))},selectNode:function(Q){we(Q,!1),bt(Q,Ot);var de=Ce(Q),Oe=ve(Q);k(this,de.node,de.offset,Oe.node,Oe.offset)},extractContents:K(oe,k),deleteContents:K(Lt,k),canSurroundContents:function(){ct(this),un(this.startContainer),un(this.endContainer);var Q=new pt(this,!0),de=Q._first&&q(Q._first,this)||Q._last&&q(Q._last,this);return Q.detach(),!de},splitBoundaries:function(){vi(this)},splitBoundariesPreservingPositions:function(Q){vi(this,Q)},normalizeBoundaries:function(){ct(this);var Q=this.startContainer,de=this.startOffset,Oe=this.endContainer,ze=this.endOffset,Ut=function(Jt){var Un=Jt.nextSibling;Un&&Un.nodeType==Jt.nodeType&&(Oe=Jt,ze=Jt.length,Jt.appendData(Un.data),P(Un))},Cf=function(Jt){var Un=Jt.previousSibling;if(Un&&Un.nodeType==Jt.nodeType){Q=Jt;var Jy=Jt.length;if(de=Un.length,Jt.insertData(0,Un.data),P(Un),Q==Oe)ze+=de,Oe=Q;else if(Oe==Jt.parentNode){var Of=yt(Jt);ze==Of?(Oe=Jt,ze=Jy):ze>Of&&ze--}}},Ll=!0,fn;if(Ae(Oe))ze==Oe.length?Ut(Oe):ze==0&&(fn=Oe.previousSibling,fn&&fn.nodeType==Oe.nodeType&&(ze=fn.length,Q==Oe&&(Ll=!1),fn.appendData(Oe.data),P(Oe),Oe=fn));else{if(ze>0){var kl=Oe.childNodes[ze-1];kl&&Ae(kl)&&Ut(kl)}Ll=!this.collapsed}if(Ll){if(Ae(Q))de==0?Cf(Q):de==Q.length&&(fn=Q.nextSibling,fn&&fn.nodeType==Q.nodeType&&(Oe==fn&&(Oe=Q,ze+=Q.length),Q.appendData(fn.data),P(fn)));else if(de<Q.childNodes.length){var Il=Q.childNodes[de];Il&&Ae(Il)&&Cf(Il)}}else Q=Oe,de=ze;k(this,Q,de,Oe,ze)},collapseToPoint:function(Q,de){we(Q,!0),st(Q,de),this.setStartAndEnd(Q,de)},parentElement:function(){ct(this);var Q=this.commonAncestorContainer;return Q?ke(this.commonAncestorContainer,!0):null}}),I(x)}function Re(x){x.collapsed=x.startContainer===x.endContainer&&x.startOffset===x.endOffset,x.commonAncestorContainer=x.collapsed?x.startContainer:U.getCommonAncestor(x.startContainer,x.endContainer)}function et(x,k,G,te,me){x.startContainer=k,x.startOffset=G,x.endContainer=te,x.endOffset=me,x.document=U.getDocument(k),Re(x)}function Tt(x){et(this,x,0,x,0)}ae(Tt,et),ee.extend(Tt,{rangeProperties:gi,RangeIterator:pt,copyComparisonConstants:I,createPrototypeRange:ae,inspect:Qe,toHtml:Ie,getRangeDocument:Y,rangesEqual:function(x,k){return x.startContainer===k.startContainer&&x.startOffset===k.startOffset&&x.endContainer===k.endContainer&&x.endOffset===k.endOffset}}),N.DomRange=Tt}),R.createCoreModule("WrappedRange",["DomRange"],function(N,X){var U,ee,re=N.dom,Me=N.util,Ae=re.DomPosition,yt=N.DomRange,xt=re.getBody,Ct=re.getContentDocument,rt=re.isCharacterDataNode;if(N.features.implementsDomRange&&function(){var P,q=yt.rangeProperties;function Y(oe){for(var ye=q.length,Qe;ye--;)Qe=q[ye],oe[Qe]=oe.nativeRange[Qe];oe.collapsed=oe.startContainer===oe.endContainer&&oe.startOffset===oe.endOffset}function J(oe,ye,Qe,pt,Ot){var ln=oe.startContainer!==ye||oe.startOffset!=Qe,Xt=oe.endContainer!==pt||oe.endOffset!=Ot,kt=!oe.equals(oe.nativeRange);(ln||Xt||kt)&&(oe.setEnd(pt,Ot),oe.setStart(ye,Qe))}var Ce;U=function(oe){if(!oe)throw X.createError("WrappedRange: Range must be specified");this.nativeRange=oe,Y(this)},yt.createPrototypeRange(U,J),P=U.prototype,P.selectNode=function(oe){this.nativeRange.selectNode(oe),Y(this)},P.cloneContents=function(){return this.nativeRange.cloneContents()},P.surroundContents=function(oe){this.nativeRange.surroundContents(oe),Y(this)},P.collapse=function(oe){this.nativeRange.collapse(oe),Y(this)},P.cloneRange=function(){return new U(this.nativeRange.cloneRange())},P.refresh=function(){Y(this)},P.toString=function(){return this.nativeRange.toString()};var ve=document.createTextNode("test");xt(document).appendChild(ve);var ie=document.createRange();ie.setStart(ve,0),ie.setEnd(ve,0);try{ie.setStart(ve,1),P.setStart=function(oe,ye){this.nativeRange.setStart(oe,ye),Y(this)},P.setEnd=function(oe,ye){this.nativeRange.setEnd(oe,ye),Y(this)},Ce=function(oe){return function(ye){this.nativeRange[oe](ye),Y(this)}}}catch(oe){P.setStart=function(ye,Qe){try{this.nativeRange.setStart(ye,Qe)}catch(pt){this.nativeRange.setEnd(ye,Qe),this.nativeRange.setStart(ye,Qe)}Y(this)},P.setEnd=function(ye,Qe){try{this.nativeRange.setEnd(ye,Qe)}catch(pt){this.nativeRange.setStart(ye,Qe),this.nativeRange.setEnd(ye,Qe)}Y(this)},Ce=function(ye,Qe){return function(pt){try{this.nativeRange[ye](pt)}catch(Ot){this.nativeRange[Qe](pt),this.nativeRange[ye](pt)}Y(this)}}}P.setStartBefore=Ce("setStartBefore","setEndBefore"),P.setStartAfter=Ce("setStartAfter","setEndAfter"),P.setEndBefore=Ce("setEndBefore","setStartBefore"),P.setEndAfter=Ce("setEndAfter","setStartAfter"),P.selectNodeContents=function(oe){this.setStartAndEnd(oe,0,re.getNodeLength(oe))},ie.selectNodeContents(ve),ie.setEnd(ve,3);var Ke=document.createRange();Ke.selectNodeContents(ve),Ke.setEnd(ve,4),Ke.setStart(ve,2),ie.compareBoundaryPoints(ie.START_TO_END,Ke)==-1&&ie.compareBoundaryPoints(ie.END_TO_START,Ke)==1?P.compareBoundaryPoints=function(oe,ye){return ye=ye.nativeRange||ye,oe==ye.START_TO_END?oe=ye.END_TO_START:oe==ye.END_TO_START&&(oe=ye.START_TO_END),this.nativeRange.compareBoundaryPoints(oe,ye)}:P.compareBoundaryPoints=function(oe,ye){return this.nativeRange.compareBoundaryPoints(oe,ye.nativeRange||ye)};var Xe=document.createElement("div");Xe.innerHTML="123";var Ge=Xe.firstChild,Lt=xt(document);Lt.appendChild(Xe),ie.setStart(Ge,1),ie.setEnd(Ge,2),ie.deleteContents(),Ge.data=="13"&&(P.deleteContents=function(){this.nativeRange.deleteContents(),Y(this)},P.extractContents=function(){var oe=this.nativeRange.extractContents();return Y(this),oe}),Lt.removeChild(Xe),Lt=null,Me.isHostMethod(ie,"createContextualFragment")&&(P.createContextualFragment=function(oe){return this.nativeRange.createContextualFragment(oe)}),xt(document).removeChild(ve),P.getName=function(){return"WrappedRange"},N.WrappedRange=U,N.createNativeRange=function(oe){return oe=Ct(oe,X,"createNativeRange"),oe.createRange()}}(),N.features.implementsTextRange){var Pt=function(P){var q=P.parentElement(),Y=P.duplicate();Y.collapse(!0);var J=Y.parentElement();Y=P.duplicate(),Y.collapse(!1);var Ce=Y.parentElement(),ve=J==Ce?J:re.getCommonAncestor(J,Ce);return ve==q?ve:re.getCommonAncestor(q,ve)},Dt=function(P){return P.compareEndPoints("StartToEnd",P)==0},E=function(P,q,Y,J,Ce){var ve=P.duplicate();ve.collapse(Y);var ie=ve.parentElement();if(re.isOrIsAncestorOf(q,ie)||(ie=q),!ie.canHaveHTML){var Ke=new Ae(ie.parentNode,re.getNodeIndex(ie));return{boundaryPosition:Ke,nodeInfo:{nodeIndex:Ke.offset,containerElement:Ke.node}}}var Xe=re.getDocument(ie).createElement("span");Xe.parentNode&&re.removeNode(Xe);for(var Ge,Lt=Y?"StartToStart":"StartToEnd",oe,ye,Qe,pt,Ot=Ce&&Ce.containerElement==ie?Ce.nodeIndex:0,ln=ie.childNodes.length,Xt=ln,kt=Xt;kt==ln?ie.appendChild(Xe):ie.insertBefore(Xe,ie.childNodes[kt]),ve.moveToElementText(Xe),Ge=ve.compareEndPoints(Lt,P),!(Ge==0||Ot==Xt);){if(Ge==-1){if(Xt==Ot+1)break;Ot=kt}else Xt=Xt==Ot+1?Ot:kt;kt=Math.floor((Ot+Xt)/2),ie.removeChild(Xe)}if(pt=Xe.nextSibling,Ge==-1&&pt&&rt(pt)){ve.setEndPoint(Y?"EndToStart":"EndToEnd",P);var It;if(/[\r\n]/.test(pt.data)){var Ft=ve.duplicate(),Zt=Ft.text.replace(/\r\n/g,"\r").length;for(It=Ft.moveStart("character",Zt);(Ge=Ft.compareEndPoints("StartToEnd",Ft))==-1;)It++,Ft.moveStart("character",1)}else It=ve.text.length;Qe=new Ae(pt,It)}else oe=(J||!Y)&&Xe.previousSibling,ye=(J||Y)&&Xe.nextSibling,ye&&rt(ye)?Qe=new Ae(ye,0):oe&&rt(oe)?Qe=new Ae(oe,oe.data.length):Qe=new Ae(ie,re.getNodeIndex(Xe));return re.removeNode(Xe),{boundaryPosition:Qe,nodeInfo:{nodeIndex:kt,containerElement:ie}}},S=function(P,q){var Y,J,Ce=P.offset,ve=re.getDocument(P.node),ie,Ke,Xe=xt(ve).createTextRange(),Ge=rt(P.node);return Ge?(Y=P.node,J=Y.parentNode):(Ke=P.node.childNodes,Y=Ce<Ke.length?Ke[Ce]:null,J=P.node),ie=ve.createElement("span"),ie.innerHTML="&#feff;",Y?J.insertBefore(ie,Y):J.appendChild(ie),Xe.moveToElementText(ie),Xe.collapse(!q),J.removeChild(ie),Ge&&Xe[q?"moveStart":"moveEnd"]("character",Ce),Xe};ee=function(P){this.textRange=P,this.refresh()},ee.prototype=new yt(document),ee.prototype.refresh=function(){var P,q,Y,J=Pt(this.textRange);Dt(this.textRange)?q=P=E(this.textRange,J,!0,!0).boundaryPosition:(Y=E(this.textRange,J,!0,!1),P=Y.boundaryPosition,q=E(this.textRange,J,!1,!1,Y.nodeInfo).boundaryPosition),this.setStart(P.node,P.offset),this.setEnd(q.node,q.offset)},ee.prototype.getName=function(){return"WrappedTextRange"},yt.copyComparisonConstants(ee);var T=function(P){if(P.collapsed)return S(new Ae(P.startContainer,P.startOffset),!0);var q=S(new Ae(P.startContainer,P.startOffset),!0),Y=S(new Ae(P.endContainer,P.endOffset),!1),J=xt(yt.getRangeDocument(P)).createTextRange();return J.setEndPoint("StartToStart",q),J.setEndPoint("EndToEnd",Y),J};if(ee.rangeToTextRange=T,ee.prototype.toTextRange=function(){return T(this)},N.WrappedTextRange=ee,!N.features.implementsDomRange||N.config.preferTextRange){var z=function(P){return P("return this;")()}(Function);typeof z.Range=="undefined"&&(z.Range=ee),N.createNativeRange=function(P){return P=Ct(P,X,"createNativeRange"),xt(P).createTextRange()},N.WrappedRange=ee}}N.createRange=function(P){return P=Ct(P,X,"createRange"),new N.WrappedRange(N.createNativeRange(P))},N.createRangyRange=function(P){return P=Ct(P,X,"createRangyRange"),new yt(P)},Me.createAliasForDeprecatedMethod(N,"createIframeRange","createRange"),Me.createAliasForDeprecatedMethod(N,"createIframeRangyRange","createRangyRange"),N.addShimListener(function(P){var q=P.document;typeof q.createRange=="undefined"&&(q.createRange=function(){return N.createRange(q)}),q=P=null})}),R.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(N,X){N.config.checkSelectionRanges=!0;var U="boolean",ee="number",re=N.dom,Me=N.util,Ae=Me.isHostMethod,yt=N.DomRange,xt=N.WrappedRange,Ct=N.DOMException,rt=re.DomPosition,Pt,Dt,E=N.features,S="Control",T=re.getDocument,z=re.getBody,P=yt.rangesEqual;function q(_){return typeof _=="string"?/^backward(s)?$/i.test(_):!!_}function Y(_,I){if(_){if(re.isWindow(_))return _;if(_ instanceof ct)return _.win;var K=re.getContentDocument(_,X,I);return re.getWindow(K)}else return window}function J(_){return Y(_,"getWinSelection").getSelection()}function Ce(_){return Y(_,"getDocSelection").document.selection}function ve(_){var I=!1;return _.anchorNode&&(I=re.comparePoints(_.anchorNode,_.anchorOffset,_.focusNode,_.focusOffset)==1),I}var ie=Ae(window,"getSelection"),Ke=Me.isHostObject(document,"selection");E.implementsWinGetSelection=ie,E.implementsDocSelection=Ke;var Xe=Ke&&(!ie||N.config.preferTextRange);if(Xe)Pt=Ce,N.isSelectionValid=function(_){var I=Y(_,"isSelectionValid").document,K=I.selection;return K.type!="None"||T(K.createRange().parentElement())==I};else if(ie)Pt=J,N.isSelectionValid=function(){return!0};else return X.fail("Neither document.selection or window.getSelection() detected."),!1;N.getNativeSelection=Pt;var Ge=Pt();if(!Ge)return X.fail("Native selection was null (possibly issue 138?)"),!1;var Lt=N.createNativeRange(document),oe=z(document),ye=Me.areHostProperties(Ge,["anchorNode","focusNode","anchorOffset","focusOffset"]);E.selectionHasAnchorAndFocus=ye;var Qe=Ae(Ge,"extend");E.selectionHasExtend=Qe;var pt=Ae(Ge,"setBaseAndExtent");E.selectionHasSetBaseAndExtent=pt;var Ot=typeof Ge.rangeCount==ee;E.selectionHasRangeCount=Ot;var ln=!1,Xt=!0,kt=Qe?function(_,I){var K=yt.getRangeDocument(I),ae=N.createRange(K);ae.collapseToPoint(I.endContainer,I.endOffset),_.addRange(we(ae)),_.extend(I.startContainer,I.startOffset)}:null;Me.areHostMethods(Ge,["addRange","getRangeAt","removeAllRanges"])&&typeof Ge.rangeCount==ee&&E.implementsDomRange&&function(){var _=window.getSelection();if(_){for(var I=_.rangeCount,K=I>1,ae=[],Re=ve(_),et=0;et<I;++et)ae[et]=_.getRangeAt(et);var Tt=re.createTestElement(document,"",!1),x=Tt.appendChild(document.createTextNode("   ")),k=document.createRange();if(k.setStart(x,1),k.collapse(!0),_.removeAllRanges(),_.addRange(k),Xt=_.rangeCount==1,_.removeAllRanges(),!K){var G=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(G&&parseInt(G[1])>=36)ln=!1;else{var te=k.cloneRange();k.setStart(x,0),te.setEnd(x,3),te.setStart(x,2),_.addRange(k),_.addRange(te),ln=_.rangeCount==2}}for(re.removeNode(Tt),_.removeAllRanges(),et=0;et<I;++et)et==0&&Re?kt?kt(_,ae[et]):(N.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),_.addRange(ae[et])):_.addRange(ae[et])}}(),E.selectionSupportsMultipleRanges=ln,E.collapsedNonEditableSelectionsSupported=Xt;var It=!1,Ft;oe&&Ae(oe,"createControlRange")&&(Ft=oe.createControlRange(),Me.areHostProperties(Ft,["item","add"])&&(It=!0)),E.implementsControlRange=It,ye?Dt=function(_){return _.anchorNode===_.focusNode&&_.anchorOffset===_.focusOffset}:Dt=function(_){return _.rangeCount?_.getRangeAt(_.rangeCount-1).collapsed:!1};function Zt(_,I,K){var ae=K?"end":"start",Re=K?"start":"end";_.anchorNode=I[ae+"Container"],_.anchorOffset=I[ae+"Offset"],_.focusNode=I[Re+"Container"],_.focusOffset=I[Re+"Offset"]}function W(_){var I=_.nativeSelection;_.anchorNode=I.anchorNode,_.anchorOffset=I.anchorOffset,_.focusNode=I.focusNode,_.focusOffset=I.focusOffset}function ne(_){_.anchorNode=_.focusNode=null,_.anchorOffset=_.focusOffset=0,_.rangeCount=0,_.isCollapsed=!0,_._ranges.length=0,ke(_)}function ke(_){_.type=_.rangeCount==0?"None":Dt(_)?"Caret":"Range"}function we(_){var I;return _ instanceof yt?(I=N.createNativeRange(_.getDocument()),I.setEnd(_.endContainer,_.endOffset),I.setStart(_.startContainer,_.startOffset)):_ instanceof xt?I=_.nativeRange:E.implementsDomRange&&_ instanceof re.getWindow(_.startContainer).Range&&(I=_),I}function bt(_){if(!_.length||_[0].nodeType!=1)return!1;for(var I=1,K=_.length;I<K;++I)if(!re.isAncestorOf(_[0],_[I]))return!1;return!0}function st(_){var I=_.getNodes();if(!bt(I))throw X.createError("getSingleElementFromRange: range "+_.inspect()+" did not consist of a single element");return I[0]}function Cn(_){return!!_&&typeof _.text!="undefined"}function un(_,I){var K=new xt(I);_._ranges=[K],Zt(_,K,!1),_.rangeCount=1,_.isCollapsed=K.collapsed,ke(_)}function zt(_){if(_._ranges.length=0,_.docSelection.type=="None")ne(_);else{var I=_.docSelection.createRange();if(Cn(I))un(_,I);else{_.rangeCount=I.length;for(var K,ae=T(I.item(0)),Re=0;Re<_.rangeCount;++Re)K=N.createRange(ae),K.selectNode(I.item(Re)),_._ranges.push(K);_.isCollapsed=_.rangeCount==1&&_._ranges[0].collapsed,Zt(_,_._ranges[_.rangeCount-1],!1),ke(_)}}}function lo(_,I){for(var K=_.docSelection.createRange(),ae=st(I),Re=T(K.item(0)),et=z(Re).createControlRange(),Tt=0,x=K.length;Tt<x;++Tt)et.add(K.item(Tt));try{et.add(ae)}catch(k){throw X.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}et.select(),zt(_)}var $r;Ae(Ge,"getRangeAt")?$r=function(_,I){try{return _.getRangeAt(I)}catch(K){return null}}:ye&&($r=function(_){var I=T(_.anchorNode),K=N.createRange(I);return K.setStartAndEnd(_.anchorNode,_.anchorOffset,_.focusNode,_.focusOffset),K.collapsed!==this.isCollapsed&&K.setStartAndEnd(_.focusNode,_.focusOffset,_.anchorNode,_.anchorOffset),K});function ct(_,I,K){this.nativeSelection=_,this.docSelection=I,this._ranges=[],this.win=K,this.refresh()}ct.prototype=N.selectionPrototype;function uo(_){_.win=_.anchorNode=_.focusNode=_._ranges=null,_.rangeCount=_.anchorOffset=_.focusOffset=0,_.detached=!0,ke(_)}var lr=[];function co(_,I){for(var K=lr.length,ae,Re;K--;)if(ae=lr[K],Re=ae.selection,I=="deleteAll")uo(Re);else if(ae.win==_)return I=="delete"?(lr.splice(K,1),!0):Re;return I=="deleteAll"&&(lr.length=0),null}var vi=function(_){if(_&&_ instanceof ct)return _.refresh(),_;_=Y(_,"getNativeSelection");var I=co(_),K=Pt(_),ae=Ke?Ce(_):null;return I?(I.nativeSelection=K,I.docSelection=ae,I.refresh()):(I=new ct(K,ae,_),lr.push({win:_,selection:I})),I};N.getSelection=vi,Me.createAliasForDeprecatedMethod(N,"getIframeSelection","getSelection");var Ie=ct.prototype;function gi(_,I){for(var K=T(I[0].startContainer),ae=z(K).createControlRange(),Re=0,et,Tt=I.length;Re<Tt;++Re){et=st(I[Re]);try{ae.add(et)}catch(x){throw X.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}ae.select(),zt(_)}if(!Xe&&ye&&Me.areHostMethods(Ge,["removeAllRanges","addRange"])){Ie.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),ne(this)};var yi=function(_,I){kt(_.nativeSelection,I),_.refresh()};Ot?Ie.addRange=function(_,I){if(It&&Ke&&this.docSelection.type==S)lo(this,_);else if(q(I)&&Qe)yi(this,_);else{var K;ln?K=this.rangeCount:(this.removeAllRanges(),K=0);var ae=we(_).cloneRange();try{this.nativeSelection.addRange(ae)}catch(et){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==K+1){if(N.config.checkSelectionRanges){var Re=$r(this.nativeSelection,this.rangeCount-1);Re&&!P(Re,_)&&(_=new xt(Re))}this._ranges[this.rangeCount-1]=_,Zt(this,_,mr(this.nativeSelection)),this.isCollapsed=Dt(this),ke(this)}else this.refresh()}}:Ie.addRange=function(_,I){q(I)&&Qe?yi(this,_):(this.nativeSelection.addRange(we(_)),this.refresh())},Ie.setRanges=function(_){if(It&&Ke&&_.length>1)gi(this,_);else{this.removeAllRanges();for(var I=0,K=_.length;I<K;++I)this.addRange(_[I])}}}else if(Ae(Ge,"empty")&&Ae(Lt,"select")&&It&&Xe)Ie.removeAllRanges=function(){try{if(this.docSelection.empty(),this.docSelection.type!="None"){var _;if(this.anchorNode)_=T(this.anchorNode);else if(this.docSelection.type==S){var I=this.docSelection.createRange();I.length&&(_=T(I.item(0)))}if(_){var K=z(_).createTextRange();K.select(),this.docSelection.empty()}}}catch(ae){}ne(this)},Ie.addRange=function(_){this.docSelection.type==S?lo(this,_):(N.WrappedTextRange.rangeToTextRange(_).select(),this._ranges[0]=_,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,Zt(this,_,!1),ke(this))},Ie.setRanges=function(_){this.removeAllRanges();var I=_.length;I>1?gi(this,_):I&&this.addRange(_[0])};else return X.fail("No means of selecting a Range or TextRange was found"),!1;Ie.getRangeAt=function(_){if(_<0||_>=this.rangeCount)throw new Ct("INDEX_SIZE_ERR");return this._ranges[_].cloneRange()};var Xr;if(Xe)Xr=function(_){var I;N.isSelectionValid(_.win)?I=_.docSelection.createRange():(I=z(_.win.document).createTextRange(),I.collapse(!0)),_.docSelection.type==S?zt(_):Cn(I)?un(_,I):ne(_)};else if(Ae(Ge,"getRangeAt")&&typeof Ge.rangeCount==ee)Xr=function(_){if(It&&Ke&&_.docSelection.type==S)zt(_);else if(_._ranges.length=_.rangeCount=_.nativeSelection.rangeCount,_.rangeCount){for(var I=0,K=_.rangeCount;I<K;++I)_._ranges[I]=new N.WrappedRange(_.nativeSelection.getRangeAt(I));Zt(_,_._ranges[_.rangeCount-1],mr(_.nativeSelection)),_.isCollapsed=Dt(_),ke(_)}else ne(_)};else if(ye&&typeof Ge.isCollapsed==U&&typeof Lt.collapsed==U&&E.implementsDomRange)Xr=function(_){var I,K=_.nativeSelection;K.anchorNode?(I=$r(K,0),_._ranges=[I],_.rangeCount=1,W(_),_.isCollapsed=Dt(_),ke(_)):ne(_)};else return X.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;Ie.refresh=function(_){var I=_?this._ranges.slice(0):null,K=this.anchorNode,ae=this.anchorOffset;if(Xr(this),_){var Re=I.length;if(Re!=this._ranges.length||this.anchorNode!=K||this.anchorOffset!=ae)return!0;for(;Re--;)if(!P(I[Re],this._ranges[Re]))return!0;return!1}};var xa=function(_,I){var K=_.getAllRanges();_.removeAllRanges();for(var ae=0,Re=K.length;ae<Re;++ae)P(I,K[ae])||_.addRange(K[ae]);_.rangeCount||ne(_)};It&&Ke?Ie.removeRange=function(_){if(this.docSelection.type==S){for(var I=this.docSelection.createRange(),K=st(_),ae=T(I.item(0)),Re=z(ae).createControlRange(),et,Tt=!1,x=0,k=I.length;x<k;++x)et=I.item(x),et!==K||Tt?Re.add(I.item(x)):Tt=!0;Re.select(),zt(this)}else xa(this,_)}:Ie.removeRange=function(_){xa(this,_)};var mr;!Xe&&ye&&E.implementsDomRange?(mr=ve,Ie.isBackward=function(){return mr(this)}):mr=Ie.isBackward=function(){return!1},Ie.isBackwards=Ie.isBackward,Ie.toString=function(){for(var _=[],I=0,K=this.rangeCount;I<K;++I)_[I]=""+this._ranges[I];return _.join("")};function zr(_,I){if(_.win.document!=T(I))throw new Ct("WRONG_DOCUMENT_ERR")}function fo(_,I){if(I<0||I>(re.isCharacterDataNode(_)?_.length:_.childNodes.length))throw new Ct("INDEX_SIZE_ERR")}Ie.collapse=function(_,I){zr(this,_);var K=N.createRange(_);K.collapseToPoint(_,I),this.setSingleRange(K),this.isCollapsed=!0},Ie.collapseToStart=function(){if(this.rangeCount){var _=this._ranges[0];this.collapse(_.startContainer,_.startOffset)}else throw new Ct("INVALID_STATE_ERR")},Ie.collapseToEnd=function(){if(this.rangeCount){var _=this._ranges[this.rangeCount-1];this.collapse(_.endContainer,_.endOffset)}else throw new Ct("INVALID_STATE_ERR")},Ie.selectAllChildren=function(_){zr(this,_);var I=N.createRange(_);I.selectNodeContents(_),this.setSingleRange(I)},pt?Ie.setBaseAndExtent=function(_,I,K,ae){this.nativeSelection.setBaseAndExtent(_,I,K,ae),this.refresh()}:Qe&&(Ie.setBaseAndExtent=function(_,I,K,ae){fo(_,I),fo(K,ae),zr(this,_),zr(this,K);var Re=N.createRange(node),et=re.comparePoints(_,I,K,ae)==-1;et?Re.setStartAndEnd(K,ae,_,I):Re.setStartAndEnd(_,I,K,ae),this.setSingleRange(Re,et)}),Ie.deleteFromDocument=function(){if(It&&Ke&&this.docSelection.type==S){for(var _=this.docSelection.createRange(),I;_.length;)I=_.item(0),_.remove(I),re.removeNode(I);this.refresh()}else if(this.rangeCount){var K=this.getAllRanges();if(K.length){this.removeAllRanges();for(var ae=0,Re=K.length;ae<Re;++ae)K[ae].deleteContents();this.addRange(K[Re-1])}}},Ie.eachRange=function(_,I){for(var K=0,ae=this._ranges.length;K<ae;++K)if(_(this.getRangeAt(K)))return I},Ie.getAllRanges=function(){var _=[];return this.eachRange(function(I){_.push(I)}),_},Ie.setSingleRange=function(_,I){this.removeAllRanges(),this.addRange(_,I)},Ie.callMethodOnEachRange=function(_,I){var K=[];return this.eachRange(function(ae){K.push(ae[_].apply(ae,I||[]))}),K};function ho(_){return function(I,K){var ae;this.rangeCount?(ae=this.getRangeAt(0),ae["set"+(_?"Start":"End")](I,K)):(ae=N.createRange(this.win.document),ae.setStartAndEnd(I,K)),this.setSingleRange(ae,this.isBackward())}}Ie.setStart=ho(!0),Ie.setEnd=ho(!1),N.rangePrototype.select=function(_){vi(this.getDocument()).setSingleRange(this,_)},Ie.changeEachRange=function(_){var I=[],K=this.isBackward();this.eachRange(function(ae){_(ae),I.push(ae)}),this.removeAllRanges(),K&&I.length==1?this.addRange(I[0],"backward"):this.setRanges(I)},Ie.containsNode=function(_,I){return this.eachRange(function(K){return K.containsNode(_,I)},!0)||!1},Ie.getBookmark=function(_){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[_])}},Ie.moveToBookmark=function(_){for(var I=[],K=0,ae,Re;ae=_.rangeBookmarks[K++];)Re=N.createRange(this.win),Re.moveToBookmark(ae),I.push(Re);_.backward?this.setSingleRange(I[0],"backward"):this.setRanges(I)},Ie.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},Ie.restoreRanges=function(_){this.removeAllRanges();for(var I=0,K;K=_.ranges[I];++I)this.addRange(K,_.backward&&I==0)},Ie.toHtml=function(){var _=[];return this.eachRange(function(I){_.push(yt.toHtml(I))}),_.join("")},E.implementsTextRange&&(Ie.getNativeTextRange=function(){var _;if(_=this.docSelection){var I=_.createRange();if(Cn(I))return I;throw X.createError("getNativeTextRange: selection is a control selection")}else{if(this.rangeCount>0)return N.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw X.createError("getNativeTextRange: selection contains no range")}});function mi(_){var I=[],K=new rt(_.anchorNode,_.anchorOffset),ae=new rt(_.focusNode,_.focusOffset),Re=typeof _.getName=="function"?_.getName():"Selection";if(typeof _.rangeCount!="undefined")for(var et=0,Tt=_.rangeCount;et<Tt;++et)I[et]=yt.inspect(_.getRangeAt(et));return"["+Re+"(Ranges: "+I.join(", ")+")(anchor: "+K.inspect()+", focus: "+ae.inspect()+"]"}Ie.getName=function(){return"WrappedSelection"},Ie.inspect=function(){return mi(this)},Ie.detach=function(){co(this.win,"delete"),uo(this)},ct.detachAll=function(){co(null,"deleteAll")},ct.inspect=mi,ct.isDirectionBackward=q,N.Selection=ct,N.selectionPrototype=Ie,N.addShimListener(function(_){typeof _.getSelection=="undefined"&&(_.getSelection=function(){return vi(_)}),_=null})});var Te=!1,Be=function(N){Te||(Te=!0,!R.initialized&&R.config.autoInitialize&&L())};return D&&(document.readyState=="complete"?Be():(u(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",Be,!1),ce(window,"load",Be))),R})}(pu)),pu.exports}var pD=Yy();const cp=rl(pD);var vu={exports:{}},fp;function vD(){return fp||(fp=1,function(n,e){(function(t,r){n.exports=t(Yy())})(function(t){return t.createModule("ClassApplier",["WrappedSelection"],function(r,i){var o=r.dom,a=o.DomPosition,s=o.arrayContains,l=r.util,u=l.forEach,c="span",f=l.isHostMethod(document,"createElementNS");function d(E,S){for(var T in E)if(E.hasOwnProperty(T)&&S(T,E[T])===!1)return!1;return!0}function h(E){return E.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function v(E,S){return!!E&&new RegExp("(?:^|\\s)"+S+"(?:\\s|$)").test(E)}function p(E,S){if(typeof E.classList=="object")return E.classList.contains(S);var T=typeof E.className=="string",z=T?E.className:E.getAttribute("class");return v(z,S)}function g(E,S){if(typeof E.classList=="object")E.classList.add(S);else{var T=typeof E.className=="string",z=T?E.className:E.getAttribute("class");z?v(z,S)||(z+=" "+S):z=S,T?E.className=z:E.setAttribute("class",z)}}var y=function(){function E(S,T,z){return T&&z?" ":""}return function(S,T){if(typeof S.classList=="object")S.classList.remove(T);else{var z=typeof S.className=="string",P=z?S.className:S.getAttribute("class");P=P.replace(new RegExp("(^|\\s)"+T+"(\\s|$)"),E),z?S.className=P:S.setAttribute("class",P)}}}();function b(E){var S=typeof E.className=="string";return S?E.className:E.getAttribute("class")}function C(E){return E&&E.split(/\s+/).sort().join(" ")}function D(E){return C(b(E))}function B(E,S){return D(E)==D(S)}function R(E,S){for(var T=S.split(/\s+/),z=0,P=T.length;z<P;++z)if(!p(E,h(T[z])))return!1;return!0}function A(E){var S=E.parentNode;return S&&S.nodeType==1&&!/^(textarea|style|script|select|iframe)$/i.test(S.nodeName)}function O(E,S,T,z,P){var q=E.node,Y=E.offset,J=q,Ce=Y;q==z&&Y>P&&++Ce,q==S&&(Y==T||Y==T+1)&&(J=z,Ce+=P-T),q==S&&Y>T+1&&--Ce,E.node=J,E.offset=Ce}function F(E,S,T){E.node==S&&E.offset>T&&--E.offset}function Z(E,S,T,z){T==-1&&(T=S.childNodes.length);var P=E.parentNode,q=o.getNodeIndex(E);u(z,function(Y){O(Y,P,q,S,T)}),S.childNodes.length==T?S.appendChild(E):S.insertBefore(E,S.childNodes[T])}function ue(E,S){var T=E.parentNode,z=o.getNodeIndex(E);u(S,function(P){F(P,T,z)}),o.removeNode(E)}function ce(E,S,T,z,P){for(var q,Y=[];q=E.firstChild;)Z(q,S,T++,P),Y.push(q);return ue(E,P),Y}function w(E,S){return ce(E,E.parentNode,o.getNodeIndex(E),!0,S)}function M(E,S){var T=E.cloneRange();T.selectNodeContents(S);var z=T.intersection(E),P=z?z.toString():"";return P!=""}function L(E){for(var S=E.getNodes([3]),T=0,z;(z=S[T])&&!M(E,z);)++T;for(var P=S.length-1;(z=S[P])&&!M(E,z);)--P;return S.slice(T,P+1)}function V(E,S){if(E.attributes.length!=S.attributes.length)return!1;for(var T=0,z=E.attributes.length,P,q,Y;T<z;++T)if(P=E.attributes[T],Y=P.name,Y!="class"&&(q=S.attributes.getNamedItem(Y),P===null!=(q===null)||P.specified!=q.specified||P.specified&&P.nodeValue!==q.nodeValue))return!1;return!0}function pe(E,S){for(var T=0,z=E.attributes.length,P;T<z;++T)if(P=E.attributes[T].name,!(S&&s(S,P))&&E.attributes[T].specified&&P!="class")return!0;return!1}var Ee=o.getComputedStyleProperty,Je=function(){var E=document.createElement("div");return typeof E.isContentEditable=="boolean"?function(S){return S&&S.nodeType==1&&S.isContentEditable}:function(S){return!S||S.nodeType!=1||S.contentEditable=="false"?!1:S.contentEditable=="true"||Je(S.parentNode)}}();function nt(E){var S;return E&&E.nodeType==1&&((S=E.parentNode)&&S.nodeType==9&&S.designMode=="on"||Je(E)&&!Je(E.parentNode))}function ge(E){return(Je(E)||E.nodeType!=1&&Je(E.parentNode))&&!nt(E)}var Le=/^inline(-block|-table)?$/i;function $e(E){return E&&E.nodeType==1&&!Le.test(Ee(E,"display"))}var Te=/[^\r\n\t\f \u200B]/;function Be(E){if(E.data.length==0)return!0;if(Te.test(E.data))return!1;var S=Ee(E.parentNode,"whiteSpace");switch(S){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(E.data))return!1}return $e(E.previousSibling)||$e(E.nextSibling)}function N(E){var S=[],T,z;for(T=0;z=E[T++];)S.push(new a(z.startContainer,z.startOffset),new a(z.endContainer,z.endOffset));return S}function X(E,S){for(var T=0,z,P,q,Y=E.length;T<Y;++T)z=E[T],P=S[T*2],q=S[T*2+1],z.setStartAndEnd(P.node,P.offset,q.node,q.offset)}function U(E,S){return o.isCharacterDataNode(E)?S==0?!!E.previousSibling:S==E.length?!!E.nextSibling:!0:S>0&&S<E.childNodes.length}function ee(E,S,T,z){var P,q,Y=T==0;if(o.isAncestorOf(S,E))return E;if(o.isCharacterDataNode(S)){var J=o.getNodeIndex(S);if(T==0)T=J;else if(T==S.length)T=J+1;else throw i.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+T+" in "+S.data);S=S.parentNode}if(U(S,T)){P=S.cloneNode(!1),q=S.parentNode,P.id&&P.removeAttribute("id");for(var Ce,ve=0;Ce=S.childNodes[T];)Z(Ce,P,ve++,z);return Z(P,q,o.getNodeIndex(S)+1,z),S==E?P:ee(E,q,o.getNodeIndex(P),z)}else if(E!=S){P=S.parentNode;var ie=o.getNodeIndex(S);return Y||ie++,ee(E,P,ie,z)}return E}function re(E,S){return E.namespaceURI==S.namespaceURI&&E.tagName.toLowerCase()==S.tagName.toLowerCase()&&B(E,S)&&V(E,S)&&Ee(E,"display")=="inline"&&Ee(S,"display")=="inline"}function Me(E){var S=E?"nextSibling":"previousSibling";return function(T,z){var P=T.parentNode,q=T[S];if(q){if(q&&q.nodeType==3)return q}else if(z&&(q=P[S],q&&q.nodeType==1&&re(P,q))){var Y=q[E?"firstChild":"lastChild"];if(Y&&Y.nodeType==3)return Y}return null}}var Ae=Me(!1),yt=Me(!0);function xt(E){this.isElementMerge=E.nodeType==1,this.textNodes=[];var S=this.isElementMerge?E.lastChild:E;S&&(this.textNodes[0]=S)}xt.prototype={doMerge:function(E){var S=this.textNodes,T=S[0];if(S.length>1){var z=o.getNodeIndex(T),P=[],q=0,Y;u(S,function(J,Ce){Y=J.parentNode,Ce>0&&(Y.removeChild(J),Y.hasChildNodes()||o.removeNode(Y),E&&u(E,function(ve){ve.node==J&&(ve.node=T,ve.offset+=q),ve.node==Y&&ve.offset>z&&(--ve.offset,ve.offset==z+1&&Ce<S.length-1&&(ve.node=T,ve.offset=q))})),P[Ce]=J.data,q+=J.data.length}),T.data=P.join("")}return T.data},getLength:function(){for(var E=this.textNodes.length,S=0;E--;)S+=this.textNodes[E].length;return S},toString:function(){var E=[];return u(this.textNodes,function(S,T){E[T]="'"+S.data+"'"}),"[Merge("+E.join(",")+")]"}};var Ct=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],rt={};function Pt(E,S,T){var z,P,q,Y,J=this;J.cssClass=J.className=E;var Ce=null,ve={};if(typeof S=="object"&&S!==null){for(typeof S.elementTagName!="undefined"&&(S.elementTagName=S.elementTagName.toLowerCase()),T=S.tagNames,Ce=S.elementProperties,ve=S.elementAttributes,P=0;Y=Ct[P++];)S.hasOwnProperty(Y)&&(J[Y]=S[Y]);z=S.normalize}else z=S;J.normalize=typeof z=="undefined"?!0:z,J.attrExceptions=[];var ie=document.createElement(J.elementTagName);J.elementProperties=J.copyPropertiesToElement(Ce,ie,!0),d(ve,function(Xe,Ge){J.attrExceptions.push(Xe),ve[Xe]=""+Ge}),J.elementAttributes=ve,J.elementSortedClassName=J.elementProperties.hasOwnProperty("className")?C(J.elementProperties.className+" "+E):E,J.applyToAnyTagName=!1;var Ke=typeof T;if(Ke=="string")T=="*"?J.applyToAnyTagName=!0:J.tagNames=h(T.toLowerCase()).split(/\s*,\s*/);else if(Ke=="object"&&typeof T.length=="number")for(J.tagNames=[],P=0,q=T.length;P<q;++P)T[P]=="*"?J.applyToAnyTagName=!0:J.tagNames.push(T[P].toLowerCase());else J.tagNames=[J.elementTagName]}Pt.prototype={elementTagName:c,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(E,S,T){var z,P,q={},Y,J,Ce,ve;for(var ie in E)if(E.hasOwnProperty(ie))if(J=E[ie],Ce=S[ie],ie=="className")g(S,J),g(S,this.className),S[ie]=C(S[ie]),T&&(q[ie]=J);else if(ie=="style"){P=Ce,T&&(q[ie]=Y={});for(z in E[ie])E[ie].hasOwnProperty(z)&&(P[z]=J[z],T&&(Y[z]=P[z]));this.attrExceptions.push(ie)}else S[ie]=J,T&&(q[ie]=S[ie],ve=rt.hasOwnProperty(ie)?rt[ie]:ie,this.attrExceptions.push(ve));return T?q:""},copyAttributesToElement:function(E,S){for(var T in E)E.hasOwnProperty(T)&&!/^class(?:Name)?$/i.test(T)&&S.setAttribute(T,E[T])},appliesToElement:function(E){return s(this.tagNames,E.tagName.toLowerCase())},getEmptyElements:function(E){var S=this;return E.getNodes([1],function(T){return S.appliesToElement(T)&&!T.hasChildNodes()})},hasClass:function(E){return E.nodeType==1&&(this.applyToAnyTagName||this.appliesToElement(E))&&p(E,this.className)},getSelfOrAncestorWithClass:function(E){for(;E;){if(this.hasClass(E))return E;E=E.parentNode}return null},isModifiable:function(E){return!this.applyToEditableOnly||ge(E)},isIgnorableWhiteSpaceNode:function(E){return this.ignoreWhiteSpace&&E&&E.nodeType==3&&Be(E)},postApply:function(E,S,T,z){var P=E[0],q=E[E.length-1],Y=[],J,Ce=P,ve=q,ie=0,Ke=q.length,Xe;u(E,function(ye){Xe=Ae(ye,!z),Xe?(J||(J=new xt(Xe),Y.push(J)),J.textNodes.push(ye),ye===P&&(Ce=J.textNodes[0],ie=Ce.length),ye===q&&(ve=J.textNodes[0],Ke=J.getLength())):J=null});var Ge=yt(q,!z);if(Ge&&(J||(J=new xt(q),Y.push(J)),J.textNodes.push(Ge)),Y.length){for(var Lt=0,oe=Y.length;Lt<oe;++Lt)Y[Lt].doMerge(T);S.setStartAndEnd(Ce,ie,ve,Ke)}},createContainer:function(E){var S=o.getDocument(E),T=f&&!o.isHtmlNamespace(E)&&E.namespaceURI?S.createElementNS(E.namespaceURI,this.elementTagName):S.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,T,!1),this.copyAttributesToElement(this.elementAttributes,T),g(T,this.className),this.onElementCreate&&this.onElementCreate(T,this),T},elementHasProperties:function(E,S){var T=this;return d(S,function(z,P){if(z=="className")return R(E,P);if(typeof P=="object"){if(!T.elementHasProperties(E[z],P))return!1}else if(E[z]!==P)return!1})},elementHasAttributes:function(E,S){return d(S,function(T,z){if(E.getAttribute(T)!==z)return!1})},applyToTextNode:function(E,S){if(A(E)){var T=E.parentNode;if(T.childNodes.length==1&&this.useExistingElements&&this.appliesToElement(T)&&this.elementHasProperties(T,this.elementProperties)&&this.elementHasAttributes(T,this.elementAttributes))g(T,this.className);else{var z=E.parentNode,P=this.createContainer(z);z.insertBefore(P,E),P.appendChild(E)}}},isRemovable:function(E){return E.tagName.toLowerCase()==this.elementTagName&&D(E)==this.elementSortedClassName&&this.elementHasProperties(E,this.elementProperties)&&!pe(E,this.attrExceptions)&&this.elementHasAttributes(E,this.elementAttributes)&&this.isModifiable(E)},isEmptyContainer:function(E){var S=E.childNodes.length;return E.nodeType==1&&this.isRemovable(E)&&(S==0||S==1&&this.isEmptyContainer(E.firstChild))},removeEmptyContainers:function(E){var S=this,T=E.getNodes([1],function(q){return S.isEmptyContainer(q)}),z=[E],P=N(z);u(T,function(q){ue(q,P)}),X(z,P)},undoToTextNode:function(E,S,T,z){if(!S.containsNode(T)){var P=S.cloneRange();P.selectNode(T),P.isPointInRange(S.endContainer,S.endOffset)&&(ee(T,S.endContainer,S.endOffset,z),S.setEndAfter(T)),P.isPointInRange(S.startContainer,S.startOffset)&&(T=ee(T,S.startContainer,S.startOffset,z))}this.isRemovable(T)?w(T,z):y(T,this.className)},splitAncestorWithClass:function(E,S,T){var z=this.getSelfOrAncestorWithClass(E);z&&ee(z,E,S,T)},undoToAncestor:function(E,S){this.isRemovable(E)?w(E,S):y(E,this.className)},applyToRange:function(E,S){var T=this;S=S||[];var z=N(S||[]);E.splitBoundariesPreservingPositions(z),T.removeEmptyElements&&T.removeEmptyContainers(E);var P=L(E);if(P.length){u(P,function(J){!T.isIgnorableWhiteSpaceNode(J)&&!T.getSelfOrAncestorWithClass(J)&&T.isModifiable(J)&&T.applyToTextNode(J,z)});var q=P[P.length-1];E.setStartAndEnd(P[0],0,q,q.length),T.normalize&&T.postApply(P,E,z,!1),X(S,z)}var Y=T.getEmptyElements(E);u(Y,function(J){g(J,T.className)})},applyToRanges:function(E){for(var S=E.length;S--;)this.applyToRange(E[S],E);return E},applyToSelection:function(E){var S=r.getSelection(E);S.setRanges(this.applyToRanges(S.getAllRanges()))},undoToRange:function(E,S){var T=this;S=S||[];var z=N(S);E.splitBoundariesPreservingPositions(z),T.removeEmptyElements&&T.removeEmptyContainers(E,z);var P=L(E),q,Y,J=P[P.length-1];if(P.length){T.splitAncestorWithClass(E.endContainer,E.endOffset,z),T.splitAncestorWithClass(E.startContainer,E.startOffset,z);for(var Ce=0,ve=P.length;Ce<ve;++Ce)q=P[Ce],Y=T.getSelfOrAncestorWithClass(q),Y&&T.isModifiable(q)&&T.undoToAncestor(Y,z);E.setStartAndEnd(P[0],0,J,J.length),T.normalize&&T.postApply(P,E,z,!0),X(S,z)}var ie=T.getEmptyElements(E);u(ie,function(Ke){y(Ke,T.className)})},undoToRanges:function(E){for(var S=E.length;S--;)this.undoToRange(E[S],E);return E},undoToSelection:function(E){var S=r.getSelection(E),T=r.getSelection(E).getAllRanges();this.undoToRanges(T),S.setRanges(T)},isAppliedToRange:function(E){if(E.collapsed||E.toString()=="")return!!this.getSelfOrAncestorWithClass(E.commonAncestorContainer);var S=E.getNodes([3]);if(S.length){for(var T=0,z;z=S[T++];)if(!this.isIgnorableWhiteSpaceNode(z)&&M(E,z)&&this.isModifiable(z)&&!this.getSelfOrAncestorWithClass(z))return!1}return!0},isAppliedToRanges:function(E){var S=E.length;if(S==0)return!1;for(;S--;)if(!this.isAppliedToRange(E[S]))return!1;return!0},isAppliedToSelection:function(E){var S=r.getSelection(E);return this.isAppliedToRanges(S.getAllRanges())},toggleRange:function(E){this.isAppliedToRange(E)?this.undoToRange(E):this.applyToRange(E)},toggleSelection:function(E){this.isAppliedToSelection(E)?this.undoToSelection(E):this.applyToSelection(E)},getElementsWithClassIntersectingRange:function(E){var S=[],T=this;return E.getNodes([3],function(z){var P=T.getSelfOrAncestorWithClass(z);P&&!s(S,P)&&S.push(P)}),S},detach:function(){}};function Dt(E,S,T){return new Pt(E,S,T)}Pt.util={hasClass:p,addClass:g,removeClass:y,getClass:b,hasSameClasses:B,hasAllClasses:R,replaceWithOwnChildren:w,elementsHaveSameNonClassAttributes:V,elementHasNonClassAttributes:pe,splitNodeAt:ee,isEditableElement:Je,isEditingHost:nt,isEditable:ge},r.CssClassApplier=r.ClassApplier=Pt,r.createClassApplier=Dt,l.createAliasForDeprecatedMethod(r,"createCssClassApplier","createClassApplier",i)}),t})}(vu)),vu.exports}vD();var dp={toolbar:{allowMultiParagraphSelection:!0,buttons:["bold","colorpicker","italic","underline","strikethrough","quote","justifyLeft","justifyCenter","justifyRight","justifyFull","superscript","subscript","orderedlist","unorderedlist","pre","removeFormat","outdent","indent","h2","h3"],standardizeSelectionStart:!1,updateOnEmptySelection:!1},placeholder:{text:"请输入内容",hideOnClick:!0},disableEditing:!0},hp=qs.extensions.button.extend({name:"colorpicker",tagNames:["mark"],contentDefault:"<b>Color</b>",aria:"Color Picker",action:"colorPicker",init:function(){var n=this;cp.init(),qs.extensions.button.prototype.init.call(this),this.colorPicker=new Gy({parent:this.button,color:"#000",onDone:function(e){n.coloredText&&n.coloredText.isAppliedToSelection()&&n.coloredText.undoToSelection(),n.coloredText=cp.createClassApplier("colored",{elementTagName:"span",elementProperties:{style:{color:e.hex}},normalize:!0}),n.coloredText.toggleSelection(),n.base.checkContentChanged(),n.setInactive()}})},getButton:function(){return this.button},handleClick:function(){this.setActive(),this.colorPicker.show()},isAlreadyApplied:function(n){return n.nodeName.toLowerCase()==="mark"},isActive:function(){return this.button.classList.contains("medium-editor-button-active")},setInactive:function(){this.button.classList.remove("medium-editor-button-active")},setActive:function(){this.button.classList.add("medium-editor-button-active")}}),gD=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yD=function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(i<3?a(o):i>3?a(e,t,o):a(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},pp=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},vp=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))};(function(n){gD(e,n);function e(t){var r=n.call(this,t)||this;r.labelMap=new Map;var i=t.lf,o=t.graphModel;return r.lf=i,r.graphModel=o,r.state={tick:0},r}return e.prototype.componentDidMount=function(){var t=this,r=this.props.graphModel;this.editor=new qs(".lf-label-editor",Li(dp,{autoLink:!0,extensions:{colorPicker:new hp}})),r.eventCenter.on("text:update,node:mousemove,node:resize,node:rotate,node:drag,label:drop,node:drop",function(){}),r.eventCenter.on("node:properties-change,node:properties-delete",function(){t.setState({tick:t.state.tick+1})})},e.prototype.componentDidUpdate=function(){var t;this.editor&&this.editor.elements.length>0?this.editor.addElements(".lf-label-editor"):((t=this.editor)===null||t===void 0||t.destroy(),this.editor=new qs(".lf-label-editor",Li(dp,{autoLink:!0,extensions:{colorPicker:new hp}})))},e.prototype.componentWillUnmount=function(){var t;(t=this.editor)===null||t===void 0||t.destroy()},e.prototype.getLabels=function(){var t=this,r=this.props,i=r.lf.extension,o=r.graphModel,a=vp(vp([],pp(o.nodes),!1),pp(o.edges),!1),s=i.label;if(s){var l=[];return ot(a,function(u){var c,f,d=u.getData(),h=(f=(c=d.properties)===null||c===void 0?void 0:c._label)!==null&&f!==void 0?f:[];ot(h,function(v){var p=t.labelMap,g=new iD(v,u,o);p.set(g.id,g),l.push(j(nD,{label:g,element:u,graphModel:o},g.id))})}),l}return null},e.prototype.render=function(){return j("foreignObject",{id:"lf-label-overlay",class:"lf-label-overlay",children:this.getLabels()})},e.toolName="label-edit-tool",e=yD([Gt],e),e})(Ue);var Rl=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((r=r.apply(n,e||[])).next())})},Dl=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},mD=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},_D=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},xo={};function Vy(n){return n.startsWith("data:text/plain")}function Ky(n){return Rl(this,void 0,void 0,function(){return Dl(this,function(e){return xo[n]?[2,xo[n]]:[2,new Promise(function(t,r){try{fetch(n).then(function(i){return i.blob()}).then(function(i){var o=new FileReader;o.onloadend=function(){t(xo[n]=o.result)},o.onerror=r,o.readAsDataURL(i)}).catch(function(){t(xo[n]=n)})}catch(i){return xo[n]=n}})]})})}function gp(n,e){return Rl(this,void 0,void 0,function(){var t,r,i;return Dl(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=n.getAttribute(e)||"",t.startsWith("data:")?[2]:[4,Ky(t)];case 1:return r=o.sent(),Vy(r)?[2]:(n.setAttribute(e,r),[3,3]);case 2:return i=o.sent(),console.error(i),[3,3];case 3:return[2]}})})}function yp(n,e){return Rl(this,void 0,void 0,function(){var t,r;return Dl(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e.startsWith("data:")?[2]:[4,Ky(e)];case 1:return t=i.sent(),Vy(t)?[2]:(n.style.backgroundImage="url(".concat(t,")"),[3,3]);case 2:return r=i.sent(),console.error(r),[3,3];case 3:return[2]}})})}function gu(n){return Rl(this,void 0,void 0,function(){var e,t,r,i,o,a,s,u,l,u;return Dl(this,function(c){switch(c.label){case 0:for(e=[n],r=[];e.length;)t=e.shift(),t.children.length&&e.push.apply(e,_D([],mD(t.children),!1)),t instanceof HTMLElement&&(i=t.style,o=i.background,a=i.backgroundImage,s=o.match(/url\(["']?(.*?)["']?\)/),s&&s[1]&&(u=s[1],r.push(yp(t,u))),l=a.match(/url\(["']?(.*?)["']?\)/),l&&l[1]&&(u=l[1],r.push(yp(t,u)))),t instanceof HTMLImageElement?r.push(gp(t,"src")):t instanceof SVGImageElement&&r.push(gp(t,"href"));return[4,Promise.all(r)];case 1:return c.sent(),[2]}})})}function Eo(n,e,t){var r=document.createElement("canvas");r.width=e,r.height=t;var i=r.getContext("2d");return i&&i.drawImage(n,0,0,n.width,n.height,0,0,e,t),r}var ur=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((r=r.apply(n,e||[])).next())})},cr=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},bD=function(){function n(e){var t=e.lf,r=this;this.lf=t,this.customCssRules="",this.useGlobalRules=!0,t.getSnapshot=function(i,o){return ur(r,void 0,void 0,function(){return cr(this,function(a){switch(a.label){case 0:return[4,this.getSnapshot(i,o)];case 1:return[2,a.sent()]}})})},t.getSnapshotBlob=function(i,o){return ur(r,void 0,void 0,function(){return cr(this,function(a){switch(a.label){case 0:return[4,this.getSnapshotBlob(i,o)];case 1:return[2,a.sent()]}})})},t.getSnapshotBase64=function(i,o){return ur(r,void 0,void 0,function(){return cr(this,function(a){switch(a.label){case 0:return[4,this.getSnapshotBase64(i,o)];case 1:return[2,a.sent()]}})})}}return n.prototype.getSvgRootElement=function(e){var t=e.container.querySelector(".lf-canvas-overlay");return t},n.prototype.triggerDownload=function(e){var t=new MouseEvent("click",{view:document.defaultView,bubbles:!1,cancelable:!0}),r=document.createElement("a");r.setAttribute("download",this.fileName),r.setAttribute("href",e),r.setAttribute("target","_blank"),r.dispatchEvent(t)},n.prototype.removeAnchor=function(e){for(var t=e.childNodes,r=e.childNodes&&e.childNodes.length,i=0;i<r;i++){var o=t[i],a=o.classList&&Array.from(o.classList)||[];a.indexOf("lf-anchor")>-1&&(e.removeChild(e.childNodes[i]),r--,i--)}},n.prototype.removeRotateControl=function(e){for(var t=e.childNodes,r=e.childNodes&&e.childNodes.length,i=0;i<r;i++){var o=t[i],a=o.classList&&Array.from(o.classList)||[];a.indexOf("lf-rotate-control")>-1&&(e.removeChild(e.childNodes[i]),r--,i--)}},n.prototype.getSnapshot=function(e,t){return ur(this,void 0,void 0,function(){var r,i,o,a,s=this;return cr(this,function(l){switch(l.label){case 0:return r=this.lf.graphModel.getPartial(),i=(t!=null?t:{}).partial,o=i===void 0?r:i,a=this.lf.getEditConfig(),this.lf.updateEditConfig({isSilentMode:!0,stopScrollGraph:!0,stopMoveGraph:!0}),r===o?[3,1]:(this.lf.graphModel.setPartial(o),this.lf.graphModel.eventCenter.once("graph:updated",function(){return ur(s,void 0,void 0,function(){return cr(this,function(u){switch(u.label){case 0:return[4,this.snapshot(e,t)];case 1:return u.sent(),this.lf.graphModel.setPartial(r),[2]}})})}),[3,3]);case 1:return[4,this.snapshot(e,t)];case 2:l.sent(),l.label=3;case 3:return this.lf.updateEditConfig(a),[2]}})})},n.prototype.snapshot=function(e,t){return ur(this,void 0,void 0,function(){var r,i,o,a,s,l,u,c,f,d=this;return cr(this,function(h){switch(h.label){case 0:return r=t!=null?t:{},i=r.fileType,o=i===void 0?"png":i,a=r.quality,this.fileName="".concat(e!=null?e:"logic-flow.".concat(Date.now()),".").concat(o),s=this.getSvgRootElement(this.lf),[4,gu(s)];case 1:return h.sent(),o==="svg"?(l=this.cloneSvg(s),u=new XMLSerializer().serializeToString(l),c=new Blob([u],{type:"image/svg+xml;charset=utf-8"}),f=URL.createObjectURL(c),this.triggerDownload(f)):this.getCanvasData(s,t!=null?t:{}).then(function(v){var p=v.toDataURL("image/".concat(o),a).replace("image/".concat(o),"image/octet-stream");d.triggerDownload(p)}),[2]}})})},n.prototype.getSnapshotBase64=function(e,t){return ur(this,void 0,void 0,function(){var r,i=this;return cr(this,function(o){switch(o.label){case 0:return r=this.getSvgRootElement(this.lf),[4,gu(r)];case 1:return o.sent(),[2,new Promise(function(a){i.getCanvasData(r,{backgroundColor:e}).then(function(s){var l=s.toDataURL("image/".concat(t!=null?t:"png"));a({data:l,width:s.width,height:s.height})})})]}})})},n.prototype.getSnapshotBlob=function(e,t){return ur(this,void 0,void 0,function(){var r,i=this;return cr(this,function(o){switch(o.label){case 0:return r=this.getSvgRootElement(this.lf),[4,gu(r)];case 1:return o.sent(),[2,new Promise(function(a){i.getCanvasData(r,{backgroundColor:e}).then(function(s){s.toBlob(function(l){a({data:l,width:s.width,height:s.height})},"image/".concat(t!=null?t:"png"))})})]}})})},n.prototype.getClassRules=function(){var e="";if(this.useGlobalRules)for(var t=document.styleSheets,r=0;r<t.length;r++){var i=t[r];try{for(var o=0;o<i.cssRules.length;o++)e+=i.cssRules[o].cssText}catch(a){console.log("CSS scripts from different sources have been filtered out")}}return this.customCssRules&&(e+=this.customCssRules),e},n.prototype.getCanvasData=function(e,t){return ur(this,void 0,void 0,function(){var r,i,o,a,s,l,u,c,f,d,h,v,p,g,y,b,C,D,B,R,A,O,F,Z,ue,ce;return cr(this,function(w){return r=t.width,i=t.height,o=t.backgroundColor,a=t.padding,s=a===void 0?40:a,l=this.cloneSvg(e,!1),u=window.devicePixelRatio||1,u<1&&(u=1),c=this.lf.graphModel.rootEl.querySelector(".lf-base"),f=c.getBoundingClientRect(),d=this.lf.container.querySelector(".lf-canvas-overlay"),h=d.getBoundingClientRect(),v=f.x-h.x,p=f.y-h.y,g=this.lf.graphModel,y=g.transformModel,b=y.SCALE_X,C=y.SCALE_Y,D=y.TRANSLATE_X,B=y.TRANSLATE_Y,l.lastChild.style.transform="matrix(1, 0, 0, 1, ".concat((-v+D)*(1/b),", ").concat((-p+B)*(1/C),")"),R=Math.ceil(f.width/b),A=Math.ceil(f.height/C),O=document.createElement("canvas"),O.style.width="".concat(R,"px"),O.style.height="".concat(A,"px"),O.width=R*u+s*2,O.height=A*u+s*2,F=O.getContext("2d"),F&&(F.clearRect(0,0,O.width,O.height),F.scale(u,u),o?(F.fillStyle=o,F.fillRect(0,0,O.width,O.height)):F.clearRect(0,0,O.width,O.height)),Z=new Image,ue=document.createElement("style"),ue.innerHTML=this.getClassRules(),ce=document.createElement("foreignObject"),ce.appendChild(ue),l.appendChild(ce),[2,new Promise(function(M){Z.onload=function(){var pe=navigator.userAgent.indexOf("Firefox")>-1;try{pe?createImageBitmap(Z,{resizeWidth:r&&i?Eo(O,r,i).width:O.width,resizeHeight:r&&i?Eo(O,r,i).height:O.height}).then(function(Ee){F==null||F.drawImage(Ee,s/u,s/u),M(r&&i?Eo(O,r,i):O)}):(F==null||F.drawImage(Z,s/u,s/u),M(r&&i?Eo(O,r,i):O))}catch(Ee){F==null||F.drawImage(Z,s/u,s/u),M(r&&i?Eo(O,r,i):O)}};var L="data:image/svg+xml;charset=utf-8,".concat(new XMLSerializer().serializeToString(l)),V=L.replace(/\n/g,"").replace(/\t/g,"").replace(/#/g,"%23");Z.src=V})]})})},n.prototype.cloneSvg=function(e,t){var r=this,i;t===void 0&&(t=!0);var o=e.cloneNode(!0),a=o.lastChild,s=(i=a==null?void 0:a.childNodes)===null||i===void 0?void 0:i.length;if(s)for(var l=0;l<s;l++){var u=a==null?void 0:a.childNodes[l],c=u.classList&&Array.from(u.classList);if(c&&c.indexOf("lf-base")<0)a==null||a.removeChild(a.childNodes[l]),s--,l--;else{var f=a==null?void 0:a.childNodes[l];f&&f.childNodes.forEach(function(v){var p=v;r.removeAnchor(p.firstChild),r.removeRotateControl(p.firstChild)})}}if(t){var d=document.createElement("style");d.innerHTML=this.getClassRules();var h=document.createElement("foreignObject");h.appendChild(d),o.appendChild(h)}return o},n.pluginName="snapshot",n}();var xD=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},ED=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},wD=function(){function n(e){var t=e.lf,r=this;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"缩小流程图",text:"缩小",onClick:function(){r.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"放大流程图",text:"放大",onClick:function(){r.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"恢复流程原有尺寸",text:"适应",onClick:function(){r.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"回到上一步",text:"上一步",onClick:function(){r.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"移到下一步",text:"下一步",onClick:function(){r.lf.redo()}}],this.lf=t}return n.prototype.render=function(e,t){this.destroy();var r=this.getControlTool();this.toolEl=r,t.appendChild(r),this.domContainer=t},n.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},n.prototype.addItem=function(e){this.controlItems.push(e)},n.prototype.removeItem=function(e){var t=this.controlItems.findIndex(function(r){return r.key===e});return t==-1?null:this.controlItems.splice(t,1)[0]},n.prototype.getControlTool=function(){var e=this,t="lf-control-item",r="lf-control-item disabled",i=document.createElement("div"),o=[];return i.className="lf-control",this.controlItems.forEach(function(a){var s=document.createElement("div"),l=document.createElement("i"),u=document.createElement("span");switch(s.className=r,a.onClick&&(s.onclick=a.onClick.bind(null,e.lf)),a.onMouseEnter&&(s.onmouseenter=a.onMouseEnter.bind(null,e.lf)),a.onMouseLeave&&(s.onmouseleave=a.onMouseLeave.bind(null,e.lf)),l.className=a.iconClass,u.className="lf-control-text",u.title=a.title,u.innerText=a.text,s.append(l,u),a.text){case"上一步":e.lf.on("history:change",function(c){var f=c.data.undoAble;s.className=f?t:r});break;case"下一步":e.lf.on("history:change",function(c){var f=c.data.redoAble;s.className=f?t:r});break;default:s.className=t;break}o.push(s)}),i.append.apply(i,ED([],xD(o),!1)),i},n.pluginName="control",n}(),AD=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},SD=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},wo="lf:defaultNodeMenu",Ao="lf:defaultEdgeMenu",So="lf:defaultGraphMenu",mp="lf:defaultSelectionMenu",CD=function(){function n(e){var t=e.lf,r=this;this.__currentData=null,this.lf=t;var i=t.options.isSilentMode;i||(this.__menuDOM=document.createElement("ul"),this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(o){r.setMenuConfig(o)},this.lf.addMenuConfig=function(o){r.addMenuConfig(o)},this.lf.setMenuByType=function(o){r.setMenuByType(o)})}return n.prototype.init=function(){var e=this,t,r,i,o,a=[{text:"删除",callback:function(u){e.lf.deleteNode(u.id)}},{text:"编辑文本",callback:function(u){e.lf.graphModel.editText(u.id)}},{text:"复制",callback:function(u){e.lf.cloneNode(u.id)}}];(t=this.menuTypeMap)===null||t===void 0||t.set(wo,a);var s=[{text:"删除",callback:function(u){e.lf.deleteEdge(u.id)}},{text:"编辑文本",callback:function(u){e.lf.graphModel.editText(u.id)}}];(r=this.menuTypeMap)===null||r===void 0||r.set(Ao,s),(i=this.menuTypeMap)===null||i===void 0||i.set(So,[]);var l=[{text:"删除",callback:function(u){e.lf.clearSelectElements(),u.edges.forEach(function(c){return e.lf.deleteEdge(c.id)}),u.nodes.forEach(function(c){return e.lf.deleteNode(c.id)})}}];(o=this.menuTypeMap)===null||o===void 0||o.set(mp,l)},n.prototype.render=function(e,t){var r=this;e.options.isSilentMode||(this.__container=t,this.__currentData=null,this.__menuDOM&&(this.__menuDOM.className="lf-menu",t.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(i){i.stopPropagation();for(var o=i.target;Array.from(o.classList).indexOf("lf-menu-item")===-1&&Array.from(o.classList).indexOf("lf-menu")===-1;)o=o==null?void 0:o.parentElement;Array.from(o.classList).indexOf("lf-menu-item")>-1?(o.onclickCallback(r.__currentData),r.__menuDOM&&(r.__menuDOM.style.display="none"),r.__currentData=null):console.warn("点击区域不在菜单项内，请检查代码！")},!0)),this.lf.on("node:contextmenu",function(i){var o,a,s=i.data,l=i.position,u=i.e,c=l.domOverlayPosition,f=c.x,d=c.y,h=s.id,v=r.lf.graphModel.getNodeModelById(h);if(v){var p=[],g=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(v.type);v&&v.menu&&Array.isArray(v.menu)?p=v.menu:g?p=g:p=(a=r.menuTypeMap)===null||a===void 0?void 0:a.get(wo),r.__currentData=s,r.showMenu(f,d,p,{width:v.width,height:v.height,clientX:u.clientX,clientY:u.clientY})}}),this.lf.on("edge:contextmenu",function(i){var o,a,s,l=i.data,u=i.position,c=i.e,f=u.domOverlayPosition,d=f.x,h=f.y,v=l.id,p=r.lf.graphModel.getEdgeModelById(v);if(p){var g=[],y=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(p.type);p&&p.menu&&Array.isArray(p.menu)?g=p.menu:y?g=y:g=(s=(a=r.menuTypeMap)===null||a===void 0?void 0:a.get(Ao))!==null&&s!==void 0?s:[],r.__currentData=l,r.showMenu(d,h,g,{width:p.width,height:p.height,clientX:c.clientX,clientY:c.clientY})}}),this.lf.on("blank:contextmenu",function(i){var o,a,s=i.position,l=(a=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(So))!==null&&a!==void 0?a:[],u=s.domOverlayPosition,c=u.x,f=u.y;r.showMenu(c,f,l)}),this.lf.on("selection:contextmenu",function(i){var o,a=i.data,s=i.position,l=(o=r.menuTypeMap)===null||o===void 0?void 0:o.get(mp),u=s.domOverlayPosition,c=u.x,f=u.y;r.__currentData=a,r.showMenu(c,f,l)}),this.lf.on("node:mousedown",function(){r.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){r.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){r.__menuDOM.style.display="none"}))},n.prototype.destroy=function(){var e;this.__menuDOM&&((e=this===null||this===void 0?void 0:this.__container)===null||e===void 0||e.removeChild(this.__menuDOM),this.__menuDOM=void 0)},n.prototype.showMenu=function(e,t,r,i){if(!(!r||!r.length)){var o=this.__menuDOM;if(o){if(o.innerHTML="",o.append.apply(o,SD([],AD(this.__getMenuDom(r)),!1)),!o.children.length)return;if(o.style.display="block",!i){o.style.top="".concat(t,"px"),o.style.left="".concat(e,"px");return}var a=i.width,s=i.height,l=i.clientX,u=i.clientY,c=this.lf.graphModel,f=o.offsetWidth,d=!0,h=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,v=h-l,p=c.rootEl.getBoundingClientRect(),g=p.left+p.width;g<h&&(v=g-l),v<f&&(d=!1),d?o.style.left="".concat(e,"px"):o.style.left="".concat(e-a,"px");var y=o.offsetHeight,b=!0,C=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,D=C-u,B=p.top+p.height;B<C&&(D=B-u),D<y&&(b=!1),b?o.style.top="".concat(t,"px"):o.style.top="".concat(t-s,"px")}}},n.prototype.setMenuByType=function(e){var t,r=e.type,i=e.menu;!r||!i||(t=this.menuTypeMap)===null||t===void 0||t.set(r,i)},n.prototype.__getMenuDom=function(e){var t=[];return e&&e.length>0&&e.forEach(function(r){var i=document.createElement("li");if(r.className?i.className="lf-menu-item ".concat(r.className):i.className="lf-menu-item",r.icon===!0){var o=document.createElement("span");o.className="lf-menu-item-icon",i.appendChild(o)}var a=document.createElement("span");a.className="lf-menu-item-text",r.text&&(a.innerText=r.text),i.appendChild(a),i.onclickCallback=r.callback,t.push(i)}),t},n.prototype.setMenuConfig=function(e){var t,r,i;e&&(e.nodeMenu!==void 0&&((t=this.menuTypeMap)===null||t===void 0||t.set(wo,e.nodeMenu?e.nodeMenu:[])),e.edgeMenu!==void 0&&((r=this.menuTypeMap)===null||r===void 0||r.set(Ao,e.edgeMenu?e.edgeMenu:[])),e.graphMenu!==void 0&&((i=this.menuTypeMap)===null||i===void 0||i.set(So,e.graphMenu?e.graphMenu:[])))},n.prototype.addMenuConfig=function(e){var t,r,i,o,a,s,l,u,c;if(e){if(Array.isArray(e.nodeMenu)){var f=(r=(t=this.menuTypeMap)===null||t===void 0?void 0:t.get(wo))!==null&&r!==void 0?r:[];(i=this.menuTypeMap)===null||i===void 0||i.set(wo,f.concat(e.nodeMenu))}if(Array.isArray(e.edgeMenu)){var f=(a=(o=this.menuTypeMap)===null||o===void 0?void 0:o.get(Ao))!==null&&a!==void 0?a:[];(s=this.menuTypeMap)===null||s===void 0||s.set(Ao,f.concat(e.edgeMenu))}if(Array.isArray(e.graphMenu)){var f=(u=(l=this.menuTypeMap)===null||l===void 0?void 0:l.get(So))!==null&&u!==void 0?u:[];(c=this.menuTypeMap)===null||c===void 0||c.set(So,f.concat(e.graphMenu))}}},n.prototype.changeMenuItem=function(e,t){if(e==="add")this.addMenuConfig(t);else if(e==="reset")this.setMenuConfig(t);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},n.pluginName="menu",n}(),OD=function(){function n(e){var t=e.lf,r=this;this.lf=t,this.lf.setPatternItems=function(i){r.setPatternItems(i)}}return n.prototype.render=function(e,t){var r=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=t;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(i){var o;(o=r.panelEl)===null||o===void 0||o.appendChild(r.createDndItem(i))}),t.appendChild(this.panelEl),this.domContainer=t},n.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},n.prototype.setPatternItems=function(e){this.shapeList=e,this.domContainer&&this.render(this.lf,this.domContainer)},n.prototype.createDndItem=function(e){var t=this,r=document.createElement("div");r.className=e.className?"lf-dnd-item ".concat(e.className):"lf-dnd-item";var i=document.createElement("div");if(i.className="lf-dnd-shape",e.icon&&(i.style.backgroundImage="url(".concat(e.icon,")")),r.appendChild(i),e.label){var o=document.createElement("div");o.innerText=e.label,o.className="lf-dnd-text",r.appendChild(o)}return e.disabled?(r.classList.add("disabled"),r.onmousedown=function(){e.callback&&e.callback(t.lf,t.domContainer)},r):(r.onmousedown=function(){e.type&&t.lf.dnd.startDrag({type:e.type,properties:e.properties,text:e.text}),e.callback&&e.callback(t.lf,t.domContainer)},r.ondblclick=function(a){t.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:a,data:e})},r.onclick=function(a){t.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:a,data:e})},r.oncontextmenu=function(a){t.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:a,data:e})},r)},n.pluginName="dndPanel",n}(),TD=function(){function n(e){var t=e.lf,r=this;this.disabled=!0,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.draw=function(o){var a=r.lf.getPointByClient(o.clientX,o.clientY).domOverlayPosition,s=a.x,l=a.y;if(r.endPoint={x:s,y:l},r.startPoint){var u=r.startPoint,c=u.x,f=u.y,d=c,h=f,v=s-c,p=l-f;s<c&&(d=s,v=c-s),l<f&&(h=l,p=f-l),r.wrapper&&(r.wrapper.style.left="".concat(d,"px"),r.wrapper.style.top="".concat(h,"px"),r.wrapper.style.width="".concat(v,"px"),r.wrapper.style.height="".concat(p,"px"))}},this.drawOff=function(){var o;if(document.removeEventListener("mousemove",r.draw),document.removeEventListener("mouseup",r.drawOff),r.wrapper&&(r.wrapper.oncontextmenu=null,(o=r.container)===null||o===void 0||o.removeChild(r.wrapper)),r.startPoint&&r.endPoint){var a=r.startPoint,s=a.x,l=a.y,u=r.endPoint,c=u.x,f=u.y,d=[Math.min(s,c),Math.min(l,f)],h=[Math.max(s,c),Math.max(l,f)];if(r.lf.emit("selection:selected-area",{topLeft:d,bottomRight:h}),Math.abs(c-s)<10&&Math.abs(f-l)<10)return;var v=r.lf.graphModel.getAreaElement(d,h,r.isWholeEdge,r.isWholeNode,!0),p=r.lf.graphModel,g=p.dynamicGroup,y=p.group;v.forEach(function(b){(!y||!y.getNodeGroup(b.id))&&r.lf.selectElementById(b.id,!0),(!g||!g.getGroupByNodeId(b.id))&&r.lf.selectElementById(b.id,!0)}),r.lf.emit("selection:selected",{elements:v,leftTopPoint:d,rightBottomPoint:h})}},this.lf=t;var i=t.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=i,t.openSelectionSelect=function(){r.openSelectionSelect()},t.closeSelectionSelect=function(){r.closeSelectionSelect()}}return n.prototype.render=function(e,t){var r=this;this.container=t,e.on("blank:mousedown",function(i){var o=i.e,a=e.getEditConfig();if(!(!a.stopMoveGraph||r.disabled)){var s=o.button===2;if(!s){var l=e.getPointByClient(o.clientX,o.clientY).domOverlayPosition,u=l.x,c=l.y;r.startPoint={x:u,y:c},r.endPoint={x:u,y:c};var f=document.createElement("div");f.className="lf-selection-select",f.oncontextmenu=function(h){h.preventDefault()},f.style.top="".concat(r.startPoint.y,"px"),f.style.left="".concat(r.startPoint.x,"px"),t.appendChild(f),r.wrapper=f,document.addEventListener("mousemove",r.draw),document.addEventListener("mouseup",r.drawOff)}}})},n.prototype.setSelectionSense=function(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0),this.isWholeEdge=e,this.isWholeNode=t},n.prototype.openSelectionSelect=function(){var e=this.lf.getEditConfig().stopMoveGraph;e||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},n.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},n.prototype.open=function(){this.disabled=!1},n.prototype.close=function(){this.disabled=!0},n.pluginName="selectionSelect",n}();var qy=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ni=function(){return Ni=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ni.apply(this,arguments)},Uo=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},MD={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function ND(n){for(var e=n,t=1;t<e.length-1;){var r=Uo(e[t-1],2),i=r[0],o=r[1],a=Uo(e[t],2),s=a[0],l=a[1],u=Uo(e[t+1],2),c=u[0],f=u[1];i===s&&s===c||o===l&&l===f?e.splice(t,1):t++}return e}function PD(n,e,t,r){var i=[n[0],n[1]],o=[n[0],n[1]];switch(t){case"tl":return e==="tr"?(i[1]+=r,o[0]+=r):e==="lb"&&(i[0]+=r,o[1]+=r),[i,o];case"tr":return e==="tl"?(i[1]+=r,o[0]-=r):e==="rb"&&(i[0]-=r,o[1]+=r),[i,o];case"bl":return e==="br"?(i[1]-=r,o[0]+=r):e==="lt"&&(i[0]+=r,o[1]-=r),[i,o];case"br":return e==="bl"?(i[1]-=r,o[0]-=r):e==="rt"&&(i[0]-=r,o[1]-=r),[i,o];default:return[]}}function RD(n,e,t,r){var i,o="",a="";n[0]===e[0]?o=n[1]>e[1]?"t":"b":n[1]===e[1]&&(o=n[0]>e[0]?"l":"r"),e[0]===t[0]?a=e[1]>t[1]?"t":"b":e[1]===t[1]&&(a=e[0]>t[0]?"l":"r");var s=Math.min(Math.hypot(e[0]-n[0],e[1]-n[1])/2,Math.hypot(t[0]-e[0],t[1]-e[1])/2,r)||1/5*r,l="".concat(o).concat(a),u=MD[l]||"-",c="L ".concat(n[0]," ").concat(n[1]);if(u==="-")c+="L ".concat(e[0]," ").concat(e[1]," L ").concat(t[0]," ").concat(t[1]);else{var f=Uo(PD(e,l,u,s),2),d=f[0],h=f[1];d&&h&&(c+="L ".concat(d[0]," ").concat(d[1]," Q ").concat(e[0]," ").concat(e[1]," ").concat(h[0]," ").concat(h[1]),i=Uo(h,2),e[0]=i[0],e[1]=i[1])}return c}function DD(n,e){var t=0,r="";if(n.length===2)r+="M".concat(n[t][0]," ").concat(n[t++][1]," L ").concat(n[t][0]," ").concat(n[t][1]);else{for(r+="M".concat(n[t][0]," ").concat(n[t++][1]);t+1<n.length;){var i=n[t-1],o=n[t],a=n[t+++1];r+=RD(i,o,a,e)}r+="L ".concat(n[t][0]," ").concat(n[t][1])}return r}(function(n){qy(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEdge=function(){var t=this.props.model,r=t.points,i=t.isAnimation,o=t.arrowConfig,a=t.radius,s=a===void 0?5:a,l=t.getEdgeStyle(),u=t.getEdgeAnimationStyle(),c=ND(r.split(" ").map(function(h){return h.split(",").map(function(v){return+v})})),f=DD(c,s),d=Ni(Ni(Ni({style:i?u:{}},l),o),{fill:"none"});return be("path",Ni({d:f},d))},e})(ia);(function(n){qy(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(na);var Zy=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zs=function(){return Zs=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Zs.apply(this,arguments)},_p=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return o},bp=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},LD=function(n){Zy(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var t=this.props.model,r=t.id,i=t.x,o=t.y,a=t.width,s=t.height,l=t.properties,u=this.props.model.getNodeStyle();return be("svg",{x:i-a/2,y:o-s/2,width:50,height:24,style:"z-index: 0; background: none; overflow: auto;"},[l.labelText?be("text",{x:0,y:-5,fontSize:"16px",fill:u.stroke},l.labelText):"",l.disabledDelete?"":be("text",{x:l.labelText?50:0,y:-5,fontSize:"24px",cursor:"pointer",fill:u.stroke,onclick:this.handleCustomDeleteIconClick.bind(this,r)},"x")])},e.prototype.getShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.id,l=this.props.model.getNodeStyle();return be("g",{},[be("rect",Zs(Zs({},l),{x:r-o/2,y:i-a/2,width:o,height:a,id:s})),this.getLabelShape()])},e.prototype.toFront=function(){},e.prototype.handleCustomDeleteIconClick=function(t){var r=this.props.graphModel;r.deleteNode(t)},e}(Ls),kD=function(n){Zy(e,n);function e(){var t=n.apply(this,bp([],_p(arguments),!1))||this;return t.d=10,t.isResize=!1,t}return e.prototype.initNodeData=function(t){t.text={value:"",x:t.x,y:t.y,draggable:!1,editable:!1},n.prototype.initNodeData.call(this,t),this.zIndex=0,this.draggable=!0},e.prototype.setAttributes=function(){var t=this,r;this.points=[],((r=this.properties)===null||r===void 0?void 0:r.node_selection_ids).length>1&&setTimeout(function(){var i;t.updatePointsByNodes(((i=t.properties)===null||i===void 0?void 0:i.node_selection_ids)||[])})},e.prototype.getNodeStyle=function(){var t=n.prototype.getNodeStyle.call(this);return t.stroke=this.properties.strokeColor||"#008000",t.strokeDasharray="10 5",t},e.prototype.getDefaultAnchor=function(){return[]},e.prototype.updatePoints=function(t){this.points=t},e.prototype.updateCoordinate=function(t){var r=t.x,i=t.y;this.x=r,this.y=i},e.prototype.updatePointsByNodes=function(t){var r=this,i=[],o=1/0,a=1/0,s=-1/0,l=-1/0;t.forEach(function(u){var c=r.graphModel.getNodeModelById(u);if(c){var f=c.width,d=c.height,h=c.x,v=c.y;o=Math.min(o,h-f/2-r.d),a=Math.min(a,v-d/2-r.d),s=Math.max(s,h+f/2+r.d),l=Math.max(l,v+d/2+r.d)}}),i.push([o,a],[s,a],[s,l],[o,l]),![o,a,s,l].some(function(u){return Math.abs(u)===1/0})&&(this.updatePoints(i),this.updateCoordinate({x:(s+o)/2,y:(l+a)/2}))},e.prototype.resize=function(t){var r;this.isResize=!0;for(var i=t.width,o=t.height,a={x:i/this.width,y:o/this.height},s=(this.properties.node_selection_ids||[]).slice(),l=[],u=new Set;s.length;){var c=s.shift(),f=(r=this.graphModel.nodesMap[c])===null||r===void 0?void 0:r.model;if(f){if(!ts(f)){l.push(f);continue}u.has(f.id)||(u.add(f.id),s.push.apply(s,bp([],_p(f.properties.node_selection_ids||[]),!1)))}}var d={x:this.x-this.width/2,y:this.y-this.height/2},h=n.prototype.resize.call(this,t),v={x:this.x-this.width/2,y:this.y-this.height/2};return l.forEach(function(p){p.width=p.width*a.x,p.height=p.height*a.y;var g=(p.x-d.x)*a.x+v.x-p.x,y=(p.y-d.y)*a.y+v.y-p.y;p.move(g,y,!0)}),this.isResize=!1,h},e}(Ms),mc="node-selection";(function(){function n(e){var t=e.lf;this.selectNodes=[],this.d=10,this.lf=t,t.register({type:mc,view:LD,model:kD})}return Object.defineProperty(n.prototype,"selectNodesIds",{get:function(){return this.selectNodes.map(function(e){return e.id})},enumerable:!1,configurable:!0}),n.prototype.addNodeSelection=function(){var e=this.lf.addNode({type:"node-selection",text:"",properties:{node_selection_ids:this.selectNodesIds},x:0,y:0});e.updatePointsByNodes(this.selectNodesIds)},n.prototype.updateNodeSelection=function(){var e,t=this.getNodeSelection();t&&(this.lf.setProperties(t.id,{node_selection_ids:this.selectNodesIds}),(e=this.lf.getNodeModelById(t.id))===null||e===void 0||e.updatePointsByNodes(this.selectNodesIds))},n.prototype.getNodeSelection=function(){var e=this,t=this.selectNodesIds,r=this.lf.getGraphRawData(),i=t.filter(function(o){return o!==e.currentClickNode.id});return r.nodes.find(function(o){if(o.type==="node-selection"){var a=ua(o,"properties.node_selection_ids",[]);return i.every(function(s){return a.includes(s)})}return!1})},n.prototype.onNodeChange=function(e,t){var r=e.graphModel.nodes.filter(function(i){if(!ts(i))return!1;var o=i.properties.node_selection_ids||[];return o.includes(t.id)});Promise.resolve().then(function(){r.forEach(function(i){i.updatePointsByNodes(i.properties.node_selection_ids||[])})})},n.prototype.render=function(e){var t=this;this.lf=e,e.on("node:click",function(r){var i;if(!(!r.e.shiftKey||r.data.type===mc)){t.currentClickNode=r.data;var o=!1;t.selectNodesIds.includes(r.data.id)&&((i=t.lf.getNodeModelById(r.data.id))===null||i===void 0||i.setSelected(!1),o=!0);var a=e.getSelectElements(!0).nodes;t.selectNodes=a,t.selectNodes.length===1?o?t.updateNodeSelection():t.addNodeSelection():t.selectNodes.length>1&&t.updateNodeSelection()}}),e.graphModel.addNodeMoveRules(function(r,i,o){if(t.onNodeChange(e,r),ts(r)&&!r.isResize){var a=r.properties.node_selection_ids||[];return e.graphModel.moveNodes(a,i,o,!0),!0}return!0}),e.graphModel.addNodeResizeRules(function(r){return ts(r)||t.onNodeChange(e,r),!0})},n.pluginName="node-selection",n})();var ts=function(n){return!!(n&&n.type===mc)},ID=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Js=function(){return Js=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Js.apply(this,arguments)};(function(n){ID(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getLabelShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=t.properties;return be("text",{x:r-o/2+5,y:i-a/2+16,fontSize:12,fill:"blue"},s.moreText)},e.prototype.getShape=function(){var t=this.props.model,r=t.x,i=t.y,o=t.width,a=t.height,s=this.props.model.getNodeStyle();return be("g",{},[be("rect",Js(Js({},s),{fill:"#FFFFFF",x:r-o/2,y:i-a/2})),this.getLabelShape()])},e})(li);const BD={SEQUENCE_FLOW:1,START_EVENT:2,END_EVENT:3,USER_TASK:4,SERVICE_TASK:5,EXCLUSIVE_GATEWAY:6};function jD(n){const{incoming:e,outgoing:t,properties:r,key:i}=n,{text:o,startPoint:a,endPoint:s,pointsList:l,logicFlowType:u}=r,c={id:i,type:u,sourceNodeId:e[0],targetNodeId:t[0],text:o,startPoint:a,endPoint:s,pointsList:l,properties:{}},f=["startPoint","endPoint","pointsList","text","logicFlowType"];return Object.keys(n.properties).forEach(d=>{f.indexOf(d)===-1&&(c.properties[d]=n.properties[d])}),c}function FD(n){const{properties:e,key:t}=n,{x:r,y:i,text:o,logicFlowType:a}=e,s={id:t,type:a,x:r,y:i,text:o,properties:{}},l=["x","y","text","logicFlowType"];return Object.keys(n.properties).forEach(u=>{l.indexOf(u)===-1&&(s.properties[u]=n.properties[u])}),s}function HD(n){const e={nodes:[],edges:[]},t=n.flowElementList;return t&&t.length>0&&t.forEach(r=>{if(r.type===BD.SEQUENCE_FLOW){const i=jD(r);e.edges.push(i)}else{const i=FD(r);e.nodes.push(i)}}),e}function WD(n){return[{text:"选区",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAOVJREFUOBGtVMENwzAIjKP++2026ETdpv10iy7WFbqFyyW6GBywLCv5gI+Dw2Bluj1znuSjhb99Gkn6QILDY2imo60p8nsnc9bEo3+QJ+AKHfMdZHnl78wyTnyHZD53Zzx73MRSgYvnqgCUHj6gwdck7Zsp1VOrz0Uz8NbKunzAW+Gu4fYW28bUYutYlzSa7B84Fh7d1kjLwhcSdYAYrdkMQVpsBr5XgDGuXwQfQr0y9zwLda+DUYXLaGKdd2ZTtvbolaO87pdo24hP7ov16N0zArH1ur3iwJpXxm+v7oAJNR4JEP8DoAuSFEkYH7cAAAAASUVORK5CYII=",callback:()=>{n.updateEditConfig({stopMoveGraph:!0})}},{type:"circle",text:"开始",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="},{type:"rect",text:"用户任务",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAEFVwZaAAAABGdBTUEAALGPC/xhBQAAAqlJREFUOBF9VM9rE0EUfrMJNUKLihGbpLGtaCOIR8VjQMGDePCgCCIiCNqzCAp2MyYUCXhUtF5E0D+g1t48qAd7CCLqQUQKEWkStcEfVGlLdp/fm3aW2QQdyLzf33zz5m2IsAZ9XhDpyaaIZkTS4ASzK41TFao88GuJ3hsr2pAbipHxuSYyKRugagICGANkfFnNh3HeE2N0b3nN2cgnpcictw5veJIzxmDamSlxxQZicq/mflxhbaH8BLRbuRwNtZp0JAhoplVRUdzmCe/vO27wFuuA3S5qXruGdboy5/PRGFsbFGKo/haRtQHIrM83bVeTrOgNhZReWaYGnE4aUQgTJNvijJFF4jQ8BxJE5xfKatZWmZcTQ+BVgh7s8SgPlCkcec4mGTmieTP4xd7PcpIEg1TX6gdeLW8rTVMVLVvb7ctXoH0Cydl2QOPJBG21STE5OsnbweVYzAnD3A7PVILuY0yiiyDwSm2g441r6rMSgp6iK42yqroI2QoXeJVeA+YeZSa47gZdXaZWQKTrG93rukk/l2Al6Kzh5AZEl7dDQy+JjgFahQjRopSxPbrbvK7GRe9ePWBo1wcU7sYrFZtavXALwGw/7Dnc50urrHJuTPSoO2IMV3gUQGNg87IbSOIY9BpiT9HV7FCZ94nPXb3MSnwHn/FFFE1vG6DTby+r31KAkUktB3Qf6ikUPWxW1BkXSPQeMHHiW0+HAd2GelJsZz1OJegCxqzl+CLVHa/IibuHeJ1HAKzhuDR+ymNaRFM+4jU6UWKXorRmbyqkq/D76FffevwdCp+jN3UAN/C9JRVTDuOxC/oh+EdMnqIOrlYteKSfadVRGLJFJPSB/ti/6K8f0CNymg/iH2gO/f0DwE0yjAFO6l8JaR5j0VPwPwfaYHqOqrCI319WzwhwzNW/aQAAAABJRU5ErkJggg==",cls:"important-node"},{type:"rect",text:"系统任务",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAEFVwZaAAAABGdBTUEAALGPC/xhBQAAAqlJREFUOBF9VM9rE0EUfrMJNUKLihGbpLGtaCOIR8VjQMGDePCgCCIiCNqzCAp2MyYUCXhUtF5E0D+g1t48qAd7CCLqQUQKEWkStcEfVGlLdp/fm3aW2QQdyLzf33zz5m2IsAZ9XhDpyaaIZkTS4ASzK41TFao88GuJ3hsr2pAbipHxuSYyKRugagICGANkfFnNh3HeE2N0b3nN2cgnpcictw5veJIzxmDamSlxxQZicq/mflxhbaH8BLRbuRwNtZp0JAhoplVRUdzmCe/vO27wFuuA3S5qXruGdboy5/PRGFsbFGKo/haRtQHIrM83bVeTrOgNhZReWaYGnE4aUQgTJNvijJFF4jQ8BxJE5xfKatZWmZcTQ+BVgh7s8SgPlCkcec4mGTmieTP4xd7PcpIEg1TX6gdeLW8rTVMVLVvb7ctXoH0Cydl2QOPJBG21STE5OsnbweVYzAnD3A7PVILuY0yiiyDwSm2g441r6rMSgp6iK42yqroI2QoXeJVeA+YeZSa47gZdXaZWQKTrG93rukk/l2Al6Kzh5AZEl7dDQy+JjgFahQjRopSxPbrbvK7GRe9ePWBo1wcU7sYrFZtavXALwGw/7Dnc50urrHJuTPSoO2IMV3gUQGNg87IbSOIY9BpiT9HV7FCZ94nPXb3MSnwHn/FFFE1vG6DTby+r31KAkUktB3Qf6ikUPWxW1BkXSPQeMHHiW0+HAd2GelJsZz1OJegCxqzl+CLVHa/IibuHeJ1HAKzhuDR+ymNaRFM+4jU6UWKXorRmbyqkq/D76FffevwdCp+jN3UAN/C9JRVTDuOxC/oh+EdMnqIOrlYteKSfadVRGLJFJPSB/ti/6K8f0CNymg/iH2gO/f0DwE0yjAFO6l8JaR5j0VPwPwfaYHqOqrCI319WzwhwzNW/aQAAAABJRU5ErkJggg==",cls:"import_icon"},{type:"diamond",text:"条件判断",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAAHeEJUAAAAABGdBTUEAALGPC/xhBQAAAvVJREFUOBGNVEFrE0EU/mY3bQoiFlOkaUJrQUQoWMGePLX24EH0IIoHKQiCV0G8iE1covgLiqA/QTzVm1JPogc9tIJYFaQtlhQxqYjSpunu+L7JvmUTU3AgmTfvffPNN++9WSA1DO182f6xwILzD5btfAoQmwL5KJEwiQyVbSVZ0IgRyV6PTpIJ81E5ZvqfHQR0HUOBHW4L5Et2kQ6Zf7iAOhTFAA8s0pEP7AXO1uAA52SbqGk6h/6J45LaLhO64ByfcUzM39V7ZiAdS2yCePPEIQYvTUHqM/n7dgQNfBKWPjpF4ISk8q3J4nB11qw6X8l+FsF3EhlkEMfrjIer3wJTLwS2aCNcj4DbGxXTw00JmAuO+Ni6bBxVUCvS5d9aa04+so4pHW5jLTywuXAL7jJ+D06sl82Sgl2JuVBQn498zkc2bGKxULHjCnSMadBKYDYYHAtsby1EQ5lNGrQd4Y3v4Zo0XdGEmDno46yCM9Tk+RiJmUYHS/aXHPNTcjxcbTFna000PFJHIVZ5lFRqRpJWk9/+QtlOUYJj9HG5pVFEU7zqIYDVsw2s+AJaD8wTd2umgSCCyUxgGsS1Y6TBwXQQTFuZaHcd8gAGioE90hlsY+wMcs30RduYtxanjMGal8H5dMW67dmT1JFtYUEe8LiQLRsPZ6IIc7A4J5tqco3T0pnv/4u0kyzrYUq7gASuEyI8VXKvB9Odytv6jS/PNaZBln0nioJG/AVQRZvApOdhjj3Jt8QC8Im09SafwdBdvIpztpxWxpeKCC+EsFdS8DCyuCn2munFpL7ctHKp+Xc5cMybeIyMAN33SPL3ZR9QV1XVwLyzHm6Iv0/yeUuUb7PPlZC4D4HZkeu6dpF4v9j9MreGtMbxMMRLIcjJic9yHi7WQ3yVKzZVWUr5UrViJvn1FfUlwe/KYVfYyWRLSGNu16hR01U9IacajXPei0wx/5BqgInvJN+MMNtNme7ReU9SBbgntovn0kKHpFg7UogZvaZiOue/q1SBo9ktHzQAAAAASUVORK5CYII="},{type:"circle",text:"结束",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAA1BJREFUOBFtVE1IVUEYPXOf+tq40Y3vPcmFIdSjIorWoRG0ERWUgnb5FwVhYQSl72oUoZAboxKNFtWiwKRN0M+jpfSzqJAQclHo001tKkjl3emc8V69igP3znzfnO/M9zcDcKT67azmjYWTwl9Vn7Vumeqzj1DVb6cleQY4oAVnIOPb+mKAGxQmKI5CWNJ2aLPatxWa3aB9K7/fB+/Z0jUF6TmMlFLQqrkECWQzOZxYGjTlOl8eeKaIY5yHnFn486xBustDjWT6dG7pmjHOJd+33t0iitTPkK6tEvjxq4h2MozQ6WFSX/LkDUGfFwfhEZj1Auz/U4pyAi5Sznd7uKzznXeVHlI/Aywmk6j7fsUsEuCGADrWARXXwjxWQsUbIupDHJI7kF5dRktg0eN81IbiZXiTESic50iwS+t1oJgL83jAiBupLDCQqwziaWSoAFSeIR3P5Xv5az00wyIn35QRYTwdSYbz8pH8fxUUAtxnFvYmEmgI0wYXUXcCCSpeEVpXlsRhBnCEATxWylL9+EKCAYhe1NGstUa6356kS9NVvt3DU2fd+Wtbm/+lSbylJqsqkSm9CRhvoJVlvKPvF1RKY/FcPn5j4UfIMLn8D4UYb54BNsilTDXKnF4CfTobA0FpoW/LSp306wkXM+XaOJhZaFkcNM82ASNAWMrhrUbRfmyeI1FvRBTpN06WKxa9BK0o2E4Pd3zfBBEwPsv9sQBnmLVbLEIZ/Xe9LYwJu/Er17W6HYVBc7vmuk0xUQ+pqxdom5Fnp55SiytXLPYoMXNM4u4SNSCFWnrVIzKG3EGyMXo6n/BQOe+bX3FClY4PwydVhthOZ9NnS+ntiLh0fxtlUJHAuGaFoVmttpVMeum0p3WEXbcll94l1wM/gZ0Ccczop77VvN2I7TlsZCsuXf1WHvWEhjO8DPtyOVg2/mvK9QqboEth+7pD6NUQC1HN/TwvydGBARi9MZSzLE4b8Ru3XhX2PBxf8E1er2A6516o0w4sIA+lwURhAON82Kwe2iDAC1Watq4XHaGQ7skLcFOtI5lDxuM2gZe6WFIotPAhbaeYlU4to5cuarF1QrcZ/lwrLaCJl66JBocYZnrNlvm2+MBCTmUymPrYZVbjdlr/BxlMjmNmNI3SAAAAAElFTkSuQmCC"}]}function $D(n){console.log(n.extension),n.extension.control.addItem({key:"download",iconClass:"lf-control-redo",title:"下载",text:"下载",onClick:(e,t)=>{e.getSnapshot()}})}const XD=[{incoming:[],outgoing:["Flow_33inf2k"],dockers:[],type:2,properties:{a:"efrwe",b:"wewe",name:"开始",x:280,y:200,text:{x:280,y:200,value:"开始"},logicFlowType:"bpmn:startEvent"},key:"Event_1d42u4p"},{incoming:["Flow_379e0o9"],outgoing:[],dockers:[],type:3,properties:{a:"efrwe",b:"wewe",name:"结束",x:920,y:200,text:{x:920,y:200,value:"结束"},logicFlowType:"bpmn:endEvent"},key:"Event_08p8i6q"},{incoming:["Flow_0pfouf0"],outgoing:["Flow_3918lhh"],dockers:[],type:6,properties:{a:"efrwe",b:"wewe",name:"网关",x:580,y:200,text:{x:580,y:200,value:"网关"},logicFlowType:"bpmn:exclusiveGateway"},key:"Gateway_1fngqgj"},{incoming:["Flow_33inf2k"],outgoing:["Flow_0pfouf0"],dockers:[],type:4,properties:{a:"efrwe",b:"wewe",name:"用户",x:420,y:200,text:{x:420,y:200,value:"用户"},logicFlowType:"bpmn:userTask"},key:"Activity_2mgtaia"},{incoming:["Flow_3918lhh"],outgoing:["Flow_379e0o9"],dockers:[],type:5,properties:{a:"efrwe",b:"wewe",name:"服务",x:760,y:200,text:{x:760,y:200,value:"服务"},logicFlowType:"bpmn:serviceTask"},key:"Activity_1sp8qc8"},{incoming:["Event_1d42u4p"],outgoing:["Activity_2mgtaia"],type:1,dockers:[],properties:{name:"边",text:{x:331,y:200,value:"边"},startPoint:{x:298,y:200},endPoint:{x:370,y:200},pointsList:[{x:298,y:200},{x:370,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_33inf2k"},{incoming:["Activity_2mgtaia"],outgoing:["Gateway_1fngqgj"],type:1,dockers:[],properties:{name:"边2",text:{x:507,y:200,value:"边2"},startPoint:{x:470,y:200},endPoint:{x:555,y:200},pointsList:[{x:470,y:200},{x:555,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_0pfouf0"},{incoming:["Gateway_1fngqgj"],outgoing:["Activity_1sp8qc8"],type:1,dockers:[],properties:{name:"边3",text:{x:664,y:200,value:"边3"},startPoint:{x:605,y:200},endPoint:{x:710,y:200},pointsList:[{x:605,y:200},{x:710,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_3918lhh"},{incoming:["Activity_1sp8qc8"],outgoing:["Event_08p8i6q"],type:1,dockers:[],properties:{name:"边4",text:{x:871,y:200,value:"边4"},startPoint:{x:810,y:200},endPoint:{x:902,y:200},pointsList:[{x:810,y:200},{x:902,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_379e0o9"}],zD={flowElementList:XD},UD={ref:"logic-flow-ref",class:"page-container"},GD=Bm({__name:"index",setup(n){const e=Lf({}),t=jm("logic-flow-ref"),r=Lf({grid:!0,background:{color:"#f7f9ff"},keyboard:{enabled:!0}});function i(){return Rf(this,null,function*(){var s;yield $m(),Ur.use(bD),Ur.use(aR),Ur.use(CD),Ur.use(OD),Ur.use(TD),Ur.use(wD);const a=new Ur(Pf(Nf({},po(r)),{container:po(t)}));e.value=a,po(e).setDefaultEdgeType("bpmn:sequenceFlow"),(s=e.value)==null||s.setPatternItems(WD(po(e))),$D(po(e)),o()})}function o(){const a=HD(zD);e.value.render(a)}return Fm(()=>{i()}),(a,s)=>(Hm(),Wm("div",UD,null,512))}}),qD=Xm(GD,[["__scopeId","data-v-187f83e3"]]);export{qD as default};
