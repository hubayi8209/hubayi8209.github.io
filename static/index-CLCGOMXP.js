import{d as ce,j as w,x as D,i as a,N as $e,O as Fe,o as F,c as j,P as S,Q as le,z as U,n as ae,g as v,u as e,R as Oe,S as He,r as je,a as re,e as De,w as A,f as H,F as Pe,b as Ee,t as We}from"./index-CLoal8Ki.js";import{_ as qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const p=window,ze=()=>{p.cancelAnimationFrame=p.cancelAnimationFrame||p.webkitCancelAnimationFrame||p.mozCancelAnimationFrame||p.oCancelAnimationFrame||p.msCancelAnimationFrame||function(c){return p.clearTimeout(c)},p.requestAnimationFrame=function(){return p.requestAnimationFrame||p.webkitRequestAnimationFrame||p.mozRequestAnimationFrame||p.oRequestAnimationFrame||p.msRequestAnimationFrame||function(c){return p.setTimeout(c,1e3/60)}}()},Be=(c,h)=>{if(c===h)return!0;if(c.length!==h.length)return!1;for(let u=0;u<c.length;++u)if(c[u]!==h[u])return!1;return!0};function ue(){Array.isArray||(Array.isArray=function(k){return Object.prototype.toString.call(k)==="[object Array]"});let c,h,u,f,d,b,l=1,t=arguments[0]||{},i=!1;const m=arguments.length;if(typeof t=="boolean"&&(i=t,t=arguments[1]||{},l++),typeof t!="object"&&typeof t!="function"&&(t={}),l===m)return t;for(;l<m;l++)if(h=arguments[l],h!=null)for(c in h)u=t[c],f=h[c],d=Array.isArray(f),i&&f&&(typeof f=="object"||d)?(d?(d=!1,b=u&&Array.isArray(u)?u:[]):b=u&&typeof u=="object"?u:{},t[c]=ue(i,b,f)):f!==void 0&&(t[c]=f);return t}const Le=Object.freeze(Object.defineProperty({__proto__:null,animationFrame:ze,arrayEqual:Be,copyObj:ue},Symbol.toStringTag,{value:"Module"})),Re=["innerHTML"],Ne=ce({name:"SeamlessScroll",__name:"index",props:{data:{type:Array,default:()=>[]},classOption:{type:Object,default:()=>{}}},emits:["scrollEnd"],setup(c,{expose:h,emit:u}){const f=c,d=u,{animationFrame:b,copyObj:l}=Le;b();const t=w(0),i=w(0),m=w(0),k=w(0),O=w(0),C=w(0),P=w(0),E=w("");let T,V=0,W,X=0,Q=0,q=!1,z="ease-in";const{classOption:g}=f;g.key===void 0&&(g.key=0);const G=D(`wrap${g.key}`),J=D(`slotList${g.key}`),K=D(`realBox${g.key}`),Z=a(()=>e(t)<0),ee=a(()=>Math.abs(e(t))<e(C)-e(O)),fe=a(()=>({step:1,limitMoveNum:5,hoverStop:!0,direction:"top",openTouch:!0,singleHeight:0,singleWidth:0,waitTime:1e3,switchOffset:30,autoPlay:!0,navigation:!1,switchSingleStep:134,switchDelay:400,switchDisabledClass:"disabled",isSingleRemUnit:!1})),o=a(()=>l({},e(fe),g)),me=a(()=>e(Z)?"":e(o).switchDisabledClass),de=a(()=>e(ee)?"":e(o).switchDisabledClass),pe=a(()=>({position:"absolute",margin:`${e(k)/2}px 0 0 -${e(o).switchOffset}px`,transform:"translate(-100%,-50%)"})),he=a(()=>({position:"absolute",margin:`${e(k)/2}px 0 0 ${e(O)+e(o).switchOffset}px`,transform:"translateY(-50%)"})),B=a(()=>e(o).direction!=="bottom"&&e(o).direction!=="top"),te=a(()=>e(B)?{float:"left",overflow:"hidden"}:{overflow:"hidden"}),ve=a(()=>({transform:`translate(${e(t)}px,${e(i)}px)`,transition:`all ${z} ${e(m)}ms`,overflow:"hidden"})),L=a(()=>e(o).navigation),R=a(()=>e(L)?!1:e(o).autoPlay),ne=a(()=>f.data.length>=e(o).limitMoveNum),oe=a(()=>e(o).hoverStop&&e(R)&&e(ne)),N=a(()=>e(o).openTouch),ie=a(()=>e(o).isSingleRemUnit?parseInt(window.getComputedStyle(document.documentElement,null).fontSize):1),Y=a(()=>e(o).singleWidth*e(ie)),I=a(()=>e(o).singleHeight*e(ie)),_=a(()=>{let n;const s=e(o).step;if(e(B)?n=e(Y):n=e(I),n>0&&n%s>0)throw new Error("如果设置了单步滚动，step需是单步大小的约数，否则无法保证单步滚动结束的位置是否准确");return s});function ge(){t.value=0,i.value=0,M(),se()}function ye(){if(e(Z)){if(Math.abs(e(t))<e(o).switchSingleStep){t.value=0;return}t.value+=e(o).switchSingleStep}}function we(){if(e(ee)){if(e(C)-e(O)+e(t)<e(o).switchSingleStep){t.value=e(O)-e(C);return}t.value-=e(o).switchSingleStep}}function M(){cancelAnimationFrame(V)}function Se(n){if(!e(N))return;let s;const r=n.targetTouches[0],{waitTime:y,singleHeight:$,singleWidth:Me}=e(o);W={x:r.pageX,y:r.pageY},X=e(i),Q=e(t),$&&Me?(s&&clearTimeout(s),s=setTimeout(()=>{M()},y+20)):M()}function be(n){if(!e(N)||n.targetTouches.length>1||n.scale&&n.scale!==1)return;const s=n.targetTouches[0],{direction:r}=e(o),y={x:s.pageX-W.x,y:s.pageY-W.y};n.preventDefault();const $=Math.abs(y.x)<Math.abs(y.y)?1:0;$===1&&r==="bottom"||$===1&&r==="top"?i.value=X+y.y:($===0&&r==="left"||$===0&&r==="right")&&(t.value=Q+y.x)}function Te(){if(!e(N))return;let n;const s=e(o).direction;if(m.value=50,s==="top")e(i)>0&&(i.value=0);else if(s==="bottom"){const r=e(P)/2*-1;e(i)<r&&(i.value=r)}else if(s==="left")e(t)>0&&(t.value=0);else if(s==="right"){const r=e(C)*-1;e(t)<r&&(t.value=r)}n&&clearTimeout(n),n=setTimeout(()=>{m.value=0,x()},e(m))}function _e(){e(oe)&&Ae()}function xe(){e(oe)&&ke()}function x(){q||(V=requestAnimationFrame(()=>{const n=e(P)/2,s=e(C)/2,{direction:r,waitTime:y}=e(o);r==="top"?(Math.abs(e(i))>=n&&(d("scrollEnd"),i.value=0),i.value-=_.value):r==="bottom"?(e(i)>=0&&(d("scrollEnd"),i.value=n*-1),i.value+=_.value):r==="left"?(Math.abs(e(t))>=s&&(d("scrollEnd"),t.value=0),t.value-=_.value):r==="right"&&(e(t)>=0&&(d("scrollEnd"),t.value=s*-1),t.value+=_.value),T&&clearTimeout(T),e(I)?Math.abs(e(i))%e(I)<e(_)?T=setTimeout(()=>{x()},y):x():e(Y)&&Math.abs(e(t))%e(Y)<e(_)?T=setTimeout(()=>{x()},y):x()}))}function se(){Oe(()=>{const{switchDelay:n}=e(o);if(E.value="",e(B)){k.value=e(G).offsetHeight,O.value=e(G).offsetWidth;let s=e(J).offsetWidth;e(R)&&(s=s*2+1),e(K).style.width=`${s}px`,C.value=s}if(e(R))z="ease-in",m.value=0;else{z="linear",m.value=n;return}e(ne)?(E.value=e(J).innerHTML,setTimeout(()=>{P.value=e(K).offsetHeight,x()},0)):(M(),i.value=t.value=0)})}function ke(){q=!1,x()}function Ae(){q=!0,T&&clearTimeout(T),M()}function Ce(n){n.preventDefault(),!(e(o).direction==="left"||e(o).direction==="right")&&He(()=>{n.deltaY>0?i.value-=_.value:i.value+=_.value},50)()}return $e(()=>{se()}),Fe(()=>{M(),T&&clearTimeout(T)}),h({reset:ge}),(n,s)=>(F(),j("div",{ref:`wrap${e(g).key}`},[L.value?(F(),j("div",{key:0,style:S(pe.value),class:le(me.value),onClick:ye},[U(n.$slots,"left-switch")],6)):ae("",!0),L.value?(F(),j("div",{key:1,style:S(he.value),class:le(de.value),onClick:we},[U(n.$slots,"right-switch")],6)):ae("",!0),v("div",{ref:`realBox${e(g).key}`,style:S(ve.value),onMouseenter:_e,onMouseleave:xe,onTouchstart:Se,onTouchmove:be,onTouchend:Te,onMousewheel:Ce},[v("div",{ref:`slotList${e(g).key}`,style:S(te.value)},[U(n.$slots,"default")],4),v("div",{style:S(te.value),innerHTML:E.value},null,12,Re)],36)],512))}}),Ye={class:"card-header"},Ie={class:"item"},Ue=ce({__name:"index",setup(c){const h=D("scroll"),u=w([{title:"无缝滚动第一行无缝滚动第一行！！！！！！！！！！"},{title:"无缝滚动第二行无缝滚动第二行！！！！！！！！！！"},{title:"无缝滚动第三行无缝滚动第三行！！！！！！！！！！"},{title:"无缝滚动第四行无缝滚动第四行！！！！！！！！！！"},{title:"无缝滚动第五行无缝滚动第五行！！！！！！！！！！"},{title:"无缝滚动第六行无缝滚动第六行！！！！！！！！！！"},{title:"无缝滚动第七行无缝滚动第七行！！！！！！！！！！"},{title:"无缝滚动第八行无缝滚动第八行！！！！！！！！！！"},{title:"无缝滚动第九行无缝滚动第九行！！！！！！！！！！"}]),f=je({direction:"top"});function d(b){var l;(l=e(h))==null||l.reset(),e(f).direction=b}return(b,l)=>{const t=re("el-button"),i=re("el-card");return F(),De(i,{class:"box-card"},{header:A(()=>[v("div",Ye,[l[4]||(l[4]=v("span",null,"无缝滚动示例",-1)),H(t,{class:"button",onClick:l[0]||(l[0]=m=>d("top"))},{default:A(()=>[v("span",{style:S({color:f.direction==="top"?"red":""})},"向上滚动",4)]),_:1}),H(t,{class:"button",onClick:l[1]||(l[1]=m=>d("bottom"))},{default:A(()=>[v("span",{style:S({color:f.direction==="bottom"?"red":""})}," 向下滚动 ",4)]),_:1}),H(t,{class:"button",onClick:l[2]||(l[2]=m=>d("left"))},{default:A(()=>[v("span",{style:S({color:f.direction==="left"?"red":""})},"向左滚动",4)]),_:1}),H(t,{class:"button",onClick:l[3]||(l[3]=m=>d("right"))},{default:A(()=>[v("span",{style:S({color:f.direction==="right"?"red":""})},"向右滚动",4)]),_:1})])]),default:A(()=>[H(Ne,{ref_key:"scroll",ref:h,data:u.value,"class-option":f,class:"warp"},{default:A(()=>[v("ul",Ie,[(F(!0),j(Pe,null,Ee(u.value,(m,k)=>(F(),j("li",{key:k},We(m.title),1))),128))])]),_:1},8,["data","class-option"])]),_:1})}}}),Qe=qe(Ue,[["__scopeId","data-v-7a11ce58"]]);export{Qe as default};
